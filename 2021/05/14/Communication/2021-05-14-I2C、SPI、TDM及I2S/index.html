<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;islet.space&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Gemini&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;Searching...&quot;,&quot;empty&quot;:&quot;We didn&#39;t find any results for the search: ${query}&quot;,&quot;hits_time&quot;:&quot;${hits} results found in ${time} ms&quot;,&quot;hits&quot;:&quot;${hits} results found&quot;}}</script>
<meta name="description" content="I^2^C标准：《NXP_UM10204_I^2^C-bus specification and user manual》  I^2^C总线是一个事实上的世界标准，现在已经在50多家公司生产的1000多种不同的IC中实施。 此外，多功能的I^2^C总线被用于各种控制架构，如系统管理总线（SMBus）、电源管理总线（PMBus）、智能平台管理接口（IPMI）、显示数据通道（DDC）和高级电信计算架构">
<meta property="og:type" content="article">
<meta property="og:title" content="I^2^C、SPI、TDM及I2S">
<meta property="og:url" content="http://islet.space/2021/05/14/Communication/2021-05-14-I2C%E3%80%81SPI%E3%80%81TDM%E5%8F%8AI2S/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="I^2^C标准：《NXP_UM10204_I^2^C-bus specification and user manual》  I^2^C总线是一个事实上的世界标准，现在已经在50多家公司生产的1000多种不同的IC中实施。 此外，多功能的I^2^C总线被用于各种控制架构，如系统管理总线（SMBus）、电源管理总线（PMBus）、智能平台管理接口（IPMI）、显示数据通道（DDC）和高级电信计算架构">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210514111033910.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210514112114667.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210522182927364.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210514134830615.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210514141512136.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210514142116674.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210515150526897.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210514144620803.png">
<meta property="og:image" content="http://islet.space/home/kali/.config/Typora/typora-user-images/image-20210514154506246.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210514170202184.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210515142633906.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210515172907284.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210515172945861.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210515172958184.png">
<meta property="og:image" content="https://pic.islet.space/2021/05/image-20210515152141963.png">
<meta property="article:published_time" content="2021-05-14T02:55:00.000Z">
<meta property="article:modified_time" content="2021-05-22T10:29:45.261Z">
<meta property="article:author" content="Liewzheng">
<meta property="article:tag" content="I^2^C">
<meta property="article:tag" content="SPI">
<meta property="article:tag" content="TDM">
<meta property="article:tag" content="I2S">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.islet.space/2021/05/image-20210514111033910.png">


<link rel="canonical" href="http://islet.space/2021/05/14/Communication/2021-05-14-I2C%E3%80%81SPI%E3%80%81TDM%E5%8F%8AI2S/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;en&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;http:&#x2F;&#x2F;islet.space&#x2F;2021&#x2F;05&#x2F;14&#x2F;Communication&#x2F;2021-05-14-I2C%E3%80%81SPI%E3%80%81TDM%E5%8F%8AI2S&#x2F;&quot;,&quot;path&quot;:&quot;2021&#x2F;05&#x2F;14&#x2F;Communication&#x2F;2021-05-14-I2C、SPI、TDM及I2S&#x2F;&quot;,&quot;title&quot;:&quot;I^2^C、SPI、TDM及I2S&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>I^2^C、SPI、TDM及I2S | Coder的孤岛</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#I-2-C"><span class="nav-number">1.</span> <span class="nav-text">I^2^C</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AF%E8%AF%AD"><span class="nav-number">1.1.</span> <span class="nav-text">术语</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BA%BF%E7%89%B9%E5%BE%81"><span class="nav-number">1.2.</span> <span class="nav-text">总线特征</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BA%BF%E7%A1%AC%E4%BB%B6%E8%A6%81%E6%B1%82"><span class="nav-number">1.2.1.</span> <span class="nav-text">总线硬件要求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E4%BC%A0%E8%BE%93%E9%80%9F%E7%8E%87"><span class="nav-number">1.2.2.</span> <span class="nav-text">标准传输速率</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%8F%E8%AE%AE%E8%A6%81%E6%B1%82"><span class="nav-number">1.3.</span> <span class="nav-text">协议要求</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E7%94%B5%E5%B9%B3%E8%A7%84%E5%AE%9A"><span class="nav-number">1.3.1.</span> <span class="nav-text">逻辑电平规定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E5%BA%8F%E6%AD%A3%E7%A1%AE%E6%80%A7"><span class="nav-number">1.3.2.</span> <span class="nav-text">时序正确性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%A7%8B%E5%8F%8A%E7%BB%93%E6%9D%9F%E6%A0%87%E5%BF%97"><span class="nav-number">1.3.3.</span> <span class="nav-text">开始及结束标志</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%A7%8B%E5%AD%97%E8%8A%82"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">开始字节</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BA%BF%E7%8A%B6%E6%80%81"><span class="nav-number">1.3.4.</span> <span class="nav-text">总线状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E6%AF%94%E7%89%B9%E4%BD%8D"><span class="nav-number">1.3.5.</span> <span class="nav-text">传输比特位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A1%AE%E8%AE%A4%E6%A0%87%E5%BF%97"><span class="nav-number">1.3.6.</span> <span class="nav-text">确认标志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%92%9F%E5%90%8C%E6%AD%A5"><span class="nav-number">1.3.7.</span> <span class="nav-text">时钟同步</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%9E%E4%BA%89%E4%BB%B2%E8%A3%81"><span class="nav-number">1.3.8.</span> <span class="nav-text">竞争仲裁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E6%8B%89%E4%BC%B8"><span class="nav-number">1.3.9.</span> <span class="nav-text">时间拉伸</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8E%E6%9C%BA%E5%9C%B0%E5%9D%80%E5%92%8C%E8%AF%BB%E5%8F%96%E4%BD%8D"><span class="nav-number">1.3.10.</span> <span class="nav-text">从机地址和读取位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10%E4%BD%8D%E5%AF%BB%E5%9D%80"><span class="nav-number">1.3.11.</span> <span class="nav-text">10位寻址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8D%E8%BD%AC%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.12.</span> <span class="nav-text">反转地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E5%AF%BB%E5%9D%80"><span class="nav-number">1.3.13.</span> <span class="nav-text">通用寻址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AF%E5%A4%8D%E4%BD%8D"><span class="nav-number">1.3.14.</span> <span class="nav-text">软复位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BA%BF%E5%A4%8D%E4%BD%8D"><span class="nav-number">1.3.15.</span> <span class="nav-text">总线复位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87ID"><span class="nav-number">1.3.16.</span> <span class="nav-text">设备ID</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SPI"><span class="nav-number">2.</span> <span class="nav-text">SPI</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AF%E8%AF%AD-1"><span class="nav-number">2.1.</span> <span class="nav-text">术语</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SPI%E5%92%8CI-2-C%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-number">2.2.</span> <span class="nav-text">SPI和I^2^C的对比</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UART"><span class="nav-number">3.</span> <span class="nav-text">UART</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TDM"><span class="nav-number">4.</span> <span class="nav-text">TDM</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#I-2-S"><span class="nav-number">5.</span> <span class="nav-text">I^2^S</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">70</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">141</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@qq.com" title="E-Mail → mailto:liewzheng@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/05/14/Communication/2021-05-14-I2C%E3%80%81SPI%E3%80%81TDM%E5%8F%8AI2S/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          I^2^C、SPI、TDM及I2S
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-05-14 10:55:00" itemprop="dateCreated datePublished" datetime="2021-05-14T10:55:00+08:00">2021-05-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-05-22 18:29:45" itemprop="dateModified" datetime="2021-05-22T18:29:45+08:00">2021-05-22</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Signal/" itemprop="url" rel="index"><span itemprop="name">Signal</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="I-2-C"><a href="#I-2-C" class="headerlink" title="I^2^C"></a>I^2^C</h1><p><strong>标准</strong>：<a target="_blank" rel="noopener" href="https://www.nxp.com/docs/en/user-guide/UM10204.pdf">《NXP_UM10204_I^2^C-bus specification and user manual》</a></p>
<blockquote>
<p><em>I^2^C总线是一个事实上的世界标准，现在已经在50多家公司生产的1000多种不同的IC中实施。</em></p>
<p><em>此外，多功能的I^2^C总线被用于各种控制架构，如系统管理总线（SMBus）、电源管理总线（PMBus）、智能平台管理接口（IPMI）、显示数据通道（DDC）和高级电信计算架构（ATCA）。</em></p>
<p><em>本文件帮助设备和系统设计者了解I^2^C总线的工作原理并实现工作应用。描述了各种操作模式。它包含了对I^2^C<strong>总线数据传输</strong>、握手和总线仲裁方案的全面介绍。详细的章节涵盖了I^2^C总线在每种工作模式下的时序和电气规范。</em></p>
<p><em>I^2^C兼容芯片的设计者应将该文件作为参考，并确保新设备满足该文件中规定的所有限制。包含I^2^C器件的系统的设计者应审查本文件，并参考各个组件的数据表。</em></p>
<p>——翻译自标准文件</p>
</blockquote>
<p>I^2^C(Inter－Integrated Circuit)是一种通用的总线协议。它是由Philips(飞利浦)公司，现NXP(恩智浦)半导体开发的一种简单的双向两线制总线协议标准。</p>
<p>对于硬件设计人员来说，只需要2个管脚，极少的连接线和面积，就可以实现芯片间的通讯，对于软件开发者来说，可以使用同一个I^2^C驱动库，来实现实现不同器件的驱动，大大减少了软件的开发时间。极低的工作电流，降低了系统的功耗，完善的应答机制大大增强通讯的可靠性。</p>
<h2 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h2><img src="https://pic.islet.space/2021/05/image-20210514111033910.png" alt="image-20210514111033910" style="zoom: 67%;" />

<table>
<thead>
<tr>
<th>术语</th>
<th>释义</th>
</tr>
</thead>
<tbody><tr>
<td>总线</td>
<td>传输数据的通路</td>
</tr>
<tr>
<td>传送者</td>
<td>传输数据至总线的设备</td>
</tr>
<tr>
<td>接收者</td>
<td>从总线上接受数据的设备</td>
</tr>
<tr>
<td>主（机）</td>
<td>主动开启传输、生成时钟信号 并 主动结束传输的设备</td>
</tr>
<tr>
<td>从（机）</td>
<td>由主机寻址的设备</td>
</tr>
<tr>
<td>多主（机）</td>
<td>在不损坏数据传输的情况下允许多主机可以试图同时控制总线</td>
</tr>
<tr>
<td>仲裁</td>
<td>确保在有多个主机同时试图控制总线的情况下，只允许一个主机这样做，而且仲裁成功的信息不会被（其他设备）破坏的程序。</td>
</tr>
<tr>
<td>同步</td>
<td>确保两个及以上设备其时钟信号的同步</td>
</tr>
</tbody></table>
<p>以下这个图应该可以较好地解释“多主机”的概念，多个主机可以同时向外发出传输数据的申请，也可以主动结束其数据传输。虽然，I^2^C降低了总线复用的成本，但仍需要“仲裁”机制来解决多个主机之间的无序竞争状态。</p>
<img src="https://pic.islet.space/2021/05/image-20210514112114667.png" alt="image-20210514112114667" style="zoom:67%;" />

<h2 id="总线特征"><a href="#总线特征" class="headerlink" title="总线特征"></a>总线特征</h2><h3 id="总线硬件要求"><a href="#总线硬件要求" class="headerlink" title="总线硬件要求"></a>总线硬件要求</h3><p>通过 <strong>串行数据</strong>（SDA，Serial Data）和 <strong>串行时钟</strong>（SCL，Serial Clock）两条线路对设备进行连接。</p>
<p>每个设备都通过自身的通信设备地址进行互相辨别，且每个设备都可以当发送者或接收者，取决于设备自身的功能定义。</p>
<h3 id="标准传输速率"><a href="#标准传输速率" class="headerlink" title="标准传输速率"></a>标准传输速率</h3><p>各模式、速率及其传输方向见下方表格。</p>
<blockquote>
<p>Data on the I^2^C-bus can be transferred at rates of up to 100 kbit/s in the Standard-mode, up to 400 kbit/s in the Fast-mode, up to 1 Mbit/s in Fast-mode Plus, or up to 3.4 Mbit/s in the High-speed mode. </p>
</blockquote>
<table>
<thead>
<tr>
<th>MODE</th>
<th>RATE</th>
<th>TRANSFER DIRECTION</th>
<th>DOWNWARD COMPATIBLE WITH</th>
</tr>
</thead>
<tbody><tr>
<td>STANDARD</td>
<td>100 Kbit/s</td>
<td>bidirectional</td>
<td>/</td>
</tr>
<tr>
<td>FAST</td>
<td>400 Kbit/s</td>
<td>bidirectional</td>
<td>STANDARD</td>
</tr>
<tr>
<td>FAST-PLUS</td>
<td>1 Mbit/s</td>
<td>bidirectional</td>
<td>STANDARD / FAST</td>
</tr>
<tr>
<td>HIGH-SPEED</td>
<td>3.4 Mbit/s</td>
<td>bidirectional</td>
<td>STANDARD / FAST / FAST-PLUS</td>
</tr>
<tr>
<td>ULTRA-FAST</td>
<td>5 Mbit/s</td>
<td>unidirectional</td>
<td>/</td>
</tr>
</tbody></table>
<p><img src="https://pic.islet.space/2021/05/image-20210522182927364.png" alt="image-20210522182927364"></p>
<h2 id="协议要求"><a href="#协议要求" class="headerlink" title="协议要求"></a>协议要求</h2><p>以下协议要求适用于双向通信模式（不包括ULTRA-FAST模式下的单向通信）</p>
<h3 id="逻辑电平规定"><a href="#逻辑电平规定" class="headerlink" title="逻辑电平规定"></a>逻辑电平规定</h3><p>由于I^2^C的接入设备众多（如CMOS、NMOS、Bipolar等），因此逻辑电平0和逻辑电平1（的电压）并不是固定不变的，这取决于VDD的电平。</p>
<p>输入参考电平会被控制在VDD电平的30%<del>70%之间。 V</del>IL~ = 0.3 * V<del>DD</del>；V<del>IH</del> = 0.7 * V<del>DD</del> 。</p>
<p>某些传统设备的输入电平会被固定在1.5V（V<del>IL</del>）和3.0V（V<del>IH</del>），但新设备都要求是 30%V<del>DD</del> 及 70%V<del>DD</del> 。</p>
<p><strong>注意</strong>：V<del>IL</del>、V<del>IH</del>、V<del>OL</del>、V<del>OH</del>都是以参考电压作为基准的，即要达到某个电压的百分之多少时，才能够被认为是 <strong>逻辑电平0</strong> 或 <strong>逻辑电平1</strong> 。例如，可将V<del>IL</del> 视作当V<del>DD</del>下降到只有30%及以下时，为逻辑电平0，30%V<del>DD</del>是其逻辑电平的最高阈值；同理可得 V<del>IH</del> ；超过这个值而未到达70%的中间态则为不确定态。</p>
<blockquote>
<p>Due to the variety of different technology devices (CMOS, NMOS, bipolar) that can be connected to the I^2^C-bus, the levels of the logical ‘0’ (LOW) and ‘1’ (HIGH) are not fixed and depend on the associated level of VDD . Input reference levels are set as 30 % and 70 % of VDD ; VIL is 0.3VDD and VIH is 0.7V DD .</p>
<p>See Figure 38, timing diagram. Some legacy device input levels were fixed at V<del>IL</del> = 1.5 V and V<del>IH</del> = 3.0 V, but all new devices require this 30 %/70 % specification. </p>
</blockquote>
<img src="https://pic.islet.space/2021/05/image-20210514134830615.png" alt="image-20210514134830615" style="zoom: 67%;" />



<h3 id="时序正确性"><a href="#时序正确性" class="headerlink" title="时序正确性"></a>时序正确性</h3><ul>
<li>SDA上的数据必须在SCL高电平期间保持稳定，即不能在SCL高电平期间发生翻转（后见原因），只有在SCL低电平时可以翻转。</li>
<li>时钟脉冲信号生成要先于数据传送。</li>
</ul>
<blockquote>
<p>The data on the SDA line must be stable during the HIGH period of the clock. The HIGH or LOW state of the data line can only change when the clock signal on the SCL line is LOW (see Figure 4). One clock pulse is generated for each data bit transferred.</p>
</blockquote>
<img src="https://pic.islet.space/2021/05/image-20210514141512136.png" alt="image-20210514141512136" style="zoom: 80%;" />



<h3 id="开始及结束标志"><a href="#开始及结束标志" class="headerlink" title="开始及结束标志"></a>开始及结束标志</h3><ul>
<li><p>传输开始时必须以一个 <strong>开始</strong> 信号作为标志，结束时必须以一个 <strong>结束</strong> 信号作为标志。</p>
</li>
<li><p><strong>开始信号 <strong>是以SCL为高电平时的 <strong>SDA电平的由高转低</strong> 作为标志，</strong>结束信号</strong> 是以SCL高电平时的 <strong>SDA电平的由低转高</strong> 作为标志。</p>
</li>
<li><p>开始和结束标志必须由主设备控制。</p>
</li>
</ul>
<blockquote>
<p>All transactions begin with a START (S) and are terminated by a STOP (P) (see Figure 5). A HIGH to LOW transition on the SDA line while SCL is HIGH defines a START condition. A LOW to HIGH transition on the SDA line while SCL is HIGH defines a STOP condition.</p>
</blockquote>
<img src="https://pic.islet.space/2021/05/image-20210514142116674.png" alt="image-20210514142116674" style="zoom: 80%;" />



<h4 id="开始字节"><a href="#开始字节" class="headerlink" title="开始字节"></a>开始字节</h4><img src="https://pic.islet.space/2021/05/image-20210515150526897.png" alt="image-20210515150526897" style="zoom:67%;" />

<blockquote>
<p>dummy acknowledge (HIGH) : 无声确认？？？</p>
</blockquote>
<h3 id="总线状态"><a href="#总线状态" class="headerlink" title="总线状态"></a>总线状态</h3><p>总线具有两种状态，<strong>繁忙</strong>（Busy）和 <strong>空闲</strong>（Free），即 SDA电平 “开始” 后，总线进入繁忙状态， SDA电平 “结束” 后，总线进入空闲状态。</p>
<p><strong>注意</strong>：在总线繁忙期间，发生重复的“开始”状态（而不是“结束”状态），由于“重复开始”和 “开始” 功能相同，为了方便，统称为 “开始”，除非特殊说明为 “重复开始”。</p>
<blockquote>
<p>The bus stays busy if a repeated START (Sr) is generated instead of a STOP condition. In this respect, the START (S) and repeated START (Sr) conditions are functionally identical. For the remainder of this document, therefore, the S symbol is used as a generic term to represent both the START and repeated START conditions, unless Sr is particularly relevant.</p>
</blockquote>
<h3 id="传输比特位"><a href="#传输比特位" class="headerlink" title="传输比特位"></a>传输比特位</h3><ul>
<li>SDA线上的字节传输必须满足8位长度。</li>
<li>每次传输数据的字节数不受限制。</li>
<li>每个字节数后都需要跟一个<strong>确认位（Acknowledge bit）</strong>。</li>
<li>当从机无法完整接收或传输一个完整的数据字节时，例如正在产生内部中断等，除非其完成内部的某些功能，否则该从机将能够一直拉低SCL的电平，<strong>强制让主机一直处于等待状态</strong>。只有当从机准备好接收下一个完整的字节并释放SCL时，数据传输才会继续。</li>
</ul>
<blockquote>
<p>Every byte put on the SDA line must be eight bits long. The number of bytes that can be transmitted per transfer is unrestricted. Each byte must be followed by an Acknowledge bit.</p>
<p><strong>Data is transferred with the Most Significant Bit (MSB) first</strong> (see Figure 6). If a slave cannot receive or transmit another complete byte of data until it has performed some other function, for example servicing an internal interrupt, it can hold the clock line SCL LOW to force the master into a wait state. Data transfer then continues when the slave is ready for another byte of data and releases clock line SCL.</p>
</blockquote>
<img src="https://pic.islet.space/2021/05/image-20210514144620803.png" alt="image-20210514144620803" style="zoom:80%;" />



<h3 id="确认标志"><a href="#确认标志" class="headerlink" title="确认标志"></a>确认标志</h3><ul>
<li>每个字节（8比特）后都跟着一个确认位，即前8位数据，第9位确认。</li>
<li><strong>SCL上的时钟信号由主机产生，包括确认位的的第九个时钟脉冲</strong>。</li>
<li>SDA线并不是由主机一直占有的，每发送完一个完整字节后，主机都会释放SDA线，由从机进行数据确认。</li>
<li>发送者在确认时钟脉冲期间释放SDA线，以便接收者可以将SDA线拉低，并且在该时钟脉冲的高电平期间保持稳定的低电平（见图4）。</li>
<li>对于设置（set-up）和保持（Hold）的时间，都应该依照表10中只针对各种不同模式的要求进行设置。</li>
<li>如果SDA电平在第九个时钟脉冲时仍保持高电平，则被定义为 “未确认状态”。则此时主机可以发送一个“结束”标志来结束当前连接，或发送一个“开始”标志来开启一次新的传送。</li>
</ul>
<img src="/home/kali/.config/Typora/typora-user-images/image-20210514154506246.png" alt="image-20210514154506246" style="zoom: 80%;" />

<blockquote>
<p>The acknowledge takes place after every byte. The acknowledge bit allows the receiver to signal the transmitter that the byte was successfully received and another byte may be sent. The master generates all clock pulses, including the acknowledge ninth clock pulse.</p>
<p>The Acknowledge signal is defined as follows: the transmitter releases the SDA line during the acknowledge clock pulse so the <em><strong>receiver can pull the SDA line LOW</strong></em> and it remains stable LOW during the HIGH period of this clock pulse (see Figure 4). Set-up and hold times (specified in Section 6) must also be taken into account.</p>
<p>When SDA remains HIGH during this ninth clock pulse, this is defined as the Not Acknowledge signal. The master can then generate either a STOP condition to abort the transfer, or a repeated START condition to start a new transfer. </p>
</blockquote>
<p><strong>以下为五种“未确认/未应答”的可能情况</strong>：There are five conditions that lead to the generation of a NACK:</p>
<ol>
<li><strong>传输地址错误</strong>：No receiver is present on the bus with the transmitted address so there is no device to respond with an acknowledge.</li>
<li><strong>实时处理中</strong>：The receiver is unable to receive or transmit because it is performing some real-time function and is not ready to start communication with the master.</li>
<li><strong>数据/代码未定义</strong>：During the transfer, the receiver <strong>gets data or commands that it does not understand.</strong></li>
<li><strong>正在传输中</strong>：During the transfer, the receiver <strong>cannot receive any more data bytes</strong>.</li>
<li><strong>未收到结束信号（收发身份未转换）</strong>：A master-receiver must signal the end of the transfer to the slave transmitter.</li>
</ol>
<h3 id="时钟同步"><a href="#时钟同步" class="headerlink" title="时钟同步"></a>时钟同步</h3><p>任意几个主机都可能同时发起数据传输请求，此时只有一个主机和一个从机可以掌握总线进行通信，此时需要通过 <strong>时间同步</strong> 和 <strong>仲裁</strong> 完成对总线的调配。</p>
<p><strong>在单机系统（Single Master System）中，不需要时钟同步和仲裁。</strong></p>
<p>时钟同步是通过I^2^C接口与SCL线的有线-AND连接进行的。</p>
<p>这意味着SCL线上的高电平到低电平的转换会导致相关的主站开始对其低电平周期进行计数（如图7的CLK<del>2</del>），一旦一个主站时钟 CLK<del>1</del> 变为低电平，它就会将SCL线电平拉低，并保持在这个状态，直到另一个时钟 CLK<del>2</del> 达到高电平状态。</p>
<p>然而，如果时钟 CLK<del>2</del> 仍在其低电平周期内，CLK<del>1</del> 的低电平到高电平转换可能不会改变SCL线的状态。</p>
<p>因为SCL线被具有最长的低电平周期的主站 CLK<del>2</del> 保持为低电平，而在这段时间内，低电平周期较短的主站 CLK<del>1</del> 进入高电平等待状态。</p>
<blockquote>
<p>Clock synchronization is performed using the wired-AND connection of I^2^C interfaces to the SCL line. This means that a HIGH to LOW transition on the SCL line causes the masters concerned to start counting off their LOW period and, once a master clock has gone LOW, it holds the SCL line in that state until the clock HIGH state is reached (see Figure 7). However, if another clock is still within its LOW period, the LOW to HIGH transition of this clock may not change the state of the SCL line. The SCL line is therefore held LOW by the master with the longest LOW period. Masters with  shorter LOW periods enter a HIGH wait-state during this time.</p>
</blockquote>
<p>当所有相关的主控器都结束了他们的低电平周期，时钟线被释放并变成高电平。</p>
<p>然后，在主站时钟和SCL线的状态之间没有差异，所有的主站开始计算他们的高电平周期。</p>
<p><strong>第一个完成其高电平周期的主站再次将SCL线拉到低电平</strong>。这样，就产生了一个<strong>同步的SCL时钟</strong>，<strong>其低电平周期由具有最长时钟低电平周期的主站决定</strong>，<strong>其高电平周期由具有最短时钟高电平周期的主站决定</strong>。</p>
<img src="https://pic.islet.space/2021/05/image-20210514170202184.png" alt="image-20210514170202184" style="zoom: 67%;" />



<h3 id="竞争仲裁"><a href="#竞争仲裁" class="headerlink" title="竞争仲裁"></a>竞争仲裁</h3><p>仲裁和同步一样，是指只有在系统中使用一个以上的主站时才需要的协议的一个部分。注意，从机不参与仲裁程序。</p>
<p>一个主站只有在总线空闲时才可以开始传输。两个主站可以在START条件的最小保持时间（tHD;STA）内产生一个START条件，从而在总线上产生一个有效的START条件。然后需要进行仲裁，以确定哪个主站将完成其传输。</p>
<p>仲裁是逐位进行的。在每个比特期间，当SCL为高电平时，每个主站检查SDA电平是否与其所发送的内容相符，期间可能需要很多比特，只要传输的内容相同，两个主站实际上可以无误地完成整个信息传输过程。</p>
<p><mark>当一个主站第一次试图发送一个高电平，但检测到SDA电平为低电平时，主站知道它已经失去了仲裁，并关闭其SDA输出驱动器</mark>。在其他主站被仲裁过程中，正在传输其信息的主站将继续其传输，没有信息丢失。</p>
<p>失去仲裁的主站可以产生时钟脉冲，直到它失去仲裁的字节结束，并且必须在总线空闲时重新尝试传输。</p>
<p><mark>如果一个主站也包含了一个从站功能，并且它在寻址阶段失去了仲裁，有可能获胜的主站正试图对它进行寻址。因此，失败的主站必须立即切换到其从站模式。</mark></p>
<p>图8显示了两个主站的仲裁程序。可能涉及更多，这取决于有多少个主站连接到总线上。</p>
<p><mark>当产生DATA1的主站的内部数据电平与SDA线上的实际电平有差异时，DATA1的输出被关闭。这并不影响由获胜主站发起的数据传输。</mark></p>
<img src="https://pic.islet.space/2021/05/image-20210515142633906.png" alt="image-20210515142633906" style="zoom: 67%;" />



<h3 id="时间拉伸"><a href="#时间拉伸" class="headerlink" title="时间拉伸"></a>时间拉伸</h3><h3 id="从机地址和读取位"><a href="#从机地址和读取位" class="headerlink" title="从机地址和读取位"></a>从机地址和读取位</h3><h3 id="10位寻址"><a href="#10位寻址" class="headerlink" title="10位寻址"></a>10位寻址</h3><h3 id="反转地址"><a href="#反转地址" class="headerlink" title="反转地址"></a>反转地址</h3><h3 id="通用寻址"><a href="#通用寻址" class="headerlink" title="通用寻址"></a>通用寻址</h3><p><img src="https://pic.islet.space/2021/05/image-20210515172907284.png" alt="image-20210515172907284"></p>
<p><img src="https://pic.islet.space/2021/05/image-20210515172945861.png" alt="image-20210515172945861"></p>
<p><img src="https://pic.islet.space/2021/05/image-20210515172958184.png" alt="image-20210515172958184"></p>
<h3 id="软复位"><a href="#软复位" class="headerlink" title="软复位"></a>软复位</h3><p>在发送general call (0000 0000)后，再发送一个 0000 0110 (06h) ，这样两个具有先后顺序的字节来定义软复位。</p>
<p>首先，这种软复位是可选 ，并不是所有设备都会对软复位指令进行响应。</p>
<p>在收到这2个字节的序列时，所有被设计为响应一般调用地址的设备都会复位，并接收其地址的可编程部分。</p>
<blockquote>
<p>On receiving this 2-byte sequence, all devices designed to respond to the general call address reset and take in the programmable part of their address.</p>
</blockquote>
<p>必须采取预防措施，确保设备在施加电源电压后没有拉低SDA或SCL线，因为这些低电平会阻断总线。</p>
<h3 id="总线复位"><a href="#总线复位" class="headerlink" title="总线复位"></a>总线复位</h3><p>SCK信号一直卡在低电平的事件较少发生。</p>
<ul>
<li>如果I^2^C总线设备拥有硬件复位输入，则可以通过优先程序启用硬件中断复位来重置总线。</li>
<li>如果没有硬件复位输入，则通过给设备循环供电，激活强制性的内部开机复位（POR）电路。</li>
</ul>
<p>SDA信号如果一直卡在低电平。</p>
<ul>
<li><p>则主机应该发送九次SCL时钟脉冲，此时令SDA保持低电平的设备在收到九次脉冲后应主动释放总线。</p>
</li>
<li><p>如果九次脉冲没有用，则启用硬件中断复位或循环供电来清除总线。</p>
</li>
</ul>
<h3 id="设备ID"><a href="#设备ID" class="headerlink" title="设备ID"></a>设备ID</h3><p>可选的3字节只读设备ID编码（an optional 3-byte read-only ）：</p>
<ul>
<li>12位是设备制造商编号，具有独一无二性</li>
<li>9位零件ID，由设备制造商写入</li>
<li>3位模具/晶元版本，由设备制造商写入</li>
</ul>
<img src="https://pic.islet.space/2021/05/image-20210515152141963.png" alt="image-20210515152141963" style="zoom:67%;" />

<ol>
<li><p>启动条件</p>
</li>
<li><p> 主站发送保留设备ID的 I^2^C 总线地址，后面的R/W位设置为<code>0</code>（写）：<code>1111 1000</code>。</p>
</li>
<li><p> 主站发送从属地址。LSB是一个 “不关心”的值，只有一个设备必须确认这个字节（拥有I^2^C总线从属地址的设备）。</p>
</li>
<li><p> 主站发送一个 Re-START 条件。</p>
</li>
</ol>
<blockquote>
<p>备注：在 STOP 条件之后，再加上一个 START 条件，就会重置从属状态机，无法进行设备ID读取。另外，在 STOP 条件或 Re-START 条件之后，对另一个从属设备的访问也会重置从属状态机，无法执行Device ID读取。</p>
</blockquote>
<ol start="5">
<li><p> 主站发送保留设备ID的 I^2^C 总线地址，后面的R/W位设置为 <code>1</code>（读）：<code>1111 1001</code>。</p>
</li>
<li><p> 可以进行设备ID读取，从12个制造商位开始（第一个字节+第二个字节的4个MSB），然后是9个部件识别位（第二个字节的4个LSB+第三个字节的5个MSB），然后是三个芯片修订位（第三个字节的3个LSB）。</p>
</li>
<li><p>主站通过NACKing最后一个字节来结束读取序列，从而重置从属设备的状态机，允许主站发送 STOP 条件。</p>
<blockquote>
<p>备注：设备ID的读取可以随时通过发送NACK来停止。</p>
</blockquote>
</li>
</ol>
<p>如果主站在第三个字节之后继续ACK，从站就会滚回第一个字节，并继续发送设备ID序列，直到检测到 NACK。</p>
<h1 id="SPI"><a href="#SPI" class="headerlink" title="SPI"></a>SPI</h1><p>标准：</p>
<h2 id="术语-1"><a href="#术语-1" class="headerlink" title="术语"></a>术语</h2><h2 id="SPI和I-2-C的对比"><a href="#SPI和I-2-C的对比" class="headerlink" title="SPI和I^2^C的对比"></a>SPI和I^2^C的对比</h2><table>
<thead>
<tr>
<th></th>
<th>SPI</th>
<th>I^2^C</th>
</tr>
</thead>
<tbody><tr>
<td>通信模式</td>
<td>全双工<br><em>（是指单主从设备之间的全双工，从设备之间无法进行通信）</em></td>
<td>半双工<br><em>（任意主从设备可以分时复用同一条通信线路）</em></td>
</tr>
<tr>
<td>主从模式</td>
<td>一主多从</td>
<td>多主多从</td>
</tr>
<tr>
<td>引脚占用</td>
<td>从设备越多，对主机占用的引脚较多<br>主设备占用引脚：3+n<br>从设备占用引脚：4<br><em>（n为从设备数）</em></td>
<td>主从设备均占用：2</td>
</tr>
<tr>
<td>应答响应</td>
<td>无</td>
<td>有</td>
</tr>
<tr>
<td>传输速率</td>
<td>最高：</td>
<td>最高：3.4Mbps</td>
</tr>
<tr>
<td>从机选择</td>
<td>通过 <strong>CS(SS)选择引脚</strong> 来选择</td>
<td>通过 <strong>器件地址</strong> 来选择</td>
</tr>
<tr>
<td>数据采样</td>
<td>在SCLK边沿采样</td>
<td>在SCL高电平采样</td>
</tr>
<tr>
<td>通信距离</td>
<td>短</td>
<td>短</td>
</tr>
</tbody></table>
<h1 id="UART"><a href="#UART" class="headerlink" title="UART"></a>UART</h1><p>标准：</p>
<h1 id="TDM"><a href="#TDM" class="headerlink" title="TDM"></a>TDM</h1><p>标准：</p>
<h1 id="I-2-S"><a href="#I-2-S" class="headerlink" title="I^2^S"></a>I^2^S</h1><p>标准：</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/I-2-C/" rel="tag"># I^2^C</a>
              <a href="/tags/SPI/" rel="tag"># SPI</a>
              <a href="/tags/TDM/" rel="tag"># TDM</a>
              <a href="/tags/I2S/" rel="tag"># I2S</a>
          </div>

    <div id="vcomment" style="margin: 20px 0 0 0"></div>
    <script>
        new Valine({
            el: '#vcomment' ,
            appId: 'vRGM12EcYxDSM2lat5qjjSeY-gzGzoHsz',
            appKey: 'WBgAb6NTAFQ7DYtgH0uOPNNh'
        });
    </script>
</body>




        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/05/13/Linux/Firewalld/2021-05-13-Firewalld%E9%98%B2%E7%81%AB%E5%A2%99%E8%AF%A6%E8%A7%A3/" rel="prev" title="Firewalld防火墙详解">
                  <i class="fa fa-chevron-left"></i> Firewalld防火墙详解
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/05/17/Computer/2021-05-17-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/" rel="next" title="汇编语言">
                  汇编语言 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>





<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
