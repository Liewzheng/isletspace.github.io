<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;islet.space&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Gemini&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;Searching...&quot;,&quot;empty&quot;:&quot;We didn&#39;t find any results for the search: ${query}&quot;,&quot;hits_time&quot;:&quot;${hits} results found in ${time} ms&quot;,&quot;hits&quot;:&quot;${hits} results found&quot;}}</script>
<meta name="description" content="TMS320F28004x 下称 本系列芯片。 概述C28004x 共有2种芯片封装形式： LQFP 和 VQFN 。VQFN 仅有56针，LQFP 有 100针和 64针的区别。分别用 PZ 、PM 和 RSH 三种型号尾缀与 100-pin 、64-pin 和 56-pin 相关联。根据section4.3，可以知道还有个64PMQ的尾缀。 如型号TMS320F280041PM，仅有64针脚，">
<meta property="og:type" content="article">
<meta property="og:title" content="F280041PM开发笔记">
<meta property="og:url" content="http://islet.space/2021/07/10/Hardware/DSP/2021-07-10-F280041PM%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="TMS320F28004x 下称 本系列芯片。 概述C28004x 共有2种芯片封装形式： LQFP 和 VQFN 。VQFN 仅有56针，LQFP 有 100针和 64针的区别。分别用 PZ 、PM 和 RSH 三种型号尾缀与 100-pin 、64-pin 和 56-pin 相关联。根据section4.3，可以知道还有个64PMQ的尾缀。 如型号TMS320F280041PM，仅有64针脚，">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710144933414.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710141413564.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710142641475.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712141632913.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712094430159.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712094455163.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712093251720.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712095049189.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712095346292.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712095838640.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710154834139.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710155206953.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710155140640.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710155540889.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710160134644.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210710160150517.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210711172100592.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210711173148615.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210711172426297.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210711173614732.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210711173721809.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210711174357812.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210711174530164.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210711175336942.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712083326344.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712100908714.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712101034377.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712101211183.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712101225955.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210715140249937.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210715141719524.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712104641579.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712104655718.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712104857729.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210712104928659.png">
<meta property="og:image" content="https://pic.islet.space/2021/07/image-20210715170724177.png">
<meta property="article:published_time" content="2021-07-10T03:10:00.000Z">
<meta property="article:modified_time" content="2021-07-15T13:11:29.141Z">
<meta property="article:author" content="Liewzheng">
<meta property="article:tag" content="TI">
<meta property="article:tag" content="C2000">
<meta property="article:tag" content="DSP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.islet.space/2021/07/image-20210710144933414.png">


<link rel="canonical" href="http://islet.space/2021/07/10/Hardware/DSP/2021-07-10-F280041PM%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;en&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;http:&#x2F;&#x2F;islet.space&#x2F;2021&#x2F;07&#x2F;10&#x2F;Hardware&#x2F;DSP&#x2F;2021-07-10-F280041PM%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0&#x2F;&quot;,&quot;path&quot;:&quot;2021&#x2F;07&#x2F;10&#x2F;Hardware&#x2F;DSP&#x2F;2021-07-10-F280041PM开发笔记&#x2F;&quot;,&quot;title&quot;:&quot;F280041PM开发笔记&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>F280041PM开发笔记 | Coder的孤岛</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specification"><span class="nav-number">2.</span> <span class="nav-text">Specification</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E8%84%9A"><span class="nav-number">2.1.</span> <span class="nav-text">引脚</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%84%9A%E5%88%86%E9%85%8D"><span class="nav-number">2.1.1.</span> <span class="nav-text">引脚分配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%84%9A%E8%B7%AF%E7%94%B1"><span class="nav-number">2.1.2.</span> <span class="nav-text">引脚路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%84%9A%E5%A4%8D%E7%94%A8"><span class="nav-number">2.1.3.</span> <span class="nav-text">引脚复用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%84%9A%E7%BD%AE%E9%AB%98-%E4%BD%8E"><span class="nav-number">2.1.4.</span> <span class="nav-text">引脚置高&#x2F;低</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#X-BAR"><span class="nav-number">2.1.5.</span> <span class="nav-text">X-BAR</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%85%A5X-BAR"><span class="nav-number">2.1.5.1.</span> <span class="nav-text">输入X-BAR</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%87%BAX-BAR-%E5%92%8C-ePWM-X-BAR"><span class="nav-number">2.1.5.2.</span> <span class="nav-text">输出X-BAR 和 ePWM X-BAR</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%B5%E5%8E%8B"><span class="nav-number">2.2.</span> <span class="nav-text">电压</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%8D%E4%BD%8D"><span class="nav-number">2.3.</span> <span class="nav-text">复位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%92%9F"><span class="nav-number">2.4.</span> <span class="nav-text">时钟</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%92%9F%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="nav-number">2.4.1.</span> <span class="nav-text">时钟配置方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AA%E5%AD%98"><span class="nav-number">2.5.</span> <span class="nav-text">闪存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JTAG"><span class="nav-number">2.6.</span> <span class="nav-text">JTAG</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GPIO"><span class="nav-number">2.7.</span> <span class="nav-text">GPIO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD"><span class="nav-number">2.8.</span> <span class="nav-text">中断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%8E%E7%94%B5%E9%87%8F%E6%A8%A1%E5%BC%8F"><span class="nav-number">2.9.</span> <span class="nav-text">低电量模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E5%A4%96%E8%AE%BE"><span class="nav-number">2.10.</span> <span class="nav-text">模拟外设</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E5%A4%96%E8%AE%BE"><span class="nav-number">2.11.</span> <span class="nav-text">控制外设</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ePWM"><span class="nav-number">2.11.1.</span> <span class="nav-text">ePWM</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E4%BF%A1%E5%A4%96%E8%AE%BE"><span class="nav-number">2.12.</span> <span class="nav-text">通信外设</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Register"><span class="nav-number">3.</span> <span class="nav-text">Register</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%AB%98%E9%A2%91%E5%8F%98%E6%8D%A2%E5%99%A8%E5%BC%80%E5%8F%91"><span class="nav-number">4.</span> <span class="nav-text">高频变换器开发</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%AF%E8%AF%AD"><span class="nav-number">5.</span> <span class="nav-text">术语</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">6.</span> <span class="nav-text">参考</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">82</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">153</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@qq.com" title="E-Mail → mailto:liewzheng@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/07/10/Hardware/DSP/2021-07-10-F280041PM%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          F280041PM开发笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-10 11:10:00" itemprop="dateCreated datePublished" datetime="2021-07-10T11:10:00+08:00">2021-07-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-15 21:11:29" itemprop="dateModified" datetime="2021-07-15T21:11:29+08:00">2021-07-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>TMS320F28004x 下称 本系列芯片。</p>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>C28004x 共有2种芯片封装形式： LQFP 和 VQFN 。VQFN 仅有56针，LQFP 有 100针和 64针的区别。分别用 PZ 、PM 和 RSH 三种型号尾缀与 100-pin 、64-pin 和 56-pin 相关联。根据section4.3，可以知道还有个64PMQ的尾缀。</p>
<p>如型号TMS320F280041PM，仅有64针脚，引脚分布如下图所示：</p>
<img src="https://pic.islet.space/2021/07/image-20210710144933414.png" alt="image-20210710144933414"  />



<h1 id="Specification"><a href="#Specification" class="headerlink" title="Specification"></a>Specification</h1><p>下图应该是F280049的系统功能框图，与F280041PM仍有些出入。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210710141413564.png" alt="image-20210710141413564"></p>
<p><strong>注意</strong>：F280041PM不支持 CLA（可编程控制Law加速器，Programmable Control Law Accelerator），Flash为128KB（64KW），GPIO数量为26，AIO数量为14，ADC通道为14，同时280041支持5个PGA</p>
<p>TMS320F28004x 所支持外设如下：</p>
<img src="https://pic.islet.space/2021/07/image-20210710142641475.png" alt="image-20210710142641475" style="zoom:110%;" />



<blockquote>
<p><strong>Q</strong>: 为什么要区分type？</p>
<p><strong>A</strong>: 就同一类功能而言，在C2000系列上，都会有许多不同的增强/阉割版本，就出现了支持全部基础功能的、出现支持部分扩展功能的 和 支持全部扩展功能的等各种版本，那么就需要从功能范围的本质上去描述这些区别，再用相应的 “功能+type x” 的方式来表示其支持的类别。如下图所示，为《spru556n》page 24 所描述的关于CLA的功能类别。</p>
<p><code>CLA type 0</code>，表示的是支持原始CLA功能的模块类型。</p>
<p><code>CLA type 2</code> ，表示在原始功能的基础上，增加了后台代码模式，可以在后台运行通信和清理程序等任务；后台任务持续运行，直到禁用或设备/软复位；后台任务可以由外设或软件触发；其他前台任务可以按照定义的优先顺序中断后台任务；增加了使后台代码部分不被中断的规定；增加了调试功能，具有真正的软件断点支持，在调试停止期间，CLA从同一地址重新获取数据会被停止。</p>
<img src="https://pic.islet.space/2021/07/image-20210712141632913.png" alt="image-20210712141632913" style="zoom: 67%;" />
</blockquote>
<h2 id="引脚"><a href="#引脚" class="headerlink" title="引脚"></a>引脚</h2><h3 id="引脚分配"><a href="#引脚分配" class="headerlink" title="引脚分配"></a>引脚分配</h3><p>Page17 4.2 <em><strong>Pin Attributes</strong></em> 下可以查看各封装芯片引脚的名称、编号 及 功能。</p>
<h3 id="引脚路由"><a href="#引脚路由" class="headerlink" title="引脚路由"></a>引脚路由</h3><p>Page30 4.3 <em><strong>Signal Routing</strong></em> 下可以查看引脚的路由信息。</p>
<h3 id="引脚复用"><a href="#引脚复用" class="headerlink" title="引脚复用"></a>引脚复用</h3><p>Page41 4.4 <em><strong>Pin Multiplexing</strong></em> 下可以查看引脚的复用信息，GPIO口的默认功能就是GPIO，除了GPIO35 和 GPIO37（默认情况下是TDI 和 TDO）。GPIO口的次级功能可以通过设置 <code>GPyGMUXn.GPIOz</code> 和 <code>GPyMUXn.GPIOz</code> 寄存器位来进行。</p>
<p><strong>注意</strong>： </p>
<ul>
<li><code>GPyGMUXn</code> 寄存器应在 <code>GPyMUXn</code> 之前配置，以避免交替复用选择对GPIO产生瞬时脉冲。</li>
<li>GPIO20 , GPIO21 和 GPIO41 至 GPIO55在任何封装上都不可复用。</li>
</ul>
<p>表6 为GPIO的针脚复用说明，表中未列明项为GPIO复用设置保留位。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210712094430159.png" alt="image-20210712094430159"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210712094455163.png" alt="image-20210712094455163"></p>
<h3 id="引脚置高-低"><a href="#引脚置高-低" class="headerlink" title="引脚置高/低"></a>引脚置高/低</h3><p>部分引脚可以被置高/低，下表展示了各引脚的设置类型。默认情况下，GPIO不可置高，但是可以通过软件进行使能。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210712093251720.png" alt="image-20210712093251720"></p>
<h3 id="X-BAR"><a href="#X-BAR" class="headerlink" title="X-BAR"></a>X-BAR</h3><p>X-BAR 即 Crossbar。</p>
<h4 id="输入X-BAR"><a href="#输入X-BAR" class="headerlink" title="输入X-BAR"></a>输入X-BAR</h4><p>输入X-BAR被用于从GPIO口引导信号至许多不同的IP块，如ADC、eCAP、ePWM 和 外部中断。图5 展示了X-BAR的架构，表8 展示了各X-BAR输入可能的路由目的地。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210712095049189.png" alt="image-20210712095049189"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210712095346292.png" alt="image-20210712095346292"></p>
<h4 id="输出X-BAR-和-ePWM-X-BAR"><a href="#输出X-BAR-和-ePWM-X-BAR" class="headerlink" title="输出X-BAR 和 ePWM X-BAR"></a>输出X-BAR 和 ePWM X-BAR</h4><p>输出X-BAR有8个可以路由至各GPIO模块的输出口。ePWM X-BAR 有8个可以路由至各ePWM模块的输出口。</p>
<p>图6 展示了 两个X-BAR的 信号源。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210712095838640.png" alt="image-20210712095838640"></p>
<h2 id="电压"><a href="#电压" class="headerlink" title="电压"></a>电压</h2><p>本系列芯片支持以下三种之一的电源供应（在要求核心电压VDD = 1.2V 的情况下）：</p>
<ul>
<li>外接电源（不支持56针RSH封装）</li>
<li>内部 1.2V LDO电压整流器</li>
<li>内部 1.2V 开关整流器</li>
</ul>
<p><strong>注意</strong>：必须使用同一个系统电压调节器来驱动VDDIO和VDDIO_SW。</p>
<p>下方是有关两个电压调节器的详细描述：</p>
<p><img src="https://pic.islet.space/2021/07/image-20210710154834139.png" alt="image-20210710154834139"></p>
<h2 id="复位"><a href="#复位" class="headerlink" title="复位"></a>复位</h2><h2 id="时钟"><a href="#时钟" class="headerlink" title="时钟"></a>时钟</h2><p>下图展示了本系列芯片的时钟系统，本系列芯片支持两个独立的内部振荡器，直接映射为 <strong>INTOSC1</strong> 和 <strong>INTOSC2</strong> 。默认情况下，都会在芯片启动时开启，且 <strong>INTOSC2</strong> 才是系统参考时钟源，<strong>INTOSC1</strong> 是备用时钟源。<u>这一点可以手动修改</u>。</p>
<img src="https://pic.islet.space/2021/07/image-20210710155206953.png" alt="image-20210710155206953" style="zoom:67%;" />

<p>下图展示了系统PLL的设置框图。</p>
<img src="https://pic.islet.space/2021/07/image-20210710155140640.png" alt="image-20210710155140640" style="zoom:67%;" />



<p>表13 展示了（外部）输入时钟频率的范围要求</p>
<p>表14 展示了（外部）晶体振荡器的电气特性</p>
<p>表15 展示了X1的计时要求</p>
<p>表16 展示了PLL锁定的时间</p>
<p>表17 展示了内部时钟频率</p>
<p>表18 展示了输出时钟XCLKOUT的开断性能</p>
<p>表19 展示了（外部）晶体振荡器参数</p>
<p>表20 展示了（外部）晶体振荡器的等效电阻要求</p>
<p>表21 展示了（外部）晶体振荡器的电气特性</p>
<p>表22 展示了（内部）晶体振荡器的电气特性</p>
<p><img src="https://pic.islet.space/2021/07/image-20210710155540889.png" alt="image-20210710155540889"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210710160134644.png" alt="image-20210710160134644"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210710160150517.png" alt="image-20210710160150517"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210711172100592.png" alt="image-20210711172100592"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210711173148615.png" alt="image-20210711173148615"></p>
<p>图 5-12 至 5-14 展示了三种不同的外部时钟源电路：</p>
<p><img src="https://pic.islet.space/2021/07/image-20210711172426297.png" alt="image-20210711172426297"></p>
<p><strong>注意</strong>：当X1接口被当作时钟接口使用时，X2接口也不可用作GPIO口。</p>
<h3 id="时钟配置方法"><a href="#时钟配置方法" class="headerlink" title="时钟配置方法"></a>时钟配置方法</h3><p>Once the application requirements are understood, a specific clock configuration can be determined. The default configuration is for <em><strong>INTOSC2</strong></em> to be used as the system clock (<em><strong>PLLSYSCLK</strong></em>) with a divider of 1. The following procedure can be used to set up the desired application configuration:</p>
<ol>
<li><p>Select the reference clock source (<em><strong>OSCCLK</strong></em>) by writing to <em><strong>CLKSRCCTL1.OSCCLKSRCSEL</strong></em>. To enable XTAL, follow the instructions in the previous sections.</p>
</li>
<li><p>Select the reference clock source (<em><strong>OSCCLK</strong></em>) by writing to <em><strong>CLKSRCCTL1.OSCCLKSRCSEL</strong></em>. Allow at least 300 <em><u>NOP instructions</u></em> for this to take effect.</p>
</li>
<li><p>Set up the system PLL if desired. TI recommends using the C2000Ware <code>SysCtl:setClock()</code> function for proper configuration of the PLL clock.</p>
</li>
<li><p>Select the <em><strong>LSPCLK</strong></em> divider by writing to <em><strong>LOSPCP</strong></em>.</p>
</li>
<li><p>If an alternate CAN bit clock is needed, select it by writing to <em><strong>CLKSRCCTL2.CANABCLKSEL</strong></em> and <em><strong>CLKSRCCTL2.CANBBCLKSEL</strong></em>.</p>
</li>
<li><p>Enable the desired peripheral clocks by writing to the <em><strong>PCLKCRx</strong></em> registers.</p>
</li>
</ol>
<p>The system clock configuration can be changed at run time. Changing the <em><strong>OSCCLK</strong></em> source will automatically bypass the PLL and set the multiplier to zero. Changing the multiplier from one non-zero value to another will temporarily bypass the PLL until it re-locks.</p>
<p><mark style="font-weight: 900;">注意： At least a 300 CPU clock cycles delay is needed after OSSCLK source is changed. </mark></p>
<h2 id="闪存"><a href="#闪存" class="headerlink" title="闪存"></a>闪存</h2><p>表23 展示了不同时钟源和频率下所需的最小闪存等待状态</p>
<p>表24 展示了闪存的性能参数</p>
<p><img src="https://pic.islet.space/2021/07/image-20210711173614732.png" alt="image-20210711173614732"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210711173721809.png" alt="image-20210711173721809"></p>
<h2 id="JTAG"><a href="#JTAG" class="headerlink" title="JTAG"></a>JTAG</h2><h2 id="GPIO"><a href="#GPIO" class="headerlink" title="GPIO"></a>GPIO</h2><p>在复位时，GPIO会被配置为输入。对于特定的输入，用户还可以选择 <strong>输入鉴定周期</strong>（input qualification cycles）的数量来过滤不需要的 <strong>噪声突变</strong>（unwanted noise glitches）。</p>
<p>表29 展示了GPIO的特性参数，需要注意的是，GPIO的频率只有25MHz最高。</p>
<p>表30 展示了GPIO的输入时间要求</p>
<p><img src="https://pic.islet.space/2021/07/image-20210711174357812.png" alt="image-20210711174357812"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210711174530164.png" alt="image-20210711174530164"></p>
<h2 id="中断"><a href="#中断" class="headerlink" title="中断"></a>中断</h2><p>C28x系列芯片有14条外围中断可用，其中13和14中断被直接关联至CPU定时器1和定时器2。剩余12条中断可以通过 <strong>增强型外围中断扩展</strong>（enhanced Peripheral Interrupt Expansion，ePIE)模块进行信号引导。本模块将最多16个外设中断复用到每个CPU中断线中，并扩展了向量表，允许每个中断有自己的ISR。允许芯片支持数量众多的外围设备。</p>
<p>中断路径一共有三个阶段——外围设备、ePIE模块 和 CPU。每个阶段都有其使能和标志寄存器。本系统允许CPU在其他中断等待时处理一个中断，在软件中实现并优先处理嵌套中断，并在某些关键任务中禁用中断。</p>
<p>下图展示了本系列芯片的中断架构。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210711175336942.png" alt="image-20210711175336942"></p>
<p>外部中断（external interrupt, XINT）电气特性数据和时序特性：</p>
<p>表31 列出了外部中断的时间要求</p>
<p>表32 列出了外部中断开断特性</p>
<p>图25 展示了外部中断的时序</p>
<p><img src="https://pic.islet.space/2021/07/image-20210712083326344.png" alt="image-20210712083326344"></p>
<h2 id="低电量模式"><a href="#低电量模式" class="headerlink" title="低电量模式"></a>低电量模式</h2><p>本系列芯片拥有两种 时钟门（clock-gating） 低电量模式，分别是 HALT 和 IDLE，STANDARD 模式不支持进入低电量。</p>
<p>低电量模式的进入和退出代码，以及更多关于低电量模式的描述信息，需要参考《TRM》手册。</p>
<p>表33 描述了系统进入任何 时钟门 低电量模式后的影响</p>
<p>表34 列明了IDLE模式下的时序要求</p>
<p>表35 列明了IDLE模式下的开断特性</p>
<p>表36 列明了HALT模式下的时序要求</p>
<p>表37 列明了HALT模式下的开断特性</p>
<p>图26 展示了IDLE模式的时序框图</p>
<p>图27 展示了HALT模式的时序框图</p>
<p><img src="https://pic.islet.space/2021/07/image-20210712100908714.png" alt="image-20210712100908714"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210712101034377.png" alt="image-20210712101034377"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210712101211183.png" alt="image-20210712101211183"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210712101225955.png" alt="image-20210712101225955"></p>
<h2 id="模拟外设"><a href="#模拟外设" class="headerlink" title="模拟外设"></a>模拟外设</h2><p>暂略</p>
<h2 id="控制外设"><a href="#控制外设" class="headerlink" title="控制外设"></a>控制外设</h2><p>本系列芯片的控制外设包含 <strong>eCAP</strong>、<strong>HRCAP</strong>、<strong>ePWM</strong>、<strong>HRPWM</strong>、<strong>eQEP</strong> 和 <strong>SDFM</strong>。</p>
<p>根据《spru566n》表11 可知，ePWM 和 HRPWM 都是4型增强外设，具体功能可以参见《sprui33d》。</p>
<h3 id="ePWM"><a href="#ePWM" class="headerlink" title="ePWM"></a>ePWM</h3><blockquote>
<p>The enhanced pulse width modulator (ePWM) peripheral is a key element in controlling many of the <em><strong>power electronic systems</strong></em> found in both commercial and industrial equipment. These systems include <em><strong>digital motor control</strong></em>, <em><strong>switch mode power supply control</strong></em>, <em><strong>uninterruptible power supplies (UPS)</strong></em>, and other forms of power conversion.</p>
</blockquote>
<p>大白话地将，ePWM 这个外设，是由很多个ePWM 模块（Module）组成，每个ePWM 模块都有8个子模块（Submodule）。所有的ePWM模块用数字尾缀来表示第几个ePWM模块，如 <code>ePWM1</code>、<code>ePWM3</code> 。每个ePWM模块又有两个输出，分别是 A 和 B，例如 <code>ePWM1A</code> 和 <code>ePWM1B</code> 。</p>
<p>ePWM模块通过一条时钟同步表（clock synchronization scheme）同步和串联在一起，形成可以统一操作的整体。此外，这个时钟同步表能够被扩展至 eCAP 外设使用。子模块的数量是由设备（设计）和实际使用需求决定的，每个子模块都能够支持单独操作。</p>
<p>每个ePWM模块支持以下功能：</p>
<ul>
<li>带有周期和频率控制的专用16位时基计数器</li>
<li>两个PWM输出（<code>EPWMxA</code> 和 <code>EPWMxB</code> ），可用于以下配置。<ul>
<li>两个独立的PWM输出，单边操作<span style="color: #BBB; font-style: Italic;">（ single-edge operation）</span></li>
<li>两个独立的PWM输出，双边对称操作（ dual-edge symmetric operation）</li>
<li>一个独立的PWM输出，双边不对称操作（ dual-edge asymmetric operation）</li>
</ul>
</li>
<li>通过软件对PWM信号进行异步覆盖控制。</li>
<li>可编程的相位控制，支持相对于其他ePWM模块的滞后或领先操作</li>
<li>逐个周期的硬件锁定（同步）相位关系。</li>
<li>具有独立上升沿和下降沿延迟控制的死区生成。</li>
<li>可编程的跳闸区域分配，包括逐周期跳闸和故障条件下的一次性跳闸。</li>
<li>跳闸条件可以迫使PWM输出达到高、低或高阻抗状态的逻辑水平。</li>
<li>所有事件都可以触发CPU中断和ADC开始转换(SOC)</li>
<li>可编程的事件预处理将CPU在中断上的开销降到最低。</li>
<li>通过高频载波信号进行PWM 斩波（chopping），对脉冲变压器门驱动很有用。</li>
</ul>
<p>8个子模块如下：</p>
<ul>
<li>Time-Base Submodule</li>
<li>Counter Compare Submodule</li>
<li>Action Qualifier Submodule</li>
<li>Dead-Band Generator Submodule</li>
<li>PWM Chopper (PC) Submodule</li>
<li>Trip Zone Submodule</li>
<li>Event Trigger Submodule</li>
<li>Digital Compare Submodule</li>
</ul>
<p>各子模块的 Purpose 和 Control 简单列些如下：</p>
<table>
<thead>
<tr>
<th>SUBMODULE</th>
<th>PURPOSE</th>
<th>CONTROL</th>
</tr>
</thead>
<tbody><tr>
<td>Time-Base</td>
<td>determines all of the event timing for the ePWM module</td>
<td></td>
</tr>
<tr>
<td>Counter Compare</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Action Qualifier</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Dead-Band Generator</td>
<td></td>
<td></td>
</tr>
<tr>
<td>PWM Chopper</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Trip Zone</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Event Trigger</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Digital Compare</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ePWM 模块通过两个PWM输出（<code>EPWMxA</code> 和 <code>EPWMxB</code>）来组成一条完整的PWM通道。多路 ePWM被在一个设备内实现，几乎每一个ePWM通道实例都是相同的，只有一个例外。有些实例包括一个硬件扩展，可以更精确地控制PWM输出。这种扩展是高分辨率脉宽调制器（HRPWM），在第18.15节中有描述。每个ePWM模块都用一个以1开头的数值表示，例如，<code>ePWM1</code> 是系统中的第一个实例，<code>ePWM3</code> 是第三个实例，<code>ePWMx</code> 表示任何实例。</p>
<p>每一个ePWM模块都被连接至输入和输出信号。每一个ePWM模块都包含着8个子系统，并通过图18-2的方式连接至系统内部。</p>
<p>图1 描述的是外围总线上的多个PWM模块，及输入信号和输出信号通路示例</p>
<p>图2 描述的是PWM模块下各子模块和信号连接方式</p>
<img src="https://pic.islet.space/2021/07/image-20210715140249937.png" alt="image-20210715140249937" style="zoom:80%;" />





<img src="https://pic.islet.space/2021/07/image-20210715141719524.png" alt="image-20210715141719524" style="zoom:80%;" />



<blockquote>
<p>trip input:</p>
<p>trip zone：是ePWM的一个子模块</p>
<p>trip-zone input timing:</p>
<p>Hi-Z： 高阻态</p>
</blockquote>
<p>表57 展示了PWM的时间要求，主要是 同步（Sync）/非同步（Async）/带输入验证（With input qualifier）的 <em><strong>同步输入脉冲宽度</strong></em>（Sync Input Pulse Width）的三种时间</p>
<p>表58 展示了PWM的开关特性，包括最小脉冲周期，同步输出脉冲宽度 和 t<span style="font-size: 0.6rem;">d(TZ-PWM)</span></p>
<p>表59 </p>
<p>图58</p>
<p>图59</p>
<p>图60 为同步链架构示意？？</p>
<p>图61 PWM高阻态时序特性</p>
<p><img src="https://pic.islet.space/2021/07/image-20210712104641579.png" alt="image-20210712104641579"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210712104655718.png" alt="image-20210712104655718"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210712104857729.png" alt="image-20210712104857729"></p>
<p><img src="https://pic.islet.space/2021/07/image-20210712104928659.png" alt="image-20210712104928659"></p>
<h2 id="通信外设"><a href="#通信外设" class="headerlink" title="通信外设"></a>通信外设</h2><p>暂略</p>
<h1 id="Register"><a href="#Register" class="headerlink" title="Register"></a>Register</h1><p>暂略</p>
<h1 id="高频变换器开发"><a href="#高频变换器开发" class="headerlink" title="高频变换器开发"></a>高频变换器开发</h1><p>利用型号为 <code>TMS320F280041</code> 芯片的GPIO（最高输出频率为25MHz）输出一个30KHz的PWM波形，需要使用到 ePWM外设，使用示例中提供的 <code>ePWM6</code> 进行开发，输出高位和低位两个幅频合适的波形后，接到型号为 <code>2EDL05I06PF</code> 的驱动上，驱动型号为 <code>IKW50N65WR5</code> 的IGBT外设。</p>
<ul>
<li> <code>TMS320F280041</code> 的外部晶振输入频率 f<span style="font-size: 0.8rem;">XTAL</span> 在 10 ~ 20 MHz 之间，自身工作频率f<span style="font-size: 0.8rem;">SYSCLK</span> 在 2 ~ 100MHz之间。</li>
</ul>
<p>以下为工作频率设置的样例，刚好实际芯片时钟配置也是需要配置到满频工作状态 <code>100MHz</code> </p>
<img src="https://pic.islet.space/2021/07/image-20210715170724177.png" alt="image-20210715170724177" style="zoom:67%;" />

<ul>
<li>外部晶振和自身工作频率的设置涉及到几个寄存器：<ul>
<li>CLKSRCCTL1.OSCCLKSRCSEL</li>
<li>SYSPLLMULT</li>
<li>IMULT</li>
<li>FMULT</li>
<li>ODIV</li>
<li>SYSCLKDIVSEL.PLLSYSCLKDIV</li>
<li>SYSPLLCTL1.PLLCLKEN</li>
</ul>
</li>
</ul>
<p><strong>工作目标</strong>：</p>
<ol>
<li>输出PWM波形</li>
<li>采集输出的波形和IGBT输出的波形（可能需要检测相位和波纹）</li>
<li>过零饱和电压</li>
</ol>
<h1 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h1><p><strong>LDO</strong>: Low dropout, A DC linear voltage regulator which can operate with a very small input/output differential voltage.</p>
<p><strong>V<span style="font-size: 0.8rem;">REG</span></strong>: Voltage Regulator. 稳压器。</p>
<p><strong>V<span style="font-size: 0.8rem;">REF</span></strong>: Voltage Reference. 参考电压</p>
<p><strong>ESD</strong>: Electrostatic Discharge, 静电放电。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a target="_blank" rel="noopener" href="https://www.ti.com.cn/cn/lit/gpn/tms320f280049">《TMS320F28004x 微控制器》</a></li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/TI/" rel="tag"># TI</a>
              <a href="/tags/C2000/" rel="tag"># C2000</a>
              <a href="/tags/DSP/" rel="tag"># DSP</a>
          </div>

    <div id="vcomment" style="margin: 20px 0 0 0"></div>
    <script>
        new Valine({
            el: '#vcomment' ,
            appId: 'vRGM12EcYxDSM2lat5qjjSeY-gzGzoHsz',
            appKey: 'WBgAb6NTAFQ7DYtgH0uOPNNh'
        });
    </script>
</body>




        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/07/06/Programming/C++/2021-07-06-Linux%E4%B8%8AC++%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/" rel="prev" title="Linux上C++多线程报错解决办法">
                  <i class="fa fa-chevron-left"></i> Linux上C++多线程报错解决办法
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/07/10/Hardware/Circuit/2021-07-10-VCC%E3%80%81VDD%E3%80%81VEE%E3%80%81VSS%E7%9A%84%E5%8C%BA%E5%88%AB/" rel="next" title="VCC、VDD、VEE、VSS的区别">
                  VCC、VDD、VEE、VSS的区别 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>





<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
