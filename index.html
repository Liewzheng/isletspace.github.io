<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://code.islet.space/font//css?family=/CascadiaCode/CascadiaCode:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"islet.space","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/db.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>
<meta name="description" content="笔记分享的旮旯孤岛而已">
<meta property="og:type" content="website">
<meta property="og:title" content="Coder的孤岛">
<meta property="og:url" content="http://islet.space/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="笔记分享的旮旯孤岛而已">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liewzheng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://islet.space/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Coder的孤岛</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
        <li class="menu-item menu-item-目录"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-简历"><a href="/resume/" rel="section"><i class="fa fa-address-card fa-fw"></i>简历</a></li>
        <li class="menu-item menu-item-友链"><a href="/friends/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>友链</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">119</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">222</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@foxmail.com" title="E-Mail → mailto:liewzheng@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/06/27/Linux/Shell/2022-06-27-%E4%BE%BF%E6%8D%B7%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/27/Linux/Shell/2022-06-27-%E4%BE%BF%E6%8D%B7%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">便捷脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-27 21:15:00" itemprop="dateCreated datePublished" datetime="2022-06-27T21:15:00+08:00">2022-06-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-28 20:13:48" itemprop="dateModified" datetime="2022-06-28T20:13:48+08:00">2022-06-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="项目文件初始化">项目文件初始化</h1>
<h2 id="c项目初始化">C项目初始化</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://storage.islet.space/08_Script/project/c_init.sh | bash -s --</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>生成文件夹：<code>build</code> / <code>src</code> / <code>inc</code> / <code>lib</code> / <code>doc</code></li>
<li>生成空文档：<code>README.md</code>、<code>src/main.c</code> 、<code>CMakeLists.txt</code></li>
<li>下载代码格式化模板：<code>.clang-format</code></li>
<li>下载git忽略文件模板：<code>.gitignore</code></li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220627212514361.png" alt="image-20220627212514361" /><figcaption aria-hidden="true">image-20220627212514361</figcaption>
</figure>
<h1 id="环境初始化">环境初始化</h1>
<h2 id="嵌入式工程师开发环境初始化">嵌入式工程师开发环境初始化</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://storage.islet.space/08_Script/debian/init.sh | bash -s --</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>安装 <code>zsh</code> 和 <code>ohmyzsh</code> ，并设置 <code>zsh</code> 为默认shell</li>
<li>安装常用工具：<code>vim</code> / <code>nodejs</code></li>
<li>安装编译软件： <code>gcc</code> / <code>lcov</code> / <code>valgrind</code> / <code>cmake</code> / <code>make</code> / <code>git</code> / <code>repo</code></li>
<li>安装交叉编译器： <code>android-ndk-r20b</code> / <code>gcc-arm-none-eabi-5.4</code> / <code>gcc-arm-none-eabi-10.3</code></li>
</ol>
<h2 id="python-开发环境初始化">python 开发环境初始化</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh | bash -s --</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/06/15/Embedded/2022-06-15-STM32_Programmer_CLI-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/15/Embedded/2022-06-15-STM32_Programmer_CLI-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">STM32_Programmer_CLI 使用笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-15 12:20:00" itemprop="dateCreated datePublished" datetime="2022-06-15T12:20:00+08:00">2022-06-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-27 23:39:00" itemprop="dateModified" datetime="2022-06-27T23:39:00+08:00">2022-06-27</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Embedded/" itemprop="url" rel="index"><span itemprop="name">Embedded</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="环境部署">环境部署</h1>
<ol type="1">
<li>直接使用绝对路径，如 <code>"D:\STMicroelectronics\STM32Cube\STM32CubeProgrammer\bin\STM32_Programmer_CLI.exe"</code>，这种方法可以在 PowerShell 或 cmd 直接使用。</li>
<li>将 <code>"D:\STMicroelectronics\STM32Cube\STM32CubeProgrammer\bin</code> 添加到 <strong>系统环境变量</strong> 中，这种方法只有 PowerShell 可以使用，cmd 还是不可以。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615134109619.png" alt="image-20220615134109619" /><figcaption aria-hidden="true">image-20220615134109619</figcaption>
</figure>
<h1 id="使用说明">使用说明</h1>
<p>STM32_Programmer_CLI 的指令参数有多种分类，包括适用于 <strong>STM32 MCU</strong> 、<strong>STM32 MPU</strong>、<strong>MCU安全烧录</strong>、<strong>STM32WBxx</strong> 三个部分。</p>
<p>下面是这个软件的官方说明：</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br></pre></td><td class="code"><pre><span class="line">      -------------------------------------------------------------------</span><br><span class="line">                       STM32CubeProgrammer v2.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line">      -------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Usage :</span><br><span class="line">STM32_Programmer_CLI.exe [command_1] [Arguments_1][[command_2] [Arguments_2]...]</span><br><span class="line"></span><br><span class="line">Generic commands:</span><br><span class="line"></span><br><span class="line"> -?, -h, --<span class="built_in">help</span>         : Show this <span class="built_in">help</span></span><br><span class="line"> -c,     --connect      : Establish connection to the device</span><br><span class="line">     &lt;port=&lt;PortName&gt;   : Interface identifier. ex <span class="built_in">COM1</span>, /dev/ttyS0, usb1,</span><br><span class="line">                          JTAG, SWD...)</span><br><span class="line">    USB port optional parameters:</span><br><span class="line">     [sn=&lt;serialNumber&gt;]   : Serial number of the usb dfu</span><br><span class="line">     [PID=&lt;Product ID&gt;]    : Product ID. ex: <span class="number">0</span>xA38F, etc, default <span class="number">0</span>xDF11</span><br><span class="line">     [VID=&lt;Vendor ID&gt;]     : Vendor ID. ex: <span class="number">0</span>x0389, etc, default x0483</span><br><span class="line">    UART port optional parameters:</span><br><span class="line">     [br=&lt;baudrate&gt;]    : Baudrate. ex: <span class="number">115200</span>, <span class="number">9600</span>, etc, default <span class="number">115200</span></span><br><span class="line">     [P=&lt;parity&gt;]       : Parity bit, value <span class="keyword">in</span> &#123;NONE,ODD,EVEN&#125;, default EVEN</span><br><span class="line">     [db=&lt;data_bits&gt;]   : Data bit, value <span class="keyword">in</span> &#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125; ..., default <span class="number">8</span></span><br><span class="line">     [sb=&lt;stop_bits&gt;]   : Stop bit, value <span class="keyword">in</span> &#123;<span class="number">1</span>, <span class="number">1</span>.<span class="number">5</span>, <span class="number">2</span>&#125; ..., default <span class="number">1</span></span><br><span class="line">     [fc=&lt;flowControl&gt;] : Flow control</span><br><span class="line">                          Value <span class="keyword">in</span> &#123;OFF,Hardware,Software&#125; ..., default OFF</span><br><span class="line">     rts=&lt;status&gt;       : low or high</span><br><span class="line">     dtr=&lt;status&gt;       : low or high</span><br><span class="line">                          <span class="keyword">Not</span> supported <span class="keyword">for</span> STM32MP</span><br><span class="line">     [noinit=noinit_bit]: <span class="built_in">Set</span> No Init bits, value <span class="keyword">in</span> &#123;<span class="number">0</span>,<span class="number">1</span>&#125; ..., default <span class="number">0</span></span><br><span class="line">     [console]          : Enter UART console <span class="built_in">mode</span></span><br><span class="line">    JTAG/SWD debug port optional parameters:</span><br><span class="line">     [freq=&lt;frequency&gt;] : Frequency <span class="keyword">in</span> KHz. Default frequencies:</span><br><span class="line">                          <span class="number">4000</span> SWD <span class="number">9000</span> JTAG with STLINKv2</span><br><span class="line">                          <span class="number">24000</span> SWD <span class="number">21333</span> with STLINKv3</span><br><span class="line">     [index=&lt;index&gt;]    : Index of the debug probe. default index <span class="number">0</span></span><br><span class="line">     [sn=&lt;serialNumber&gt;]: Serial Number of the debug probe</span><br><span class="line">     [ap=&lt;accessPort&gt;]  : Access Port index to connect to. default ap <span class="number">0</span></span><br><span class="line">     [<span class="built_in">mode</span>=&lt;<span class="built_in">mode</span>&gt;]      : Connection <span class="built_in">mode</span>. Value <span class="keyword">in</span> &#123;UR/HOTPLUG/NORMAL/POWERDOWN&#125;</span><br><span class="line">                          default <span class="built_in">mode</span>: NORMAL</span><br><span class="line">     [reset=&lt;<span class="built_in">mode</span>&gt;]     : Reset modes: SWrst/HWrst/Crst. Default <span class="built_in">mode</span>: SWrst</span><br><span class="line">                          Reset <span class="built_in">mode</span> with UR connection <span class="built_in">mode</span> is HWrst</span><br><span class="line">     [shared]           : Enable shared <span class="built_in">mode</span> allowing connection of two or <span class="built_in">more</span></span><br><span class="line">                          instances of STM32CubeProgrammer or other debugger</span><br><span class="line">                          to the same ST-LINK probe.</span><br><span class="line">     [tcpport=&lt;Port&gt;]   : Port used <span class="keyword">for</span> running ST-Link Server, default <span class="number">7184</span></span><br><span class="line">     [LPM]              : Enable debug <span class="keyword">in</span> Low Power <span class="built_in">mode</span>(default <span class="built_in">mode</span>)</span><br><span class="line">     [dLPM]             : Disable debug <span class="keyword">in</span> Low Power <span class="built_in">mode</span></span><br><span class="line">     [getAuthID]        : Get device identification (Option only <span class="keyword">for</span> STM32U5 series)</span><br><span class="line">     [speed=&lt;Reliable/fast&gt;]: Choose flashing  Reliable/fast (Option only <span class="keyword">for</span> STM32U5 series)</span><br><span class="line">    SPI port optional parameters:</span><br><span class="line">     [br=&lt;baudrate&gt;]    : Baudrate.</span><br><span class="line">     [cpha=&lt;cpha_val&gt;]  : <span class="number">1</span>Edge or <span class="number">2</span>Edge. default <span class="number">1</span>Edge</span><br><span class="line">     [cpol=&lt;cpol_val&gt;]  : low or high</span><br><span class="line">     [crc=&lt;crc_val&gt;]    : enable or disable (<span class="number">0</span>/<span class="number">1</span>).</span><br><span class="line">     [crcpol=&lt;crc_pol&gt;] : crc polynom value.</span><br><span class="line">     [datasize=&lt;size&gt;]  : <span class="number">8</span>bit/<span class="number">16</span>bit</span><br><span class="line">     [direction=&lt;val&gt;]  : Direction: <span class="number">2</span>LFullDuplex/<span class="number">2</span>LRxOnly/<span class="number">1</span>LRx/<span class="number">1</span>LTx</span><br><span class="line">     [firstbit=&lt;val&gt;]   : First Bit: MSB/LSB</span><br><span class="line">     [frameformat=&lt;val&gt;]: Frame <span class="built_in">Format</span>: Motorola/TI</span><br><span class="line">     [<span class="built_in">mode</span>=&lt;val&gt;]       : <span class="built_in">Mode</span>: master/slave</span><br><span class="line">     [nss=&lt;val&gt;]        : NSS: soft/hard</span><br><span class="line">     [nsspulse=&lt;val&gt;]   : NSS pulse: Pulse/NoPulse</span><br><span class="line">     [delay=&lt;val&gt;]      : Delay: Delay/NoDelay, delay of few microseconds</span><br><span class="line">     [noinit=noinit_bit]: <span class="built_in">Set</span> No Init bits, value <span class="keyword">in</span> &#123;<span class="number">0</span>,<span class="number">1</span>&#125; ..., default <span class="number">0</span></span><br><span class="line">    CAN port optional parameters:</span><br><span class="line">     [br=&lt;rbaudrate&gt;]   : Baudrate : <span class="number">125</span>, <span class="number">250</span>, <span class="number">500</span>, <span class="number">1000</span> Kbps, default <span class="number">125</span></span><br><span class="line">     [<span class="built_in">mode</span>=&lt;canmode&gt;]   : CAN <span class="built_in">Mode</span> : NORMAL, LOOPBACK..., default NORMAL</span><br><span class="line">     [ide=&lt;<span class="built_in">type</span>&gt;]       : CAN <span class="built_in">Type</span> : STANDARD or EXTENDED, default STANDARD</span><br><span class="line">     [rtr=&lt;<span class="built_in">format</span>&gt;]     : Frame <span class="built_in">Format</span>: DATA or REMOTE, default DATA</span><br><span class="line">     [fifo=&lt;afifo&gt;]     : Msg Receive : FIFO0 or FIFO1, default FIFO0</span><br><span class="line">     [fm=&lt;fmode]        : Filter <span class="built_in">Mode</span> : MASK or LIST, default MASK</span><br><span class="line">     [<span class="built_in">fs</span>=&lt;fscale&gt;]      : Filter Scale: <span class="number">16</span> or <span class="number">32</span>, default <span class="number">32</span></span><br><span class="line">     [fe=&lt;fenable&gt;]     : Filter Activation : ENABLE or DISABLE, default ENABLE</span><br><span class="line">     [fbn=&lt;fbanknb&gt;]    : Filter Bank Number : <span class="number">0</span> to <span class="number">13</span>, default <span class="number">0</span></span><br><span class="line">     [noinit=noinit_bit]: <span class="built_in">Set</span> No Init bits, value <span class="keyword">in</span> &#123;<span class="number">0</span>,<span class="number">1</span>&#125; ..., default <span class="number">0</span></span><br><span class="line">    I2C port optional parameters:</span><br><span class="line">     [add=&lt;ownadd&gt;]     : Slave address : address <span class="keyword">in</span> hex <span class="built_in">format</span></span><br><span class="line">     [br=&lt;sbaudrate&gt;]   : Baudrate : <span class="number">100</span> or <span class="number">400</span> Kbps, default <span class="number">400</span></span><br><span class="line">     [sm=&lt;smode&gt;]       : Speed <span class="built_in">Mode</span> : STANDARD or FAST, default FAST</span><br><span class="line">     [am=&lt;addmode&gt;]     : Address <span class="built_in">Mode</span> : <span class="number">7</span> or <span class="number">10</span> bits, default <span class="number">7</span></span><br><span class="line">     [af=&lt;afilter&gt;]     : Analog filter : ENABLE or DISABLE, default ENABLE</span><br><span class="line">     [df=&lt;dfilter&gt;]     : Digital filter : ENABLE or DISABLE, default DISABLE</span><br><span class="line">     [dnf=&lt;dnfilter&gt;]   : Digital noise filter : <span class="number">0</span> to <span class="number">15</span>, default <span class="number">0</span></span><br><span class="line">     [rt=&lt;rtime&gt;]       : Rise <span class="built_in">time</span> : <span class="number">0</span>-<span class="number">1000</span>(STANDARD), <span class="number">0</span>-<span class="number">300</span>(FAST), default <span class="number">0</span></span><br><span class="line">     [ft=&lt;ftime&gt;]       : Fall <span class="built_in">time</span> : <span class="number">0</span>-<span class="number">300</span> (STANDARD), <span class="number">0</span>-<span class="number">300</span>(FAST), default <span class="number">0</span></span><br><span class="line">     [noinit=noinit_bit]: <span class="built_in">Set</span> No Init bits, value <span class="keyword">in</span> &#123;<span class="number">0</span>,<span class="number">1</span>&#125; ..., default <span class="number">0</span></span><br><span class="line"> -version, --version    : Displays the tool&#x27;s version</span><br><span class="line"> -l,     --list         : List all available communication interfaces</span><br><span class="line">     &lt;uart&gt;             : UART interface</span><br><span class="line">     &lt;usb&gt;              : USB interface</span><br><span class="line">     &lt;st-link&gt;              : st-link interface</span><br><span class="line"> -q,     --quietMode    : Enable quiet <span class="built_in">mode</span>. No progress bar displayed</span><br><span class="line"> -log,   --log          : Store the detailed output <span class="keyword">in</span> log file</span><br><span class="line">     [&lt;file_Path.log&gt;]  : <span class="built_in">Path</span> of the log file,</span><br><span class="line">                          default <span class="built_in">path</span> = $HOME/.STM32Programmer/trace.log</span><br><span class="line"> -vb,    --verbosity    : Specify verbosity level</span><br><span class="line">     &lt;Level&gt;            : Verbosity level, value <span class="keyword">in</span> &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"> -y, --yes              : Ignore confirmation prompt message</span><br><span class="line"></span><br><span class="line">Available commands <span class="keyword">for</span> STM32 MCU:</span><br><span class="line"></span><br><span class="line"> --skipErase            : Skip sector <span class="built_in">erase</span> before programming</span><br><span class="line"> -sl,    --safelib      : Add a segment into a firmware file (elf,bin</span><br><span class="line">                          hex,srec) containing computed CRC values</span><br><span class="line">                          To use only with the safety lib component</span><br><span class="line">     &lt;file_path&gt;        : File <span class="built_in">path</span> to be modified</span><br><span class="line">     &lt;start_address&gt;    : Flash memory <span class="built_in">start</span> address</span><br><span class="line">     &lt;end_address&gt;      : Flash memory end address</span><br><span class="line">     &lt;slice_size&gt;       : Size of data per CRC value</span><br><span class="line"> -ms,    --mergesbsfu   : Add a binary header and a sbsfu segment to an elf file</span><br><span class="line">     &lt;elf_file_path&gt;    : File <span class="built_in">path</span> to be modified</span><br><span class="line">     &lt;header_file_path&gt; : Header file <span class="built_in">path</span></span><br><span class="line">     &lt;sbsfu_file_path&gt;  : SBSFU file <span class="built_in">path</span></span><br><span class="line"> -e,     --<span class="built_in">erase</span>        : <span class="built_in">Erase</span> memory pages/sectors devices:</span><br><span class="line">                          <span class="keyword">Not</span> supported <span class="keyword">for</span> STM32MP</span><br><span class="line">     [all]              : <span class="built_in">Erase</span> all sectors</span><br><span class="line">     [&lt;sectorsCodes&gt;]   : <span class="built_in">Erase</span> the specified sectors identified by sectors</span><br><span class="line">                          codes. ex: <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span> to <span class="built_in">erase</span> sectors <span class="number">0</span>, <span class="number">1</span> and <span class="number">2</span></span><br><span class="line">                          <span class="keyword">for</span> EEPROM : ed1 &amp; ed2</span><br><span class="line">     [&lt;[<span class="built_in">start</span> end]&gt;]    : <span class="built_in">Erase</span> the specified sectors starting from</span><br><span class="line">                          <span class="built_in">start</span> code to end code, ex: -e [<span class="number">5</span> <span class="number">10</span>]</span><br><span class="line"> -w,     --write</span><br><span class="line"> -d,     --download     : Download the content of a file into device memory</span><br><span class="line">     &lt;file_path&gt;        : File <span class="built_in">path</span> name to be downloaded: (bin, hex, srec,</span><br><span class="line">                          elf, stm32 or tsv file)</span><br><span class="line">     [&lt;address&gt;]        : <span class="built_in">Start</span> address of download</span><br><span class="line"> -w64                   : Write a <span class="number">64</span>-bits data into device memory</span><br><span class="line">     &lt;address&gt;          : <span class="built_in">Start</span> address of download</span><br><span class="line">     &lt;<span class="number">64</span>-bit_data&gt;      : <span class="number">64</span>-bit data to be downloaded</span><br><span class="line">                          values should <span class="keyword">not</span> be separated by space</span><br><span class="line"> -w32                   : Write a <span class="number">32</span>-bits data into device memory</span><br><span class="line">     &lt;address&gt;          : <span class="built_in">Start</span> address of download</span><br><span class="line">     &lt;<span class="number">32</span>-bit_data&gt;      : <span class="number">32</span>-bit data to be downloaded</span><br><span class="line">                          values should be separated by space</span><br><span class="line"> -w16                   : Write a <span class="number">16</span>-bits data into device memory</span><br><span class="line">     &lt;address&gt;          : <span class="built_in">Start</span> address of download</span><br><span class="line">     &lt;<span class="number">16</span>-bit_data&gt;      : <span class="number">16</span>-bit data to be downloaded</span><br><span class="line">                          values should be separated by space</span><br><span class="line"> -w8                    : Write a <span class="number">8</span>-bits data into device memory</span><br><span class="line">     &lt;address&gt;          : <span class="built_in">Start</span> address of download</span><br><span class="line">     &lt;<span class="number">8</span>-bit_data&gt;       : <span class="number">8</span>-bit data to be downloaded</span><br><span class="line">                          values should be separated by space</span><br><span class="line"> -v,     --<span class="built_in">verify</span>       : <span class="built_in">Verify</span> <span class="keyword">if</span> the programming operation is achieved</span><br><span class="line">                          successfully</span><br><span class="line"> -r32                   : Read a <span class="number">32</span>-bit data from device memory</span><br><span class="line">     &lt;address&gt;          : Read <span class="built_in">start</span> address</span><br><span class="line">     &lt;size&gt;             : Size of data</span><br><span class="line"> -r16                   : Read a <span class="number">16</span>-bit data from device memory</span><br><span class="line">     &lt;address&gt;          : Read <span class="built_in">start</span> address</span><br><span class="line">     &lt;size&gt;             : Size of data</span><br><span class="line"> -r8                    : Read a <span class="number">8</span>-bit data from device memory</span><br><span class="line">     &lt;address&gt;          : Read <span class="built_in">start</span> address</span><br><span class="line">     &lt;size&gt;             : Size of data</span><br><span class="line"> -rst                   : Reset system</span><br><span class="line"> -hardRst               : Hardware reset</span><br><span class="line">                          Available only with JTAG/SWD debug port</span><br><span class="line"> -halt                  : Halt core</span><br><span class="line"> -run                   : Run core</span><br><span class="line"> -step                  : Step core</span><br><span class="line">                          Available only with JTAG/SWD debug port</span><br><span class="line"> -score                 : Get core status</span><br><span class="line">                          Available only with JTAG/SWD debug port</span><br><span class="line"> -coreReg               : Read/Write core registers</span><br><span class="line">     [&lt;core_register&gt;]    R0/../R15/PC/LR/PSP/MSP/XPSR/APSR/IPSR/EPSR/</span><br><span class="line">                          PRIMASK/BASEPRI/FAULTMASK/CONTROL</span><br><span class="line">     [core_reg=&lt;value&gt;]   value <span class="keyword">in</span> case of write opration</span><br><span class="line"><span class="function">                          Note: <span class="title">multiple</span> <span class="title">registers</span> <span class="title">can</span> <span class="title">be</span> <span class="title">handled</span> <span class="title">at</span> <span class="title">once</span></span></span><br><span class="line"><span class="function">                          <span class="title">Available</span> <span class="title">only</span> <span class="title">with</span> <span class="title">JTAG</span>/<span class="title">SWD</span> <span class="title">debug</span> <span class="title">port</span></span></span><br><span class="line"><span class="function"> -<span class="title">bkpt</span>                  : <span class="title">Set</span> <span class="title">a</span> <span class="title">breakpoint</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">Breakpoint</span> <span class="title">address</span></span></span><br><span class="line"><span class="function"> -<span class="title">clrbkpt</span>               : <span class="title">Clear</span> <span class="title">a</span> <span class="title">breakpoint</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">Breakpoint</span> <span class="title">address</span></span></span><br><span class="line"><span class="function"> -<span class="title">r</span>,     --<span class="title">read</span></span></span><br><span class="line"><span class="function"> -<span class="title">u</span>,     --<span class="title">upload</span>       : <span class="title">Upload</span> <span class="title">the</span> <span class="title">device</span> <span class="title">memory</span> <span class="title">content</span> <span class="title">to</span> <span class="title">a</span> .<span class="title">bin</span>/.<span class="title">hex</span>/.<span class="title">srec</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">Start</span> <span class="title">address</span> <span class="title">of</span> <span class="title">read</span> <span class="title">and</span> <span class="title">upload</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">size</span>&gt;             : <span class="title">Size</span> <span class="title">of</span> <span class="title">memory</span> <span class="title">content</span> <span class="title">to</span> <span class="title">be</span> <span class="title">read</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">file</span> <span class="title">path</span> <span class="title">with</span> .<span class="title">bin</span>/.<span class="title">hex</span>/.<span class="title">srec</span> <span class="title">extension</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">el</span>,     --<span class="title">extload</span>     : <span class="title">Select</span> <span class="title">a</span> <span class="title">custom</span> <span class="title">external</span> <span class="title">memory</span>-<span class="title">loader</span> <span class="title">for</span> <span class="title">JTAG</span>/<span class="title">SWD</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">External</span> <span class="title">memory</span>-<span class="title">loader</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"> -<span class="title">elbl</span>,   --<span class="title">extloadbl</span>   : <span class="title">Select</span> <span class="title">a</span> <span class="title">custom</span> <span class="title">external</span> <span class="title">memory</span>-<span class="title">loader</span> <span class="title">for</span> <span class="title">Bootloader</span> <span class="title">interface</span> (<span class="title">SFIx</span> <span class="title">only</span>)</span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">External</span> <span class="title">memory</span>-<span class="title">loader</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"> -<span class="title">s</span>,     --<span class="title">start</span></span></span><br><span class="line"><span class="function"> -<span class="title">g</span>,     --<span class="title">go</span>           : <span class="title">Run</span> <span class="title">the</span> <span class="title">code</span> <span class="title">at</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">address</span>.</span></span><br><span class="line"><span class="function">     [&lt;<span class="title">address</span>&gt;]        : <span class="title">Start</span> <span class="title">address</span></span></span><br><span class="line"><span class="function"> -<span class="title">rdu</span>,   --<span class="title">readunprotect</span>: <span class="title">Remove</span> <span class="title">memory</span>&#x27;<span class="title">s</span> <span class="title">Read</span> <span class="title">Protection</span> <span class="title">by</span> <span class="title">shifting</span> <span class="title">the</span> <span class="title">RDP</span></span></span><br><span class="line"><span class="function">                          <span class="title">level</span> <span class="title">from</span> <span class="title">level</span> 1 <span class="title">to</span> <span class="title">level</span> 0.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">tzenreg</span>,   --<span class="title">tzenregression</span>: <span class="title">Remove</span> <span class="title">TrustZone</span> <span class="title">Protection</span> <span class="title">by</span> <span class="title">disabling</span> <span class="title">the</span> <span class="title">TZEN</span></span></span><br><span class="line"><span class="function">                           <span class="title">from</span> 1 <span class="title">to</span> 0.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">ob</span>,    --<span class="title">optionbytes</span>  : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">manipulate</span> <span class="title">the</span> <span class="title">device</span></span></span><br><span class="line"><span class="function">                          &#x27;<span class="title">s</span> <span class="title">OptionBytes</span> <span class="title">by</span> <span class="title">displaying</span> <span class="title">or</span> <span class="title">modifying</span> <span class="title">them</span>.</span></span><br><span class="line"><span class="function">      [<span class="title">displ</span>]           : <span class="title">This</span> <span class="title">option</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">display</span> <span class="title">the</span> <span class="title">whole</span> <span class="title">set</span></span></span><br><span class="line"><span class="function">                          <span class="title">of</span> <span class="title">Option</span> <span class="title">Bytes</span>.</span></span><br><span class="line"><span class="function">      [<span class="title">OptByte</span>=&lt;<span class="title">value</span>&gt;] : <span class="title">This</span> <span class="title">option</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">program</span> <span class="title">the</span> <span class="title">given</span></span></span><br><span class="line"><span class="function">                          <span class="title">Option</span> <span class="title">Byte</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">lockRDP1</span>              : <span class="title">Lock</span> <span class="title">RDP</span> <span class="title">level</span> 1</span></span><br><span class="line"><span class="function">     &lt;<span class="title">first_half</span>&gt;       : <span class="title">First</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">second_half</span>&gt;      : <span class="title">Second</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function"> -<span class="title">unlockRDP1</span>            : <span class="title">Unlock</span> <span class="title">RDP</span> <span class="title">level</span> 1</span></span><br><span class="line"><span class="function">     &lt;<span class="title">first_half</span>&gt;       : <span class="title">First</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">second_half</span>&gt;      : <span class="title">Second</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function"> -<span class="title">lockRDP2</span>              : <span class="title">Lock</span> <span class="title">RDP</span> <span class="title">level</span> 2</span></span><br><span class="line"><span class="function">     &lt;<span class="title">first_half</span>&gt;       : <span class="title">First</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">second_half</span>&gt;      : <span class="title">Second</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function"> -<span class="title">unlockRDP2</span>            : <span class="title">Unlock</span> <span class="title">RDP</span> <span class="title">level</span> 2</span></span><br><span class="line"><span class="function">     &lt;<span class="title">first_half</span>&gt;       : <span class="title">First</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">second_half</span>&gt;      : <span class="title">Second</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function"> -<span class="title">ssigfoxc</span>              : <span class="title">Save</span> <span class="title">the</span> <span class="title">chip</span> <span class="title">Certificate</span>,</span></span><br><span class="line"><span class="function">                          <span class="title">supported</span> <span class="title">for</span> <span class="title">STM32WL</span> <span class="title">devices</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">Certificate</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">wsigfoxc</span>              : <span class="title">Write</span> <span class="title">the</span> <span class="title">Sigfox</span> <span class="title">credential</span>,</span></span><br><span class="line"><span class="function">                          <span class="title">supported</span> <span class="title">for</span> <span class="title">STM32WL</span> <span class="title">devices</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">Certificate</span> <span class="title">file</span> <span class="title">path</span> (<span class="title">binary</span>, <span class="title">header</span>)</span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">start</span> <span class="title">address</span> <span class="title">for</span> <span class="title">write</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">fillmemory</span>            : <span class="title">Fill</span> <span class="title">memory</span> <span class="title">with</span> <span class="title">the</span> <span class="title">given</span> <span class="title">pattern</span> <span class="title">from</span> <span class="title">the</span> <span class="title">chosen</span> <span class="title">address</span>.</span></span><br><span class="line"><span class="function">     &lt;<span class="title">start_address</span>&gt;    : <span class="title">Start</span> <span class="title">address</span> <span class="title">for</span> <span class="title">write</span>. <span class="title">The</span> <span class="title">address</span> 0<span class="title">x08000000</span> <span class="title">is</span> <span class="title">used</span> <span class="title">by</span> <span class="title">default</span></span></span><br><span class="line"><span class="function">     [<span class="title">size</span>=&lt;<span class="title">value</span>&gt;]     : <span class="title">Size</span> <span class="title">of</span> <span class="title">the</span> <span class="title">data</span> <span class="title">to</span> <span class="title">write</span></span></span><br><span class="line"><span class="function">     [<span class="title">pattern</span>=&lt;<span class="title">value</span>&gt;]  : <span class="title">The</span> <span class="title">pattern</span> <span class="title">value</span> <span class="title">to</span> <span class="title">write</span>.</span></span><br><span class="line"><span class="function">     [<span class="title">dataWidth</span>=8|16|32]: <span class="title">The</span> <span class="title">filling</span> <span class="title">data</span> <span class="title">size</span>:</span></span><br><span class="line"><span class="function">                          8 <span class="title">bits</span> <span class="title">is</span> <span class="title">selected</span> <span class="title">by</span> <span class="title">default</span>.</span></span><br><span class="line"><span class="function"> -<span class="title">blankcheck</span>            : <span class="title">Verifies</span> <span class="title">that</span> <span class="title">the</span> <span class="title">STM32</span> <span class="title">Flash</span> <span class="title">memory</span> <span class="title">is</span> <span class="title">blank</span>.</span></span><br><span class="line"><span class="function">                          <span class="title">If</span> <span class="title">the</span> <span class="title">Flash</span> <span class="title">memory</span> <span class="title">is</span> <span class="title">not</span> <span class="title">blank</span>, <span class="title">the</span> <span class="title">first</span> <span class="title">address</span> <span class="title">with</span> <span class="title">data</span> <span class="title">is</span> <span class="title">highlighted</span> <span class="title">in</span> <span class="title">a</span> <span class="title">message</span>.</span></span><br><span class="line"><span class="function"><span class="title">Beta</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">regdump</span>                     : <span class="title">Read</span> <span class="title">and</span> <span class="title">dump</span> <span class="title">Core</span> <span class="title">and</span> <span class="title">MCU</span> <span class="title">registers</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path.log</span>&gt;          : <span class="title">Log</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     [<span class="title">choice</span>=&lt;<span class="title">number</span>&gt;]        : <span class="title">Device</span> <span class="title">number</span> <span class="title">from</span> <span class="title">the</span> <span class="title">list</span> <span class="title">of</span> <span class="title">compatible</span> <span class="title">devices</span> (<span class="title">optional</span>), <span class="title">this</span> <span class="title">list</span></span></span><br><span class="line"><span class="function">                                <span class="title">is</span> <span class="title">displayed</span> <span class="title">if</span> <span class="title">the</span> <span class="title">command</span> <span class="title">is</span> <span class="title">performed</span> <span class="title">without</span> <span class="title">this</span> <span class="title">optional</span> <span class="title">argument</span></span></span><br><span class="line"><span class="function"> -<span class="title">hf</span>                          : <span class="title">Hard</span> <span class="title">fault</span> <span class="title">analyzer</span></span></span><br><span class="line"><span class="function">                                <span class="title">Helps</span> <span class="title">to</span> <span class="title">identify</span> <span class="title">system</span> <span class="title">faults</span> <span class="title">that</span> <span class="title">occur</span> <span class="title">when</span> <span class="title">the</span> <span class="title">CPU</span></span></span><br><span class="line"><span class="function">                                <span class="title">is</span> <span class="title">driven</span> <span class="title">into</span> <span class="title">a</span> <span class="title">fault</span> <span class="title">condition</span> <span class="title">by</span> <span class="title">the</span> <span class="title">application</span> <span class="title">code</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Available</span> <span class="title">commands</span> <span class="title">for</span> <span class="title">STM32</span> <span class="title">MPU</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">c</span>,     --<span class="title">connect</span>      : <span class="title">Establish</span> <span class="title">connection</span> <span class="title">to</span> <span class="title">the</span> <span class="title">device</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">port</span>=&lt;<span class="title">PortName</span>&gt;   : <span class="title">Interface</span> <span class="title">identifer</span>. <span class="title">ex</span> <span class="title">COM1</span>, /<span class="title">dev</span>/<span class="title">ttyS0</span>, <span class="title">usb1</span>)</span></span><br><span class="line"><span class="function">    <span class="title">USB</span> <span class="title">port</span> <span class="title">optional</span> <span class="title">parameters</span>:</span></span><br><span class="line"><span class="function">     [<span class="title">sn</span>=&lt;<span class="title">serialNum</span>&gt;]   : <span class="title">Serial</span> <span class="title">number</span> <span class="title">of</span> <span class="title">the</span> <span class="title">usb</span> <span class="title">dfu</span></span></span><br><span class="line"><span class="function">     [<span class="title">serial</span>]           : <span class="title">Activate</span> <span class="title">USB</span> <span class="title">serial</span> <span class="title">Gadget</span> <span class="title">for</span> <span class="title">MPU</span> <span class="title">devices</span></span></span><br><span class="line"><span class="function">    <span class="title">UART</span> <span class="title">port</span> <span class="title">optional</span> <span class="title">parameters</span>:</span></span><br><span class="line"><span class="function">     [<span class="title">br</span>=&lt;<span class="title">baudrate</span>&gt;]    : <span class="title">Baudrate</span>. <span class="title">ex</span>: 115200, 9600, <span class="title">etc</span>, <span class="title">default</span> 115200</span></span><br><span class="line"><span class="function">     [<span class="title">P</span>=&lt;<span class="title">parity</span>&gt;]       : <span class="title">Parity</span> <span class="title">bit</span>, <span class="title">value</span> <span class="title">in</span> &#123;<span class="title">NONE</span>,<span class="title">ODD</span>,<span class="title">EVEN</span>&#125;, <span class="title">default</span> <span class="title">NONE</span></span></span><br><span class="line"><span class="function">     [<span class="title">db</span>=&lt;<span class="title">data_bits</span>&gt;]   : <span class="title">Data</span> <span class="title">bit</span>, <span class="title">value</span> <span class="title">in</span> &#123;6, 7, 8&#125; ..., <span class="title">default</span> 8</span></span><br><span class="line"><span class="function">     [<span class="title">sb</span>=&lt;<span class="title">stop_bits</span>&gt;]   : <span class="title">Stop</span> <span class="title">bit</span>, <span class="title">value</span> <span class="title">in</span> &#123;1, 1.5, 2&#125; ..., <span class="title">default</span> 1</span></span><br><span class="line"><span class="function">     [<span class="title">fc</span>=&lt;<span class="title">flowControl</span>&gt;] : <span class="title">Flow</span> <span class="title">control</span> (<span class="title">Not</span> <span class="title">yet</span> <span class="title">supported</span> <span class="title">for</span> <span class="title">STM32MP</span>)</span></span><br><span class="line"><span class="function">                          <span class="title">Value</span> <span class="title">in</span> &#123;<span class="title">OFF</span>,<span class="title">Hardware</span>,<span class="title">Software</span>&#125; ..., <span class="title">default</span> <span class="title">OFF</span></span></span><br><span class="line"><span class="function">     [<span class="title">noinit</span>=<span class="title">noinit_bit</span>]: <span class="title">Set</span> <span class="title">No</span> <span class="title">Init</span> <span class="title">bits</span>, <span class="title">value</span> <span class="title">in</span> &#123;0,1&#125; ..., <span class="title">default</span> 0</span></span><br><span class="line"><span class="function"> -<span class="title">s</span>,     --<span class="title">start</span></span></span><br><span class="line"><span class="function"> -<span class="title">g</span>,     --<span class="title">go</span>           : <span class="title">Run</span> <span class="title">the</span> <span class="title">code</span> <span class="title">at</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">partition</span> <span class="title">ID</span>.</span></span><br><span class="line"><span class="function">     [&lt;<span class="title">partitionID</span>&gt;]    : <span class="title">Partition</span> <span class="title">ID</span></span></span><br><span class="line"><span class="function">                          <span class="title">If</span> <span class="title">not</span> <span class="title">specified</span>, <span class="title">last</span> <span class="title">loaded</span> <span class="title">partition</span></span></span><br><span class="line"><span class="function">                          <span class="title">will</span> <span class="title">be</span> <span class="title">started</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">startAdress</span>&gt;]    : <span class="title">Start</span> <span class="title">address</span></span></span><br><span class="line"><span class="function">                          <span class="title">If</span> <span class="title">not</span> <span class="title">specified</span>, <span class="title">last</span> <span class="title">loaded</span> <span class="title">segment</span> <span class="title">address</span></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">noack</span>&gt;]          : <span class="title">No</span> <span class="title">acknowledgment</span> <span class="title">required</span></span></span><br><span class="line"><span class="function">                          <span class="title">If</span> <span class="title">not</span> <span class="title">specified</span>, <span class="title">acknowledgment</span> <span class="title">will</span> <span class="title">be</span> <span class="title">required</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">detach</span>                : <span class="title">Send</span> <span class="title">detach</span> <span class="title">command</span> <span class="title">to</span> <span class="title">DFU</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">wb</span>                    : <span class="title">Write</span> <span class="title">blob</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">     &lt;<span class="title">blob_file_path</span>&gt;   : <span class="title">Blob</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"> -<span class="title">pmic</span>                  : <span class="title">Program</span> <span class="title">PMIC</span> <span class="title">NVM</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">     &lt;<span class="title">PMIC</span> <span class="title">file_path</span>&gt;   : <span class="title">PMIC</span> <span class="title">file_path</span></span></span><br><span class="line"><span class="function"> -<span class="title">gc</span>, --<span class="title">getcertificate</span>  : <span class="title">Get</span> <span class="title">the</span> <span class="title">chip</span> <span class="title">Certificate</span>,</span></span><br><span class="line"><span class="function">                          <span class="title">supported</span> <span class="title">for</span> <span class="title">devices</span> <span class="title">with</span> <span class="title">security</span> <span class="title">features</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">Certificate</span> <span class="title">file</span> <span class="title">path</span> <span class="title">into</span> <span class="title">which</span> <span class="title">the</span> <span class="title">chip</span></span></span><br><span class="line"><span class="function">                          <span class="title">certificate</span> <span class="title">will</span> <span class="title">be</span> <span class="title">uploaded</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">p</span>,     --<span class="title">phaseID</span>      : <span class="title">Display</span> <span class="title">the</span> <span class="title">current</span> <span class="title">partition</span> <span class="title">ID</span> <span class="title">to</span> <span class="title">be</span> <span class="title">loaded</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">w</span>,     --<span class="title">write</span></span></span><br><span class="line"><span class="function"> -<span class="title">d</span>,     --<span class="title">download</span>     : <span class="title">Download</span> <span class="title">the</span> <span class="title">content</span> <span class="title">of</span> <span class="title">a</span> <span class="title">file</span> <span class="title">into</span> <span class="title">device</span> <span class="title">memory</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">File</span> <span class="title">path</span> <span class="title">name</span> <span class="title">to</span> <span class="title">be</span> <span class="title">downloaded</span>: (<span class="title">bin</span>, <span class="title">stm32</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">partition_id</span>&gt;     : <span class="title">Partition</span> <span class="title">ID</span> <span class="title">to</span> <span class="title">be</span> <span class="title">downloaded</span></span></span><br><span class="line"><span class="function"> -<span class="title">rp</span>,    --<span class="title">readPart</span>     : <span class="title">Upload</span> <span class="title">a</span> <span class="title">memory</span> <span class="title">partion</span> <span class="title">ID</span> <span class="title">content</span> <span class="title">to</span> <span class="title">a</span> .<span class="title">bin</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">partionID</span>&gt;        : <span class="title">Partion</span> <span class="title">to</span> <span class="title">be</span> <span class="title">read</span></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">offset</span> <span class="title">address</span>&gt;] : <span class="title">Offset</span> <span class="title">address</span> <span class="title">of</span> <span class="title">read</span> <span class="title">and</span> <span class="title">upload</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">size</span>&gt;             : <span class="title">Size</span> <span class="title">of</span> <span class="title">partion</span> <span class="title">content</span> <span class="title">to</span> <span class="title">be</span> <span class="title">read</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">Binary</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">ssp</span>, --<span class="title">ssp</span>                  : <span class="title">Program</span> <span class="title">an</span> <span class="title">SSP</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">ssp_file_path</span>&gt;          : <span class="title">SSP</span> <span class="title">file</span> <span class="title">path</span> <span class="title">to</span> <span class="title">be</span> <span class="title">programmed</span>, <span class="title">bin</span> <span class="title">or</span> <span class="title">ssp</span> <span class="title">extension</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">ssp</span>-<span class="title">fw</span>-<span class="title">path</span>&gt;            : <span class="title">SSP</span> <span class="title">signed</span> <span class="title">firmware</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     [<span class="title">hsm</span>=0|1]                : <span class="title">Set</span> <span class="title">user</span> <span class="title">option</span> <span class="title">for</span> <span class="title">HSM</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">                                <span class="title">value</span> <span class="title">in</span> &#123;0 (<span class="title">do</span> <span class="title">not</span> <span class="title">use</span> <span class="title">HSM</span>), 1 (<span class="title">use</span> <span class="title">HSM</span>)&#125;</span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> : <span class="title">hsm</span>=0</span></span><br><span class="line"><span class="function">     &lt;<span class="title">lic_path</span>|<span class="title">slot</span>=<span class="title">slotID</span>&gt;   : <span class="title">Path</span> <span class="title">to</span> <span class="title">the</span> <span class="title">license</span> <span class="title">file</span> (<span class="title">if</span> <span class="title">hsm</span>=0)</span></span><br><span class="line"><span class="function">                                <span class="title">or</span> <span class="title">reader</span> <span class="title">slot</span> <span class="title">ID</span> <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">used</span> (<span class="title">hsm</span>=1)</span></span><br><span class="line"><span class="function"> -<span class="title">tm</span>                          : <span class="title">Force</span> <span class="title">timeout</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">value</span>&gt;                  : <span class="title">Number</span> <span class="title">of</span> <span class="title">milliseconds</span></span></span><br><span class="line"><span class="function"> -<span class="title">rst</span>                         : <span class="title">Reset</span> <span class="title">USB</span> <span class="title">device</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="title">OTP</span> <span class="title">structure</span> <span class="title">v1</span> <span class="title">commands</span> (<span class="title">for</span> <span class="title">STM32MP15xx</span>):</span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">program</span>           : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">program</span> <span class="title">SAFMEM</span></span></span><br><span class="line"><span class="function">                          <span class="title">memory</span> <span class="title">by</span> <span class="title">modifying</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">words</span></span></span><br><span class="line"><span class="function">      [<span class="title">wordID</span>=&lt;<span class="title">value</span>&gt;]  : <span class="title">This</span> <span class="title">field</span> <span class="title">contains</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">word</span> <span class="title">number</span></span></span><br><span class="line"><span class="function">      [<span class="title">value</span>=&lt;<span class="title">value</span>&gt;]   : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">chosen</span> <span class="title">OTP</span> <span class="title">word</span></span></span><br><span class="line"><span class="function">      [<span class="title">sha_rsl</span>=&lt;<span class="title">value</span>&gt;] : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">corresponding</span> <span class="title">shadow</span> <span class="title">read</span></span></span><br><span class="line"><span class="function">                          <span class="title">sticky</span> <span class="title">lock</span> <span class="title">bit</span></span></span><br><span class="line"><span class="function">      [<span class="title">sha_wsl</span>=&lt;<span class="title">value</span>&gt;] : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">corresponding</span> <span class="title">shadow</span> <span class="title">write</span></span></span><br><span class="line"><span class="function">                          <span class="title">sticky</span> <span class="title">lock</span> <span class="title">bit</span></span></span><br><span class="line"><span class="function">      [<span class="title">sl</span>=&lt;<span class="title">value</span>&gt;]      : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">corresponding</span> <span class="title">programming</span> <span class="title">sticky</span></span></span><br><span class="line"><span class="function">                          <span class="title">lock</span> <span class="title">bit</span></span></span><br><span class="line"><span class="function">      [<span class="title">pl</span>=&lt;<span class="title">value</span>&gt;]      : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">corresponding</span> <span class="title">programming</span> <span class="title">perma</span>-</span></span><br><span class="line"><span class="function">                          <span class="title">nent</span> <span class="title">lock</span> <span class="title">bit</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">displ</span>             : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">display</span> <span class="title">all</span> <span class="title">or</span> <span class="title">parts</span></span></span><br><span class="line"><span class="function">                          <span class="title">of</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">structure</span></span></span><br><span class="line"><span class="function">      [<span class="title">upper</span>]           : <span class="title">Displays</span> <span class="title">the</span> <span class="title">loaded</span> <span class="title">upper</span> <span class="title">OTP</span> <span class="title">shadow</span> <span class="title">registers</span></span></span><br><span class="line"><span class="function">                          <span class="title">values</span> <span class="title">and</span> <span class="title">status</span></span></span><br><span class="line"><span class="function">      [<span class="title">lower</span>]           : <span class="title">Displays</span> <span class="title">the</span> <span class="title">loaded</span> <span class="title">lower</span> <span class="title">OTP</span> <span class="title">shadow</span> <span class="title">registers</span></span></span><br><span class="line"><span class="function">                          <span class="title">values</span> <span class="title">and</span> <span class="title">status</span></span></span><br><span class="line"><span class="function">      [<span class="title">ctrl</span>]            : <span class="title">Displays</span> <span class="title">the</span> <span class="title">loaded</span> <span class="title">BSEC</span> <span class="title">control</span> <span class="title">registers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="title">OTP</span> <span class="title">structure</span> <span class="title">v2</span> <span class="title">commands</span> (<span class="title">except</span> <span class="title">STM32MP15xx</span>):</span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">displ</span>             : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">display</span> <span class="title">all</span> <span class="title">or</span> <span class="title">parts</span></span></span><br><span class="line"><span class="function">                          <span class="title">of</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">structure</span></span></span><br><span class="line"><span class="function">      [<span class="title">word</span>=&lt;<span class="title">id</span>&gt;]       : &#123;<span class="title">Optional</span>&#125; <span class="title">display</span> <span class="title">a</span> <span class="title">specific</span> <span class="title">OTP</span> <span class="title">registers</span> &#123;<span class="title">values</span> <span class="title">and</span> <span class="title">status</span>&#125;</span></span><br><span class="line"><span class="function">                          <span class="title">Up</span> <span class="title">to</span> 96 <span class="title">OTP</span> <span class="title">words</span> [0 <span class="title">to</span> 95], <span class="title">id</span> <span class="title">value</span> <span class="title">in</span> <span class="title">hex</span>/<span class="title">dec</span> <span class="title">format</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">write</span>             : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">to</span> <span class="title">fuse</span> <span class="title">or</span> <span class="title">update</span> <span class="title">OTP</span> <span class="title">words</span></span></span><br><span class="line"><span class="function">                          <span class="title">Up</span> <span class="title">to</span> 96 <span class="title">OTP</span> <span class="title">words</span> [0 <span class="title">to</span> 95] <span class="title">at</span> <span class="title">the</span> <span class="title">same</span> <span class="title">command</span> <span class="title">line</span></span></span><br><span class="line"><span class="function">      [<span class="title">lock</span>]            : &#123;<span class="title">Optional</span>&#125; <span class="title">indicate</span> <span class="title">the</span> <span class="title">operation</span> <span class="title">type</span>, <span class="title">update</span> <span class="title">or</span> <span class="title">permanent</span> <span class="title">lock</span></span></span><br><span class="line"><span class="function">      [<span class="title">word</span>=&lt;<span class="title">id</span>&gt;]       : <span class="title">This</span> <span class="title">field</span> <span class="title">contains</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">word</span> <span class="title">number</span> <span class="title">in</span> <span class="title">hex</span>/<span class="title">dec</span> <span class="title">format</span></span></span><br><span class="line"><span class="function">      [<span class="title">value</span>=&lt;<span class="title">value</span>&gt;]   : <span class="title">Value</span> <span class="title">to</span> <span class="title">be</span> <span class="title">written</span> <span class="title">in</span> <span class="title">hex</span> <span class="title">format</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">lock</span>              : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">to</span> <span class="title">fuse</span> <span class="title">permanently</span> <span class="title">OTP</span> <span class="title">words</span></span></span><br><span class="line"><span class="function">                          <span class="title">Up</span> <span class="title">to</span> 96 <span class="title">OTP</span> <span class="title">words</span> [0 <span class="title">to</span> 95] <span class="title">at</span> <span class="title">the</span> <span class="title">same</span> <span class="title">command</span> <span class="title">line</span></span></span><br><span class="line"><span class="function">      [<span class="title">word</span>=&lt;<span class="title">id</span>&gt;]       : <span class="title">This</span> <span class="title">field</span> <span class="title">contains</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">word</span> <span class="title">number</span> <span class="title">in</span> <span class="title">hex</span>/<span class="title">dec</span> <span class="title">format</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">fwrite</span>            : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">to</span> <span class="title">program</span> <span class="title">a</span> <span class="title">binary</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">      [<span class="title">lock</span>]            : &#123;<span class="title">Optional</span>&#125; <span class="title">indicate</span> <span class="title">the</span> <span class="title">operation</span> <span class="title">type</span>, <span class="title">update</span> <span class="title">or</span> <span class="title">permanent</span> <span class="title">lock</span></span></span><br><span class="line"><span class="function">      &lt;<span class="title">bin_path</span>&gt;        : <span class="title">Binary</span> <span class="title">file</span> <span class="title">path</span>, 32-<span class="title">bits</span> <span class="title">aligned</span></span></span><br><span class="line"><span class="function">      [<span class="title">word</span>=&lt;<span class="title">id</span>&gt;]       : <span class="title">OTP</span> <span class="title">word</span> <span class="title">number</span> <span class="title">in</span> <span class="title">hex</span>/<span class="title">dec</span> <span class="title">format</span>, <span class="title">start</span> <span class="title">word</span> <span class="title">of</span> <span class="title">program</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">MCU</span> <span class="title">Secure</span> <span class="title">programming</span> <span class="title">specific</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">sfi</span>, --<span class="title">sfi</span>                  : <span class="title">Program</span> <span class="title">an</span> <span class="title">sfi</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">protocol</span>=<span class="title">Ptype</span>&gt;]       : <span class="title">Protocol</span> <span class="title">type</span> <span class="title">to</span> <span class="title">be</span> <span class="title">used</span> : <span class="title">static</span>/<span class="title">live</span></span></span><br><span class="line"><span class="function">                                <span class="title">Only</span> <span class="title">static</span> <span class="title">protocol</span> <span class="title">is</span> <span class="title">supported</span> <span class="title">so</span> <span class="title">far</span></span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> <span class="title">static</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;              : <span class="title">Path</span> <span class="title">of</span> <span class="title">sfi</span> <span class="title">file</span> <span class="title">to</span> <span class="title">be</span> <span class="title">programmed</span></span></span><br><span class="line"><span class="function">     [<span class="title">hsm</span>=0|1]                : <span class="title">Set</span> <span class="title">user</span> <span class="title">option</span> <span class="title">for</span> <span class="title">HSM</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">                                <span class="title">value</span> <span class="title">in</span> &#123;0 (<span class="title">do</span> <span class="title">not</span> <span class="title">use</span> <span class="title">HSM</span>), 1 (<span class="title">use</span> <span class="title">HSM</span>)&#125;</span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> : <span class="title">hsm</span>=0</span></span><br><span class="line"><span class="function">     &lt;<span class="title">lic_path</span>|<span class="title">slot</span>=<span class="title">slotID</span>&gt;   : <span class="title">Path</span> <span class="title">to</span> <span class="title">the</span> <span class="title">SFI</span> <span class="title">license</span> <span class="title">file</span> (<span class="title">if</span> <span class="title">hsm</span>=0)</span></span><br><span class="line"><span class="function">                                <span class="title">or</span> <span class="title">reader</span> <span class="title">slot</span> <span class="title">ID</span> <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">used</span> (<span class="title">hsm</span>=1)</span></span><br><span class="line"><span class="function">   [&lt;<span class="title">licMod_path</span>&gt;|<span class="title">slot</span>=<span class="title">slotID</span>]: <span class="title">list</span> <span class="title">of</span> <span class="title">the</span> <span class="title">integrated</span> <span class="title">SMI</span> <span class="title">license</span> <span class="title">files</span> <span class="title">paths</span></span></span><br><span class="line"><span class="function">                                <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">not</span> <span class="title">used</span> (<span class="title">hsm</span>=0)</span></span><br><span class="line"><span class="function">                                <span class="title">Or</span> <span class="title">readers</span> <span class="title">slot</span> <span class="title">IDs</span> <span class="title">list</span> <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">used</span> (<span class="title">hsm</span>=1)</span></span><br><span class="line"><span class="function">                                <span class="title">Used</span> <span class="title">only</span> <span class="title">in</span> <span class="title">combined</span> <span class="title">case</span></span></span><br><span class="line"><span class="function">                                <span class="title">the</span> <span class="title">list</span> <span class="title">order</span> <span class="title">should</span> <span class="title">correspond</span> <span class="title">to</span></span></span><br><span class="line"><span class="function">                                <span class="title">modules</span> <span class="title">integration</span> <span class="title">order</span> <span class="title">within</span> <span class="title">the</span> <span class="title">SFI</span> <span class="title">file</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">smi</span>, --<span class="title">smi</span>                  : <span class="title">Program</span> <span class="title">an</span> <span class="title">smi</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">protocol</span>=<span class="title">Ptype</span>&gt;         : <span class="title">Protocol</span> <span class="title">type</span> <span class="title">to</span> <span class="title">be</span> <span class="title">used</span> : <span class="title">static</span>/<span class="title">live</span></span></span><br><span class="line"><span class="function">                                <span class="title">Only</span> <span class="title">static</span> <span class="title">protocol</span> <span class="title">is</span> <span class="title">supported</span> <span class="title">so</span> <span class="title">far</span></span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> <span class="title">static</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;              : <span class="title">Path</span> <span class="title">of</span> <span class="title">smi</span> <span class="title">file</span> <span class="title">to</span> <span class="title">be</span> <span class="title">programmed</span></span></span><br><span class="line"><span class="function">     [<span class="title">hsm</span>=0|1]                : <span class="title">Set</span> <span class="title">user</span> <span class="title">option</span> <span class="title">for</span> <span class="title">HSM</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">                                <span class="title">value</span> <span class="title">in</span> &#123;0 (<span class="title">do</span> <span class="title">not</span> <span class="title">use</span> <span class="title">HSM</span>), 1 (<span class="title">use</span> <span class="title">HSM</span>)&#125;</span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> : <span class="title">hsm</span>=0</span></span><br><span class="line"><span class="function">     [&lt;<span class="title">address</span>&gt;]              : <span class="title">Destination</span> <span class="title">address</span> <span class="title">of</span> <span class="title">the</span> <span class="title">smi</span> <span class="title">module</span></span></span><br><span class="line"><span class="function">                                <span class="title">needed</span> <span class="title">only</span> <span class="title">for</span> <span class="title">relocatable</span> <span class="title">SMI</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">lic_path</span>|<span class="title">slot</span>=<span class="title">slotID</span>&gt;   : <span class="title">Path</span> <span class="title">to</span> <span class="title">the</span> <span class="title">SMI</span> <span class="title">license</span> <span class="title">file</span> (<span class="title">if</span> <span class="title">hsm</span>=0)</span></span><br><span class="line"><span class="function">                                <span class="title">or</span> <span class="title">reader</span> <span class="title">slot</span> <span class="title">ID</span> <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">used</span> (<span class="title">hsm</span>=1)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">rsse</span>, --<span class="title">rsse</span>                : <span class="title">Set</span> <span class="title">the</span> <span class="title">RSSe</span> <span class="title">file</span> <span class="title">path</span>,</span></span><br><span class="line"><span class="function">                                <span class="title">supported</span> <span class="title">for</span> <span class="title">devices</span> <span class="title">with</span> <span class="title">security</span> <span class="title">extension</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;              : <span class="title">RSSe</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">a</span>, --<span class="title">abort</span>                  : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span></span></span><br><span class="line"><span class="function">                                <span class="title">to</span> <span class="title">clean</span> <span class="title">a</span> <span class="title">not</span> <span class="title">properly</span> <span class="title">finished</span> <span class="title">process</span>.</span></span><br><span class="line"><span class="function">                                <span class="title">The</span> <span class="title">currently</span> <span class="title">ongoing</span> <span class="title">operation</span> <span class="title">will</span> <span class="title">stop</span></span></span><br><span class="line"><span class="function">                                <span class="title">and</span> <span class="title">the</span> <span class="title">system</span> <span class="title">will</span> <span class="title">return</span> <span class="title">to</span> <span class="title">idle</span> <span class="title">state</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">dsecurity</span>                   : <span class="title">Disable</span> <span class="title">the</span> <span class="title">security</span> <span class="title">for</span> <span class="title">STM32WL</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">setdefaultob</span>                : <span class="title">Set</span> <span class="title">default</span> <span class="title">Option</span> <span class="title">Bytes</span> <span class="title">for</span> <span class="title">STM32WL</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">rssgetversion</span>, --<span class="title">rssgetversion</span> : <span class="title">get</span> <span class="title">the</span> <span class="title">version</span> <span class="title">of</span> <span class="title">RSS</span></span></span><br><span class="line"><span class="function"><span class="title">HSM</span> <span class="title">related</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetinfo</span>                : <span class="title">Read</span> <span class="title">the</span> <span class="title">HSM</span> <span class="title">available</span> <span class="title">information</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetcounter</span>             : <span class="title">Read</span> <span class="title">the</span> <span class="title">current</span> <span class="title">value</span> <span class="title">of</span> <span class="title">the</span> <span class="title">license</span> <span class="title">counter</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetfwid</span>                : <span class="title">Read</span> <span class="title">the</span> <span class="title">Firmware</span>/<span class="title">Module</span> <span class="title">Identifier</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetstatus</span>              : <span class="title">Read</span> <span class="title">the</span> <span class="title">current</span> <span class="title">card</span> <span class="title">life</span>-<span class="title">cycle</span> <span class="title">state</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetlicense</span>             : <span class="title">Get</span> <span class="title">a</span> <span class="title">license</span> <span class="title">for</span> <span class="title">the</span> <span class="title">current</span> <span class="title">chip</span></span></span><br><span class="line"><span class="function">                              <span class="title">if</span> <span class="title">counter</span> <span class="title">is</span> <span class="title">not</span> <span class="title">null</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;            : <span class="title">File</span> <span class="title">path</span> <span class="title">into</span> <span class="title">which</span> <span class="title">the</span> <span class="title">received</span> <span class="title">license</span></span></span><br><span class="line"><span class="function">                              <span class="title">will</span> <span class="title">be</span> <span class="title">stored</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function">     [<span class="title">protocol</span>=&lt;<span class="title">Ptype</span>&gt;]     : <span class="title">Protocol</span> <span class="title">type</span> <span class="title">to</span> <span class="title">be</span> <span class="title">used</span> : <span class="title">static</span>/<span class="title">live</span></span></span><br><span class="line"><span class="function">                              <span class="title">Only</span> <span class="title">static</span> <span class="title">protocol</span> <span class="title">is</span> <span class="title">supported</span> <span class="title">so</span> <span class="title">far</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span> <span class="title">static</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetlicensefromcertifbin</span>, -<span class="title">hsmglfcb</span> : <span class="title">Get</span> <span class="title">a</span> <span class="title">license</span> <span class="title">for</span> <span class="title">the</span> <span class="title">input</span> <span class="title">certificate</span></span></span><br><span class="line"><span class="function">                                          <span class="title">if</span> <span class="title">counter</span> <span class="title">is</span> <span class="title">not</span> <span class="title">null</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">certif_file_path.bin</span>&gt;             : <span class="title">Input</span> <span class="title">certificate</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">license_file_path.bin</span>&gt;            : <span class="title">File</span> <span class="title">path</span> <span class="title">into</span> <span class="title">which</span> <span class="title">the</span> <span class="title">received</span> <span class="title">license</span></span></span><br><span class="line"><span class="function">                                          <span class="title">will</span> <span class="title">be</span> <span class="title">stored</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]                    : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                                          <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function">     [<span class="title">protocol</span>=&lt;<span class="title">Ptype</span>&gt;]                 : <span class="title">Protocol</span> <span class="title">type</span> <span class="title">to</span> <span class="title">be</span> <span class="title">used</span> : <span class="title">static</span>/<span class="title">live</span></span></span><br><span class="line"><span class="function">                                          <span class="title">Only</span> <span class="title">static</span> <span class="title">protocol</span> <span class="title">is</span> <span class="title">supported</span> <span class="title">so</span> <span class="title">far</span></span></span><br><span class="line"><span class="function">                                          <span class="title">Default</span> <span class="title">value</span> <span class="title">static</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">STM32WBxx</span> <span class="title">specific</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">getuid64</span>              : <span class="title">Read</span> <span class="title">the</span> <span class="title">device</span> <span class="title">UID</span></span></span><br><span class="line"><span class="function"> -<span class="title">fusgetstate</span>           : <span class="title">Read</span> <span class="title">the</span> <span class="title">FUS</span> <span class="title">state</span></span></span><br><span class="line"><span class="function"> -<span class="title">fusopgetversion</span>       : <span class="title">Read</span> <span class="title">the</span> <span class="title">FUS</span> <span class="title">Operator</span> <span class="title">version</span></span></span><br><span class="line"><span class="function"> -<span class="title">antirollback</span>          : <span class="title">Perform</span> <span class="title">the</span> <span class="title">antirollback</span> <span class="title">operation</span> (<span class="title">Only</span> <span class="title">on</span> <span class="title">Bootloader</span> <span class="title">interface</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">startfus</span>              : <span class="title">Perform</span> <span class="title">the</span> <span class="title">startfus</span> <span class="title">operation</span></span></span><br><span class="line"><span class="function">  <span class="title">Firmware</span> <span class="title">Upgrade</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"> -<span class="title">fwdelete</span>              : <span class="title">Delete</span> <span class="title">the</span> <span class="title">BLE</span> <span class="title">stack</span> <span class="title">firmware</span></span></span><br><span class="line"><span class="function"> -<span class="title">fwupgrade</span>             : <span class="title">Upgrade</span> <span class="title">the</span> <span class="title">BLE</span> <span class="title">stack</span> <span class="title">firmware</span> <span class="title">or</span> <span class="title">the</span> <span class="title">FUS</span> <span class="title">firmware</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">New</span> <span class="title">firmware</span> <span class="title">image</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">Start</span> <span class="title">address</span> <span class="title">of</span> <span class="title">download</span></span></span><br><span class="line"><span class="function">     [<span class="title">firstinstall</span>=0|1] : 1 <span class="title">if</span> <span class="title">it</span> <span class="title">is</span> <span class="title">a</span> <span class="title">first</span> <span class="title">install</span> <span class="title">otherwise</span> 0</span></span><br><span class="line"><span class="function">                          <span class="title">optional</span>, <span class="title">Default</span> <span class="title">value</span>: <span class="title">firstinstall</span>=0</span></span><br><span class="line"><span class="function">     [<span class="title">startstack</span>=0|1]   : 1 <span class="title">to</span> <span class="title">start</span> <span class="title">the</span> <span class="title">stack</span> <span class="title">after</span> <span class="title">the</span> <span class="title">upgrade</span> <span class="title">otherwise</span> 0</span></span><br><span class="line"><span class="function">                          <span class="title">optional</span>, <span class="title">Default</span> <span class="title">value</span>: <span class="title">startstack</span>=1</span></span><br><span class="line"><span class="function"> -<span class="title">autoupgrade</span>           : <span class="title">Automatically</span> <span class="title">recognize</span> <span class="title">the</span> <span class="title">stack</span> <span class="title">address</span> <span class="title">and</span> <span class="title">Upgrade</span> <span class="title">the</span> <span class="title">BLE</span> <span class="title">stack</span> <span class="title">firmware</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">New</span> <span class="title">firmware</span> <span class="title">image</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">      -<span class="title">v</span>                : <span class="title">Verify</span> <span class="title">if</span> <span class="title">the</span> <span class="title">download</span> <span class="title">operation</span> <span class="title">is</span> <span class="title">achieved</span></span></span><br><span class="line"><span class="function">                          <span class="title">successfully</span> <span class="title">before</span> <span class="title">starting</span> <span class="title">upgrade</span></span></span><br><span class="line"><span class="function"> -<span class="title">startwirelessstack</span>    : <span class="title">Start</span> <span class="title">the</span> <span class="title">wireless</span> <span class="title">stack</span></span></span><br><span class="line"><span class="function">  <span class="title">Key</span> <span class="title">management</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"> -<span class="title">authkeyupdate</span>         : <span class="title">Authentication</span> <span class="title">key</span> <span class="title">update</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">New</span> <span class="title">authentication</span> <span class="title">key</span> <span class="title">file</span> <span class="title">path</span>.</span></span><br><span class="line"><span class="function">                        : <span class="title">This</span> <span class="title">is</span> <span class="title">the</span> <span class="title">public</span> <span class="title">key</span> <span class="title">generated</span> <span class="title">by</span></span></span><br><span class="line"><span class="function">                        : <span class="title">STM32TrustedPackageCreator</span> <span class="title">using</span> -<span class="title">sign</span> <span class="title">command</span>.</span></span><br><span class="line"><span class="function"> -<span class="title">authkeylock</span>           : <span class="title">Authentication</span> <span class="title">key</span> <span class="title">lock</span></span></span><br><span class="line"><span class="function">                        : <span class="title">Once</span> <span class="title">locked</span>, <span class="title">it</span>&#x27;<span class="title">s</span> <span class="title">no</span> <span class="title">longuer</span> <span class="title">possible</span> <span class="title">to</span> <span class="title">change</span> <span class="title">it</span></span></span><br><span class="line"><span class="function">                        : <span class="title">using</span> <span class="title">authkeyupdate</span> <span class="title">command</span></span></span><br><span class="line"><span class="function"> -<span class="title">wusrkey</span>               : <span class="title">Write</span> <span class="title">user</span> <span class="title">key</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">User</span> <span class="title">key</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">keytype</span>=1|2|3&gt;    : <span class="title">User</span> <span class="title">key</span> <span class="title">type</span>, <span class="title">values</span> : 1, 2 <span class="title">or</span> 3.</span></span><br><span class="line"><span class="function">                        : 1 = <span class="title">simple</span> <span class="title">key</span>, 2 = <span class="title">master</span> <span class="title">key</span>, 3 = <span class="title">encrypted</span> <span class="title">key</span>.</span></span><br><span class="line"><span class="function"><span class="title">Serial</span> <span class="title">Wire</span> <span class="title">Viewer</span> <span class="title">specific</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">swv</span>                       : <span class="title">Printf</span> <span class="title">via</span> <span class="title">SWO</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">freq</span>=&lt;<span class="title">frequency</span>&gt;&gt;     : <span class="title">System</span> <span class="title">Clock</span> <span class="title">in</span> <span class="title">MHz</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">portnumber</span>=0-31|<span class="title">all</span>&gt;  : <span class="title">ITM</span> <span class="title">port</span> <span class="title">number</span>, <span class="title">values</span> : 0-31, <span class="title">or</span> <span class="title">all</span> <span class="title">for</span> <span class="title">All</span> <span class="title">ports</span></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">file_Path.log</span>&gt;]      : <span class="title">Path</span> <span class="title">of</span> <span class="title">the</span> <span class="title">SWV</span> <span class="title">log</span> <span class="title">file</span> (<span class="title">optional</span>),</span></span><br><span class="line"><span class="function">                            : <span class="title">default</span> <span class="title">path</span> = $<span class="title">USER_HOME</span>/<span class="title">STMicroelectronics</span>/<span class="title">STM32Programmer</span>/<span class="title">SWV_Log</span>/<span class="title">swv.log</span></span></span><br><span class="line"><span class="function">      -<span class="title">RA</span>                   : <span class="title">Start</span> <span class="title">the</span> <span class="title">reception</span> <span class="title">of</span> <span class="title">swv</span> <span class="title">automatically</span></span></span><br><span class="line"><span class="function"> -<span class="title">startswv</span>                  :  <span class="title">Printf</span> <span class="title">via</span> <span class="title">SWO</span> &amp; <span class="title">Start</span> <span class="title">the</span> <span class="title">reception</span> <span class="title">of</span> <span class="title">swv</span> <span class="title">automatically</span></span></span><br><span class="line"><span class="function"><span class="title">Script</span> <span class="title">Manager</span> <span class="title">command</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">script</span>                    : <span class="title">Start</span> <span class="title">the</span> <span class="title">execution</span> <span class="title">of</span> <span class="title">Script</span> <span class="title">File</span></span></span><br><span class="line"><span class="function"> &lt;<span class="title">file_Path.prg</span>&gt;            : <span class="title">Path</span> <span class="title">of</span> <span class="title">the</span> <span class="title">script</span> <span class="title">file</span> (.<span class="title">prg</span>)</span></span><br></pre></td></tr></table></figure>
<h2 id="查看设备列表">查看设备列表</h2>
<p>下面语句可以查看所有连接至PC端的设备。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STM32_Programmer_CLI <span class="literal">-l</span></span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121113727.png" alt="设备列表" /><figcaption aria-hidden="true">设备列表</figcaption>
</figure>
<p>详见：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-l</span>,     -<span class="literal">-list</span>         : List all available communication interfaces</span><br><span class="line">    &lt;uart&gt;             : UART interface</span><br><span class="line">    &lt;usb&gt;              : USB interface</span><br><span class="line">    &lt;st<span class="literal">-link</span>&gt;              : st<span class="literal">-link</span> interface</span><br></pre></td></tr></table></figure>
<h2 id="设备连接">设备连接</h2>
<p>可以使用多种连接方式，将ST的从设备与PC上位机进行连接，包括 USB / UART / JTAG / SWD / SPI / CAN / I2C 。</p>
<p>使用指令 <code>STM32_Programmer_CLI -c port=SWD</code> 即可自动连接至设备。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615122116373.png" alt="设备自动连接" /><figcaption aria-hidden="true">设备自动连接</figcaption>
</figure>
<h2 id="内容读取">内容读取</h2>
<p>使用指令 <code>STM32_Programmer_CLI -c port=SWD -r32 0x08000000 0x400</code> 可以从 地址 <code>0x08000000</code> 起，以 <code>32bit</code> 格式（<code>-r32</code> ）读取 <code>0x400</code> <strong>byte</strong> 数据。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121414609.png" alt="以32bit格式读取数据" /><figcaption aria-hidden="true">以32bit格式读取数据</figcaption>
</figure>
<p><code>-r32</code> 可以更换成 <code>-r16</code> 或 <code>-r8</code> 。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121643968.png" alt="以16bit格式读取数据" /><figcaption aria-hidden="true">以16bit格式读取数据</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121729021.png" alt="以8bit格式读取数据" /><figcaption aria-hidden="true">以8bit格式读取数据</figcaption>
</figure>
<h2 id="内容擦除">内容擦除</h2>
<p>大面积擦除（Mass erase）所有内容，一般来说烧录的时候不会去擦除全部内容，这部分应该看情况。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STM32_Programmer_CLI <span class="literal">-c</span> port=SWD <span class="literal">-e</span> all</span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615124617282.png" alt="擦除全部内容" /><figcaption aria-hidden="true">擦除全部内容</figcaption>
</figure>
<p>详见：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-e</span>,     -<span class="literal">-erase</span>        : <span class="built_in">Erase</span> memory pages/sectors devices:</span><br><span class="line">                         Not supported <span class="keyword">for</span> STM32<span class="built_in">MP</span></span><br><span class="line">    [<span class="type">all</span>]              : <span class="built_in">Erase</span> all sectors</span><br><span class="line">    [&lt;<span class="type">sectorsCodes</span>&gt;]   : <span class="built_in">Erase</span> the specified sectors identified by sectors</span><br><span class="line">                         codes. ex: <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span> to <span class="built_in">erase</span> sectors <span class="number">0</span>, <span class="number">1</span> and <span class="number">2</span></span><br><span class="line">                         <span class="keyword">for</span> EEPROM : ed1 &amp; ed2</span><br><span class="line">    [&lt;[<span class="type">start</span> <span class="type">end</span>]&gt;]    : <span class="built_in">Erase</span> the specified sectors starting from</span><br><span class="line">                         <span class="built_in">start</span> code to <span class="keyword">end</span> code, ex: <span class="literal">-e</span> [<span class="number">5</span> <span class="number">10</span>]</span><br></pre></td></tr></table></figure>
<p>下面两张图是烧录完某 <code>.bin</code> 文件后，flash内部结束尾部临界处的数据。交替烧录两个大小不易的 <code>.bin</code> 文件，可以观察到结尾处都是正常的，并没有出现异常。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615130250432.png" alt="临界处数据" /><figcaption aria-hidden="true">临界处数据</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615130543343.png" alt="image-20220615130543343" /><figcaption aria-hidden="true">image-20220615130543343</figcaption>
</figure>
<h2 id="程序烧录">程序烧录</h2>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STM32_Programmer_CLI <span class="literal">-c</span> port=SWD <span class="literal">-d</span> <span class="string">&quot;\\wsl.localhost\kali-linux\home\liewzheng\Workspace\stm32\20220511-galileo-manifest\out\mixosense_apps\data_collection_irq\data_collection_irq.bin&quot;</span> <span class="number">0</span>x00 <span class="literal">-v</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>-d</code> 是指 文件下载，后方接 <strong>文件路径</strong> 以及 <strong>起始地址</strong> <code>0x00</code> 。这个起始地址应该是 <code>0x08000000</code> 还是 <code>0x00</code> 我也还没搞清楚。</p></li>
<li><p><code>-v</code> 是指 代码验证。</p></li>
</ul>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615123114639.png" alt="image-20220615123114639" /><figcaption aria-hidden="true">image-20220615123114639</figcaption>
</figure>
<p>详见：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-d</span>,     -<span class="literal">-download</span>     : Download the content of a file into device memory</span><br><span class="line">    &lt;file_path&gt;        : File path name to be downloaded: (bin, hex, srec,</span><br><span class="line">                         elf, stm32 or tsv file)</span><br><span class="line">    [&lt;<span class="type">address</span>&gt;]        : <span class="built_in">Start</span> address of download</span><br></pre></td></tr></table></figure>
<h2 id="设备复位和运行">设备复位和运行</h2>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">STM32_Programmer_CLI <span class="literal">-c</span> port=SWD <span class="literal">-hardRst</span></span><br><span class="line">STM32_Programmer_CLI <span class="literal">-c</span> port=SWD <span class="literal">-s</span></span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615124508137.png" alt="image-20220615124508137" /><figcaption aria-hidden="true">image-20220615124508137</figcaption>
</figure>
<h1 id="报错">报错</h1>
<h2 id="端口占用报错">端口占用报错</h2>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121045036.png" alt="image-20220615121045036" /><figcaption aria-hidden="true">image-20220615121045036</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/06/09/Programming/Windows/2022-06-09-Bat-Script/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/09/Programming/Windows/2022-06-09-Bat-Script/" class="post-title-link" itemprop="url">Bat Script</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-06-09 15:30:00 / Modified: 21:53:36" itemprop="dateCreated datePublished" datetime="2022-06-09T15:30:00+08:00">2022-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>下面所有的脚本都会类比 Linux Shell Script 进行。</p>
<blockquote>
<p>Windows有两个命令行 shell：Command shell 和 PowerShell。 每个 shell 都是一个软件程序，它提供你与操作系统或应用程序之间的直接通信，提供一个环境来自动执行 IT 操作。</p>
<p>Command shell 是内置于 Windows中，用于自动执行常规任务（例如用户帐户管理或夜间备份）和批处理 (.bat) 文件。 使用Windows脚本主机，可以在命令外壳中运行更复杂的脚本。 有关详细信息，请参阅 cscript 或 wscript。 通过使用脚本可以比使用用户界面更有效地执行操作。 脚本接受命令行中提供的所有命令。</p>
<p>PowerShell 旨在扩展 Command shell 的功能，以运行名为 cmdlet 的 PowerShell 命令。 Cmdlet 类似于 Windows命令，但提供了更具可扩展性的脚本语言。 可以在 PowerShell 中Windows命令和 PowerShell cmdlet，但命令外壳只能运行 Windows 命令，不能运行 PowerShell cmdlet。</p>
<p>若要实现最可靠、最新的自动化Windows，建议使用 PowerShell 而不是 Windows 命令或 Windows 脚本主机Windows自动化。</p>
</blockquote>
<h1 id="generic-script">Generic Script</h1>
<h2 id="注释">注释</h2>
<p>windows bat 批处理和 PowerShell 都可以使用 <code>::</code> 作为注释头部信息。与 Linux Shell Script 和 Python 的 <code>#</code> 不一致（反人类罪）。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:: 注释</span><br></pre></td></tr></table></figure>
<h2 id="del-rd">DEL&amp; RD</h2>
<p><code>del</code> 删除命令只能删除文件，<code>rd</code> 可以删除文件夹</p>
<p><code>/Q</code> 是静默删除，不提示文字。<code>/S</code> 除目录本身外，还将删除指定目录下的所有子目录和文件。用于删除目录树。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:: 静默删除所有文件和文件夹</span><br><span class="line"><span class="built_in">del</span> /Q %BUILD_PATH%\*.o</span><br><span class="line"><span class="built_in">rd</span> /S /Q %BUILD_PATH%\bin</span><br><span class="line"><span class="built_in">rd</span> /S /Q %BUILD_PATH%\log</span><br><span class="line"><span class="built_in">rd</span> /S /Q %BUILD_PATH%\lib</span><br><span class="line"><span class="built_in">rd</span> /S /Q %BUILD_PATH%\map</span><br></pre></td></tr></table></figure>
<h2 id="常见命令对照表">常见命令对照表</h2>
<table>
<thead>
<tr class="header">
<th>Windows Bat</th>
<th>Windows PowerShell</th>
<th>Linux Shell</th>
<th>Others</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>help</td>
<td>Get-Help</td>
<td>man</td>
<td></td>
</tr>
<tr class="even">
<td>cd /D</td>
<td>Set-Location</td>
<td>cd</td>
<td></td>
</tr>
<tr class="odd">
<td>cd</td>
<td>Get-Location</td>
<td>pwd</td>
<td></td>
</tr>
<tr class="even">
<td>type</td>
<td>Get-Content</td>
<td>cat</td>
<td></td>
</tr>
<tr class="odd">
<td>rd /S<br>rmdir /S</td>
<td>Remove-Item</td>
<td>rm -r</td>
<td></td>
</tr>
<tr class="even">
<td>del<br>erase</td>
<td>Remove-Item</td>
<td>rm</td>
<td></td>
</tr>
<tr class="odd">
<td>dir /b</td>
<td></td>
<td>ls</td>
<td></td>
</tr>
<tr class="even">
<td>dir</td>
<td>Get-ChildItem</td>
<td>ll</td>
<td></td>
</tr>
<tr class="odd">
<td>cls</td>
<td>Clear-Host</td>
<td>clear</td>
<td></td>
</tr>
<tr class="even">
<td>doskey</td>
<td>Set-Alias</td>
<td>alias</td>
<td></td>
</tr>
<tr class="odd">
<td>md<br>mkdir</td>
<td>New-Item</td>
<td>mkdir</td>
<td></td>
</tr>
<tr class="even">
<td>move</td>
<td>Move-Item</td>
<td>mv</td>
<td></td>
</tr>
<tr class="odd">
<td>ren<br>rename</td>
<td>Rename-Item</td>
<td>mv</td>
<td></td>
</tr>
<tr class="even">
<td>copy</td>
<td>Copy-Item</td>
<td>cp</td>
<td></td>
</tr>
<tr class="odd">
<td>echo</td>
<td>Write-Output</td>
<td>echo</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="条件语句">条件语句</h2>
<p>bat 的条件语句教程：《<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/if">if</a>》</p>
<p>PowerShell 的条件语句教程：《<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_if?view=powershell-7.2">about_If</a>》</p>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/powershell/scripting/overview?view=powershell-7.2">什么是 PowerShell？</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.management/?view=powershell-7.2">Microsoft.PowerShell.Management</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/windows-commands">Windows 命令</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/05/25/Programming/2022-05-25-armcc%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/25/Programming/2022-05-25-armcc%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98/" class="post-title-link" itemprop="url">armcc的交叉编译和持续交付</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-25 16:00:00" itemprop="dateCreated datePublished" datetime="2022-05-25T16:00:00+08:00">2022-05-25</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-09 21:53:25" itemprop="dateModified" datetime="2022-06-09T21:53:25+08:00">2022-06-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>因为基本上没什么人直接使用 armcc 作为自动化编译、持续集成和交付的工具，更多是使用 UV4 软件读取 <code>.uvprojx</code> 文件来获取编译信息，进而驱动 armcc 进行编译过程。</p>
<p>通过自行编辑 <code>Makefile</code> 文件，使用 make 和 armcc 工具可以对代码文件进行编译，可以进行静态库的生成，也可以生成可烧录文件，但是就不要想着复杂的 <code>make test</code> 等测试功能了。</p>
<h1 id="diff-between-them">DIFF BETWEEN THEM</h1>
<p>下方详细描述一下使用 <code>arm-none-eabi-gcc</code> 、<code>make</code> 、<code>cmake</code> 与 <code>armcc</code> 、<code>make</code> 的不同。</p>
<ol type="1">
<li>使用 <code>arm-none-eabi-gcc</code> 和 <code>make</code> 编译的 SDK 过程属于 Unix Makefile 编译过程（详见 CMake 工具及官网对 <a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">CMakefiles Generators</a> 说明）。暂时不清楚使用 <code>armcc</code> 和 <code>cmake</code> 是如何生成 <code>Makefile</code> 的，因为尚不了解toolchain的绑定过程，导致一致检测到的是 windows平台本地的 <code>mingw</code> 工具。</li>
<li>启动文件不同。详见 <a href="##ABOUT%20STARTUP%20FILE">ABOUT STARTUP FILE</a></li>
<li>工具链指定方式不同。详见 <a href="##TOOLCHAIN">TOOLCHAIN</a></li>
</ol>
<h1 id="keil-mdk-env">KEIL MDK ENV</h1>
<h2 id="mdk-softpack">MDK SOFTPACK</h2>
<p><a target="_blank" rel="noopener" href="https://www.keil.com/dd2/pack/">MDK5 Software Packs</a></p>
<h2 id="toolchain-downloads">TOOLCHAIN DOWNLOADS</h2>
<p>首先需要安装版本较新的 Keil MDK-ARM 开发软件。最好是在Windows上安装，方便破解。</p>
<p>可以从 <code>About uVision</code> 中查看版本信息。也可以直接在 PowerShell 中直接调用查看。</p>
<p>MDK 的版本为 <code>v5.22</code> 确实是比较老旧的，建议下载 <code>v5.27</code> 及以上版本。</p>
<p>下载链接：<a target="_blank" rel="noopener" href="https://storage.islet.space/02_Softwares/06_Embedded/01_CrossCompiler/keil_mdk_armcc/MDK528.exe">MDKv5.28</a>、<a target="_blank" rel="noopener" href="https://storage.islet.space/02_Softwares/06_Embedded/01_CrossCompiler/keil_mdk_armcc/MDK537.exe">MDKv5.37</a>、<a target="_blank" rel="noopener" href="https://storage.islet.space/02_Softwares/06_Embedded/01_CrossCompiler/keil_mdk_armcc/keygen.exe">keygen</a></p>
<p>官网下载：<a target="_blank" rel="noopener" href="https://developer.arm.com/tools-and-software/embedded/arm-compiler/arm-compiler-5/downloads">ARM Compiler 5 Downloads</a></p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608100300944.png" alt="image-20220608100300944" /><figcaption aria-hidden="true">image-20220608100300944</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608100748964.png" alt="image-20220608100748964" /><figcaption aria-hidden="true">image-20220608100748964</figcaption>
</figure>
<h1 id="toolchain">TOOLCHAIN</h1>
<p>下面的一些参数可以从 <a target="_blank" rel="noopener" href="https://developer.arm.com/documentation/dui0375/g/Compiler-Command-line-Options/">ARM Compiler v5.06 for uVision armcc User Guide</a> 获取帮助。</p>
<h2 id="fromelf">FROMELF</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Options:</span><br><span class="line">       --<span class="built_in">help</span>         display this <span class="built_in">help</span> screen</span><br><span class="line">       --vsn          display version information</span><br><span class="line">       --output file  the output file. (defaults to stdout <span class="keyword">for</span> -text format)</span><br><span class="line">       --nodebug      <span class="keyword">do</span> not put debug areas <span class="keyword">in</span> the output image</span><br><span class="line">       --nolinkview   <span class="keyword">do</span> not put sections <span class="keyword">in</span> the output image</span><br><span class="line"></span><br><span class="line">Binary Output Formats:</span><br><span class="line">       --bin          Plain Binary</span><br><span class="line">       --m32          Motorola 32 bit Hex</span><br><span class="line">       --i32          Intel 32 bit Hex</span><br><span class="line">       --vhx          Byte Oriented Hex format</span><br><span class="line"></span><br><span class="line">       --base addr    Optionally <span class="built_in">set</span> base address <span class="keyword">for</span> m32,i32</span><br><span class="line"></span><br><span class="line">Output Formats Requiring Debug Information</span><br><span class="line">       --fieldoffsets Assembly Language Description of Structures/Classes</span><br><span class="line">       --expandarrays Arrays inside and outside structures are expanded</span><br><span class="line"></span><br><span class="line">Other Output Formats:</span><br><span class="line">       --elf         ELF</span><br><span class="line">       --text        Text Information</span><br><span class="line"></span><br><span class="line">                Flags <span class="keyword">for</span> Text Information</span><br><span class="line">                -v          verbose</span><br><span class="line">                -a          <span class="built_in">print</span> data addresses (For images built with debug)</span><br><span class="line">                -c          disassemble code</span><br><span class="line">                -d          <span class="built_in">print</span> contents of data section</span><br><span class="line">                -e          <span class="built_in">print</span> exception tables</span><br><span class="line">                -g          <span class="built_in">print</span> debug tables</span><br><span class="line">                -r          <span class="built_in">print</span> relocation information</span><br><span class="line">                -s          <span class="built_in">print</span> symbol table</span><br><span class="line">                -t          <span class="built_in">print</span> string table</span><br><span class="line">                -y          <span class="built_in">print</span> dynamic segment contents</span><br><span class="line">                -z          <span class="built_in">print</span> code and data size information</span><br></pre></td></tr></table></figure>
<h2 id="armlink">ARMLINK</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Usage: armlink option-list input-file-list</span><br><span class="line"><span class="built_in">where</span></span><br><span class="line">    option-list      is a list of case-insensitive options.</span><br><span class="line">    input-file-list  is a list of input object and library files.</span><br><span class="line"></span><br><span class="line">General options (abbreviations shown capitalised):</span><br><span class="line">   --<span class="built_in">help</span>          Print this summary.</span><br><span class="line">   --output file   Specify the name of the output file.</span><br><span class="line">   --via file      Read further arguments from file.</span><br><span class="line"></span><br><span class="line">Options <span class="keyword">for</span> specifying memory map information:</span><br><span class="line">   --partial       Generate a partially linked object.</span><br><span class="line">   --scatter file  Create the memory map as described <span class="keyword">in</span> file.</span><br><span class="line">   --ro-base n     Set <span class="built_in">exec</span> addr of region containing RO sections.</span><br><span class="line">   --rw-base n     Set <span class="built_in">exec</span> addr of region containing RW/ZI sections.</span><br><span class="line"></span><br><span class="line">Options <span class="keyword">for</span> controlling image contents:</span><br><span class="line">   --bestdebug     Add debug information giving best debug view to image.</span><br><span class="line">   --datacompressor off</span><br><span class="line">                   Do not compress RW data sections.</span><br><span class="line">   --no_debug      Do not add debug information to image.</span><br><span class="line">   --entry         Specify entry sections and entry point.</span><br><span class="line">   --libpath       Specify path to find system libraries from.</span><br><span class="line">   --userlibpath   Specify path to find user libraries from.</span><br><span class="line">   --no_locals     Do not add <span class="built_in">local</span> symbols to image symbol table.</span><br><span class="line">   --no_remove     Do not remove unused sections from image.</span><br><span class="line"></span><br><span class="line">Options <span class="keyword">for</span> controlling image related information:</span><br><span class="line">   --callgraph     Create a static callgraph of <span class="built_in">functions</span>.</span><br><span class="line">   --feedback file Generate feedback that can be used by the compiler <span class="keyword">in</span> file.</span><br><span class="line">   --info topic    List misc. information about image.</span><br><span class="line">                    Available topics: (separate multiple topics with comma)</span><br><span class="line">                     common   List common sections eliminated from the image.</span><br><span class="line">                     debug    List eliminated input debug sections.</span><br><span class="line">                     sizes    List code and data sizes <span class="keyword">for</span> objects <span class="keyword">in</span> image.</span><br><span class="line">                     totals   List total sizes of all objects <span class="keyword">in</span> image.</span><br><span class="line">                     veneers  List veneers that have been generated.</span><br><span class="line">                     unused   List sections eliminated from the image.</span><br><span class="line">   --map           Display memory map of image.</span><br><span class="line">   --symbols       List symbols <span class="keyword">in</span> image.</span><br><span class="line">   --xref          List all cross-references between input sections.</span><br></pre></td></tr></table></figure>
<p><code>--summary_stderr</code></p>
<h2 id="armcc">ARMCC</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Usage:         armcc [options] file1 file2 ... filen</span><br><span class="line">Main options:</span><br><span class="line">        </span><br><span class="line">--arm          Generate ARM code</span><br><span class="line">--thumb        Generate Thumb code</span><br><span class="line">--c90          Switch to C mode (default <span class="keyword">for</span> .c files)</span><br><span class="line">--cpp          Switch to C++ mode (default <span class="keyword">for</span> .cpp files)</span><br><span class="line">-O0            Minimum optimization</span><br><span class="line">-O1            Restricted optimization <span class="keyword">for</span> debugging</span><br><span class="line">-O2            High optimization</span><br><span class="line">-O3            Maximum optimization</span><br><span class="line">-Ospace        Optimize <span class="keyword">for</span> codesize</span><br><span class="line">-Otime         Optimize <span class="keyword">for</span> maximum performance</span><br><span class="line">--cpu &lt;cpu&gt;    Select CPU to generate code <span class="keyword">for</span></span><br><span class="line">--cpu list     Output a list of all the selectable CPUs</span><br><span class="line">-o &lt;file&gt;      Name the final output file of the compilation</span><br><span class="line">-c             Compile only, <span class="keyword">do</span> not link</span><br><span class="line">--asm          Output assembly code as well as object code</span><br><span class="line">-S             Output assembly code instead of object code</span><br><span class="line">--interleave   Interleave <span class="built_in">source</span> with disassembly (use with --asm or -S)</span><br><span class="line">-E             Preprocess the C <span class="built_in">source</span> code only</span><br><span class="line">-D&lt;symbol&gt;     Define &lt;symbol&gt; on entry to the compiler</span><br><span class="line">-g             Generate tables <span class="keyword">for</span> high-level debugging</span><br><span class="line">-I&lt;directory&gt;  Include &lt;directory&gt; on the <span class="comment">#include search pat</span></span><br></pre></td></tr></table></figure>
<h1 id="makefile">MAKEFILE</h1>
<p>make 可以在任一路径下执行，只需要加入 <code>-C &lt;path&gt;</code> 即可，即告诉make工具在 <code>&lt;path&gt;</code> 路径下执行编译。方便了在 windows 命令行环境下的执行。</p>
<p>编写 Makefile 的时候，某些变量可以通过外部传递，而且方法也很简单，甚至内部甚至不需要声明，只需要在引用处写明变量名称即可。然后外部调用时以 <code>VARIABLE="value"</code> 的形式进行声明即可。如下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make libmxs <span class="literal">-C</span> <span class="number">20220607</span> MANIFEST_PATH=<span class="string">&quot;F:\Workspace\20220511-galileo-manifest&quot;</span> TOOLCHAIN_PATH=<span class="string">&quot;D:\Keil_v528\ARM\ARMCC\bin&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="compiling-control-strings">COMPILING CONTROL STRINGS</h2>
<p>下面这些编译参数是复制自 KEIL IDE 的，对应的平台是 STM32L4R9。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">--c99</span><br><span class="line">-c </span><br><span class="line">--cpu Cortex-M4.fp</span><br><span class="line">-D__MICROLIB -g -O3 --apcs&#x3D;interwork --split_sections </span><br><span class="line"></span><br><span class="line">-I ..&#x2F;app </span><br><span class="line">-I ..&#x2F;M_BSP </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;BMM150 </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;Sensor_R1 </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;lps33k </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;lcd </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;PSRAM </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;OSPI_NOR </span><br><span class="line">-I ..&#x2F;Driver </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;CMSIS&#x2F;Include </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;CMSIS&#x2F;Device&#x2F;ST&#x2F;STM32L4xx&#x2F;Include </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;STM32L4xx_HAL_Driver&#x2F;Inc </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;BSP&#x2F;STM32L4R9I_EVAL </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;BSP&#x2F;Components&#x2F;Common </span><br><span class="line"></span><br><span class="line">-I.&#x2F;RTE&#x2F;_Watch_EVAL</span><br><span class="line">-IC:&#x2F;Users&#x2F;mixo&#x2F;AppData&#x2F;Local&#x2F;Arm&#x2F;Packs&#x2F;ARM&#x2F;CMSIS&#x2F;5.5.1&#x2F;CMSIS&#x2F;Core&#x2F;Include</span><br><span class="line">-IDrivers&#x2F;CMSIS&#x2F;Device&#x2F;ST&#x2F;STM32L4xx&#x2F;Include</span><br><span class="line">-D__UVISION_VERSION&#x3D;&quot;528&quot; -D_RTE_ -DSTM32L4R9xx -DUSE_HAL_DRIVER -DUSE_GVO_390x390</span><br><span class="line">-o .\Watch\*.o --omf_browse .\Watch\*.crf --depend .\Watch\*.d</span><br></pre></td></tr></table></figure>
<h2 id="toolchain-1">TOOLCHAIN</h2>
<p>在 Makefile 文件中，往往为了互相兼容，默认编译器的名称就是 <code>gcc</code> ，只是前缀不同而已，而 <code>armcc</code> 编译器在使用时则需清晰指定名称。</p>
<p>下方为 <code>armcc</code> 工具链的指定方式：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 工具链</span></span><br><span class="line">CC=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>armcc.exe<span class="string">&quot;</span></span><br><span class="line"><span class="string">AS=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>armasm.exe&quot;</span></span><br><span class="line">AR=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>armar.exe<span class="string">&quot;</span></span><br><span class="line"><span class="string">LINK=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>armlink.exe&quot;</span></span><br><span class="line">FROM_ELF=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>fromelf.exe<span class="string">&quot;</span></span><br></pre></td></tr></table></figure>
<p>下方为 <code>arm-none-eabi-gcc</code> 工具链的指定（由 stm32 CubeMX 生成）。</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">PREFIX = arm-none-eabi-</span><br><span class="line"><span class="comment"># The gcc compiler bin path can be either defined in make command via GCC_PATH variable (&gt; make GCC_PATH=xxx)</span></span><br><span class="line"><span class="comment"># either it can be added to the PATH environment variable.</span></span><br><span class="line"><span class="keyword">ifdef</span> GCC_PATH</span><br><span class="line">CC = <span class="variable">$(GCC_PATH)</span>/<span class="variable">$(PREFIX)</span>gcc</span><br><span class="line">AS = <span class="variable">$(GCC_PATH)</span>/<span class="variable">$(PREFIX)</span>gcc -x assembler-with-cpp</span><br><span class="line">CP = <span class="variable">$(GCC_PATH)</span>/<span class="variable">$(PREFIX)</span>objcopy</span><br><span class="line">SZ = <span class="variable">$(GCC_PATH)</span>/<span class="variable">$(PREFIX)</span>size</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">CC = <span class="variable">$(PREFIX)</span>gcc</span><br><span class="line">AS = <span class="variable">$(PREFIX)</span>gcc -x assembler-with-cpp</span><br><span class="line">CP = <span class="variable">$(PREFIX)</span>objcopy</span><br><span class="line">SZ = <span class="variable">$(PREFIX)</span>size</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line">HEX = <span class="variable">$(CP)</span> -O ihex</span><br><span class="line">BIN = <span class="variable">$(CP)</span> -O binary -S</span><br></pre></td></tr></table></figure>
<h2 id="compiling-parameters">COMPILING PARAMETERS</h2>
<p>总结出常见的编译参数如下：</p>
<h3 id="macro-definitions">MACRO DEFINITIONS</h3>
<p>宏定义参数：<code>-DUSE_HAL_DRIVER</code> / <code>-DSTM32L4R9xx</code> / <code>-D__MICROLIB</code> 。</p>
<p>其中，前两个还是要依具体芯片的硬件参数来看的</p>
<h3 id="cpu">CPU</h3>
<p>CPU 参数：<code>--cpu Cortex-M4.fp</code> / <code>--cpu Cortex-M4</code> 等。</p>
<p>使用<code>armcc --cpu list</code> 命令可以查看所有可接受的芯片，如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">--cpu=<span class="number">4</span></span><br><span class="line">--cpu=<span class="number">4</span>T</span><br><span class="line">--cpu=<span class="number">5</span>T</span><br><span class="line">--cpu=<span class="number">5</span>TE</span><br><span class="line">--cpu=<span class="number">5</span>TEJ</span><br><span class="line">--cpu=<span class="number">6</span>-M</span><br><span class="line">--cpu=<span class="number">6</span>S-M</span><br><span class="line">--cpu=<span class="number">7</span>-A</span><br><span class="line">--cpu=<span class="number">7</span>-R</span><br><span class="line">--cpu=<span class="number">7</span>-M</span><br><span class="line">--cpu=<span class="number">7</span>E-M</span><br><span class="line">--cpu=<span class="number">7</span>-A.security</span><br><span class="line">--cpu=ARM7EJ-S</span><br><span class="line">--cpu=ARM7TDMI</span><br><span class="line">--cpu=ARM720T</span><br><span class="line">--cpu=ARM7TDMI-S</span><br><span class="line">--cpu=ARM9TDMI</span><br><span class="line">--cpu=ARM920T</span><br><span class="line">--cpu=ARM922T</span><br><span class="line">--cpu=ARM9E-S</span><br><span class="line">--cpu=ARM926EJ-S</span><br><span class="line">--cpu=ARM946E-S</span><br><span class="line">--cpu=ARM966E-S</span><br><span class="line">--cpu=Cortex-M0</span><br><span class="line">--cpu=Cortex-M0plus</span><br><span class="line">--cpu=SC000</span><br><span class="line">--cpu=Cortex-M1</span><br><span class="line">--cpu=Cortex-M1.os_extension</span><br><span class="line">--cpu=Cortex-M1.no_os_extension</span><br><span class="line">--cpu=Cortex-M3</span><br><span class="line">--cpu=Cortex-M3-rev0</span><br><span class="line">--cpu=SC300</span><br><span class="line">--cpu=Cortex-M4</span><br><span class="line">--cpu=Cortex-M4.fp.sp</span><br><span class="line">--cpu=Cortex-M7</span><br><span class="line">--cpu=Cortex-M7.fp.sp</span><br><span class="line">--cpu=Cortex-M7.fp.dp</span><br><span class="line">--cpu=Cortex-R4</span><br><span class="line">--cpu=Cortex-R4F</span><br><span class="line">--cpu=Cortex-A5</span><br><span class="line">--cpu=Cortex-A5.vfp</span><br><span class="line">--cpu=Cortex-A5.neon</span><br><span class="line">--cpu=Cortex-A7</span><br><span class="line">--cpu=Cortex-A7.no_neon</span><br><span class="line">--cpu=Cortex-A7.no_neon.no_vfp</span><br><span class="line">--cpu=Cortex-A8</span><br><span class="line">--cpu=Cortex-A8.no_neon</span><br><span class="line">--cpu=Cortex-A8NoNEON</span><br><span class="line">--cpu=Cortex-A9</span><br><span class="line">--cpu=Cortex-A9.no_neon</span><br><span class="line">--cpu=Cortex-A9.no_neon.no_vfp</span><br><span class="line">--cpu=Cortex-A12</span><br><span class="line">--cpu=Cortex-A12.no_neon.no_vfp</span><br><span class="line">--cpu=Cortex-A15</span><br><span class="line">--cpu=Cortex-A15.no_neon</span><br><span class="line">--cpu=Cortex-A15.no_neon.no_vfp</span><br><span class="line">--cpu=Cortex-A17</span><br><span class="line">--cpu=Cortex-A17.no_neon.no_vfp</span><br></pre></td></tr></table></figure>
<h2 id="about-startup-file">ABOUT STARTUP FILE</h2>
<p>CubeMX 针对不同的编译方式和平台生成对应的 <code>startup file</code> 。而使用 Unix Makefile 编译的 <code>startup_stm32l476xx.s</code> 和 使用 Keil MDK-ARM 的是不一样的。</p>
<p><code>startup_stm32xxxxxx.s</code> 是使用汇编语言写好的基本程序，当STM32 芯片上电启动的时候，会执行此处的汇编程序，从而建立 C 语言的运行环境，所以称之为启动文件。</p>
<p>由于编译器不一致，所以 <code>.s</code> 的启动文件也不能互相兼容，需要使用 CubeMX重新生成。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220609110616631.png" alt="image-20220609110616631" /><figcaption aria-hidden="true">image-20220609110616631</figcaption>
</figure>
<h1 id="debug">DEBUG</h1>
<h2 id="error">ERROR</h2>
<h3 id="error-35-please-select-first-the-target-stm32l4xx-device-used-in-your-application">ERROR #35: PLEASE SELECT FIRST THE TARGET STM32L4XX DEVICE USED IN YOUR APPLICATION</h3>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608105439447.png" alt="image-20220608105439447" /><figcaption aria-hidden="true">image-20220608105439447</figcaption>
</figure>
<p>没有添加宏定义，添加 <code>-DSTM32L476xx</code> 和 <code>-DUSE_HAL_DRIVER</code> 即可。</p>
<h3 id="error-l6050u-the-code-size-of-the-image-exceeds-the-maximum">ERROR L6050U: THE CODE SIZE OF THE IMAGE EXCEEDS THE MAXIMUM</h3>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608110734097.png" alt="image-20220608110734097" /><figcaption aria-hidden="true">image-20220608110734097</figcaption>
</figure>
<blockquote>
<p>版权问题，当你在使用keil时，出现 <code>error: L6050U: The code size of this image (45178 bytes) exceeds the maximum allowed for this version of the linker.</code> 的时候，那就是 keil 没有被破解，软件本身的字节数有局限性，需要下载个MDK注册机进行破解！</p>
</blockquote>
<h3 id="error-a1854e-unknown-opcode-blx-maybe-wrong-target-cpu">Error: A1854E: Unknown opcode 'BLX', maybe wrong target CPU?</h3>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608151900214.png" alt="image-20220608151900214" /><figcaption aria-hidden="true">image-20220608151900214</figcaption>
</figure>
<h2 id="warning">WARNING</h2>
<h3 id="warning-1295-d-deprecated-declaration-two_wired_resync---give-arg-types">Warning: #1295-D: Deprecated declaration two_wired_resync - give arg types</h3>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608135309057.png" alt="image-20220608135309057" /><figcaption aria-hidden="true">image-20220608135309057</figcaption>
</figure>
<p>在传递参数为空的函数中，必须写 <code>void</code> ，armcc要求比较严格，<code>arm-none-eabi</code> 的要求比较宽松。</p>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhangsx/p/zhangsx_keil_tools_usage.html">keil编译链接过程以及ARMCC、ARMASM、FROMELF、ARMLINK、ARMAR的使用</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.arm.com/documentation/dui0375/g/Compiler-Command-line-Options/">ARM Compiler v5.06 for uVision armcc User Guide</a></li>
<li>《<a target="_blank" rel="noopener" href="https://documentation-service.arm.com/static/5f721c6c1b758617cd950f6f?token=">ARM® Compiler v5.06 for μVision®</a>》</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/05/24/Computer/2022-05-24-%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/24/Computer/2022-05-24-%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">嵌入式软件工程师的生产力工具</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-24 10:45:00" itemprop="dateCreated datePublished" datetime="2022-05-24T10:45:00+08:00">2022-05-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-11 14:47:56" itemprop="dateModified" datetime="2022-06-11T14:47:56+08:00">2022-06-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer/" itemprop="url" rel="index"><span itemprop="name">Computer</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="common-tools">Common Tools</h1>
<p>软件启动：utools / alfred</p>
<p>小插件合集：utools</p>
<p>文件搜索：everything(windows)</p>
<p>MD：Typora（插件Pandoc）</p>
<p>图床：picgo</p>
<p>自由：V2Ray-Core / ClashX</p>
<p>网站视频下载：Downie4</p>
<p>截图：Snipaste</p>
<p>解压：Bandizip</p>
<p>思维导图：Xmind</p>
<p>翻译：deepl /</p>
<h1 id="engineer">Engineer</h1>
<p>BASH：zsh（Oh-my-zsh）</p>
<p>终端插件：<a href="fig.io">fig</a></p>
<p>zsh皮肤：powerlevel10k</p>
<h1 id="python">Python</h1>
<p>代码编辑器：Jupyter Lab（比Notebook更好用）</p>
<p>Python环境管理工具：Miniconda</p>
<p>Python常用库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pandas xlrd openpyxl xlsxwriter requests lxml html5lib BeautifulSoup4 matplotlib seaborn plotly bokeh scipy statsmodels python-frontmatter opencv-python</span><br></pre></td></tr></table></figure>
<h1 id="embedded">Embedded</h1>
<h2 id="vs-code-插件">VS code 插件</h2>
<p>git痕迹查看：GitLens</p>
<p>代码注释：Doxygen</p>
<p>Keil开发代替IDE：EIDE</p>
<h2 id="compiling">Compiling</h2>
<p>交叉编译：cmake / make</p>
<p>单元测试：valgrind lcov</p>
<h1 id="jenkins">Jenkins</h1>
<p>environment Injector</p>
<p>Publish Over FTP</p>
<p>CMake</p>
<p>xUnit</p>
<h1 id="linux">Linux</h1>
<ul>
<li><code>rsync</code> ：同步文件。</li>
<li><code>tree</code> ：目录树</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/05/22/Programming/Python/2022-05-22-python-%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/22/Programming/Python/2022-05-22-python-%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97/" class="post-title-link" itemprop="url">python 调试日志</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-22 01:25:00" itemprop="dateCreated datePublished" datetime="2022-05-22T01:25:00+08:00">2022-05-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-09 21:57:55" itemprop="dateModified" datetime="2022-06-09T21:57:55+08:00">2022-06-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="奇淫巧技">奇淫巧技</h1>
<h2 id="文本替换">文本替换</h2>
<h3 id="object-类型文本替换">object 类型文本替换</h3>
<p>object 目前还没有找到替换方法，可以将 <code>object</code> 类型转换成 <code>string</code> 数据类型，再用 <code>str.replace()</code> 方法进行文本替换。</p>
<ol type="1">
<li>用 <code>.astype('string')</code> 方法将 <code>object</code> 类型转换成 <code>string</code> 类型。</li>
<li>使用 <code>.str.replace(&lt;old-string&gt;,&lt;new-string&gt;)</code> 方法对文本进行替换。并使用 <code>tmp</code> 变量进行保存。</li>
<li>将 <code>tmp</code> 变量重新赋值给原来的变量。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pdata[<span class="string">&#x27;timestamp&#x27;</span>] = pdata.timestamp.astype(<span class="string">&#x27;string&#x27;</span>)  <span class="comment"># 将 object 类型转换成 string类型</span></span><br><span class="line">tmp = pdata[<span class="string">&#x27;timestamp&#x27;</span>].<span class="built_in">str</span>.replace(<span class="string">&#x27;BIN3-&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">pdata[<span class="string">&#x27;timestamp&#x27;</span>] = tmp</span><br></pre></td></tr></table></figure>
<h1 id="debug-record">DEBUG RECORD</h1>
<h2 id="nonetype-object-is-not-subscriptable">nonetype object is not subscriptable</h2>
<p>大概意思就是，这个 <code>timestamp</code> 是 <code>object</code> 数据类型，替换了之后这个不能显示了估计。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220522012451872.png" alt="image-20220522012451872" /><figcaption aria-hidden="true">image-20220522012451872</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/05/11/Programming/2022-05-11-wsl%E4%B8%8B%E7%BC%96%E8%AF%91stm32%E5%B9%B3%E5%8F%B0%E7%9A%84%E8%BD%AF%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/Programming/2022-05-11-wsl%E4%B8%8B%E7%BC%96%E8%AF%91stm32%E5%B9%B3%E5%8F%B0%E7%9A%84%E8%BD%AF%E4%BB%B6/" class="post-title-link" itemprop="url">wsl下编译stm32平台的软件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-11 15:19:00" itemprop="dateCreated datePublished" datetime="2022-05-11T15:19:00+08:00">2022-05-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-09 21:53:32" itemprop="dateModified" datetime="2022-06-09T21:53:32+08:00">2022-06-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文是介绍嵌入式工程师的CLI编译工具部署方法，所用编译器是 ARM GCC，即 <code>gcc-arm-none-eabi</code> ，案例也是使用 STM32 CubeMX 生成的文件。中间涉及到一些 <strong>单元测试</strong> 相关的插件安装可以视情况选择或弃用。</p>
<p>下方的操作需要提前安装好 Windows子系统Linux（<strong>WSL</strong>，Windows Subsystem Linux）或者 <strong>虚拟机</strong>，且确保使用的是 shell 是 <code>zsh</code>，否则下方的一些配置文件（如 <code>~/.zshrc</code> ）需要手动改成对应 shell 的配置文件。</p>
<h1 id="安装软件">安装软件</h1>
<figure>
<img src="https://pic.islet.space/2022/05/image-20220507181341683.png" alt="image-20220507181341683" /><figcaption aria-hidden="true">image-20220507181341683</figcaption>
</figure>
<h2 id="安装git">安装git</h2>
<p>仅实例安装，配置 用户名 和 邮箱 那些的操作请自行搜索。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install git</span><br></pre></td></tr></table></figure>
<h2 id="安装工具链编译器">安装工具链/编译器</h2>
<ol type="1">
<li>到 <a target="_blank" rel="noopener" href="https://developer.arm.com/downloads/-/gnu-rm">官网</a> 去下载自己需要的编译器。</li>
<li>然后进行解压到与 repo 相同位置的 <code>~/bin</code> （放其他位置也可以）。</li>
<li>设置系统变量</li>
</ol>
<p>下方以 <code>gcc-arm-none-eabi-5_4-2016q3</code> 为例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/Downloads</span><br><span class="line">wget https://storage.islet.space/02_Softwares/06_Embedded/01_CrossCompiler/gcc-arm-none-eabi/gcc-arm-none-eabi-5_4-2016q3.tar.gz</span><br><span class="line">tar -zxvf gcc-arm-none-eabi-5_4-2016q3.tar.gz</span><br><span class="line">cp -r ~/Downloads/gcc-arm-none-eabi-5_4-2016q3 ~/bin/</span><br></pre></td></tr></table></figure>
<h2 id="安装编译工具">安装编译工具</h2>
<p>下方这些操作默认安装不指定版本的cmake和make。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install cmake make</span><br></pre></td></tr></table></figure>
<h2 id="安装单元测试工具">安装单元测试工具</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install lcov valgrind</span><br></pre></td></tr></table></figure>
<h2 id="安装repo">安装repo</h2>
<p><code>git</code> 和 <code>python2</code> 是 <code>repo</code> 的依赖，记得先安装。</p>
<ol type="1">
<li>创建 <code>~/bin</code> 路径。</li>
<li>选择国内源安装repo。</li>
<li>赋予 <code>~/bin/repo</code> 执行权限。</li>
<li>使 <code>REPO_URL</code> 变成系统变量。</li>
<li>将 <code>~/bin</code> 放到 <code>PATH</code> 环境变量中。</li>
<li>使配置生效。。</li>
</ol>
<p>这一步简化成下面这些操作，对照着执行即可。（千万不要直接用 <code>apt install repo</code> 进行安装，国内大部分情况用不了）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/bin</span><br><span class="line">curl https://mirrors.tuna.tsinghua.edu.cn/git/git-repo &gt; ~/bin/repo</span><br><span class="line">chmod a+x ~/bin/repo</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export REPO_URL=&#x27;https://mirrors.tuna.tsinghua.edu.cn/git/git-repo&#x27;&quot;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export PATH=~/bin:<span class="variable">$PATH</span>&quot;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>
<h1 id="拉代码">拉代码</h1>
<p>下方仅实例 repo 工具的代码拉取指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">repo init -u git@github.com:xxx/xxxxxx.git -b dev</span><br><span class="line">repo sync -j8</span><br></pre></td></tr></table></figure>
<p>拉下来之后会有下面这些文件，其中 <code>out</code> 、 <code>tmp</code> 是之后才生成的。</p>
<figure>
<img src="https://pic.islet.space/2022/05/image-20220511154414265.png" alt="image-20220511154414265" /><figcaption aria-hidden="true">image-20220511154414265</figcaption>
</figure>
<h1 id="编译命令">编译命令</h1>
<p>使用编写的脚本进行单元测试、编译和其他操作：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./sdk/build/build.sh --board stm32l476rg --compiler <span class="variable">$ARM_GCC_PATH</span> --debug</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/04/19/Communication/2022-01-18-HALF-DUPLEX-SPI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/19/Communication/2022-01-18-HALF-DUPLEX-SPI/" class="post-title-link" itemprop="url">HALF DUPLEX SPI</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-19 13:40:00" itemprop="dateCreated datePublished" datetime="2022-04-19T13:40:00+08:00">2022-04-19</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-04-20 20:05:04" itemprop="dateModified" datetime="2022-04-20T20:05:04+08:00">2022-04-20</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="spi简介">SPI简介</h1>
<p>SPI 的物理线支持 <strong>三种类型</strong>：</p>
<ul>
<li><strong>片选线</strong>（NCS / CS / SS），某些数据手册会将 <strong>片选引脚</strong> 称为 <code>NSS</code> /<code>NCS</code> / <code>SEL</code> (<strong><em>Sel</em></strong>ect) / <code>CS</code> (<strong><em>C</em></strong>hip <strong><em>S</em></strong>elect) / <code>STE</code> (<strong><em>S</em></strong>laver <strong><em>T</em></strong>ransmit <strong><em>E</em></strong>nable)。</li>
<li><strong>时钟线</strong>（CLK / SCK）</li>
<li><strong>数据线</strong>（DA 或 MOSI 和 MISO ）（此处的 DA 特指单根支持半双工的数据线）。</li>
</ul>
<p><mark>需要注意的是，SPI的通信线有太多的名称，需要自行对照芯片手册进行查询，避免混淆。</mark></p>
<p>SPI 通过对硬件资源的使用修改（禁用片选、禁 / 复用数据线）可以达到 <strong>全双工</strong> 或 <strong>半双工</strong> 通信的目的。标准SPI为 四线SPI （CS / CLK / MOSI / MISO）；最低支持2根数据引脚（仅保留 CLK / DA，其中DA为分时复用数据线 ）来达到半双工通信的目的，可以增加一 / 多根 CS 来达到拓展SPI从设备片选的目的；也可以利用四根独立的半双工数据线，来达到 标准四线SPI 四倍通信能力 的 六线SPI（一般被称为 <code>Quad-IO SPI</code>）。</p>
<h2 id="spi分类">SPI分类</h2>
<p>SPI通信按GPIO 数量可以分类为 2~6线 SPI，包含单工、半双工、全双工三总。</p>
<table>
<thead>
<tr class="header">
<th>按GPIO数量分类</th>
<th>通信制式</th>
<th>通信线</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>两线SPI</td>
<td>单工/半双工</td>
<td>CLK / DA 或 CLK / MOSI 或 CLK / MISO</td>
</tr>
<tr class="even">
<td>三线SPI</td>
<td>单工/半双工/全双工</td>
<td>CS / CLK / DA 或 CLK / MOSI / MISO</td>
</tr>
<tr class="odd">
<td>四线SPI</td>
<td>全双工</td>
<td>CS / CLK / MOSI / MISO</td>
</tr>
<tr class="even">
<td>六线SPI</td>
<td>全双工</td>
<td>CS / CLK / DA1 / DA2 / DA3 / DA4</td>
</tr>
</tbody>
</table>
<blockquote>
<p>例如，据STM32L476RG芯片手册《<a target="_blank" rel="noopener" href="https://www.st.com/resource/en/reference_manual/rm0351-stm32l47xxx-stm32l48xxx-stm32l49xxx-and-stm32l4axxx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf">RM0351</a>》第1450页所示，SPI外设可以被配置为以下三种模式，即 <strong>三线全双工</strong>，<strong>两线半双工</strong> 和 <strong>两线单工</strong>。</p>
<ul>
<li>Full-duplex synchronous transfers on three lines</li>
<li>Half-duplex synchronous transfer on two lines (with bidirectional data line)</li>
<li>Simplex synchronous transfers on two lines (with unidirectional data line)</li>
</ul>
</blockquote>
<h1 id="half-duplex-spi">HALF DUPLEX SPI</h1>
<p>半双工通信可以是 两线SPI 或 三线SPI，后面着重说明两者异同。</p>
<h2 id="pin-definition">PIN DEFINITION</h2>
<p><strong>NCS</strong>： SPI控制读写使能信号；<mark style="font-weight: 900;">使用时需要被拉低</mark>，否则SDIO会处在 HIGH-Z 态，而SCLK信号也会被无视。也可以被用于在通信错误发生时重置SPI 通信。两线SPI不需要这根线，但个别芯片可能需要这个引脚接地（不能悬空），具体看芯片手册。</p>
<p><strong>SDIO</strong>： SPI的数据读写端口；半双工读写。只有在“从被控设备读出数据”的情况下，<code>SDIO</code> 才会由被控制设备控制。</p>
<p><strong>SCLK</strong>： SPI接口时钟；<mark style="font-weight: 900;">总是由主控制器生成和控制。</mark></p>
<h2 id="transmission-protocol">TRANSMISSION PROTOCOL</h2>
<p>跟其他通信类似，SPI 的 SDIO 需要在 时钟低电平时 进行电平跳变。</p>
<p>半双工SPI读写操作都包含两个字（byte），第一个字包含1 bit的 <strong>数据方向（或称 控制位）</strong> 和 7 bit的 <strong>地址</strong>，第二个字包含 <strong>数据</strong>。</p>
<h3 id="关于数据方向控制位">关于数据方向/控制位</h3>
<p>通常定义是，当需要写入数据时，控制位写 <code>1</code> 。当需要读出数据时，控制位写 <code>0</code> 。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220118135819247.png" alt="image-20220118135819247" style="zoom: 50%;" /></p>
<p>但不一定所有支持半双工SPI的通信控制位都是在MSB，有可能是在 LSB 。</p>
<blockquote>
<p>如，下方右侧 SL8541E 的安卓平台主控，支持半双工SPI，但是其控制位就在地址字符的LSB上。</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220419235450360.png" alt="image-20220419235450360" /><figcaption aria-hidden="true">image-20220419235450360</figcaption>
</figure>
</blockquote>
<h3 id="写操作">写操作</h3>
<p><mark style="font-weight:900;">主控制器在SCLK下降沿时改变 SDIO的电平，被控设备在SCLK上升沿时读取SDIO的电平。</mark></p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220118140526017.png" alt="image-20220118140526017" /><figcaption aria-hidden="true">image-20220118140526017</figcaption>
</figure>
<h3 id="读取操作">读取操作</h3>
<blockquote>
<p>SDIO会在SCLK下降沿时修改，主控制器需要在SCLK的上升沿时读取SDIO的电平信息。</p>
</blockquote>
<p><strong>注意</strong>：发送完地址字 之后需要延长半个周期的时钟低电平。</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220118141033005.png" alt="image-20220118141033005" /><figcaption aria-hidden="true">image-20220118141033005</figcaption>
</figure>
<h1 id="debug-records">DEBUG RECORDS</h1>
<p>下面这个时序图错误的坑是真的大，调了好就才折腾明白，这不能是 <code>Hi-Z</code> 态。</p>
<h2 id="时序图错误">时序图错误</h2>
<p>内部调试时发现，SDIO在读取数据前后必须是 <strong>输出模式</strong>，最好 <strong>强制拉高</strong>，而不是 <code>Hi-Z</code> 态。</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220419210753902.png" alt="image-20220419210753902" /><figcaption aria-hidden="true">image-20220419210753902</figcaption>
</figure>
<h2 id="读写单个字符">读写单个字符</h2>
<p>以下这两个函数中的 <code>for()</code> 使用了 MSB 发送数据，最好不要自作聪明将 <code>i</code> 的数据类型改为 <code>uint8_t</code> 或其他非负型数据，以下这种循环写法会让程序陷入死循环的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write_byte</span><span class="params">(<span class="keyword">uint8_t</span> data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">7</span>; i&gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( (data &gt;&gt; i) &amp; <span class="number">0x01</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            write_high_level();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            write_low_level();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">uint8_t</span> <span class="title">read_byte</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">uint8_t</span> data = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">7</span>; i&gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        SCLK_SET_LOW;</span><br><span class="line">        delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line"></span><br><span class="line">        SCLK_SET_HIGH;</span><br><span class="line">        delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line"></span><br><span class="line">        data |= HAL_GPIO_ReadPin(SPI_DATA_GPIO_Port, SPI_DATA_Pin) &lt;&lt; i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="source-code">SOURCE CODE</h1>
<p>下方是适用于 STM32 平台的 <strong>GPIO-模拟</strong> <strong>半双工SPI</strong> 代码，利用 空指令进行延时控制，实现半双工（三线/两线）SPI 的通信。</p>
<p>需要适配以下几个功能：</p>
<ol type="1">
<li>控制精细度在 <span class="math inline">\([10^{-9}s:10^{-6}s]\)</span> 之间的 <strong>精准延时</strong>（如果做不到，通信速率就上不去 <code>1MHz</code> ）。</li>
<li>控制引脚电平的宏定义。</li>
<li><strong>设置数据接口输出</strong> 和 <strong>设置数据接口输入</strong> 的代码。</li>
<li><strong>拉高电平</strong> 和 <strong>拉低电平</strong> 的代码。</li>
<li>对照着 <strong>正确的时序图</strong> 撸一遍 <strong>读单字符</strong> 和 <strong>写单字符</strong> 的代码。</li>
<li>对照着 <strong>正确的时序图</strong> 撸一遍 <strong>写寄存器</strong> 和 <strong>读寄存器</strong> 的代码。</li>
</ol>
<p><strong>注意</strong>：都是按顺序来完成的，所有后面的功能都需要依托于前面的功能来实现。而且，需要用示波器（有条件）进行测量以校准通信速率，并使用正确的时序图进行编码（如果是错误的，浪费时间，尽快跟厂家确认）。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * HEARDER FILES</span></span><br><span class="line"><span class="comment"> *---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;spi_access.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stm32l4xx_hal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;log.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;main.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * MACRO DEFINITIONS</span></span><br><span class="line"><span class="comment"> *---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">// 通信引脚定义</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SPI_DATA_Pin GPIO_PIN_5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SPI_DATA_GPIO_Port GPIOC</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SPI_CLK_Pin GPIO_PIN_6</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SPI_CLK_GPIO_Port GPIOC</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SPI_CS_Pin GPIO_PIN_8</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SPI_CS_GPIO_Port GPIOC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义电平</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> HIGH_LEVEL</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HIGH_LEVEL GPIO_PIN_SET</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> LOW_LEVEL</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LOW_LEVEL GPIO_PIN_RESET</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义引脚电平控制</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SDIO_SET_HIGH &#123;HAL_GPIO_WritePin(SPI_DATA_GPIO_Port,SPI_DATA_Pin,HIGH_LEVEL);&#125;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SDIO_SET_LOW  &#123;HAL_GPIO_WritePin(SPI_DATA_GPIO_Port,SPI_DATA_Pin,LOW_LEVEL);&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SDIO_SET_IN   &#123;HAL_GPIO_ReadPin(SPI_DATA_GPIO_Port, SPI_DATA_Pin);&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SCLK_SET_HIGH &#123;HAL_GPIO_WritePin(SPI_CLK_GPIO_Port, SPI_CLK_Pin, HIGH_LEVEL);&#125;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SCLK_SET_LOW  &#123;HAL_GPIO_WritePin(SPI_CLK_GPIO_Port, SPI_CLK_Pin, LOW_LEVEL);&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SNCS_SET_HIGH &#123;HAL_GPIO_WritePin(SPI_CS_GPIO_Port, SPI_CS_Pin, HIGH_LEVEL);&#125;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SNCS_SET_LOW  &#123;HAL_GPIO_WritePin(SPI_CS_GPIO_Port, SPI_CS_Pin, LOW_LEVEL);&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 电平延时</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LEVEL_DELAY_SLICES 80</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 寄存器（最大）尝试写入次数</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_WRITE_TIMES 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * DATA TYPE DECLARATION</span></span><br><span class="line"><span class="comment"> *---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">// spi句柄</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> handle;</span><br><span class="line">&#125; spi_dev;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * GLOBAL PARAMETERS</span></span><br><span class="line"><span class="comment"> *---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">bool</span> two_wired_spi;  <span class="comment">// 两线SPI使能开关</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * PRIVATE FUNCTIONS DEFINITION</span></span><br><span class="line"><span class="comment"> *---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief delay for a slice of cpu</span></span><br><span class="line"><span class="comment"> * @param &#123;volatile uint32_t&#125; times</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delay_nop</span><span class="params">(<span class="keyword">volatile</span> <span class="keyword">uint32_t</span> times)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">uint32_t</span> i = <span class="number">0</span>; i &lt; times; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        __NOP();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief delay for 1us</span></span><br><span class="line"><span class="comment"> * @param &#123;volatile uint32_t&#125; times</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delay_us</span><span class="params">(<span class="keyword">volatile</span> <span class="keyword">uint32_t</span> times)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">uint32_t</span> i = <span class="number">0</span>; i &lt; times; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">        __NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();__NOP();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">uint16_t</span> times)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">uint16_t</span> i = <span class="number">0</span>; i &lt; times; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        delay_us(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sdio_input_mode</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    GPIO_InitStruct.Pin = SPI_DATA_Pin;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_INPUT;</span><br><span class="line">    HAL_GPIO_Init(SPI_DATA_GPIO_Port, &amp;GPIO_InitStruct);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sdio_output_mode</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    GPIO_InitStruct.Pin = SPI_DATA_Pin ;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;</span><br><span class="line">    GPIO_InitStruct.Pull = GPIO_NOPULL;</span><br><span class="line">    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;</span><br><span class="line">    HAL_GPIO_Init(SPI_DATA_GPIO_Port, &amp;GPIO_InitStruct);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write_high_level</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SCLK_SET_LOW;</span><br><span class="line">    SDIO_SET_HIGH;</span><br><span class="line">    delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">    SCLK_SET_HIGH;</span><br><span class="line">    delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write_low_level</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SCLK_SET_LOW;</span><br><span class="line">    SDIO_SET_LOW;</span><br><span class="line">    delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">    SCLK_SET_HIGH;</span><br><span class="line">    delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write_byte</span><span class="params">(<span class="keyword">uint8_t</span> data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">7</span>; i&gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( (data &gt;&gt; i) &amp; <span class="number">0x01</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            write_high_level();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            write_low_level();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">uint8_t</span> <span class="title">read_byte</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">uint8_t</span> data = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">7</span>; i&gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        SCLK_SET_LOW;</span><br><span class="line">        data |= HAL_GPIO_ReadPin(SPI_DATA_GPIO_Port, SPI_DATA_Pin) &lt;&lt; i;</span><br><span class="line">        delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line"></span><br><span class="line">        SCLK_SET_HIGH;</span><br><span class="line">        delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * PUBLIC FUNCTIONS DEFINITION</span></span><br><span class="line"><span class="comment"> *---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">write_sensor_init</span><span class="params">(<span class="keyword">bool</span> switch_two_wired_spi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(switch_two_wired_spi) </span><br><span class="line">    &#123;</span><br><span class="line">        two_wired_spi = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        two_wired_spi = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    spi_dev *instance = <span class="literal">NULL</span>;</span><br><span class="line">    instance = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(spi_dev));</span><br><span class="line">    <span class="built_in">memset</span>(instance, <span class="number">0</span>, <span class="keyword">sizeof</span>(spi_dev));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(two_wired_spi)</span><br><span class="line">    &#123;</span><br><span class="line">        SNCS_SET_LOW;</span><br><span class="line">        SCLK_SET_HIGH;</span><br><span class="line">        delay_ms(<span class="number">5</span>);</span><br><span class="line">        SCLK_SET_LOW;</span><br><span class="line">        delay_ms(<span class="number">1</span>);</span><br><span class="line">        SCLK_SET_HIGH;</span><br><span class="line">        delay_ms(<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        sdio_input_mode();</span><br><span class="line">        SCLK_SET_HIGH;</span><br><span class="line">        delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">        SCLK_SET_LOW;</span><br><span class="line">        delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">        SCLK_SET_HIGH;</span><br><span class="line">        delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    instance-&gt;handle = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">void</span> *)instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write_sensor_deinit</span><span class="params">(<span class="keyword">void</span>* handle)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (handle != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">free</span>(handle);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        LOGE(<span class="string">&quot;ERROR: NULL spi handle.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spi_resynchronized</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (two_wired_spi)</span><br><span class="line">    &#123;</span><br><span class="line">        SCLK_SET_HIGH;</span><br><span class="line">        SDIO_SET_HIGH;</span><br><span class="line">        delay_ms(<span class="number">2</span>);</span><br><span class="line">        SCLK_SET_LOW;</span><br><span class="line">        delay_us(<span class="number">1</span>);</span><br><span class="line">        SCLK_SET_HIGH;</span><br><span class="line">        delay_ms(<span class="number">2</span>);</span><br><span class="line">        SDIO_SET_IN;</span><br><span class="line">        delay_ms(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 暂时未完成</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">write_register</span><span class="params">(<span class="keyword">uint8_t</span> regAddr, <span class="keyword">uint8_t</span> regData)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    regAddr |= <span class="number">0x80</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">uint8_t</span> write_times = <span class="number">0</span>; write_times &lt; MAX_WRITE_TIMES; write_times++)</span><br><span class="line">    &#123;</span><br><span class="line">        sdio_output_mode();  <span class="comment">// 设置SDIO为输出模式</span></span><br><span class="line">        SDIO_SET_HIGH;       <span class="comment">// 拉高SDIO电平</span></span><br><span class="line">        SCLK_SET_HIGH;       <span class="comment">// 拉高SCLK电平</span></span><br><span class="line">        delay_us(<span class="number">1</span>);         <span class="comment">// 2-wired spi</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!two_wired_spi)</span><br><span class="line">        &#123;</span><br><span class="line">            SNCS_SET_LOW;    <span class="comment">// 拉低SNCS电平</span></span><br><span class="line">        &#125;</span><br><span class="line">        delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line"></span><br><span class="line">        write_byte(regAddr);</span><br><span class="line">        write_byte(regData);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!two_wired_spi)</span><br><span class="line">        &#123;</span><br><span class="line">            SNCS_SET_HIGH;</span><br><span class="line">            sdio_input_mode();</span><br><span class="line">            delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            delay_us(<span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(read_register(regAddr) == regData) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    LOGE(<span class="string">&quot;ERROR: Write register failed.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">uint8_t</span> <span class="title">read_register</span><span class="params">(<span class="keyword">uint8_t</span> regAddr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">uint8_t</span> data = <span class="number">0</span>;</span><br><span class="line">    regAddr &amp;= <span class="number">0x7F</span>;     <span class="comment">// 设置为读取模式</span></span><br><span class="line"></span><br><span class="line">    sdio_output_mode();  <span class="comment">// 设置SDIO为输出模式</span></span><br><span class="line">    <span class="keyword">if</span>(two_wired_spi) delay_us(<span class="number">10</span>);</span><br><span class="line">    SDIO_SET_HIGH;       <span class="comment">// 拉高SDIO电平</span></span><br><span class="line">    SCLK_SET_HIGH;       <span class="comment">// 拉高SCLK电平</span></span><br><span class="line">    <span class="keyword">if</span>(two_wired_spi) delay_us(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!two_wired_spi)</span><br><span class="line">    &#123;</span><br><span class="line">        SNCS_SET_LOW;    <span class="comment">// 拉低SNCS电平</span></span><br><span class="line">    &#125;</span><br><span class="line">    delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line"></span><br><span class="line">    write_byte(regAddr);</span><br><span class="line"></span><br><span class="line">    SCLK_SET_LOW;</span><br><span class="line">    sdio_input_mode();</span><br><span class="line">    <span class="keyword">if</span>(two_wired_spi) delay_us(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">else</span> delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line"></span><br><span class="line">    data = read_byte();</span><br><span class="line"></span><br><span class="line">    SCLK_SET_HIGH;</span><br><span class="line">    sdio_output_mode();</span><br><span class="line">    delay_nop(LEVEL_DELAY_SLICES);</span><br><span class="line">    <span class="keyword">if</span>(two_wired_spi) delay_us(<span class="number">40</span>);</span><br><span class="line">    <span class="keyword">else</span> SNCS_SET_HIGH;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li>[【硬件通信协议】5. 实例解析非标准SPI(三线SPI)_sishuihuahua的博客-CSDN博客_三线spi](https://blog.csdn.net/sishuihuahua/article/details/105047926)</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/04/13/Programming/2022-04-13-EIDE-with-VS-Code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/13/Programming/2022-04-13-EIDE-with-VS-Code/" class="post-title-link" itemprop="url">EIDE with VS Code</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-13 18:00:00" itemprop="dateCreated datePublished" datetime="2022-04-13T18:00:00+08:00">2022-04-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-04-15 22:57:36" itemprop="dateModified" datetime="2022-04-15T22:57:36+08:00">2022-04-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文主要是将 在KEIL上能够成功编译的 STM32F103VE 芯片项目转移到 VS Code 的 <strong>EIDE</strong> 插件中，主要是针对 Keil MDK-ARM 中的 Option 进行参数复制，即 EIDE 的配置。</p>
<p>需要以下两个工具：</p>
<ul>
<li>Keil MDK-ARM</li>
<li>Keil.STM32F1xx_DFP.2.4.0.pack</li>
</ul>
<p>其实还是依托于 Keil MDK-ARM ，只是换了 VS Code 的皮。</p>
<h1 id="eide-install">EIDE INSTALL</h1>
<p>首先需要在 VS Code 中安装 Embedded IDE（如下），官方手册：<a target="_blank" rel="noopener" href="https://docs.em-ide.com/">EIDE在线文档</a> 。</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220414214014581.png" alt="image-20220414214014581" /><figcaption aria-hidden="true">image-20220414214014581</figcaption>
</figure>
<h1 id="eide-configuration">EIDE CONFIGURATION</h1>
<p>对 EIDE 的配置主要包括 <a href="##扩展设置">扩展设置</a> 、<a href="##芯片支持包安装">芯片支持包安装</a> 、<a href="##构建参数设置">构建参数设置</a> 和 <a href="##项目属性设置">项目属性设置</a>。</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220414211312253.png" alt="image-20220414211312253" /><figcaption aria-hidden="true">image-20220414211312253</figcaption>
</figure>
<h2 id="扩展设置">扩展设置</h2>
<p>可以在 VS Code 的插件中选中 <code>Embedded IDE</code> ，在齿轮状设置图标菜单里选择 <code>扩展设置</code>，在里面配置好编译工具链的路径还有一些可设置选项。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414203531929.png" alt="image-20220414203531929" style="zoom:50%;" /></p>
<p>STM32 可以用 ARM CC 和 ARM GCC 进行编译，具体需要看芯片要求，Keil 的话用的是 ARM CC 5版本或者 ARM CC 6 版本。</p>
<p>可以到 Keil MDK-ARM 的安装路径下进行查看，例如 在 <code>D:\Keil_v5\ARM\ARMCC\bin</code> 中，选择右键 <code>用 Powershell 打开</code>，然后输入 <code>./armcc.exe</code> 即可查看版本号。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414183859215.png" alt="image-20220414183859215" style="zoom:50%;" /></p>
<p>主要配置六个参数即可，需要根据本地的 Keil 安装路径来进行设置（不要盲目复制粘贴）。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414203709473.png" alt="image-20220414203709473" style="zoom:50%;" /></p>
<p><img src="https://pic.islet.space/2022/04/image-20220414203744037.png" alt="image-20220414203744037" style="zoom:50%;" /></p>
<h2 id="芯片支持包安装">芯片支持包安装</h2>
<p>Keil 的芯片支持包主要看 <code>Option</code> -&gt; <code>Target</code> 下的 <code>STM32F103xx.svd</code> 。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414194711199.png" alt="image-20220414194711199" style="zoom:50%;" /></p>
<p>通过本地搜索可以看到这个文件需要通过安装 <code>.pack</code> 扩展包得到。</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220414190916865.png" alt="image-20220414190916865" /><figcaption aria-hidden="true">image-20220414190916865</figcaption>
</figure>
<p>到 <a target="_blank" rel="noopener" href="https://www.keil.com/dd2/Pack/">MDK5 Software Packs (keil.com)</a> 中搜索对应芯片的扩展包，如 <a target="_blank" rel="noopener" href="https://keilpack.azureedge.net/pack/Keil.STM32F1xx_DFP.2.4.0.pack"><code>Keil.STM32F1xx_DFP.2.4.0.pack</code></a> 。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414193428926.png" alt="image-20220414193428926" style="zoom:33%;" /></p>
<p>点击 芯片支持包 右侧的 加号，即可选择通过 <strong>在线安装</strong>（From Repo） 或者 <strong>离线安装</strong>（From Disk）。</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220414212238565.png" alt="image-20220414212238565" /><figcaption aria-hidden="true">image-20220414212238565</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220414212220319.png" alt="image-20220414212220319" /><figcaption aria-hidden="true">image-20220414212220319</figcaption>
</figure>
<p>安装完扩展包之后 再点击下图中的加号，输入芯片型号进行进一步选择。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414191124478.png" alt="image-20220414191124478" style="zoom: 33%;" /></p>
<p>即可查看芯片的大致信息：</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414190706840.png" alt="image-20220414190706840" style="zoom:33%;" /></p>
<h2 id="构建参数设置">构建参数设置</h2>
<p>构建参数的依据是 Keil 中的这几个参数选项卡：</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414212732414.png" alt="image-20220414212732414" style="zoom:50%;" /></p>
<p>方法：</p>
<ol type="1">
<li>提取 Keil 中的构建参数 （如下 C/C++ 参数设置）</li>
<li>提取 EIDE 中的构建参数</li>
<li>对比差异，以 Keil 为准对 EIDE 进行增删</li>
</ol>
<h3 id="cc-参数设置">C/C++ 参数设置</h3>
<p>下方是 Keil 中对 C/C++ 的构建参数管理页面：</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414200627162.png" alt="image-20220414200627162" style="zoom: 50%;" /></p>
<p>以下是从 Keil MD5 的 <code>Option</code> 中扒下来的编译参数，即最后一行的 <code>Compiler Control String</code> ：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-c --cpu Cortex-M3 -D__MICROLIB -g -O3 --apcs=interwork --split_sections -I include -I ../ -I ../../../Libraries/CMSIS/CM3/CoreSupport -I ../../../Libraries/CMSIS/CM3/DeviceSupport/ST/STM32F10x -I ../../../Libraries/STM32F10x_StdPeriph_Driver/inc -I ../../../Utilities/STM32_EVAL -I ../../../Utilities/STM32_EVAL/STM3210B_EVAL -I ../../../Utilities/STM32_EVAL/Common -I ../../STM32F10x_StdPeriph_Template -I ../MDK-ARM</span><br><span class="line">-IF:/Workspace/xiwang_production_test_embedded/Project/STM32F10x_StdPeriph_Template/MDK-ARM/RTE/_STM3210B-EVAL</span><br><span class="line">-ID:/Keil_v5/ARM/PACK/ARM/CMSIS/5.0.0/CMSIS/Include</span><br><span class="line">-ID:/Keil_v5/ARM/PACK/Keil/STM32F1xx_DFP/2.4.0/Device/Include</span><br><span class="line">-D__UVISION_VERSION=<span class="string">&quot;522&quot;</span> -D_RTE_ -DSTM32F10X_HD -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD -DUSE_STM3210B_EVAL</span><br><span class="line">-o .\build\STM3210B-EVAL\*.o --omf_browse .\build\STM3210B-EVAL\*.crf --depend .\build\STM3210B-EVAL\*.d</span><br></pre></td></tr></table></figure>
<p>以下是从 EIDE 中扒下来的编译命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"></span><br><span class="line">C <span class="built_in">command</span> line (armcc): </span><br><span class="line"></span><br><span class="line">-c --apcs=interwork --cpu Cortex-M3 --li --c99 -D__MICROLIB -O0 --split_sections --diag_suppress=1 --diag_suppress=1295 -g -I.\.. -I.\..\..\..\Libraries\CMSIS\CM3\CoreSupport -I.\..\..\..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I.\..\..\..\Libraries\STM32F10x_StdPeriph_Driver\inc -I.\..\..\..\Utilities\STM32_EVAL -I.\..\..\..\Utilities\STM32_EVAL\STM32100E_EVAL -I.\..\..\..\Utilities\STM32_EVAL\Common -I.\.cmsis\dsp_lib -I.\.cmsis\include -I.\RTE\_STM32100E-EVAL -I.\.eide\deps -I.\include -I.\.eide\deps -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD_VL -DUSE_STM32100E_EVAL -DGD32F10X_HD</span><br><span class="line"></span><br><span class="line">CPP <span class="built_in">command</span> line (armcc): </span><br><span class="line"></span><br><span class="line">-c --cpp --apcs=interwork --cpu Cortex-M3 --li -D__MICROLIB -O0 --split_sections --diag_suppress=1 --diag_suppress=1295 -g -I.\.. -I.\..\..\..\Libraries\CMSIS\CM3\CoreSupport -I.\..\..\..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I.\..\..\..\Libraries\STM32F10x_StdPeriph_Driver\inc -I.\..\..\..\Utilities\STM32_EVAL -I.\..\..\..\Utilities\STM32_EVAL\STM32100E_EVAL -I.\..\..\..\Utilities\STM32_EVAL\Common -I.\.cmsis\dsp_lib -I.\.cmsis\include -I.\RTE\_STM32100E-EVAL -I.\.eide\deps -I.\include -I.\.eide\deps -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD_VL -DUSE_STM32100E_EVAL -DGD32F10X_HD</span><br><span class="line"></span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p><strong>EIDE 中查看编译命令的方法</strong>：项目名称右键点击 <code>查看生成的编译器命令行</code> 即可。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414194229852.png" alt="image-20220414194229852" style="zoom:33%;" /></p>
<p>互相比对二者之间的编译参数差异，发现以下差异：</p>
<ol type="1">
<li>Keil 中的代码优化等级为 <code>3</code> 即参数 <code>-O3</code> ，而 EIDE 中为 <code>0</code> 即参数 <code>-O0</code> 。</li>
<li>EIDE 比 Kei多了几个参数 <code>--diag_suppress=1 --diag_suppress=1295</code> ，需要删除。</li>
</ol>
<h3 id="asm-和-linker-参数设置">ASM 和 Linker 参数设置</h3>
<p>对比过 Keil 的参数之后，保持如下设置：</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220414213239217.png" alt="image-20220414213239217" /><figcaption aria-hidden="true">image-20220414213239217</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220414213257541.png" alt="image-20220414213257541" /><figcaption aria-hidden="true">image-20220414213257541</figcaption>
</figure>
<h2 id="项目属性设置">项目属性设置</h2>
<h3 id="包含路径设置">包含路径设置</h3>
<p>这个就不多说了。</p>
<p>需要注意的是，RTE路径下的 <code>STM32xxx-EVAL</code> 一定要是正确的，可以多，不要少。</p>
<figure>
<img src="https://pic.islet.space/2022/04/image-20220414213503962.png" alt="image-20220414213503962" /><figcaption aria-hidden="true">image-20220414213503962</figcaption>
</figure>
<h3 id="预处理定义">预处理定义</h3>
<p>从 EIDE 导入 Keil 项目时，可能回设置很多不需要或者错误的 <strong>预处理定义</strong>（宏定义），需要跟 Keil 保持一致。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414213732758.png" alt="image-20220414213732758" style="zoom:50%;" /></p>
<p><img src="https://pic.islet.space/2022/04/image-20220414195358900.png" alt="image-20220414195358900" style="zoom:33%;" /></p>
<h1 id="debug-records">DEBUG RECORDS</h1>
<h2 id="expected-a">EXPECTED A }</h2>
<p>提示 少了 <code>&#125;</code> ，该文件是官方文件，应该不会错。经过检查，发现是宏定义过多导致的错误，修改过 <a href="###预处理定义">预处理定义</a> 中的宏定义设置就解决了。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414190748098.png" alt="image-20220414190748098" style="zoom:33%;" /></p>
<p>如下，<code>STM32F10X_HD</code> 和 <code>STM32F10X_HD_VL</code> 冲突了。</p>
<p><img src="https://pic.islet.space/2022/04/image-20220414194044509.png" alt="image-20220414194044509" style="zoom:50%;" /></p>
<p>最后，编译结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[ INFO ] start building at 2022-04-14 20:22:39</span><br><span class="line"></span><br><span class="line">[ TOOL ] ARM Compiler 5.06 update 4 (build 422)</span><br><span class="line"></span><br><span class="line">[ INFO ] file statistics (rebuild mode)</span><br><span class="line"></span><br><span class="line">+---------+-----------+-----------+-----------+--------+</span><br><span class="line">| C Files | Cpp Files | Asm Files | Lib Files | Totals |</span><br><span class="line">+---------+-----------+-----------+-----------+--------+</span><br><span class="line">| 46      | 0         | 1         | 0         | 47     |</span><br><span class="line">+---------+-----------+-----------+-----------+--------+</span><br><span class="line"></span><br><span class="line">[ INFO ] start compilation (<span class="built_in">jobs</span>: 4) ...</span><br><span class="line"></span><br><span class="line">&gt;&gt; [  2%] CC <span class="string">&#x27;../../../Libraries/CMSIS/CM3/CoreSupport/core_cm3.c&#x27;</span></span><br><span class="line">&gt;&gt; [  4%] CC <span class="string">&#x27;main.c&#x27;</span></span><br><span class="line">&gt;&gt; [  6%] CC <span class="string">&#x27;../../../Libraries/STM32F10x_StdPeriph_Driver/src/stm32f10x_flash.c&#x27;</span></span><br><span class="line">&gt;&gt; [  8%] CC <span class="string">&#x27;../../../Libraries/STM32F10x_StdPeriph_Driver/src/stm32f10x_usart.c&#x27;</span></span><br><span class="line">......</span><br><span class="line">&gt;&gt; [ 89%] CC <span class="string">&#x27;source/stm32f10x_it.c&#x27;</span></span><br><span class="line">&gt;&gt; [ 91%] CC <span class="string">&#x27;../../../Utilities/STM32_EVAL/STM32100E_EVAL/stm32100e_eval_lcd.c&#x27;</span></span><br><span class="line">&gt;&gt; [ 93%] CC <span class="string">&#x27;source/system_stm32f10x.c&#x27;</span></span><br><span class="line">&gt;&gt; [ 95%] CC <span class="string">&#x27;../../../Utilities/STM32_EVAL/stm32_eval.c&#x27;</span></span><br><span class="line">&gt;&gt; [ 97%] CC <span class="string">&#x27;source/write.c&#x27;</span></span><br><span class="line">&gt;&gt; [100%] AS <span class="string">&#x27;../../../Libraries/CMSIS/CM3/DeviceSupport/ST/STM32F10x/startup/arm/startup_stm32f10x_hd_vl.s&#x27;</span></span><br><span class="line"></span><br><span class="line">[ INFO ] start linking ...</span><br><span class="line"></span><br><span class="line">Program Size: Code=9028 RO-data=340 RW-data=156 ZI-data=1412  </span><br><span class="line"></span><br><span class="line">Total RO  Size (Code + RO Data)                 9368 (   9.15kB)</span><br><span class="line">Total RW  Size (RW Data + ZI Data)              1568 (   1.53kB)</span><br><span class="line">Total ROM Size (Code + RO Data + RW Data)       9524 (   9.30kB)</span><br><span class="line"></span><br><span class="line">RAM  : [          ] 2.4%        1.5KB/64.0KB</span><br><span class="line">FLASH: [          ] 1.8%        9.3KB/512.0KB</span><br><span class="line"></span><br><span class="line">[ INFO ] start outputting file ...</span><br><span class="line"></span><br><span class="line">&gt;&gt; output hex file              [<span class="keyword">done</span>]</span><br><span class="line"></span><br><span class="line">file path: <span class="string">&quot;build/STM32100E-EVAL/FT_Test.hex&quot;</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; output s19 file              [<span class="keyword">done</span>]</span><br><span class="line"></span><br><span class="line">file path: <span class="string">&quot;build/STM32100E-EVAL/FT_Test.s19&quot;</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; output bin file              [<span class="keyword">done</span>]</span><br><span class="line"></span><br><span class="line">file path: <span class="string">&quot;build/STM32100E-EVAL/FT_Test.bin&quot;</span></span><br><span class="line"></span><br><span class="line">[ DONE ] build successfully !, elapsed time 0:0:9</span><br><span class="line"></span><br><span class="line">[ INFO ] run tasks after build ...</span><br><span class="line"></span><br><span class="line">&gt;&gt; axf to elf           [<span class="keyword">done</span>]</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/03/26/Programming/2022-03-26-matplotlib%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/26/Programming/2022-03-26-matplotlib%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/" class="post-title-link" itemprop="url">matplotlib图形绘制</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-26 15:00:00" itemprop="dateCreated datePublished" datetime="2022-03-26T15:00:00+08:00">2022-03-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-04-15 22:57:36" itemprop="dateModified" datetime="2022-04-15T22:57:36+08:00">2022-04-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>类似于 gnuplot ， matplotlib 也是开源的图形绘制软件。</p>
<p>需要使用到的工具如下：</p>
<ul>
<li>Jupyter：python 分布调试 和 Markdown 笔记记录一体化工具。</li>
<li>Python3.10</li>
<li>Python3 插件： matplotlib / pandas</li>
<li>VS code 所需插件： pylance</li>
</ul>
<p>其中， matplotlib 是绘图所用的开源工具库，而 pandas 是文档管理的 “瑞士军刀”。</p>
<h1 id="环境安装">环境安装</h1>
<h2 id="jupyter-安装">JUPYTER 安装</h2>
<p>Jupyter可以支持在线和离线使用，在线即以网页形式支持使用，可以在服务器上进行部署。离线即在 Visual Studio Code 中以插件形式提供安装和使用。</p>
<h3 id="在线安装">在线安装</h3>
<p>以 Ubuntu 系统为例，可以用 <code>apt</code> 进行安装，也可以用 <code>pip</code> （或 <code>pip3</code> ）进行安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install jupyter</span><br></pre></td></tr></table></figure>
<p>在线版 Jupyter 还需要安装一个 <code>ipyparallel</code> 的类：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install ipyparallel</span><br><span class="line">ipcluster start</span><br></pre></td></tr></table></figure>
<h4 id="远程访问配置项">远程访问配置项</h4>
<p>参考 《<a target="_blank" rel="noopener" href="https://www.cnblogs.com/wu-chao/p/8419889.html">ubuntu 安装Juypter并设置远程访问</a>》对 服务器端 Jupyter进行设置和访问测试。</p>
<p>相关防火墙设置 / 证书 / 域名 不再赘述。</p>
<h4 id="自启动配置">自启动配置</h4>
<p>另外，Linux 服务器端 Jupyter 用 <code>jupyter notebook</code> 命令启动，无法开机自启，需要参考 《<a target="_blank" rel="noopener" href="https://blog.csdn.net/initiallht/article/details/122029888">Linux下Jupyter开机启动设置</a>》 进行设置。</p>
<p>设置好后 在线版 Jupyter 编辑器的页面如下：</p>
<figure>
<img src="https://pic.islet.space/2022/03/image-20220327165129680.png" alt="在线使用界面" /><figcaption aria-hidden="true">在线使用界面</figcaption>
</figure>
<h3 id="离线安装">离线安装</h3>
<p>在 VS code 插件中搜索并安装第一个 <code>Jupyter</code> 即可，插件系统会自动安装下面附带的 <code>Jupyter Keymap</code> 和 <code>Jupyter Notebook Renderers</code> 两个插件。</p>
<figure>
<img src="https://pic.islet.space/2022/03/image-20220327163752153.png" alt="image-20220327163752153" /><figcaption aria-hidden="true">image-20220327163752153</figcaption>
</figure>
<p>安装完之后，需要新建一个 <code>.ipynb</code> 格式的文件，即可自动打开 <code>Jupyter</code> 插件进行使用。</p>
<figure>
<img src="https://pic.islet.space/2022/03/image-20220327165214773.png" alt="离线使用界面" /><figcaption aria-hidden="true">离线使用界面</figcaption>
</figure>
<h2 id="pip-依赖库安装">PIP 依赖库安装</h2>
<p>在线版和离线版都需要使用 terminal 打开并输入命令进行安装下方的依赖库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install matplotlib pandas</span><br></pre></td></tr></table></figure>
<h1 id="图形生成代码">图形生成代码</h1>
<p>下方利用 pandas 类对 <code>.csv</code> 文件中的相关列进行数据提取，然后利用 matplotlib 类对 数据进行绘图。</p>
<p>因功能比较简单，不再赘述。</p>
<p>具体需要注意的事项已在代码注释中写明。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入依赖库</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入工具</span></span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series,DataFrame</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib.font_manager <span class="keyword">import</span> FontProperties</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置csv表格中的行信息</span></span><br><span class="line">column=[<span class="string">&quot;ts&quot;</span>,<span class="string">&quot;dx&quot;</span>,<span class="string">&quot;dy&quot;</span>,<span class="string">&quot;motion&quot;</span>,<span class="string">&quot;iqc&quot;</span>,<span class="string">&quot;shutter&quot;</span>,<span class="string">&quot;frame_avg&quot;</span>,<span class="string">&quot;status&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置文件路径</span></span><br><span class="line">csv_file_path = <span class="string">&#x27;../data/&#x27;</span></span><br><span class="line">pic_file_path = <span class="string">&#x27;../pic/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入和输出文件名</span></span><br><span class="line">file = <span class="string">&#x27;20220327_135012&#x27;</span></span><br><span class="line">csv_file_name = file + <span class="string">&#x27;.csv&#x27;</span></span><br><span class="line">pic_file_name = file + <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置各轴及标题标签</span></span><br><span class="line">chart_title = <span class="string">&#x27;A4 data collection in stm32l476rg&#x27;</span></span><br><span class="line">x_label = <span class="string">&#x27;time(ms)&#x27;</span></span><br><span class="line">y_label = <span class="string">&#x27;data collected&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置各线段标签</span></span><br><span class="line">line_1_label = <span class="string">&#x27;dx&#x27;</span></span><br><span class="line">line_2_label = <span class="string">&#x27;dy&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置线段透明度</span></span><br><span class="line">line_1_alpha = <span class="number">0.5</span></span><br><span class="line">line_2_alpha = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置线段类型</span></span><br><span class="line"><span class="comment"># 可选 scatter 和 line</span></span><br><span class="line">plot_type = <span class="string">&#x27;scatter&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;YAHEI&#x27;</span>]</span><br><span class="line"><span class="comment"># 用于正常显示正负号</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义空列表存放xy轴数据点</span></span><br><span class="line">x = []</span><br><span class="line">y = []</span><br><span class="line">z = []</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 可以使用open()方法对csv文件进行读取</span></span><br><span class="line"><span class="string"># 但是暂时没有找到可以避免读取到头部信息的方法，即不能跳过部分数据进行读取</span></span><br><span class="line"><span class="string">with open( csv_file_path + csv_file_name, &#x27;r&#x27;, encoding=&#x27;utf8&#x27;) as csv_file:</span></span><br><span class="line"><span class="string">    plots = csv.reader(csv_file, delimiter=&#x27;,&#x27;)</span></span><br><span class="line"><span class="string">    for row in plots:</span></span><br><span class="line"><span class="string">        x.append(int(row[0]))</span></span><br><span class="line"><span class="string">        y.append(int(row[1]))</span></span><br><span class="line"><span class="string">        z.append(int(row[2]))</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用panda的read_csv()方法可以设置跳过部分数据进行处理</span></span><br><span class="line">csv_file = pd.read_csv(csv_file_path + csv_file_name, </span><br><span class="line">                       skiprows=<span class="number">21</span>,</span><br><span class="line">                       delimiter=<span class="string">&#x27;,&#x27;</span>, </span><br><span class="line">                       names=column) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 将对应列数据放入变量中</span></span><br><span class="line">x = csv_file[<span class="string">&#x27;ts&#x27;</span>]</span><br><span class="line">y = csv_file[<span class="string">&#x27;dx&#x27;</span>]</span><br><span class="line">z = csv_file[<span class="string">&#x27;dy&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置线段标签</span></span><br><span class="line"><span class="keyword">if</span>( plot_type==<span class="string">&#x27;line&#x27;</span>):</span><br><span class="line">    plt.plot(x,y, label=line_1_label, alpha=line_1_alpha, lw=<span class="number">1</span>)</span><br><span class="line">    plt.plot(x,z, label=line_2_label, alpha=line_2_alpha, lw=<span class="number">1</span>)</span><br><span class="line"><span class="keyword">elif</span>( plot_type == <span class="string">&#x27;scatter&#x27;</span>):</span><br><span class="line">    plt.scatter(x,y, label=line_1_label, alpha=line_1_alpha, s=<span class="number">1</span>)</span><br><span class="line">    plt.scatter(x,z, label=line_2_label, alpha=line_2_alpha, s=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置x轴、y轴和标题标签</span></span><br><span class="line">plt.xlabel(x_label)</span><br><span class="line">plt.ylabel(y_label)</span><br><span class="line">plt.title(chart_title)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 展示图像</span></span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图像保存</span></span><br><span class="line">plt.savefig( pic_file_path + pic_file_name , dpi=<span class="number">400</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h1 id="使用方法">使用方法</h1>
<ol type="1">
<li>生成一个文件夹，下面包含三个并行子路径。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">├── data</span><br><span class="line">├── pic</span><br><span class="line">└── src</span><br></pre></td></tr></table></figure>
<p>网页版：</p>
<figure>
<img src="https://pic.islet.space/2022/03/image-20220327164922369.png" alt="网页版文件结构示意" /><figcaption aria-hidden="true">网页版文件结构示意</figcaption>
</figure>
<ol start="2" type="1">
<li>将代码放到 <code>src/</code> 中，在将代码第19行中的 <code>file = '20220327_135012'</code> 文件名进行修改，确保其与 <code>data/</code> 路径下的 <code>.csv</code> 文件名成可以对上。</li>
<li>执行整段代码，即可在 <code>pic/</code> 文件夹下找到对应的图像文件。</li>
</ol>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/378378346">vscode写jupyter notebook</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/129004421">Pandas将csv数据拆分成多列并保存</a></p></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.12.0/dist/mermaid.min.js","integrity":"sha256-0dD7vUjUCTGJjeLnPotQQJIcSzug5fO6WDMYYyNIX4c="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"enable","tags":"all","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
