<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://code.islet.space/font//css?family=/CascadiaCode/CascadiaCode:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"islet.space","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/db.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>
<meta name="description" content="笔记分享的旮旯孤岛而已">
<meta property="og:type" content="website">
<meta property="og:title" content="Coder的孤岛">
<meta property="og:url" content="http://islet.space/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="笔记分享的旮旯孤岛而已">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liewzheng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://islet.space/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Coder的孤岛</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
        <li class="menu-item menu-item-目录"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-简历"><a href="/resume/" rel="section"><i class="fa fa-address-card fa-fw"></i>简历</a></li>
        <li class="menu-item menu-item-友链"><a href="/friends/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>友链</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">124</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">230</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@foxmail.com" title="E-Mail → mailto:liewzheng@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/07/13/Programming/C/2022-07-13-C-log/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/13/Programming/C/2022-07-13-C-log/" class="post-title-link" itemprop="url">C log</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-07-13 23:30:00" itemprop="dateCreated datePublished" datetime="2022-07-13T23:30:00+08:00">2022-07-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-07-14 12:55:25" itemprop="dateModified" datetime="2022-07-14T12:55:25+08:00">2022-07-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="日志信息分类">日志信息分类</h1>
<p><mark>以下内容系摘抄整理。</mark></p>
<p>日志的等级由低到高应该是：<code>Debug</code> &lt; <code>Info</code>
&lt; <code>Warn</code> &lt; <code>Error</code> &lt;
<code>Fatal</code></p>
<table>
<colgroup>
<col style="width: 3%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 16%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>DEBUG</th>
<th>INFO</th>
<th>WARN</th>
<th>ERROR</th>
<th>FATAL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>严重程度</td>
<td>最低</td>
<td>一般</td>
<td>较高</td>
<td>高</td>
<td>极高</td>
</tr>
<tr class="even">
<td>严重性说明</td>
<td>调试时使用，便于开发者快速地详细地了解系统运行状况。正式发布时会禁用。</td>
<td>输出信息以反馈系统运行状态给用户。</td>
<td>可修复的潜在错误或不规范的代码、编译条件等。</td>
<td>可修复错误。软件无法正常运行。</td>
<td>相当严重的错误，可能无法修复。继续运行难以保证。</td>
</tr>
<tr class="odd">
<td>使用情况</td>
<td></td>
<td>用于打印程序<mark>应该出现的正常状态信息</mark>，
便于追踪定位。</td>
<td>表明系统出现轻微的不合理但不影响运行和使用。</td>
<td>表明出现了系统错误和异常，无法正常完成目标操作。</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="错误日志格式整理">错误日志格式整理</h2>
<p>错误日志格式大致可以有以下类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">log.error(“[接口名或操作名] [Some Error Msg] happens. [params] [Probably Because]. [Probably need to do].”);</span><br><span class="line"></span><br><span class="line">log.error(String.format(“[接口名或操作名] [Some Error Msg] happens. [%s]. [Probably Because]. [Probably need to do].”, params));</span><br></pre></td></tr></table></figure>
<p>或 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">log.error(“[Some Error Msg] happens to 错误参数或内容 when [in some condition]. [Probably Because]. [Probably need to do].”);</span><br><span class="line"></span><br><span class="line">log.error(String.format(“[Some Error Msg] happens to %s when [in some condition]. [Probably Because]. [Probably need to do].”, parameters));</span><br><span class="line"></span><br><span class="line">[Probably Reason]. [Probably need to do]. 在某些情况下可以省略； 在一些重要接口和场景下最好能说明一下。</span><br></pre></td></tr></table></figure></p>
<p>每一条错误日志都是独立的，尽可能完整、具体、直接说明何种场景下发生了什么错误，由什么原因导致，要采用什么措施或步骤。</p>
<h2 id="错误日志的意义">错误日志的意义</h2>
<p>错误日志是排查问题的重要手段之一。 当我们编程实现一项功能时，
通常会考虑可能发生的各种错误及相应原因：</p>
<p>要排查出相应的原因，
就需要一些关键描述来定位原因。这就会形成三元组：<strong>错误现象</strong>
-&gt; <strong>错误关键描述</strong> -&gt;
<strong>最终的错误原因</strong>。</p>
<p>需要针对每一种错误尽可能提供相应的错误关键描述，从而定位到相应的错误原因。也就是说，编程的时候，要仔细思考，
哪些描述是非常有利于定位错误原因的，
尽可能将这些描述添加到错误日志中。</p>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://www.cnblogs.com/alice-fee/p/6214654.html">日志级别的选择：Debug、Info、Warn、Error还是Fatal</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/07/11/Networking/2022-07-11-smb-%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%90%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/11/Networking/2022-07-11-smb-%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%90%AF/" class="post-title-link" itemprop="url">smb 服务开启</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-07-11 21:35:00" itemprop="dateCreated datePublished" datetime="2022-07-11T21:35:00+08:00">2022-07-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-07-15 12:01:34" itemprop="dateModified" datetime="2022-07-15T12:01:34+08:00">2022-07-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Networking/" itemprop="url" rel="index"><span itemprop="name">Networking</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>smb 服务可以让多种设备跨平台、跨设备传输、共享文件内容，包括 linux
、mac 、windows、android等。一般开启服务的叫 server，使用服务的叫
client。</p>
<p>注意事项：</p>
<ol type="1">
<li>设置前需要确认自己的路由器是否
OK，有些便宜的路由器确实不能支持稳定的 smb
服务，甚至不能稳定ping通同一局域网内的设备，建议购买支持 wifi6
的路由器。</li>
</ol>
<p>下面介绍三个主流PC的smb服务开启流程（仅供参考）。</p>
<h1 id="linux">Linux</h1>
<p>在debian系linux的配置流程如下：</p>
<ol type="1">
<li>安装 <code>samba</code>
服务：<code>sudo apt install samba</code></li>
<li>为需要分享的文件/文件夹配置权限：<code>chomd 755 /home/isletspace/share</code></li>
<li>配置 <code>smb.conf</code>
文件：<code>sudo vim /etc/samba/smb.conf</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[share]</span><br><span class="line">   comment = share</span><br><span class="line">   path = /home/isletspace/share</span><br><span class="line">   browseable = no</span><br><span class="line">   available = yes</span><br><span class="line">   writable = yes</span><br><span class="line">   <span class="built_in">read</span> only = no</span><br><span class="line">   create mask = 0755</span><br><span class="line">   valid users = user01</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面的配置信息解释如下：</p>
<p><code>[share]</code>：<code>smb://xxxx.xxx/share</code>
访问时的第二级域名</p>
<p><code>comment</code>：smb 访问路径说明</p>
<p><code>browseable</code>：是否可在局域网中可见</p>
<p><code>writable</code>：是否可写入</p>
<p><code>read only</code>：是否只可读</p>
<p><code>create mask</code>：操作权限，普通人访问的就设置
<code>0755</code> ，如果只有自己用，可以设置 <code>0777</code></p>
<p><code>valid users</code>：可用用户 <code>user01</code></p>
</blockquote>
<ol start="4" type="1">
<li>创建 samba 用户：<code>sudo useradd user01</code></li>
<li>设置 samba 密码：<code>sudo smbpasswd -a user01</code></li>
<li>重启 samba 服务：<code>sudo service smbd restart</code></li>
<li>在其他设备上测试网络情况：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试是否可以ping通</span></span><br><span class="line">ping xxx.xxx.xxx.xxx</span><br><span class="line"><span class="comment"># 在文件浏览器中访问以下路径</span></span><br><span class="line">smb://xxx.xxx.xxx.xxx</span><br></pre></td></tr></table></figure>
<p>其他命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看samba服务器中已拥有哪些用户：</span></span><br><span class="line">sudo pdbedit -L</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除samba服务中的某个用户</span></span><br><span class="line">sudo smbpasswd -x 用户名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除linux某个用户</span></span><br><span class="line">sudo userdel 用户名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除linux中某个用户所有信息</span></span><br><span class="line">sudo userdel -r 用户名</span><br></pre></td></tr></table></figure>
<h1 id="mac">Mac</h1>
<p>Mac开启服务大致如文章《<a
target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43635647/article/details/106225833">Mac
开启局域网smb文件共享</a>》所述。</p>
<h1 id="windows">Windows</h1>
<p>windows 的流程太复杂，但基本上靠这篇文章《<a
target="_blank" rel="noopener" href="https://post.smzdm.com/p/akxwkxqk/">Windows 10/ 11
下安全并正确地使用 SMB 共享</a>》可以搞定</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/dslobo/article/details/108175737">Ubuntu 20
开启samba文件共享</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/07/03/Networking/2022-07-03-linux-v2ray/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/03/Networking/2022-07-03-linux-v2ray/" class="post-title-link" itemprop="url">linux-v2ray</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-07-03 21:15:00" itemprop="dateCreated datePublished" datetime="2022-07-03T21:15:00+08:00">2022-07-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-07-15 12:06:06" itemprop="dateModified" datetime="2022-07-15T12:06:06+08:00">2022-07-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Networking/" itemprop="url" rel="index"><span itemprop="name">Networking</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>首先要说明的一点，linux 上的 v2ray 分为两部分：</p>
<ul>
<li><p>使用QT 制作的 qv2ray GUI界面</p></li>
<li><p>v2ray 的运行核心</p></li>
</ul>
<p>这两部分需要分别安装和下载。</p>
<p>Github 上的项目路径：https://github.com/v2fly/</p>
<h1 id="qv2ray-安装">qv2ray 安装</h1>
<p>GUI 界面的安装可以参考：<a
target="_blank" rel="noopener" href="https://qv2ray.net/lang/zh/getting-started/step1.html#%E6%9D%A5%E8%87%AA%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8">新手起步</a></p>
<p>安装、配置完毕之后的使用界面如下。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220703213806263.png"
alt="image-20220703213806263" />
<figcaption aria-hidden="true">image-20220703213806263</figcaption>
</figure>
<p>如果使用 ubuntu 或者 kali 等系统的稳定版本，则可以参考以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装必要工具</span></span><br><span class="line">sudo apt install -y gnupg ca-certificates curl</span><br><span class="line"><span class="comment"># 添加软件源公钥</span></span><br><span class="line">curl https://qv2ray.net/debian/pubkey.gpg | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/qv2ray-stable-archive.gpg</span><br><span class="line"><span class="comment"># 添加软件源</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=amd64] https://qv2ray.net/debian/ stable main&quot;</span> | sudo tee /etc/apt/sources.list.d/qv2ray.list</span><br><span class="line"><span class="comment"># 更新软件源</span></span><br><span class="line">sudo apt update</span><br><span class="line"><span class="comment"># 安装 qv2ray GUI界面</span></span><br><span class="line">sudo apt install -y qv2ray</span><br></pre></td></tr></table></figure>
<h1 id="v2ray-核心安装">v2ray 核心安装</h1>
<p>注意：这个一定要和 qv2ray 安装统一个时期的版本，github上有个
pre-release 的 <code>v5.0.7</code>
版本，里面缺少了组件（<code>v2ctl</code>），是不能跟 qv2ray
一起使用的。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220703214344707.png"
alt="image-20220703214344707" />
<figcaption aria-hidden="true">image-20220703214344707</figcaption>
</figure>
<p>可以参考 neworld.space 的教程《<a
target="_blank" rel="noopener" href="https://support.neworld.tv/qv2ray/">Linux Qv2ray 使用教程</a>》
进行安装。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220703212715215.png"
alt="image-20220703212715215" />
<figcaption aria-hidden="true">image-20220703212715215</figcaption>
</figure>
<p>如果安装版本不正确，会报
<code>v2ray core faied with an exit code: 2</code> 的错误。</p>
<h1 id="浏览器代理">浏览器代理</h1>
<p>设置完之后，还不能马上使用，需要在浏览器中进行代理设置。</p>
<p>例如，火狐浏览器的设置中，找到 “网络代理” 。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220703212900206.png"
alt="image-20220703212900206" />
<figcaption aria-hidden="true">image-20220703212900206</figcaption>
</figure>
<p>可以选择 “使用系统代理设置” 和 “手动配置代理”两种。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220703212931436.png"
alt="image-20220703212931436" />
<figcaption aria-hidden="true">image-20220703212931436</figcaption>
</figure>
<p>其中手动配置代理就需要对照着 qv2ray 的设置信息来配置即可。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220703213204330.png"
alt="image-20220703213204330" />
<figcaption aria-hidden="true">image-20220703213204330</figcaption>
</figure>
<h1 id="命令行代理">命令行代理</h1>
<p>命令行如果需要代理，则需要安装 <code>proxychains</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y proxychians</span><br></pre></td></tr></table></figure>
<p>安装完之后用 <code>sudo</code> 权限去配置
<code>/etc/proxychains.conf</code> 文件，将文件最后面的
<code>sock4  127.0.0.1 9095</code> 改成 和 qv2ray 图形配置中的
<code>sock5</code> 一样的配置信息，如 <code>sock5 127.0.0.1 1089</code>
即可。</p>
<p>如果是在mac系统下，则配置文件的路径为 <code>/usr/local/etc</code>
。</p>
<p>如下所示，则是OK的。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220706185814369.png"
alt="image-20220706185814369" />
<figcaption aria-hidden="true">image-20220706185814369</figcaption>
</figure>
<p>使用的时候，直接在命令前面加 <code>proxychains</code> 或者
<code>proxychains4</code> 即可，如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains ping google.com</span><br></pre></td></tr></table></figure>
<p>搞定 v2ray 和 proxychains ，下次拉代码再也不痛苦了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/06/27/Linux/Shell/2022-06-27-%E4%BE%BF%E6%8D%B7%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/27/Linux/Shell/2022-06-27-%E4%BE%BF%E6%8D%B7%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">便捷脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-27 21:15:00" itemprop="dateCreated datePublished" datetime="2022-06-27T21:15:00+08:00">2022-06-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-28 20:13:48" itemprop="dateModified" datetime="2022-06-28T20:13:48+08:00">2022-06-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="项目文件初始化">项目文件初始化</h1>
<h2 id="c项目初始化">C项目初始化</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://storage.islet.space/08_Script/project/c_init.sh | bash -s --</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>生成文件夹：<code>build</code> / <code>src</code> / <code>inc</code>
/ <code>lib</code> / <code>doc</code></li>
<li>生成空文档：<code>README.md</code>、<code>src/main.c</code>
、<code>CMakeLists.txt</code></li>
<li>下载代码格式化模板：<code>.clang-format</code></li>
<li>下载git忽略文件模板：<code>.gitignore</code></li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220627212514361.png"
alt="image-20220627212514361" />
<figcaption aria-hidden="true">image-20220627212514361</figcaption>
</figure>
<h1 id="环境初始化">环境初始化</h1>
<h2 id="嵌入式工程师开发环境初始化">嵌入式工程师开发环境初始化</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://storage.islet.space/08_Script/debian/init.sh | bash -s --</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>安装 <code>zsh</code> 和 <code>ohmyzsh</code> ，并设置
<code>zsh</code> 为默认shell</li>
<li>安装常用工具：<code>vim</code> / <code>nodejs</code></li>
<li>安装编译软件： <code>gcc</code> / <code>lcov</code> /
<code>valgrind</code> / <code>cmake</code> / <code>make</code> /
<code>git</code> / <code>repo</code></li>
<li>安装交叉编译器： <code>android-ndk-r20b</code> /
<code>gcc-arm-none-eabi-5.4</code> /
<code>gcc-arm-none-eabi-10.3</code></li>
</ol>
<h2 id="python-开发环境初始化">python 开发环境初始化</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh | bash -s --</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/06/23/Hardware/FTDI/2022-06-23-FT4232H-%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/23/Hardware/FTDI/2022-06-23-FT4232H-%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">FT4232H 开发笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-23 14:30:00" itemprop="dateCreated datePublished" datetime="2022-06-23T14:30:00+08:00">2022-06-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-07-15 12:00:15" itemprop="dateModified" datetime="2022-07-15T12:00:15+08:00">2022-07-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>FTDI 硬件是由 FTDI chip 公司开发的用于高性能 <strong>USB
转各种底层通信协议</strong> 的芯片。所支持的协议包括 UART / SPI / I2C /
JTAG etc. ，还有特殊的 bit-bang 协议。</p>
<p>FT4232 基本上是 FT2232 的升级版，从 2个8bit 独立通道，升级成 4个8bit
独立通道，每个通道都具有独立互不干扰的时钟。</p>
<p>FT4232HL 芯片可以实现 USB 2.0 转换成
<strong>四个虚拟通道</strong>（<strong>VCP</strong>，即 Virtual COM
Port） 的功能，该四个虚拟通道可以模拟 UART / JTAG / SPI / I2C
功能，IO口电压为 <code>3.3V</code> 。</p>
<p>本文基于 FT423H 的迷你模块进行开发，该芯片的官方说明如 《<a
target="_blank" rel="noopener" href="https://ftdichip.com/products/ft4232hl/">FT4232HL</a>》 。</p>
<h1 id="environment">ENVIRONMENT</h1>
<p><strong><a target="_blank" rel="noopener" href="http://libusb.info">libusb 1.0</a></strong> -
Library for talking to USB devices from user-space. Needed by libftdi.
<strong><a target="_blank" rel="noopener" href="https://github.com/martinh/libconfuse">libconfuse</a>
-</strong> Library for parsing configuration files. Needed by
ftdi_eeprom.</p>
<h2 id="electrical-specification">ELECTRICAL SPECIFICATION</h2>
<p><img src="https://pic.islet.space/2022/06/image-20220623145709022.png" alt="image-20220623145709022" style="zoom:50%;" /></p>
<p>FT4232HL开发板 <strong>正面</strong> 视图引脚分布：</p>
<figure>
<img
src="https://pic.islet.space/2022/06/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_1655968113415.png"
alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>FT4232HL开发板 <strong>反面</strong> 视图引脚分布：</p>
<p><img src="https://pic.islet.space/2022/06/0630_1.jpg" /></p>
<h2 id="spi-pinout">SPI PINOUT</h2>
<p>如果使用 libMPSSE 进行 SPI 通信开发，则默认使用下方的通信接口。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220707162556201.png"
alt="image-20220707162556201" />
<figcaption aria-hidden="true">image-20220707162556201</figcaption>
</figure>
<h2 id="ft4232hl-pin-description">FT4232HL PIN DESCRIPTION</h2>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220707162928727.png"
alt="image-20220707162928727" />
<figcaption aria-hidden="true">image-20220707162928727</figcaption>
</figure>
<h2 id="bit-bang-模式下的-ft4232h-的引脚">Bit-Bang 模式下的 FT4232H
的引脚</h2>
<p>FT4232H的通道 A、B、C 或通道 D 可以被配置为 bit-bang
接口。有两种类型的 bit-bang 模式：同步和异步。</p>
<p>当配置为任何 bit-bang
模式（同步或异步）时，使用的引脚和信号的描述见表3.6</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220707163519992.png"
alt="image-20220707163519992" />
<figcaption aria-hidden="true">image-20220707163519992</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220707163532847.png"
alt="image-20220707163532847" />
<figcaption aria-hidden="true">image-20220707163532847</figcaption>
</figure>
<h2 id="driver-install">DRIVER INSTALL</h2>
<p>FT4232H 的驱动分为 VCP / D2XXX 和 D3XXX 三个。其中，D3XXX 是适用于
USB 3.0 的，这里不需要安装。</p>
<p>window 版本的驱动安装器就包含了 VCP 和 D2XXX。</p>
<p>驱动安装页面：<a
target="_blank" rel="noopener" href="https://ftdichip.com/drivers/vcp-drivers/">Virtual COM Port
Drivers</a></p>
<p>官方驱动安装教程：<a
target="_blank" rel="noopener" href="https://ftdichip.com/wp-content/uploads/2022/05/AN_396-FTDI-Drivers-Installation-Guide-for-Windows-10_11.pdf">Windows
10/11 Installation Guide</a></p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220623145154624.png"
alt="装了CDM驱动的Windows平台" />
<figcaption aria-hidden="true">装了CDM驱动的Windows平台</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220627131603779.png"
alt="linux平台的usb列表" />
<figcaption aria-hidden="true">linux平台的usb列表</figcaption>
</figure>
<p><strong>注意</strong>：驱动安装完毕之后，PC 不会立即识别
该设备。需要使用 跳线帽，将 CN3 的 <code>1</code> 和 <code>3</code>
口进行短接。让设备供上5V的电。</p>
<p><img src="https://pic.islet.space/2022/06/image-20220623145344049.png" alt="image-20220623145344049" style="zoom:50%;" /></p>
<h1 id="d2xxx-编程指南">D2XXX 编程指南</h1>
<p>D2XXX 是针对 FTDI 的专用接口（Proprietary Interface ）。</p>
<blockquote>
<p>FTDI provides two alternative software interfaces for its range of
USB-UART and USB-FIFO ICs. One interface provides a Virtual COM Port
(VCP) which appears to the system as a legacy COM port. The second
interface, D2XX, is provided via a proprietary DLL (FTD2XX.DLL). The
D2XX interface provides special functions that are not available in
standard operating system COM port APIs, such as setting the device into
a different mode or writing data into the device EEPROM.</p>
</blockquote>
<p>FTDI 为USB-UART 和 USB-FIFO IC
提供两种可供选择的软件接口：<strong>虚拟串口</strong>（<strong>VCP</strong>，Virtual
COM Port） 和 <strong>D2XXX</strong> 。</p>
<p>在 Windows 上，D2XXX 和 VCP 驱动 则在同一个驱动包中进行分发，称为
<strong>综合驱动模块</strong>（CDM, Combined Driver Model）。下图解释了
Windows 端的 CDM 模块架构。</p>
<p><img src="https://pic.islet.space/2022/06/image-20220627122210831.png" alt="image-20220627122210831" style="zoom:50%;" /></p>
<p>而在 类Unix平台 和 Windows CE 上，VCP 和 D2XXX
是相互排斥的选项，因为在一个特定的时间内，一个特定的设备ID只能安装一种驱动类型。</p>
<p>Windows 上虽然可以装 VCP 和 D2XXX
两种驱动，但是任意时间也只有一种驱动能用。</p>
<p>VCP 是专用于 虚拟串口 的驱动，因此FTDI 官方并不提供 应用级
示例代码。而 D2XXX 是 FTDI 的专用接口，官方提供了 FTD2XXX
库的应用程序以供开发。</p>
<p><img src="https://pic.islet.space/2022/06/image-20220627140842391.png" alt="image-20220627140842391" style="zoom:50%;" /></p>
<p>其中，libMPSSE 是 SPI/I2C/JTAG 的通信的库文件，依赖于底层的
libftd2xx</p>
<h2 id="ft_setbitmode">FT_SetBitMode()</h2>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220707154811965.png"
alt="image-20220707154811965" />
<figcaption aria-hidden="true">image-20220707154811965</figcaption>
</figure>
<h3 id="ucmarsk-设置说明">ucMarsk 设置说明</h3>
<p>位模式的必要值。<mark>这设置了哪些位是输入和输出。位值为0时，将相应的引脚设为输入，位值为1时，将相应的引脚设为输出。</mark></p>
<p>在CBUS Bit
Bang的情况下，这个值的上位数控制哪些引脚是输入和输出，而下位数控制哪些输出是高电平和低电平。</p>
<p>注意： 它与 <code>FT_SetBitMode()</code> 不是互相的关系</p>
<p>根据 <a href="##%20SPI%20PINOUT">SPI PINOUT</a>
的图标说明，应该将以下引脚的掩码设置为如下：</p>
<table>
<thead>
<tr class="header">
<th>主控引脚</th>
<th>所接从设备引脚</th>
<th>输入输出状态</th>
<th>掩码</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A0</td>
<td>SCLK</td>
<td>output</td>
<td>1</td>
</tr>
<tr class="even">
<td>A1</td>
<td>MOSI</td>
<td>output</td>
<td>1</td>
</tr>
<tr class="odd">
<td>A2</td>
<td>MISO</td>
<td>input</td>
<td>0</td>
</tr>
<tr class="even">
<td>A3</td>
<td>SNCS</td>
<td>output</td>
<td>1</td>
</tr>
<tr class="odd">
<td>A4</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>A5</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>A6</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>A7</td>
<td></td>
<td></td>
<td>x</td>
</tr>
</tbody>
</table>
<p>此时，掩码必须设置为 <code>0xFB</code> 或 <code>0x0B</code></p>
<h3 id="ucmode-设置说明">ucMode 设置说明</h3>
<blockquote>
<p><code>0x0</code> = Reset <code>0x1</code> = Asynchronous Bit Bang
<code>0x2</code> = MPSSE (FT2232, FT2232H, FT4232H and FT232H devices
only) <code>0x4</code> = Synchronous Bit Bang (FT232R, FT245R, FT2232,
FT2232H, FT4232H and FT232H devices only) <code>0x8</code> = MCU Host
Bus Emulation Mode (FT2232, FT2232H, FT4232H and FT232H devices only)
<code>0x10</code> = Fast Opto-Isolated Serial Mode (FT2232, FT2232H,
FT4232H and FT232H devices only) <code>0x20</code> = CBUS Bit Bang Mode
(FT232R and FT232H devices only) <code>0x40</code> = Single Channel
Synchronous 245 FIFO Mode (FT2232H and FT232H devices only)</p>
</blockquote>
<h2 id="ft_getbitmode">FT_GetBitMode()</h2>
<p>FT_GetBitMode
返回各引脚的瞬时值。将返回一个单字节，其中包含各引脚的当前值，包括那些输入和输出的引脚。</p>
<p>或对FT232R的可用位模式的描述，请参见应用说明
"FT232R和FT245R的bit-bang模式"。
关于FT2232的可用位模式的描述，请参见应用说明 "FT2232的位模式功能"。
关于FT232B和FT245B的比特爆炸模式的描述，见应用说明
"FT232B/FT245B比特爆炸模式"。
关于T4232H和FT2232H器件支持的位模式的描述，请参见IC数据表。
这些应用说明可从FTDI网站下载。</p>
<h2 id="ft_setbaudrate">FT_SetBaudRate()</h2>
<p>数据传输的速率可以通过使用 <code>FT_SetBaudRate()</code>
命令来控制。<mark style="font-weight: 900;">异步模式的时钟实际上是所设波特率的16倍</mark>。一个9600波特的值将以每秒（9600x16）=153600
byte的速度传输数据，或每6.5μS一个 byte。</p>
<p>FTDI 器件最大可设置的波特率是
<code>3M baud</code>，但为了让数据有时间在 <code>WR#</code>
选通周围设置和保持，数据的波特率最大应该是
<code>1M baud</code>（62500x16）。最小的数据波特率是
<code>4.8kbaud</code>（300 x 16）。</p>
<h2 id="ft_read">FT_Read()</h2>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220707151059741.png"
alt="image-20220707151059741" />
<figcaption aria-hidden="true">image-20220707151059741</figcaption>
</figure>
<blockquote>
<p>FT_Read always returns the number of bytes read in lpdwBytesReturned.
This function does not return until dwBytesToRead bytes have been read
into the buffer. The number of bytes in the receive queue can be
determined by calling FT_GetStatus or FT_GetQueueStatus, and passed to
FT_Read as dwBytesToRead so that the function reads the device and
returns immediately.</p>
<p>When a read timeout value has been specified in a previous call to
FT_SetTimeouts, FT_Read returns when the timer expires or dwBytesToRead
have been read, whichever occurs first. If the timeout occurred, FT_Read
reads available data into the buffer and returns FT_OK. An application
should use the function return value and lpdwBytesReturned when
processing the buffer. If the return value is FT_OK, and
lpdwBytesReturned is equal to dwBytesToRead then FT_Read has completed
normally. If the return value is FT_OK, and lpdwBytesReturned is less
then dwBytesToRead then a timeout has occurred and the read has been
partially completed. Note that if a timeout occurred and no data was
read, the return value is still FT_OK.</p>
</blockquote>
<p><code>FT_Read()</code> 总是返回在 <code>lpdwBytesReturned</code>
中读取的字节数。 在 <code>dwBytesToRead</code>
字节被读入缓冲区之前，该函数不会返回。接收队列中的字节数可以通过调用<code>FT_GetStatus()</code>
或 <code>FT_GetQueueStatus()</code> 来确定，并作为
<code>dwBytesToRead</code> 传给
<code>FT_Read()</code>，以便该函数读取设备并立即返回。</p>
<p>当在先前对 <code>FT_SetTimeouts()</code>
的调用中指定了一个读取超时值时，<code>FT_Read()</code> 在定时器过期或
<code>dwBytesToRead</code>
已被读取时返回，以先发生者为准。如果超时发生，<code>FT_Read()</code>
将可用数据读入缓冲区并返回 <code>FT_OK</code>。</p>
<p>在处理缓冲区时，应用程序应使用该函数的返回值和
<code>lpdwBytesReturned</code> 。如果返回值为 <code>FT_OK</code>，并且
<code>lpdwBytesReturned</code> 等于 <code>dwBytesToRead</code> ，那么
<code>FT_Read()</code> 已经正常完成。如果返回值是
<code>FT_OK</code>，并且 <code>lpdwBytesReturned</code> 小于
<code>dwBytesToRead</code>，那么就发生了一个超时，读取已经部分完成。</p>
<p><mark>请注意，如果发生了超时并且没有读取任何数据，返回值仍然是
<code>FT_OK</code> 。<code>FT_IO_ERROR</code>
的返回值表明函数的参数有错误，或者发生了致命的错误，如USB断开连接。</mark></p>
<h1 id="bit-bang-mode">BIT BANG MODE</h1>
<h2 id="异步bit-bang模式">异步Bit-Bang模式</h2>
<p>异步 Bit-Bang 模式与 BM-style Bit-Bang
模式相同。<mark>在任何配置为异步模式的通道上，以正常方式写入设备的数据将被自锁到并行I/O数据引脚（那些被配置为输出的引脚）。每个I/O引脚都可以独立设置为输入或输出。数据的时钟输出速率由波特率发生器控制。</mark></p>
<p>为了使数据发生变化，必须有新的数据写入，而且
<strong>波特率时钟</strong>
必须跳动。如果没有新的数据被写入通道，引脚将保持最后写入的值。</p>
<blockquote>
<ol type="1">
<li>那这个波特率时钟 怎么控制？能否指定任一引脚进行输出？</li>
</ol>
</blockquote>
<h2 id="同步bit-bang模式">同步Bit-Bang模式</h2>
<blockquote>
<p>The synchronous Bit-Bang mode will only update the output parallel
I/O port pins whenever data is sent from the USB interface to the
parallel interface. When this is done, data is read from the USB Rx FIFO
buffer and written out on the pins. Data can only be received from the
parallel pins (to the USB Tx FIFO interface) when the parallel interface
has been written to.</p>
<p>With Synchronous Bit-Bang mode, data will only be sent out by the
FT4232H if there is space in the FT4232H USB TXFIFO for data to be read
from the parallel interface pins. This Synchronous Bit-Bang mode will
read the data bus parallel I/O pins first, before it transmits data from
the USB RxFIFO. It is therefore 1 byte behind the output, and so to read
the inputs for the byte that you have just sent, another byte must be
sent.</p>
</blockquote>
<blockquote>
<p>同步模式只有在数据从USB接口发送到并行接口时才会更新输出的
<strong>并行I/O端口</strong> 引脚。当这样做的时候，数据从USB Rx
FIFO缓冲器中读出，并在引脚上写出。<mark>只有当并行接口被写入时，才能从并行引脚接收数据（到USB
Tx FIFO接口）。</mark></p>
<p>同步Bit-Bang模式与异步Bit-Bang模式的不同之处在于，只有当USB接口写入并行输出时，设备的并行输出才被读取。这使得控制程序更容易测量对USB输出刺激的反应，<mark>因为返回到USB接口的数据与输出数据是同步的。</mark></p>
</blockquote>
<p>在同步模式下，读和写操作会被同步进行。此时，数据总线引脚会在写入数据前先读取数据（针对每个byte）。因此，该数据引脚读取到的数值总是比写出去的数值要慢一个byte。</p>
<p>与异步模式不同，数据引脚只会在写入数据前立即进行读取操作。因此，为了读取
“写入一个byte的响应结果” ，必须要发送另一个byte。
另外，只有当设备中有空间可以从引脚读取数据时，数据才会被写入引脚。</p>
<p>每个引脚都可以独立设置为输入或输出。数据的时钟输出率由波特率发生器控制。要改变引脚的状态，必须写入新的数据，并且波特率时钟必须跳动（the
baud rate clock hask to
tick）。如果没有新的数据被写入设备，输出引脚将保持最后写入的数值。</p>
<p>当同步模式被启用时，I/O信号线的配置如表3.1所示。请注意，在首次进入同步模式后，任何引脚的默认配置，如果设置为输出，则默认被设置为
<strong>输出低电平</strong>（0V）。（随后向任何引脚写一个 <code>1</code>
将把该引脚设置为VCCIO）
当进入同步模式后，如果希望在任何输出上驱动一个高值，那么有必要首先用
<code>FT_SetBitMode()</code> 方法把这些引脚设置为输入，用
<code>FT_Write()</code> 把它们写一个 <code>1</code> ，然后用
<code>FT_SetBitMode()</code>
把它们设置为输出。请注意，当设备处于同步位串模式时，EEPROM
UART信号反转选项（signal inversion option）对这些引脚没有影响。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220707152918917.png"
alt="image-20220707152918917" />
<figcaption aria-hidden="true">image-20220707152918917</figcaption>
</figure>
<p>FT200XD 和 FT201X提供两条信号线；FT220X、FT230X 和
FT234XD提供四条信号线；而 FT221X、FT231X 和
FT240X上总共有八条信号线。</p>
<p>任何一个FT-X系列器件的CBUS引脚都可以被配置为在器件处于同步位串模式时发出
<strong>内部读取</strong> <code>RD#</code> 或 <strong>内部写入</strong>
<code>WR#</code>
频段（strobes）（注意，FT200XD、FT220X、FT221X和FT234XD只有一个<code>CBUS</code>
引脚，因此只能选择 <code>RD#</code> 或 <code>WR#</code>
）。通过在内部EEPROM中设置适当的值，<code>CBUS</code>
引脚也可用于提供时钟信号。</p>
<p>所有的bit-bang模式都需要使用D2XX驱动，<mark>不可能通过VCP驱动使用这些功能，也不可能同时使用
<code>CBUS bit-bang</code> 和
<code>VCP</code></mark>。表3.2列出了用于同步 bit-bang
模式的基本命令。这些功能的完整描述可在《D2XX程序员指南》中找到。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220707152805911.png"
alt="image-20220707152805911" />
<figcaption aria-hidden="true">image-20220707152805911</figcaption>
</figure>
<h1 id="ftdi-bit-bang">FTDI BIT-BANG</h1>
<p>FT432 如果需要配置成 Bit-Bang模式，需要：</p>
<ol type="1">
<li>使用 <code>FT_Open()</code> 打开对应通道</li>
<li>使用 <code>FT_SetBitMode()</code> 为8个pin配置输入或输出，FTDI
称之为掩码（mask），0则代表输入，1则代表输出，例如 <code>0x0F</code>
则代表 <code>0~3</code> pin 设置为输出，<code>4~7</code>
pin设置为输入。</li>
<li>同时，在 <code>FT_SetBitMode()</code> 第三个参数
<code>ucEnable</code> 传递参数即可打开对应模式，如：
<ol type="1">
<li><code>FT_BITMODE_SYNC_BITBANG</code> 即 同步 Bit-Bang 模式</li>
<li><code>FT_BITMODE_SYNC_BITBANG</code> 即 异步 Bit-Bang 模式</li>
<li><code>FT_BITMODE_RESET</code> 即 默认的 UART 模式。</li>
</ol></li>
<li>FT4232 的每个通道都是具有独立时钟的，为
<code>FT_SetBaudRate()</code>
传递参数即可设置SPI通信频率。实际上此处设置的并不是
SPI外设的工作频率，而是该 channel 通过 <code>FT_Write()</code>
接口改变引脚高低电平的频率。
<ol type="1">
<li>同步 Bit-Bang 模式下，每 <code>100000</code> 波特率约为
<code>250KHz</code> 时钟，如果使其工作在 <code>1MHz</code>
频率下，则需要设置波特率为 <code>400000</code>。</li>
<li>异步 Bit-Bang 模式下的时钟为波特率的 <code>16</code> 倍</li>
</ol></li>
<li>使用读取和写入的接口 <code>FT_Write()</code> 和
<code>FT_Read()</code>
会按照该通道设定的时钟频率去改变/读取引脚数据。</li>
</ol>
<p>操作一次 FT_Write() ，如下，即可在 一个频率的半个周期内 改变 8个pin
的高低电平。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bytes_written_number = <span class="number">0</span>;</span><br><span class="line">  ftStatus             = FT_Write(ft_handle,</span><br><span class="line">                      &amp;(byte_write_to_slave-&gt;all),</span><br><span class="line">                      bits_to_send,</span><br><span class="line">                      &amp;bytes_written_number);</span><br><span class="line">  CHECK_STATUS(ftStatus);</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><p>ft_handle
是通道的句柄（注意：一个通道一个句柄，不是一个句柄适用所有通道）</p></li>
<li><p>byte_write_to_slave.all 是一个 8bit 的 UCHAR 类型数据。</p></li>
<li><p>bits_to_send 为 待发送数据量</p></li>
<li><p>bytes_written_number 是 已写入数据量</p></li>
</ul>
</blockquote>
<h2 id="例1">例1</h2>
<p>如果将 掩码 配置为 <code>0xFF</code>
，即8个通道均为输出。且输出每个通道单次输出的数值，均为
<code>0xFF</code>，输出 16次，即调用 <code>FT_Write()</code>
16次，那么得到的图像应该如下：</p>
<p><img src="https://pic.islet.space/2022/07/202207141726135.png" alt="index" style="zoom:33%;" /></p>
<h2 id="例2">例2</h2>
<p>如果将 掩码 配置为 <code>0xFF</code> 。交替输出 <code>0xFF</code> 和
<code>0x00</code>，输出 16 次，那么得到的图像应该如下：</p>
<p><strong>Q:</strong>
为什么上面只有8个时钟，即1个byte大小，为什么是输出16次？</p>
<p><strong>A:</strong> 因为FTDI的 <code>FT_Write()</code>
接口写入一次数据，只能控制半个周期内的8个pin脚数据，如果需要发送一个周期的数据，则需要写两次，如果需要发送8个bit，则需要输出16次。</p>
<p><img src="https://pic.islet.space/2022/07/202207141726094.png" alt="2" style="zoom:33%;" /></p>
<h2 id="例3">例3</h2>
<p>如果将 掩码 配置为 <code>0x0B</code>，即 <code>0000 1011</code>
，（按照 MPSSE-SPI Example 设置的相同配置），<code>pin0</code> 为
<code>SCK</code> ，<code>pin1</code> 为 <code>MOSI</code>，
<code>pin2</code> 为 <code>MISO</code> ， <code>pin3</code> 为
<code>CS</code> 。</p>
<p>默认情况下，输入引脚的电平会被拉低。如果设置为输入引脚，<code>FT_Write()</code>
无法改变其电平。</p>
<p><code>FT_Write()</code> 一共需要写入 32次数据：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UCHAR byte_write_to_slave[<span class="number">32</span>] = &#123;</span><br><span class="line">    <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>,</span><br><span class="line">    <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x03</span>, <span class="number">0x02</span>,</span><br><span class="line">    <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>,</span><br><span class="line">    <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="https://pic.islet.space/2022/07/202207141730761.png" alt="3" style="zoom:33%;" /></p>
<p>可以看到在 <code>byte_write_to_slave[14]</code> 和
<code>byte_write_to_slave[15]</code> 时需要主动拉高 <code>pin1</code>
的电平，并维持 2个 falf period（即 one period）。</p>
<p>再用 FT_Read() 读取 32 次数据，将数据存储到
<code>UCHAR byte_read_from_slave[32]</code> 中，并从
<code>byte_read_from_slave[16]</code> ~
<code>byte_read_from_slave[31]</code> 的 16
个数据中，每间隔1个数据，将对应 <code>pin2</code> 的数据左移存储到
<code>data_read</code> 中。</p>
<p>代码可以是这样的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UCHAR data_read = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    data_read |= ( byte_read_from_slave[ <span class="number">16</span> + i * <span class="number">2</span> ] &amp; <span class="number">0x03</span>) &lt;&lt; ( <span class="number">7</span> - i );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Q:</strong> 为什么 <code>FT_Read()</code>
需要读取32次数据？</p>
<p><strong>A:</strong> 因为这是 同步 Bit-Bang
模式的特性，根据手册说明，每次读取一定数据量之前，都要写入一定的数据量。异步
Big-Bang 模式是不用这样的。</p>
<h2 id="spi-bit-bang">SPI + BIT-BANG</h2>
<p>如果按照例3 的方法去发送数据，可能会发现收到的数据一直是异常的。</p>
<p>因为 输出引脚 会保持其最后的输出电平，如 byte_read_from_slave[31]
数据为 0x00，这就让 pin0 ，即 SCK 发送完数据之后保持了低电平，与 CPOL=1
的要求相违背。</p>
<p>因此不能只发送和接收32个数据，而应该在对应的发送数据的前后加上一个周期，即声明一个长度为36的数组
UCHAR byte_read_from_slave[36] 。</p>
<p><code>byte_read_from_slave[0]</code> /
<code>byte_read_from_slave[1]</code> /
<code>byte_read_from_slave[34]</code> /
<code>byte_read_from_slave[35]</code> 均应设置为 0x09
，如下波形所示。</p>
<p><img src="https://pic.islet.space/2022/07/202207141732771.png" alt="image-20220714173158679" style="zoom:33%;" /></p>
<h1 id="ftdi-hal">FTDI HAL</h1>
<p>FTDI HAL 是基于 D2XX
库、由个人编写的、可替换libMPSSE的SPI库，目前仅有SPI相关的代码。</p>
<h2 id="年7月11日-1610">2022年7月11日 16:10</h2>
<p>各通道的可以配置不同的handle和config
参数去打开和关闭。也可以读GPIO，没问题了。</p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220711161012120.png"
alt="image-20220711161012120" />
<figcaption aria-hidden="true">image-20220711161012120</figcaption>
</figure>
<h2 id="ftd2xx_hal_read_pin_level">ftd2xx_hal_read_pin_level</h2>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief GPIO 电平读取接口</span></span><br><span class="line"><span class="comment"> * @param &#123;FT_HANDLE*&#125; ft_handle：待读取通道句柄</span></span><br><span class="line"><span class="comment"> * @param &#123;UCHAR&#125; pin_to_read：待读取引脚</span></span><br><span class="line"><span class="comment"> * @param &#123;UCHAR*&#125; pin_level：电平值</span></span><br><span class="line"><span class="comment"> * @return FT_OK if successful, otherwise the return value is an FT error code.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">FT_STATUS <span class="title">ftd2xx_hal_read_pin_level</span><span class="params">(FT_HANDLE* ft_handle,</span></span></span><br><span class="line"><span class="function"><span class="params">                                    UCHAR pin_to_read,</span></span></span><br><span class="line"><span class="function"><span class="params">                                    UCHAR* pin_level)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FT_STATUS ftStatus = FT_OK;</span><br><span class="line">    FTD2XX_HAL_DATA byte_read_from_slave;</span><br><span class="line">    FTD2XX_HAL_DATA byte_write_to_slave;</span><br><span class="line">    DWORD byte_read_number  = <span class="number">0</span>;</span><br><span class="line">    byte_write_to_slave.all = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pin_to_read &gt; <span class="number">7</span> || pin_level == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> FT_INVALID_ARGS;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ftStatus =</span><br><span class="line">        FT_Write(*ft_handle, &amp;(byte_write_to_slave.all), <span class="number">1</span>, &amp;byte_read_number);</span><br><span class="line">    CHECK_STATUS(ftStatus);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 从同道中读取8个pin的电平</span></span><br><span class="line">    byte_read_number = <span class="number">0</span>;</span><br><span class="line">    ftStatus =</span><br><span class="line">        FT_Read(*ft_handle, &amp;(byte_read_from_slave.all), <span class="number">1</span>, &amp;byte_read_number);</span><br><span class="line">    CHECK_STATUS(ftStatus);</span><br><span class="line"></span><br><span class="line">    *pin_level = (byte_read_from_slave.all &gt;&gt; pin_to_read) &amp; <span class="number">0x01</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ftStatus;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="电平读取能力分析">电平读取能力分析</h3>
<ul>
<li>利用esp32 的 GPIO 发送pwm波（宽度为 <code>350ns</code> ，周期约为
<code>750ns</code> ），发送 <code>10000</code>次后停止，该接口能够读取到
<code>76~80</code> 次。</li>
</ul>
<p><img
src="https://pic.islet.space/2022/07/PNG%E5%9B%BE%E5%83%8F.png" /></p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220712121857849.png"
alt="image-20220712121857849" />
<figcaption aria-hidden="true">image-20220712121857849</figcaption>
</figure>
<ul>
<li>拉长 pwm波周期至 <code>33us</code>，同样发送
<code>10000</code>次后停止，该接口能够读取到 <code>6660</code>
次左右。</li>
</ul>
<p><img
src="https://pic.islet.space/2022/07/PNG%E5%9B%BE%E5%83%8F%202.png" /></p>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220712122514462.png"
alt="image-20220712122514462" />
<figcaption aria-hidden="true">image-20220712122514462</figcaption>
</figure>
<p>GPIO电平读取频率大致在 <code>5KHz</code> ~ <code>50KHz</code>
之间，即接口两次调用的时间间隔在 <code>20us</code> ~ <code>200us</code>
之间。</p>
<h1 id="debug-record">DEBUG RECORD</h1>
<h2 id="null-expression-encountered">NULL expression encountered</h2>
<figure>
<img src="https://pic.islet.space/2022/07/image-20220711123340879.png"
alt="image-20220711123340879" />
<figcaption aria-hidden="true">image-20220711123340879</figcaption>
</figure>
<p>这是因为运行需要 <code>sudo</code> 权限，即
<code>sudo ./tmp/galileo_sdk/application/sample_app_raw_data_irq</code>
。如果还是不行，应该是没有卸载 <code>ftdi_sio</code> 和
<code>usbserial</code> ，即 <code>sudo rmmod ftdi_sio usbserial</code>
。</p>
<p><strong>注意</strong>：卸载 <code>usbserial</code>
后，如果这时候linux系统内有其他设备对 <code>libusb-1.0-0-dev</code>
有依赖，那它会无法正常工作。</p>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://gist.github.com/jkiv/eac61b6706d6c3c306b42f4c6adbf1e9">FTDI
GPIO example</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/aehparta/ftdi-bitbang">aehparta/ftdi-bitbang</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.ftdichip.com/Support/Knowledgebase/index.html?synchronousbitbangmode.htm">FTDI
Knowledgebase</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/swharden/AVR-projects/tree/master/FTDI%202018-05-30%20bit%20bang">swharden/AVR-projects</a></li>
<li><a
target="_blank" rel="noopener" href="https://swharden.com/blog/2018-06-03-bit-bang-ftdi-usb-to-serial-converters-to-drive-spi-devices/">Bit-Bang
FTDI USB-to-Serial Converters to Drive SPI Devices</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.intra2net.com/en/developer/libftdi/index.php">libFTDI
- FTDI USB driver with bitbang mode</a></li>
<li><a
target="_blank" rel="noopener" href="https://ftdichip.com/document/application-notes/">Documents/Application
Notes</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/06/15/Embedded/2022-06-15-STM32_Programmer_CLI-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/15/Embedded/2022-06-15-STM32_Programmer_CLI-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">STM32_Programmer_CLI 使用笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-15 12:20:00" itemprop="dateCreated datePublished" datetime="2022-06-15T12:20:00+08:00">2022-06-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-27 23:39:00" itemprop="dateModified" datetime="2022-06-27T23:39:00+08:00">2022-06-27</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Embedded/" itemprop="url" rel="index"><span itemprop="name">Embedded</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="环境部署">环境部署</h1>
<ol type="1">
<li>直接使用绝对路径，如
<code>"D:\STMicroelectronics\STM32Cube\STM32CubeProgrammer\bin\STM32_Programmer_CLI.exe"</code>，这种方法可以在
PowerShell 或 cmd 直接使用。</li>
<li>将
<code>"D:\STMicroelectronics\STM32Cube\STM32CubeProgrammer\bin</code>
添加到 <strong>系统环境变量</strong> 中，这种方法只有 PowerShell
可以使用，cmd 还是不可以。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615134109619.png"
alt="image-20220615134109619" />
<figcaption aria-hidden="true">image-20220615134109619</figcaption>
</figure>
<h1 id="使用说明">使用说明</h1>
<p>STM32_Programmer_CLI 的指令参数有多种分类，包括适用于 <strong>STM32
MCU</strong> 、<strong>STM32
MPU</strong>、<strong>MCU安全烧录</strong>、<strong>STM32WBxx</strong>
三个部分。</p>
<p>下面是这个软件的官方说明：</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br></pre></td><td class="code"><pre><span class="line">      -------------------------------------------------------------------</span><br><span class="line">                       STM32CubeProgrammer v2.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line">      -------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Usage :</span><br><span class="line">STM32_Programmer_CLI.exe [command_1] [Arguments_1][[command_2] [Arguments_2]...]</span><br><span class="line"></span><br><span class="line">Generic commands:</span><br><span class="line"></span><br><span class="line"> -?, -h, --<span class="built_in">help</span>         : Show this <span class="built_in">help</span></span><br><span class="line"> -c,     --connect      : Establish connection to the device</span><br><span class="line">     &lt;port=&lt;PortName&gt;   : Interface identifier. ex <span class="built_in">COM1</span>, /dev/ttyS0, usb1,</span><br><span class="line">                          JTAG, SWD...)</span><br><span class="line">    USB port optional parameters:</span><br><span class="line">     [sn=&lt;serialNumber&gt;]   : Serial number of the usb dfu</span><br><span class="line">     [PID=&lt;Product ID&gt;]    : Product ID. ex: <span class="number">0</span>xA38F, etc, default <span class="number">0</span>xDF11</span><br><span class="line">     [VID=&lt;Vendor ID&gt;]     : Vendor ID. ex: <span class="number">0</span>x0389, etc, default x0483</span><br><span class="line">    UART port optional parameters:</span><br><span class="line">     [br=&lt;baudrate&gt;]    : Baudrate. ex: <span class="number">115200</span>, <span class="number">9600</span>, etc, default <span class="number">115200</span></span><br><span class="line">     [P=&lt;parity&gt;]       : Parity bit, value <span class="keyword">in</span> &#123;NONE,ODD,EVEN&#125;, default EVEN</span><br><span class="line">     [db=&lt;data_bits&gt;]   : Data bit, value <span class="keyword">in</span> &#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125; ..., default <span class="number">8</span></span><br><span class="line">     [sb=&lt;stop_bits&gt;]   : Stop bit, value <span class="keyword">in</span> &#123;<span class="number">1</span>, <span class="number">1</span>.<span class="number">5</span>, <span class="number">2</span>&#125; ..., default <span class="number">1</span></span><br><span class="line">     [fc=&lt;flowControl&gt;] : Flow control</span><br><span class="line">                          Value <span class="keyword">in</span> &#123;OFF,Hardware,Software&#125; ..., default OFF</span><br><span class="line">     rts=&lt;status&gt;       : low or high</span><br><span class="line">     dtr=&lt;status&gt;       : low or high</span><br><span class="line">                          <span class="keyword">Not</span> supported <span class="keyword">for</span> STM32MP</span><br><span class="line">     [noinit=noinit_bit]: <span class="built_in">Set</span> No Init bits, value <span class="keyword">in</span> &#123;<span class="number">0</span>,<span class="number">1</span>&#125; ..., default <span class="number">0</span></span><br><span class="line">     [console]          : Enter UART console <span class="built_in">mode</span></span><br><span class="line">    JTAG/SWD debug port optional parameters:</span><br><span class="line">     [freq=&lt;frequency&gt;] : Frequency <span class="keyword">in</span> KHz. Default frequencies:</span><br><span class="line">                          <span class="number">4000</span> SWD <span class="number">9000</span> JTAG with STLINKv2</span><br><span class="line">                          <span class="number">24000</span> SWD <span class="number">21333</span> with STLINKv3</span><br><span class="line">     [index=&lt;index&gt;]    : Index of the debug probe. default index <span class="number">0</span></span><br><span class="line">     [sn=&lt;serialNumber&gt;]: Serial Number of the debug probe</span><br><span class="line">     [ap=&lt;accessPort&gt;]  : Access Port index to connect to. default ap <span class="number">0</span></span><br><span class="line">     [<span class="built_in">mode</span>=&lt;<span class="built_in">mode</span>&gt;]      : Connection <span class="built_in">mode</span>. Value <span class="keyword">in</span> &#123;UR/HOTPLUG/NORMAL/POWERDOWN&#125;</span><br><span class="line">                          default <span class="built_in">mode</span>: NORMAL</span><br><span class="line">     [reset=&lt;<span class="built_in">mode</span>&gt;]     : Reset modes: SWrst/HWrst/Crst. Default <span class="built_in">mode</span>: SWrst</span><br><span class="line">                          Reset <span class="built_in">mode</span> with UR connection <span class="built_in">mode</span> is HWrst</span><br><span class="line">     [shared]           : Enable shared <span class="built_in">mode</span> allowing connection of two or <span class="built_in">more</span></span><br><span class="line">                          instances of STM32CubeProgrammer or other debugger</span><br><span class="line">                          to the same ST-LINK probe.</span><br><span class="line">     [tcpport=&lt;Port&gt;]   : Port used <span class="keyword">for</span> running ST-Link Server, default <span class="number">7184</span></span><br><span class="line">     [LPM]              : Enable debug <span class="keyword">in</span> Low Power <span class="built_in">mode</span>(default <span class="built_in">mode</span>)</span><br><span class="line">     [dLPM]             : Disable debug <span class="keyword">in</span> Low Power <span class="built_in">mode</span></span><br><span class="line">     [getAuthID]        : Get device identification (Option only <span class="keyword">for</span> STM32U5 series)</span><br><span class="line">     [speed=&lt;Reliable/fast&gt;]: Choose flashing  Reliable/fast (Option only <span class="keyword">for</span> STM32U5 series)</span><br><span class="line">    SPI port optional parameters:</span><br><span class="line">     [br=&lt;baudrate&gt;]    : Baudrate.</span><br><span class="line">     [cpha=&lt;cpha_val&gt;]  : <span class="number">1</span>Edge or <span class="number">2</span>Edge. default <span class="number">1</span>Edge</span><br><span class="line">     [cpol=&lt;cpol_val&gt;]  : low or high</span><br><span class="line">     [crc=&lt;crc_val&gt;]    : enable or disable (<span class="number">0</span>/<span class="number">1</span>).</span><br><span class="line">     [crcpol=&lt;crc_pol&gt;] : crc polynom value.</span><br><span class="line">     [datasize=&lt;size&gt;]  : <span class="number">8</span>bit/<span class="number">16</span>bit</span><br><span class="line">     [direction=&lt;val&gt;]  : Direction: <span class="number">2</span>LFullDuplex/<span class="number">2</span>LRxOnly/<span class="number">1</span>LRx/<span class="number">1</span>LTx</span><br><span class="line">     [firstbit=&lt;val&gt;]   : First Bit: MSB/LSB</span><br><span class="line">     [frameformat=&lt;val&gt;]: Frame <span class="built_in">Format</span>: Motorola/TI</span><br><span class="line">     [<span class="built_in">mode</span>=&lt;val&gt;]       : <span class="built_in">Mode</span>: master/slave</span><br><span class="line">     [nss=&lt;val&gt;]        : NSS: soft/hard</span><br><span class="line">     [nsspulse=&lt;val&gt;]   : NSS pulse: Pulse/NoPulse</span><br><span class="line">     [delay=&lt;val&gt;]      : Delay: Delay/NoDelay, delay of few microseconds</span><br><span class="line">     [noinit=noinit_bit]: <span class="built_in">Set</span> No Init bits, value <span class="keyword">in</span> &#123;<span class="number">0</span>,<span class="number">1</span>&#125; ..., default <span class="number">0</span></span><br><span class="line">    CAN port optional parameters:</span><br><span class="line">     [br=&lt;rbaudrate&gt;]   : Baudrate : <span class="number">125</span>, <span class="number">250</span>, <span class="number">500</span>, <span class="number">1000</span> Kbps, default <span class="number">125</span></span><br><span class="line">     [<span class="built_in">mode</span>=&lt;canmode&gt;]   : CAN <span class="built_in">Mode</span> : NORMAL, LOOPBACK..., default NORMAL</span><br><span class="line">     [ide=&lt;<span class="built_in">type</span>&gt;]       : CAN <span class="built_in">Type</span> : STANDARD or EXTENDED, default STANDARD</span><br><span class="line">     [rtr=&lt;<span class="built_in">format</span>&gt;]     : Frame <span class="built_in">Format</span>: DATA or REMOTE, default DATA</span><br><span class="line">     [fifo=&lt;afifo&gt;]     : Msg Receive : FIFO0 or FIFO1, default FIFO0</span><br><span class="line">     [fm=&lt;fmode]        : Filter <span class="built_in">Mode</span> : MASK or LIST, default MASK</span><br><span class="line">     [<span class="built_in">fs</span>=&lt;fscale&gt;]      : Filter Scale: <span class="number">16</span> or <span class="number">32</span>, default <span class="number">32</span></span><br><span class="line">     [fe=&lt;fenable&gt;]     : Filter Activation : ENABLE or DISABLE, default ENABLE</span><br><span class="line">     [fbn=&lt;fbanknb&gt;]    : Filter Bank Number : <span class="number">0</span> to <span class="number">13</span>, default <span class="number">0</span></span><br><span class="line">     [noinit=noinit_bit]: <span class="built_in">Set</span> No Init bits, value <span class="keyword">in</span> &#123;<span class="number">0</span>,<span class="number">1</span>&#125; ..., default <span class="number">0</span></span><br><span class="line">    I2C port optional parameters:</span><br><span class="line">     [add=&lt;ownadd&gt;]     : Slave address : address <span class="keyword">in</span> hex <span class="built_in">format</span></span><br><span class="line">     [br=&lt;sbaudrate&gt;]   : Baudrate : <span class="number">100</span> or <span class="number">400</span> Kbps, default <span class="number">400</span></span><br><span class="line">     [sm=&lt;smode&gt;]       : Speed <span class="built_in">Mode</span> : STANDARD or FAST, default FAST</span><br><span class="line">     [am=&lt;addmode&gt;]     : Address <span class="built_in">Mode</span> : <span class="number">7</span> or <span class="number">10</span> bits, default <span class="number">7</span></span><br><span class="line">     [af=&lt;afilter&gt;]     : Analog filter : ENABLE or DISABLE, default ENABLE</span><br><span class="line">     [df=&lt;dfilter&gt;]     : Digital filter : ENABLE or DISABLE, default DISABLE</span><br><span class="line">     [dnf=&lt;dnfilter&gt;]   : Digital noise filter : <span class="number">0</span> to <span class="number">15</span>, default <span class="number">0</span></span><br><span class="line">     [rt=&lt;rtime&gt;]       : Rise <span class="built_in">time</span> : <span class="number">0</span>-<span class="number">1000</span>(STANDARD), <span class="number">0</span>-<span class="number">300</span>(FAST), default <span class="number">0</span></span><br><span class="line">     [ft=&lt;ftime&gt;]       : Fall <span class="built_in">time</span> : <span class="number">0</span>-<span class="number">300</span> (STANDARD), <span class="number">0</span>-<span class="number">300</span>(FAST), default <span class="number">0</span></span><br><span class="line">     [noinit=noinit_bit]: <span class="built_in">Set</span> No Init bits, value <span class="keyword">in</span> &#123;<span class="number">0</span>,<span class="number">1</span>&#125; ..., default <span class="number">0</span></span><br><span class="line"> -version, --version    : Displays the tool&#x27;s version</span><br><span class="line"> -l,     --list         : List all available communication interfaces</span><br><span class="line">     &lt;uart&gt;             : UART interface</span><br><span class="line">     &lt;usb&gt;              : USB interface</span><br><span class="line">     &lt;st-link&gt;              : st-link interface</span><br><span class="line"> -q,     --quietMode    : Enable quiet <span class="built_in">mode</span>. No progress bar displayed</span><br><span class="line"> -log,   --log          : Store the detailed output <span class="keyword">in</span> log file</span><br><span class="line">     [&lt;file_Path.log&gt;]  : <span class="built_in">Path</span> of the log file,</span><br><span class="line">                          default <span class="built_in">path</span> = $HOME/.STM32Programmer/trace.log</span><br><span class="line"> -vb,    --verbosity    : Specify verbosity level</span><br><span class="line">     &lt;Level&gt;            : Verbosity level, value <span class="keyword">in</span> &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"> -y, --yes              : Ignore confirmation prompt message</span><br><span class="line"></span><br><span class="line">Available commands <span class="keyword">for</span> STM32 MCU:</span><br><span class="line"></span><br><span class="line"> --skipErase            : Skip sector <span class="built_in">erase</span> before programming</span><br><span class="line"> -sl,    --safelib      : Add a segment into a firmware file (elf,bin</span><br><span class="line">                          hex,srec) containing computed CRC values</span><br><span class="line">                          To use only with the safety lib component</span><br><span class="line">     &lt;file_path&gt;        : File <span class="built_in">path</span> to be modified</span><br><span class="line">     &lt;start_address&gt;    : Flash memory <span class="built_in">start</span> address</span><br><span class="line">     &lt;end_address&gt;      : Flash memory end address</span><br><span class="line">     &lt;slice_size&gt;       : Size of data per CRC value</span><br><span class="line"> -ms,    --mergesbsfu   : Add a binary header and a sbsfu segment to an elf file</span><br><span class="line">     &lt;elf_file_path&gt;    : File <span class="built_in">path</span> to be modified</span><br><span class="line">     &lt;header_file_path&gt; : Header file <span class="built_in">path</span></span><br><span class="line">     &lt;sbsfu_file_path&gt;  : SBSFU file <span class="built_in">path</span></span><br><span class="line"> -e,     --<span class="built_in">erase</span>        : <span class="built_in">Erase</span> memory pages/sectors devices:</span><br><span class="line">                          <span class="keyword">Not</span> supported <span class="keyword">for</span> STM32MP</span><br><span class="line">     [all]              : <span class="built_in">Erase</span> all sectors</span><br><span class="line">     [&lt;sectorsCodes&gt;]   : <span class="built_in">Erase</span> the specified sectors identified by sectors</span><br><span class="line">                          codes. ex: <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span> to <span class="built_in">erase</span> sectors <span class="number">0</span>, <span class="number">1</span> and <span class="number">2</span></span><br><span class="line">                          <span class="keyword">for</span> EEPROM : ed1 &amp; ed2</span><br><span class="line">     [&lt;[<span class="built_in">start</span> end]&gt;]    : <span class="built_in">Erase</span> the specified sectors starting from</span><br><span class="line">                          <span class="built_in">start</span> code to end code, ex: -e [<span class="number">5</span> <span class="number">10</span>]</span><br><span class="line"> -w,     --write</span><br><span class="line"> -d,     --download     : Download the content of a file into device memory</span><br><span class="line">     &lt;file_path&gt;        : File <span class="built_in">path</span> name to be downloaded: (bin, hex, srec,</span><br><span class="line">                          elf, stm32 or tsv file)</span><br><span class="line">     [&lt;address&gt;]        : <span class="built_in">Start</span> address of download</span><br><span class="line"> -w64                   : Write a <span class="number">64</span>-bits data into device memory</span><br><span class="line">     &lt;address&gt;          : <span class="built_in">Start</span> address of download</span><br><span class="line">     &lt;<span class="number">64</span>-bit_data&gt;      : <span class="number">64</span>-bit data to be downloaded</span><br><span class="line">                          values should <span class="keyword">not</span> be separated by space</span><br><span class="line"> -w32                   : Write a <span class="number">32</span>-bits data into device memory</span><br><span class="line">     &lt;address&gt;          : <span class="built_in">Start</span> address of download</span><br><span class="line">     &lt;<span class="number">32</span>-bit_data&gt;      : <span class="number">32</span>-bit data to be downloaded</span><br><span class="line">                          values should be separated by space</span><br><span class="line"> -w16                   : Write a <span class="number">16</span>-bits data into device memory</span><br><span class="line">     &lt;address&gt;          : <span class="built_in">Start</span> address of download</span><br><span class="line">     &lt;<span class="number">16</span>-bit_data&gt;      : <span class="number">16</span>-bit data to be downloaded</span><br><span class="line">                          values should be separated by space</span><br><span class="line"> -w8                    : Write a <span class="number">8</span>-bits data into device memory</span><br><span class="line">     &lt;address&gt;          : <span class="built_in">Start</span> address of download</span><br><span class="line">     &lt;<span class="number">8</span>-bit_data&gt;       : <span class="number">8</span>-bit data to be downloaded</span><br><span class="line">                          values should be separated by space</span><br><span class="line"> -v,     --<span class="built_in">verify</span>       : <span class="built_in">Verify</span> <span class="keyword">if</span> the programming operation is achieved</span><br><span class="line">                          successfully</span><br><span class="line"> -r32                   : Read a <span class="number">32</span>-bit data from device memory</span><br><span class="line">     &lt;address&gt;          : Read <span class="built_in">start</span> address</span><br><span class="line">     &lt;size&gt;             : Size of data</span><br><span class="line"> -r16                   : Read a <span class="number">16</span>-bit data from device memory</span><br><span class="line">     &lt;address&gt;          : Read <span class="built_in">start</span> address</span><br><span class="line">     &lt;size&gt;             : Size of data</span><br><span class="line"> -r8                    : Read a <span class="number">8</span>-bit data from device memory</span><br><span class="line">     &lt;address&gt;          : Read <span class="built_in">start</span> address</span><br><span class="line">     &lt;size&gt;             : Size of data</span><br><span class="line"> -rst                   : Reset system</span><br><span class="line"> -hardRst               : Hardware reset</span><br><span class="line">                          Available only with JTAG/SWD debug port</span><br><span class="line"> -halt                  : Halt core</span><br><span class="line"> -run                   : Run core</span><br><span class="line"> -step                  : Step core</span><br><span class="line">                          Available only with JTAG/SWD debug port</span><br><span class="line"> -score                 : Get core status</span><br><span class="line">                          Available only with JTAG/SWD debug port</span><br><span class="line"> -coreReg               : Read/Write core registers</span><br><span class="line">     [&lt;core_register&gt;]    R0/../R15/PC/LR/PSP/MSP/XPSR/APSR/IPSR/EPSR/</span><br><span class="line">                          PRIMASK/BASEPRI/FAULTMASK/CONTROL</span><br><span class="line">     [core_reg=&lt;value&gt;]   value <span class="keyword">in</span> case of write opration</span><br><span class="line"><span class="function">                          Note: <span class="title">multiple</span> <span class="title">registers</span> <span class="title">can</span> <span class="title">be</span> <span class="title">handled</span> <span class="title">at</span> <span class="title">once</span></span></span><br><span class="line"><span class="function">                          <span class="title">Available</span> <span class="title">only</span> <span class="title">with</span> <span class="title">JTAG</span>/<span class="title">SWD</span> <span class="title">debug</span> <span class="title">port</span></span></span><br><span class="line"><span class="function"> -<span class="title">bkpt</span>                  : <span class="title">Set</span> <span class="title">a</span> <span class="title">breakpoint</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">Breakpoint</span> <span class="title">address</span></span></span><br><span class="line"><span class="function"> -<span class="title">clrbkpt</span>               : <span class="title">Clear</span> <span class="title">a</span> <span class="title">breakpoint</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">Breakpoint</span> <span class="title">address</span></span></span><br><span class="line"><span class="function"> -<span class="title">r</span>,     --<span class="title">read</span></span></span><br><span class="line"><span class="function"> -<span class="title">u</span>,     --<span class="title">upload</span>       : <span class="title">Upload</span> <span class="title">the</span> <span class="title">device</span> <span class="title">memory</span> <span class="title">content</span> <span class="title">to</span> <span class="title">a</span> .<span class="title">bin</span>/.<span class="title">hex</span>/.<span class="title">srec</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">Start</span> <span class="title">address</span> <span class="title">of</span> <span class="title">read</span> <span class="title">and</span> <span class="title">upload</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">size</span>&gt;             : <span class="title">Size</span> <span class="title">of</span> <span class="title">memory</span> <span class="title">content</span> <span class="title">to</span> <span class="title">be</span> <span class="title">read</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">file</span> <span class="title">path</span> <span class="title">with</span> .<span class="title">bin</span>/.<span class="title">hex</span>/.<span class="title">srec</span> <span class="title">extension</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">el</span>,     --<span class="title">extload</span>     : <span class="title">Select</span> <span class="title">a</span> <span class="title">custom</span> <span class="title">external</span> <span class="title">memory</span>-<span class="title">loader</span> <span class="title">for</span> <span class="title">JTAG</span>/<span class="title">SWD</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">External</span> <span class="title">memory</span>-<span class="title">loader</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"> -<span class="title">elbl</span>,   --<span class="title">extloadbl</span>   : <span class="title">Select</span> <span class="title">a</span> <span class="title">custom</span> <span class="title">external</span> <span class="title">memory</span>-<span class="title">loader</span> <span class="title">for</span> <span class="title">Bootloader</span> <span class="title">interface</span> (<span class="title">SFIx</span> <span class="title">only</span>)</span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">External</span> <span class="title">memory</span>-<span class="title">loader</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"> -<span class="title">s</span>,     --<span class="title">start</span></span></span><br><span class="line"><span class="function"> -<span class="title">g</span>,     --<span class="title">go</span>           : <span class="title">Run</span> <span class="title">the</span> <span class="title">code</span> <span class="title">at</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">address</span>.</span></span><br><span class="line"><span class="function">     [&lt;<span class="title">address</span>&gt;]        : <span class="title">Start</span> <span class="title">address</span></span></span><br><span class="line"><span class="function"> -<span class="title">rdu</span>,   --<span class="title">readunprotect</span>: <span class="title">Remove</span> <span class="title">memory</span>&#x27;<span class="title">s</span> <span class="title">Read</span> <span class="title">Protection</span> <span class="title">by</span> <span class="title">shifting</span> <span class="title">the</span> <span class="title">RDP</span></span></span><br><span class="line"><span class="function">                          <span class="title">level</span> <span class="title">from</span> <span class="title">level</span> 1 <span class="title">to</span> <span class="title">level</span> 0.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">tzenreg</span>,   --<span class="title">tzenregression</span>: <span class="title">Remove</span> <span class="title">TrustZone</span> <span class="title">Protection</span> <span class="title">by</span> <span class="title">disabling</span> <span class="title">the</span> <span class="title">TZEN</span></span></span><br><span class="line"><span class="function">                           <span class="title">from</span> 1 <span class="title">to</span> 0.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">ob</span>,    --<span class="title">optionbytes</span>  : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">manipulate</span> <span class="title">the</span> <span class="title">device</span></span></span><br><span class="line"><span class="function">                          &#x27;<span class="title">s</span> <span class="title">OptionBytes</span> <span class="title">by</span> <span class="title">displaying</span> <span class="title">or</span> <span class="title">modifying</span> <span class="title">them</span>.</span></span><br><span class="line"><span class="function">      [<span class="title">displ</span>]           : <span class="title">This</span> <span class="title">option</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">display</span> <span class="title">the</span> <span class="title">whole</span> <span class="title">set</span></span></span><br><span class="line"><span class="function">                          <span class="title">of</span> <span class="title">Option</span> <span class="title">Bytes</span>.</span></span><br><span class="line"><span class="function">      [<span class="title">OptByte</span>=&lt;<span class="title">value</span>&gt;] : <span class="title">This</span> <span class="title">option</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">program</span> <span class="title">the</span> <span class="title">given</span></span></span><br><span class="line"><span class="function">                          <span class="title">Option</span> <span class="title">Byte</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">lockRDP1</span>              : <span class="title">Lock</span> <span class="title">RDP</span> <span class="title">level</span> 1</span></span><br><span class="line"><span class="function">     &lt;<span class="title">first_half</span>&gt;       : <span class="title">First</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">second_half</span>&gt;      : <span class="title">Second</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function"> -<span class="title">unlockRDP1</span>            : <span class="title">Unlock</span> <span class="title">RDP</span> <span class="title">level</span> 1</span></span><br><span class="line"><span class="function">     &lt;<span class="title">first_half</span>&gt;       : <span class="title">First</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">second_half</span>&gt;      : <span class="title">Second</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function"> -<span class="title">lockRDP2</span>              : <span class="title">Lock</span> <span class="title">RDP</span> <span class="title">level</span> 2</span></span><br><span class="line"><span class="function">     &lt;<span class="title">first_half</span>&gt;       : <span class="title">First</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">second_half</span>&gt;      : <span class="title">Second</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function"> -<span class="title">unlockRDP2</span>            : <span class="title">Unlock</span> <span class="title">RDP</span> <span class="title">level</span> 2</span></span><br><span class="line"><span class="function">     &lt;<span class="title">first_half</span>&gt;       : <span class="title">First</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">second_half</span>&gt;      : <span class="title">Second</span> 32-<span class="title">bit</span> <span class="title">of</span> <span class="title">password</span></span></span><br><span class="line"><span class="function"> -<span class="title">ssigfoxc</span>              : <span class="title">Save</span> <span class="title">the</span> <span class="title">chip</span> <span class="title">Certificate</span>,</span></span><br><span class="line"><span class="function">                          <span class="title">supported</span> <span class="title">for</span> <span class="title">STM32WL</span> <span class="title">devices</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">Certificate</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">wsigfoxc</span>              : <span class="title">Write</span> <span class="title">the</span> <span class="title">Sigfox</span> <span class="title">credential</span>,</span></span><br><span class="line"><span class="function">                          <span class="title">supported</span> <span class="title">for</span> <span class="title">STM32WL</span> <span class="title">devices</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">Certificate</span> <span class="title">file</span> <span class="title">path</span> (<span class="title">binary</span>, <span class="title">header</span>)</span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">start</span> <span class="title">address</span> <span class="title">for</span> <span class="title">write</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">fillmemory</span>            : <span class="title">Fill</span> <span class="title">memory</span> <span class="title">with</span> <span class="title">the</span> <span class="title">given</span> <span class="title">pattern</span> <span class="title">from</span> <span class="title">the</span> <span class="title">chosen</span> <span class="title">address</span>.</span></span><br><span class="line"><span class="function">     &lt;<span class="title">start_address</span>&gt;    : <span class="title">Start</span> <span class="title">address</span> <span class="title">for</span> <span class="title">write</span>. <span class="title">The</span> <span class="title">address</span> 0<span class="title">x08000000</span> <span class="title">is</span> <span class="title">used</span> <span class="title">by</span> <span class="title">default</span></span></span><br><span class="line"><span class="function">     [<span class="title">size</span>=&lt;<span class="title">value</span>&gt;]     : <span class="title">Size</span> <span class="title">of</span> <span class="title">the</span> <span class="title">data</span> <span class="title">to</span> <span class="title">write</span></span></span><br><span class="line"><span class="function">     [<span class="title">pattern</span>=&lt;<span class="title">value</span>&gt;]  : <span class="title">The</span> <span class="title">pattern</span> <span class="title">value</span> <span class="title">to</span> <span class="title">write</span>.</span></span><br><span class="line"><span class="function">     [<span class="title">dataWidth</span>=8|16|32]: <span class="title">The</span> <span class="title">filling</span> <span class="title">data</span> <span class="title">size</span>:</span></span><br><span class="line"><span class="function">                          8 <span class="title">bits</span> <span class="title">is</span> <span class="title">selected</span> <span class="title">by</span> <span class="title">default</span>.</span></span><br><span class="line"><span class="function"> -<span class="title">blankcheck</span>            : <span class="title">Verifies</span> <span class="title">that</span> <span class="title">the</span> <span class="title">STM32</span> <span class="title">Flash</span> <span class="title">memory</span> <span class="title">is</span> <span class="title">blank</span>.</span></span><br><span class="line"><span class="function">                          <span class="title">If</span> <span class="title">the</span> <span class="title">Flash</span> <span class="title">memory</span> <span class="title">is</span> <span class="title">not</span> <span class="title">blank</span>, <span class="title">the</span> <span class="title">first</span> <span class="title">address</span> <span class="title">with</span> <span class="title">data</span> <span class="title">is</span> <span class="title">highlighted</span> <span class="title">in</span> <span class="title">a</span> <span class="title">message</span>.</span></span><br><span class="line"><span class="function"><span class="title">Beta</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">regdump</span>                     : <span class="title">Read</span> <span class="title">and</span> <span class="title">dump</span> <span class="title">Core</span> <span class="title">and</span> <span class="title">MCU</span> <span class="title">registers</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path.log</span>&gt;          : <span class="title">Log</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     [<span class="title">choice</span>=&lt;<span class="title">number</span>&gt;]        : <span class="title">Device</span> <span class="title">number</span> <span class="title">from</span> <span class="title">the</span> <span class="title">list</span> <span class="title">of</span> <span class="title">compatible</span> <span class="title">devices</span> (<span class="title">optional</span>), <span class="title">this</span> <span class="title">list</span></span></span><br><span class="line"><span class="function">                                <span class="title">is</span> <span class="title">displayed</span> <span class="title">if</span> <span class="title">the</span> <span class="title">command</span> <span class="title">is</span> <span class="title">performed</span> <span class="title">without</span> <span class="title">this</span> <span class="title">optional</span> <span class="title">argument</span></span></span><br><span class="line"><span class="function"> -<span class="title">hf</span>                          : <span class="title">Hard</span> <span class="title">fault</span> <span class="title">analyzer</span></span></span><br><span class="line"><span class="function">                                <span class="title">Helps</span> <span class="title">to</span> <span class="title">identify</span> <span class="title">system</span> <span class="title">faults</span> <span class="title">that</span> <span class="title">occur</span> <span class="title">when</span> <span class="title">the</span> <span class="title">CPU</span></span></span><br><span class="line"><span class="function">                                <span class="title">is</span> <span class="title">driven</span> <span class="title">into</span> <span class="title">a</span> <span class="title">fault</span> <span class="title">condition</span> <span class="title">by</span> <span class="title">the</span> <span class="title">application</span> <span class="title">code</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Available</span> <span class="title">commands</span> <span class="title">for</span> <span class="title">STM32</span> <span class="title">MPU</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">c</span>,     --<span class="title">connect</span>      : <span class="title">Establish</span> <span class="title">connection</span> <span class="title">to</span> <span class="title">the</span> <span class="title">device</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">port</span>=&lt;<span class="title">PortName</span>&gt;   : <span class="title">Interface</span> <span class="title">identifer</span>. <span class="title">ex</span> <span class="title">COM1</span>, /<span class="title">dev</span>/<span class="title">ttyS0</span>, <span class="title">usb1</span>)</span></span><br><span class="line"><span class="function">    <span class="title">USB</span> <span class="title">port</span> <span class="title">optional</span> <span class="title">parameters</span>:</span></span><br><span class="line"><span class="function">     [<span class="title">sn</span>=&lt;<span class="title">serialNum</span>&gt;]   : <span class="title">Serial</span> <span class="title">number</span> <span class="title">of</span> <span class="title">the</span> <span class="title">usb</span> <span class="title">dfu</span></span></span><br><span class="line"><span class="function">     [<span class="title">serial</span>]           : <span class="title">Activate</span> <span class="title">USB</span> <span class="title">serial</span> <span class="title">Gadget</span> <span class="title">for</span> <span class="title">MPU</span> <span class="title">devices</span></span></span><br><span class="line"><span class="function">    <span class="title">UART</span> <span class="title">port</span> <span class="title">optional</span> <span class="title">parameters</span>:</span></span><br><span class="line"><span class="function">     [<span class="title">br</span>=&lt;<span class="title">baudrate</span>&gt;]    : <span class="title">Baudrate</span>. <span class="title">ex</span>: 115200, 9600, <span class="title">etc</span>, <span class="title">default</span> 115200</span></span><br><span class="line"><span class="function">     [<span class="title">P</span>=&lt;<span class="title">parity</span>&gt;]       : <span class="title">Parity</span> <span class="title">bit</span>, <span class="title">value</span> <span class="title">in</span> &#123;<span class="title">NONE</span>,<span class="title">ODD</span>,<span class="title">EVEN</span>&#125;, <span class="title">default</span> <span class="title">NONE</span></span></span><br><span class="line"><span class="function">     [<span class="title">db</span>=&lt;<span class="title">data_bits</span>&gt;]   : <span class="title">Data</span> <span class="title">bit</span>, <span class="title">value</span> <span class="title">in</span> &#123;6, 7, 8&#125; ..., <span class="title">default</span> 8</span></span><br><span class="line"><span class="function">     [<span class="title">sb</span>=&lt;<span class="title">stop_bits</span>&gt;]   : <span class="title">Stop</span> <span class="title">bit</span>, <span class="title">value</span> <span class="title">in</span> &#123;1, 1.5, 2&#125; ..., <span class="title">default</span> 1</span></span><br><span class="line"><span class="function">     [<span class="title">fc</span>=&lt;<span class="title">flowControl</span>&gt;] : <span class="title">Flow</span> <span class="title">control</span> (<span class="title">Not</span> <span class="title">yet</span> <span class="title">supported</span> <span class="title">for</span> <span class="title">STM32MP</span>)</span></span><br><span class="line"><span class="function">                          <span class="title">Value</span> <span class="title">in</span> &#123;<span class="title">OFF</span>,<span class="title">Hardware</span>,<span class="title">Software</span>&#125; ..., <span class="title">default</span> <span class="title">OFF</span></span></span><br><span class="line"><span class="function">     [<span class="title">noinit</span>=<span class="title">noinit_bit</span>]: <span class="title">Set</span> <span class="title">No</span> <span class="title">Init</span> <span class="title">bits</span>, <span class="title">value</span> <span class="title">in</span> &#123;0,1&#125; ..., <span class="title">default</span> 0</span></span><br><span class="line"><span class="function"> -<span class="title">s</span>,     --<span class="title">start</span></span></span><br><span class="line"><span class="function"> -<span class="title">g</span>,     --<span class="title">go</span>           : <span class="title">Run</span> <span class="title">the</span> <span class="title">code</span> <span class="title">at</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">partition</span> <span class="title">ID</span>.</span></span><br><span class="line"><span class="function">     [&lt;<span class="title">partitionID</span>&gt;]    : <span class="title">Partition</span> <span class="title">ID</span></span></span><br><span class="line"><span class="function">                          <span class="title">If</span> <span class="title">not</span> <span class="title">specified</span>, <span class="title">last</span> <span class="title">loaded</span> <span class="title">partition</span></span></span><br><span class="line"><span class="function">                          <span class="title">will</span> <span class="title">be</span> <span class="title">started</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">startAdress</span>&gt;]    : <span class="title">Start</span> <span class="title">address</span></span></span><br><span class="line"><span class="function">                          <span class="title">If</span> <span class="title">not</span> <span class="title">specified</span>, <span class="title">last</span> <span class="title">loaded</span> <span class="title">segment</span> <span class="title">address</span></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">noack</span>&gt;]          : <span class="title">No</span> <span class="title">acknowledgment</span> <span class="title">required</span></span></span><br><span class="line"><span class="function">                          <span class="title">If</span> <span class="title">not</span> <span class="title">specified</span>, <span class="title">acknowledgment</span> <span class="title">will</span> <span class="title">be</span> <span class="title">required</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">detach</span>                : <span class="title">Send</span> <span class="title">detach</span> <span class="title">command</span> <span class="title">to</span> <span class="title">DFU</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">wb</span>                    : <span class="title">Write</span> <span class="title">blob</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">     &lt;<span class="title">blob_file_path</span>&gt;   : <span class="title">Blob</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"> -<span class="title">pmic</span>                  : <span class="title">Program</span> <span class="title">PMIC</span> <span class="title">NVM</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">     &lt;<span class="title">PMIC</span> <span class="title">file_path</span>&gt;   : <span class="title">PMIC</span> <span class="title">file_path</span></span></span><br><span class="line"><span class="function"> -<span class="title">gc</span>, --<span class="title">getcertificate</span>  : <span class="title">Get</span> <span class="title">the</span> <span class="title">chip</span> <span class="title">Certificate</span>,</span></span><br><span class="line"><span class="function">                          <span class="title">supported</span> <span class="title">for</span> <span class="title">devices</span> <span class="title">with</span> <span class="title">security</span> <span class="title">features</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">Certificate</span> <span class="title">file</span> <span class="title">path</span> <span class="title">into</span> <span class="title">which</span> <span class="title">the</span> <span class="title">chip</span></span></span><br><span class="line"><span class="function">                          <span class="title">certificate</span> <span class="title">will</span> <span class="title">be</span> <span class="title">uploaded</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">p</span>,     --<span class="title">phaseID</span>      : <span class="title">Display</span> <span class="title">the</span> <span class="title">current</span> <span class="title">partition</span> <span class="title">ID</span> <span class="title">to</span> <span class="title">be</span> <span class="title">loaded</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">w</span>,     --<span class="title">write</span></span></span><br><span class="line"><span class="function"> -<span class="title">d</span>,     --<span class="title">download</span>     : <span class="title">Download</span> <span class="title">the</span> <span class="title">content</span> <span class="title">of</span> <span class="title">a</span> <span class="title">file</span> <span class="title">into</span> <span class="title">device</span> <span class="title">memory</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">File</span> <span class="title">path</span> <span class="title">name</span> <span class="title">to</span> <span class="title">be</span> <span class="title">downloaded</span>: (<span class="title">bin</span>, <span class="title">stm32</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">partition_id</span>&gt;     : <span class="title">Partition</span> <span class="title">ID</span> <span class="title">to</span> <span class="title">be</span> <span class="title">downloaded</span></span></span><br><span class="line"><span class="function"> -<span class="title">rp</span>,    --<span class="title">readPart</span>     : <span class="title">Upload</span> <span class="title">a</span> <span class="title">memory</span> <span class="title">partion</span> <span class="title">ID</span> <span class="title">content</span> <span class="title">to</span> <span class="title">a</span> .<span class="title">bin</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">partionID</span>&gt;        : <span class="title">Partion</span> <span class="title">to</span> <span class="title">be</span> <span class="title">read</span></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">offset</span> <span class="title">address</span>&gt;] : <span class="title">Offset</span> <span class="title">address</span> <span class="title">of</span> <span class="title">read</span> <span class="title">and</span> <span class="title">upload</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">size</span>&gt;             : <span class="title">Size</span> <span class="title">of</span> <span class="title">partion</span> <span class="title">content</span> <span class="title">to</span> <span class="title">be</span> <span class="title">read</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">Binary</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">ssp</span>, --<span class="title">ssp</span>                  : <span class="title">Program</span> <span class="title">an</span> <span class="title">SSP</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">ssp_file_path</span>&gt;          : <span class="title">SSP</span> <span class="title">file</span> <span class="title">path</span> <span class="title">to</span> <span class="title">be</span> <span class="title">programmed</span>, <span class="title">bin</span> <span class="title">or</span> <span class="title">ssp</span> <span class="title">extension</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">ssp</span>-<span class="title">fw</span>-<span class="title">path</span>&gt;            : <span class="title">SSP</span> <span class="title">signed</span> <span class="title">firmware</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     [<span class="title">hsm</span>=0|1]                : <span class="title">Set</span> <span class="title">user</span> <span class="title">option</span> <span class="title">for</span> <span class="title">HSM</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">                                <span class="title">value</span> <span class="title">in</span> &#123;0 (<span class="title">do</span> <span class="title">not</span> <span class="title">use</span> <span class="title">HSM</span>), 1 (<span class="title">use</span> <span class="title">HSM</span>)&#125;</span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> : <span class="title">hsm</span>=0</span></span><br><span class="line"><span class="function">     &lt;<span class="title">lic_path</span>|<span class="title">slot</span>=<span class="title">slotID</span>&gt;   : <span class="title">Path</span> <span class="title">to</span> <span class="title">the</span> <span class="title">license</span> <span class="title">file</span> (<span class="title">if</span> <span class="title">hsm</span>=0)</span></span><br><span class="line"><span class="function">                                <span class="title">or</span> <span class="title">reader</span> <span class="title">slot</span> <span class="title">ID</span> <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">used</span> (<span class="title">hsm</span>=1)</span></span><br><span class="line"><span class="function"> -<span class="title">tm</span>                          : <span class="title">Force</span> <span class="title">timeout</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">value</span>&gt;                  : <span class="title">Number</span> <span class="title">of</span> <span class="title">milliseconds</span></span></span><br><span class="line"><span class="function"> -<span class="title">rst</span>                         : <span class="title">Reset</span> <span class="title">USB</span> <span class="title">device</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="title">OTP</span> <span class="title">structure</span> <span class="title">v1</span> <span class="title">commands</span> (<span class="title">for</span> <span class="title">STM32MP15xx</span>):</span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">program</span>           : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">program</span> <span class="title">SAFMEM</span></span></span><br><span class="line"><span class="function">                          <span class="title">memory</span> <span class="title">by</span> <span class="title">modifying</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">words</span></span></span><br><span class="line"><span class="function">      [<span class="title">wordID</span>=&lt;<span class="title">value</span>&gt;]  : <span class="title">This</span> <span class="title">field</span> <span class="title">contains</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">word</span> <span class="title">number</span></span></span><br><span class="line"><span class="function">      [<span class="title">value</span>=&lt;<span class="title">value</span>&gt;]   : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">chosen</span> <span class="title">OTP</span> <span class="title">word</span></span></span><br><span class="line"><span class="function">      [<span class="title">sha_rsl</span>=&lt;<span class="title">value</span>&gt;] : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">corresponding</span> <span class="title">shadow</span> <span class="title">read</span></span></span><br><span class="line"><span class="function">                          <span class="title">sticky</span> <span class="title">lock</span> <span class="title">bit</span></span></span><br><span class="line"><span class="function">      [<span class="title">sha_wsl</span>=&lt;<span class="title">value</span>&gt;] : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">corresponding</span> <span class="title">shadow</span> <span class="title">write</span></span></span><br><span class="line"><span class="function">                          <span class="title">sticky</span> <span class="title">lock</span> <span class="title">bit</span></span></span><br><span class="line"><span class="function">      [<span class="title">sl</span>=&lt;<span class="title">value</span>&gt;]      : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">corresponding</span> <span class="title">programming</span> <span class="title">sticky</span></span></span><br><span class="line"><span class="function">                          <span class="title">lock</span> <span class="title">bit</span></span></span><br><span class="line"><span class="function">      [<span class="title">pl</span>=&lt;<span class="title">value</span>&gt;]      : <span class="title">Loads</span> <span class="title">value</span> <span class="title">into</span> <span class="title">the</span> <span class="title">corresponding</span> <span class="title">programming</span> <span class="title">perma</span>-</span></span><br><span class="line"><span class="function">                          <span class="title">nent</span> <span class="title">lock</span> <span class="title">bit</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">displ</span>             : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">display</span> <span class="title">all</span> <span class="title">or</span> <span class="title">parts</span></span></span><br><span class="line"><span class="function">                          <span class="title">of</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">structure</span></span></span><br><span class="line"><span class="function">      [<span class="title">upper</span>]           : <span class="title">Displays</span> <span class="title">the</span> <span class="title">loaded</span> <span class="title">upper</span> <span class="title">OTP</span> <span class="title">shadow</span> <span class="title">registers</span></span></span><br><span class="line"><span class="function">                          <span class="title">values</span> <span class="title">and</span> <span class="title">status</span></span></span><br><span class="line"><span class="function">      [<span class="title">lower</span>]           : <span class="title">Displays</span> <span class="title">the</span> <span class="title">loaded</span> <span class="title">lower</span> <span class="title">OTP</span> <span class="title">shadow</span> <span class="title">registers</span></span></span><br><span class="line"><span class="function">                          <span class="title">values</span> <span class="title">and</span> <span class="title">status</span></span></span><br><span class="line"><span class="function">      [<span class="title">ctrl</span>]            : <span class="title">Displays</span> <span class="title">the</span> <span class="title">loaded</span> <span class="title">BSEC</span> <span class="title">control</span> <span class="title">registers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="title">OTP</span> <span class="title">structure</span> <span class="title">v2</span> <span class="title">commands</span> (<span class="title">except</span> <span class="title">STM32MP15xx</span>):</span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">displ</span>             : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span> <span class="title">to</span> <span class="title">display</span> <span class="title">all</span> <span class="title">or</span> <span class="title">parts</span></span></span><br><span class="line"><span class="function">                          <span class="title">of</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">structure</span></span></span><br><span class="line"><span class="function">      [<span class="title">word</span>=&lt;<span class="title">id</span>&gt;]       : &#123;<span class="title">Optional</span>&#125; <span class="title">display</span> <span class="title">a</span> <span class="title">specific</span> <span class="title">OTP</span> <span class="title">registers</span> &#123;<span class="title">values</span> <span class="title">and</span> <span class="title">status</span>&#125;</span></span><br><span class="line"><span class="function">                          <span class="title">Up</span> <span class="title">to</span> 96 <span class="title">OTP</span> <span class="title">words</span> [0 <span class="title">to</span> 95], <span class="title">id</span> <span class="title">value</span> <span class="title">in</span> <span class="title">hex</span>/<span class="title">dec</span> <span class="title">format</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">write</span>             : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">to</span> <span class="title">fuse</span> <span class="title">or</span> <span class="title">update</span> <span class="title">OTP</span> <span class="title">words</span></span></span><br><span class="line"><span class="function">                          <span class="title">Up</span> <span class="title">to</span> 96 <span class="title">OTP</span> <span class="title">words</span> [0 <span class="title">to</span> 95] <span class="title">at</span> <span class="title">the</span> <span class="title">same</span> <span class="title">command</span> <span class="title">line</span></span></span><br><span class="line"><span class="function">      [<span class="title">lock</span>]            : &#123;<span class="title">Optional</span>&#125; <span class="title">indicate</span> <span class="title">the</span> <span class="title">operation</span> <span class="title">type</span>, <span class="title">update</span> <span class="title">or</span> <span class="title">permanent</span> <span class="title">lock</span></span></span><br><span class="line"><span class="function">      [<span class="title">word</span>=&lt;<span class="title">id</span>&gt;]       : <span class="title">This</span> <span class="title">field</span> <span class="title">contains</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">word</span> <span class="title">number</span> <span class="title">in</span> <span class="title">hex</span>/<span class="title">dec</span> <span class="title">format</span></span></span><br><span class="line"><span class="function">      [<span class="title">value</span>=&lt;<span class="title">value</span>&gt;]   : <span class="title">Value</span> <span class="title">to</span> <span class="title">be</span> <span class="title">written</span> <span class="title">in</span> <span class="title">hex</span> <span class="title">format</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">lock</span>              : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">to</span> <span class="title">fuse</span> <span class="title">permanently</span> <span class="title">OTP</span> <span class="title">words</span></span></span><br><span class="line"><span class="function">                          <span class="title">Up</span> <span class="title">to</span> 96 <span class="title">OTP</span> <span class="title">words</span> [0 <span class="title">to</span> 95] <span class="title">at</span> <span class="title">the</span> <span class="title">same</span> <span class="title">command</span> <span class="title">line</span></span></span><br><span class="line"><span class="function">      [<span class="title">word</span>=&lt;<span class="title">id</span>&gt;]       : <span class="title">This</span> <span class="title">field</span> <span class="title">contains</span> <span class="title">the</span> <span class="title">OTP</span> <span class="title">word</span> <span class="title">number</span> <span class="title">in</span> <span class="title">hex</span>/<span class="title">dec</span> <span class="title">format</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">otp</span> <span class="title">fwrite</span>            : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">to</span> <span class="title">program</span> <span class="title">a</span> <span class="title">binary</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">      [<span class="title">lock</span>]            : &#123;<span class="title">Optional</span>&#125; <span class="title">indicate</span> <span class="title">the</span> <span class="title">operation</span> <span class="title">type</span>, <span class="title">update</span> <span class="title">or</span> <span class="title">permanent</span> <span class="title">lock</span></span></span><br><span class="line"><span class="function">      &lt;<span class="title">bin_path</span>&gt;        : <span class="title">Binary</span> <span class="title">file</span> <span class="title">path</span>, 32-<span class="title">bits</span> <span class="title">aligned</span></span></span><br><span class="line"><span class="function">      [<span class="title">word</span>=&lt;<span class="title">id</span>&gt;]       : <span class="title">OTP</span> <span class="title">word</span> <span class="title">number</span> <span class="title">in</span> <span class="title">hex</span>/<span class="title">dec</span> <span class="title">format</span>, <span class="title">start</span> <span class="title">word</span> <span class="title">of</span> <span class="title">program</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">MCU</span> <span class="title">Secure</span> <span class="title">programming</span> <span class="title">specific</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">sfi</span>, --<span class="title">sfi</span>                  : <span class="title">Program</span> <span class="title">an</span> <span class="title">sfi</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">protocol</span>=<span class="title">Ptype</span>&gt;]       : <span class="title">Protocol</span> <span class="title">type</span> <span class="title">to</span> <span class="title">be</span> <span class="title">used</span> : <span class="title">static</span>/<span class="title">live</span></span></span><br><span class="line"><span class="function">                                <span class="title">Only</span> <span class="title">static</span> <span class="title">protocol</span> <span class="title">is</span> <span class="title">supported</span> <span class="title">so</span> <span class="title">far</span></span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> <span class="title">static</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;              : <span class="title">Path</span> <span class="title">of</span> <span class="title">sfi</span> <span class="title">file</span> <span class="title">to</span> <span class="title">be</span> <span class="title">programmed</span></span></span><br><span class="line"><span class="function">     [<span class="title">hsm</span>=0|1]                : <span class="title">Set</span> <span class="title">user</span> <span class="title">option</span> <span class="title">for</span> <span class="title">HSM</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">                                <span class="title">value</span> <span class="title">in</span> &#123;0 (<span class="title">do</span> <span class="title">not</span> <span class="title">use</span> <span class="title">HSM</span>), 1 (<span class="title">use</span> <span class="title">HSM</span>)&#125;</span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> : <span class="title">hsm</span>=0</span></span><br><span class="line"><span class="function">     &lt;<span class="title">lic_path</span>|<span class="title">slot</span>=<span class="title">slotID</span>&gt;   : <span class="title">Path</span> <span class="title">to</span> <span class="title">the</span> <span class="title">SFI</span> <span class="title">license</span> <span class="title">file</span> (<span class="title">if</span> <span class="title">hsm</span>=0)</span></span><br><span class="line"><span class="function">                                <span class="title">or</span> <span class="title">reader</span> <span class="title">slot</span> <span class="title">ID</span> <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">used</span> (<span class="title">hsm</span>=1)</span></span><br><span class="line"><span class="function">   [&lt;<span class="title">licMod_path</span>&gt;|<span class="title">slot</span>=<span class="title">slotID</span>]: <span class="title">list</span> <span class="title">of</span> <span class="title">the</span> <span class="title">integrated</span> <span class="title">SMI</span> <span class="title">license</span> <span class="title">files</span> <span class="title">paths</span></span></span><br><span class="line"><span class="function">                                <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">not</span> <span class="title">used</span> (<span class="title">hsm</span>=0)</span></span><br><span class="line"><span class="function">                                <span class="title">Or</span> <span class="title">readers</span> <span class="title">slot</span> <span class="title">IDs</span> <span class="title">list</span> <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">used</span> (<span class="title">hsm</span>=1)</span></span><br><span class="line"><span class="function">                                <span class="title">Used</span> <span class="title">only</span> <span class="title">in</span> <span class="title">combined</span> <span class="title">case</span></span></span><br><span class="line"><span class="function">                                <span class="title">the</span> <span class="title">list</span> <span class="title">order</span> <span class="title">should</span> <span class="title">correspond</span> <span class="title">to</span></span></span><br><span class="line"><span class="function">                                <span class="title">modules</span> <span class="title">integration</span> <span class="title">order</span> <span class="title">within</span> <span class="title">the</span> <span class="title">SFI</span> <span class="title">file</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">smi</span>, --<span class="title">smi</span>                  : <span class="title">Program</span> <span class="title">an</span> <span class="title">smi</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">protocol</span>=<span class="title">Ptype</span>&gt;         : <span class="title">Protocol</span> <span class="title">type</span> <span class="title">to</span> <span class="title">be</span> <span class="title">used</span> : <span class="title">static</span>/<span class="title">live</span></span></span><br><span class="line"><span class="function">                                <span class="title">Only</span> <span class="title">static</span> <span class="title">protocol</span> <span class="title">is</span> <span class="title">supported</span> <span class="title">so</span> <span class="title">far</span></span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> <span class="title">static</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;              : <span class="title">Path</span> <span class="title">of</span> <span class="title">smi</span> <span class="title">file</span> <span class="title">to</span> <span class="title">be</span> <span class="title">programmed</span></span></span><br><span class="line"><span class="function">     [<span class="title">hsm</span>=0|1]                : <span class="title">Set</span> <span class="title">user</span> <span class="title">option</span> <span class="title">for</span> <span class="title">HSM</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">                                <span class="title">value</span> <span class="title">in</span> &#123;0 (<span class="title">do</span> <span class="title">not</span> <span class="title">use</span> <span class="title">HSM</span>), 1 (<span class="title">use</span> <span class="title">HSM</span>)&#125;</span></span><br><span class="line"><span class="function">                                <span class="title">Default</span> <span class="title">value</span> : <span class="title">hsm</span>=0</span></span><br><span class="line"><span class="function">     [&lt;<span class="title">address</span>&gt;]              : <span class="title">Destination</span> <span class="title">address</span> <span class="title">of</span> <span class="title">the</span> <span class="title">smi</span> <span class="title">module</span></span></span><br><span class="line"><span class="function">                                <span class="title">needed</span> <span class="title">only</span> <span class="title">for</span> <span class="title">relocatable</span> <span class="title">SMI</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">lic_path</span>|<span class="title">slot</span>=<span class="title">slotID</span>&gt;   : <span class="title">Path</span> <span class="title">to</span> <span class="title">the</span> <span class="title">SMI</span> <span class="title">license</span> <span class="title">file</span> (<span class="title">if</span> <span class="title">hsm</span>=0)</span></span><br><span class="line"><span class="function">                                <span class="title">or</span> <span class="title">reader</span> <span class="title">slot</span> <span class="title">ID</span> <span class="title">if</span> <span class="title">HSM</span> <span class="title">is</span> <span class="title">used</span> (<span class="title">hsm</span>=1)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">rsse</span>, --<span class="title">rsse</span>                : <span class="title">Set</span> <span class="title">the</span> <span class="title">RSSe</span> <span class="title">file</span> <span class="title">path</span>,</span></span><br><span class="line"><span class="function">                                <span class="title">supported</span> <span class="title">for</span> <span class="title">devices</span> <span class="title">with</span> <span class="title">security</span> <span class="title">extension</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;              : <span class="title">RSSe</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">a</span>, --<span class="title">abort</span>                  : <span class="title">This</span> <span class="title">command</span> <span class="title">allows</span> <span class="title">the</span> <span class="title">user</span></span></span><br><span class="line"><span class="function">                                <span class="title">to</span> <span class="title">clean</span> <span class="title">a</span> <span class="title">not</span> <span class="title">properly</span> <span class="title">finished</span> <span class="title">process</span>.</span></span><br><span class="line"><span class="function">                                <span class="title">The</span> <span class="title">currently</span> <span class="title">ongoing</span> <span class="title">operation</span> <span class="title">will</span> <span class="title">stop</span></span></span><br><span class="line"><span class="function">                                <span class="title">and</span> <span class="title">the</span> <span class="title">system</span> <span class="title">will</span> <span class="title">return</span> <span class="title">to</span> <span class="title">idle</span> <span class="title">state</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">dsecurity</span>                   : <span class="title">Disable</span> <span class="title">the</span> <span class="title">security</span> <span class="title">for</span> <span class="title">STM32WL</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">setdefaultob</span>                : <span class="title">Set</span> <span class="title">default</span> <span class="title">Option</span> <span class="title">Bytes</span> <span class="title">for</span> <span class="title">STM32WL</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">rssgetversion</span>, --<span class="title">rssgetversion</span> : <span class="title">get</span> <span class="title">the</span> <span class="title">version</span> <span class="title">of</span> <span class="title">RSS</span></span></span><br><span class="line"><span class="function"><span class="title">HSM</span> <span class="title">related</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetinfo</span>                : <span class="title">Read</span> <span class="title">the</span> <span class="title">HSM</span> <span class="title">available</span> <span class="title">information</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetcounter</span>             : <span class="title">Read</span> <span class="title">the</span> <span class="title">current</span> <span class="title">value</span> <span class="title">of</span> <span class="title">the</span> <span class="title">license</span> <span class="title">counter</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetfwid</span>                : <span class="title">Read</span> <span class="title">the</span> <span class="title">Firmware</span>/<span class="title">Module</span> <span class="title">Identifier</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetstatus</span>              : <span class="title">Read</span> <span class="title">the</span> <span class="title">current</span> <span class="title">card</span> <span class="title">life</span>-<span class="title">cycle</span> <span class="title">state</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetlicense</span>             : <span class="title">Get</span> <span class="title">a</span> <span class="title">license</span> <span class="title">for</span> <span class="title">the</span> <span class="title">current</span> <span class="title">chip</span></span></span><br><span class="line"><span class="function">                              <span class="title">if</span> <span class="title">counter</span> <span class="title">is</span> <span class="title">not</span> <span class="title">null</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;            : <span class="title">File</span> <span class="title">path</span> <span class="title">into</span> <span class="title">which</span> <span class="title">the</span> <span class="title">received</span> <span class="title">license</span></span></span><br><span class="line"><span class="function">                              <span class="title">will</span> <span class="title">be</span> <span class="title">stored</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]        : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function">     [<span class="title">protocol</span>=&lt;<span class="title">Ptype</span>&gt;]     : <span class="title">Protocol</span> <span class="title">type</span> <span class="title">to</span> <span class="title">be</span> <span class="title">used</span> : <span class="title">static</span>/<span class="title">live</span></span></span><br><span class="line"><span class="function">                              <span class="title">Only</span> <span class="title">static</span> <span class="title">protocol</span> <span class="title">is</span> <span class="title">supported</span> <span class="title">so</span> <span class="title">far</span></span></span><br><span class="line"><span class="function">                              <span class="title">Default</span> <span class="title">value</span> <span class="title">static</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">hsmgetlicensefromcertifbin</span>, -<span class="title">hsmglfcb</span> : <span class="title">Get</span> <span class="title">a</span> <span class="title">license</span> <span class="title">for</span> <span class="title">the</span> <span class="title">input</span> <span class="title">certificate</span></span></span><br><span class="line"><span class="function">                                          <span class="title">if</span> <span class="title">counter</span> <span class="title">is</span> <span class="title">not</span> <span class="title">null</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">certif_file_path.bin</span>&gt;             : <span class="title">Input</span> <span class="title">certificate</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">license_file_path.bin</span>&gt;            : <span class="title">File</span> <span class="title">path</span> <span class="title">into</span> <span class="title">which</span> <span class="title">the</span> <span class="title">received</span> <span class="title">license</span></span></span><br><span class="line"><span class="function">                                          <span class="title">will</span> <span class="title">be</span> <span class="title">stored</span></span></span><br><span class="line"><span class="function">     [<span class="title">slot</span>=&lt;<span class="title">SlotID</span>&gt;]                    : <span class="title">Slot</span> <span class="title">ID</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Smart</span> <span class="title">Card</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="function">                                          <span class="title">Default</span> <span class="title">value</span>: <span class="title">slot</span>=1 (<span class="title">the</span> <span class="title">PC</span> <span class="title">integrated</span> <span class="title">SC</span> <span class="title">reader</span>)</span></span><br><span class="line"><span class="function">     [<span class="title">protocol</span>=&lt;<span class="title">Ptype</span>&gt;]                 : <span class="title">Protocol</span> <span class="title">type</span> <span class="title">to</span> <span class="title">be</span> <span class="title">used</span> : <span class="title">static</span>/<span class="title">live</span></span></span><br><span class="line"><span class="function">                                          <span class="title">Only</span> <span class="title">static</span> <span class="title">protocol</span> <span class="title">is</span> <span class="title">supported</span> <span class="title">so</span> <span class="title">far</span></span></span><br><span class="line"><span class="function">                                          <span class="title">Default</span> <span class="title">value</span> <span class="title">static</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">STM32WBxx</span> <span class="title">specific</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">getuid64</span>              : <span class="title">Read</span> <span class="title">the</span> <span class="title">device</span> <span class="title">UID</span></span></span><br><span class="line"><span class="function"> -<span class="title">fusgetstate</span>           : <span class="title">Read</span> <span class="title">the</span> <span class="title">FUS</span> <span class="title">state</span></span></span><br><span class="line"><span class="function"> -<span class="title">fusopgetversion</span>       : <span class="title">Read</span> <span class="title">the</span> <span class="title">FUS</span> <span class="title">Operator</span> <span class="title">version</span></span></span><br><span class="line"><span class="function"> -<span class="title">antirollback</span>          : <span class="title">Perform</span> <span class="title">the</span> <span class="title">antirollback</span> <span class="title">operation</span> (<span class="title">Only</span> <span class="title">on</span> <span class="title">Bootloader</span> <span class="title">interface</span>)</span></span><br><span class="line"><span class="function"> -<span class="title">startfus</span>              : <span class="title">Perform</span> <span class="title">the</span> <span class="title">startfus</span> <span class="title">operation</span></span></span><br><span class="line"><span class="function">  <span class="title">Firmware</span> <span class="title">Upgrade</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"> -<span class="title">fwdelete</span>              : <span class="title">Delete</span> <span class="title">the</span> <span class="title">BLE</span> <span class="title">stack</span> <span class="title">firmware</span></span></span><br><span class="line"><span class="function"> -<span class="title">fwupgrade</span>             : <span class="title">Upgrade</span> <span class="title">the</span> <span class="title">BLE</span> <span class="title">stack</span> <span class="title">firmware</span> <span class="title">or</span> <span class="title">the</span> <span class="title">FUS</span> <span class="title">firmware</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">New</span> <span class="title">firmware</span> <span class="title">image</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">address</span>&gt;          : <span class="title">Start</span> <span class="title">address</span> <span class="title">of</span> <span class="title">download</span></span></span><br><span class="line"><span class="function">     [<span class="title">firstinstall</span>=0|1] : 1 <span class="title">if</span> <span class="title">it</span> <span class="title">is</span> <span class="title">a</span> <span class="title">first</span> <span class="title">install</span> <span class="title">otherwise</span> 0</span></span><br><span class="line"><span class="function">                          <span class="title">optional</span>, <span class="title">Default</span> <span class="title">value</span>: <span class="title">firstinstall</span>=0</span></span><br><span class="line"><span class="function">     [<span class="title">startstack</span>=0|1]   : 1 <span class="title">to</span> <span class="title">start</span> <span class="title">the</span> <span class="title">stack</span> <span class="title">after</span> <span class="title">the</span> <span class="title">upgrade</span> <span class="title">otherwise</span> 0</span></span><br><span class="line"><span class="function">                          <span class="title">optional</span>, <span class="title">Default</span> <span class="title">value</span>: <span class="title">startstack</span>=1</span></span><br><span class="line"><span class="function"> -<span class="title">autoupgrade</span>           : <span class="title">Automatically</span> <span class="title">recognize</span> <span class="title">the</span> <span class="title">stack</span> <span class="title">address</span> <span class="title">and</span> <span class="title">Upgrade</span> <span class="title">the</span> <span class="title">BLE</span> <span class="title">stack</span> <span class="title">firmware</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">New</span> <span class="title">firmware</span> <span class="title">image</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">      -<span class="title">v</span>                : <span class="title">Verify</span> <span class="title">if</span> <span class="title">the</span> <span class="title">download</span> <span class="title">operation</span> <span class="title">is</span> <span class="title">achieved</span></span></span><br><span class="line"><span class="function">                          <span class="title">successfully</span> <span class="title">before</span> <span class="title">starting</span> <span class="title">upgrade</span></span></span><br><span class="line"><span class="function"> -<span class="title">startwirelessstack</span>    : <span class="title">Start</span> <span class="title">the</span> <span class="title">wireless</span> <span class="title">stack</span></span></span><br><span class="line"><span class="function">  <span class="title">Key</span> <span class="title">management</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"> -<span class="title">authkeyupdate</span>         : <span class="title">Authentication</span> <span class="title">key</span> <span class="title">update</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">New</span> <span class="title">authentication</span> <span class="title">key</span> <span class="title">file</span> <span class="title">path</span>.</span></span><br><span class="line"><span class="function">                        : <span class="title">This</span> <span class="title">is</span> <span class="title">the</span> <span class="title">public</span> <span class="title">key</span> <span class="title">generated</span> <span class="title">by</span></span></span><br><span class="line"><span class="function">                        : <span class="title">STM32TrustedPackageCreator</span> <span class="title">using</span> -<span class="title">sign</span> <span class="title">command</span>.</span></span><br><span class="line"><span class="function"> -<span class="title">authkeylock</span>           : <span class="title">Authentication</span> <span class="title">key</span> <span class="title">lock</span></span></span><br><span class="line"><span class="function">                        : <span class="title">Once</span> <span class="title">locked</span>, <span class="title">it</span>&#x27;<span class="title">s</span> <span class="title">no</span> <span class="title">longuer</span> <span class="title">possible</span> <span class="title">to</span> <span class="title">change</span> <span class="title">it</span></span></span><br><span class="line"><span class="function">                        : <span class="title">using</span> <span class="title">authkeyupdate</span> <span class="title">command</span></span></span><br><span class="line"><span class="function"> -<span class="title">wusrkey</span>               : <span class="title">Write</span> <span class="title">user</span> <span class="title">key</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">file_path</span>&gt;        : <span class="title">User</span> <span class="title">key</span> <span class="title">file</span> <span class="title">path</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">keytype</span>=1|2|3&gt;    : <span class="title">User</span> <span class="title">key</span> <span class="title">type</span>, <span class="title">values</span> : 1, 2 <span class="title">or</span> 3.</span></span><br><span class="line"><span class="function">                        : 1 = <span class="title">simple</span> <span class="title">key</span>, 2 = <span class="title">master</span> <span class="title">key</span>, 3 = <span class="title">encrypted</span> <span class="title">key</span>.</span></span><br><span class="line"><span class="function"><span class="title">Serial</span> <span class="title">Wire</span> <span class="title">Viewer</span> <span class="title">specific</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">swv</span>                       : <span class="title">Printf</span> <span class="title">via</span> <span class="title">SWO</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">freq</span>=&lt;<span class="title">frequency</span>&gt;&gt;     : <span class="title">System</span> <span class="title">Clock</span> <span class="title">in</span> <span class="title">MHz</span></span></span><br><span class="line"><span class="function">     &lt;<span class="title">portnumber</span>=0-31|<span class="title">all</span>&gt;  : <span class="title">ITM</span> <span class="title">port</span> <span class="title">number</span>, <span class="title">values</span> : 0-31, <span class="title">or</span> <span class="title">all</span> <span class="title">for</span> <span class="title">All</span> <span class="title">ports</span></span></span><br><span class="line"><span class="function">     [&lt;<span class="title">file_Path.log</span>&gt;]      : <span class="title">Path</span> <span class="title">of</span> <span class="title">the</span> <span class="title">SWV</span> <span class="title">log</span> <span class="title">file</span> (<span class="title">optional</span>),</span></span><br><span class="line"><span class="function">                            : <span class="title">default</span> <span class="title">path</span> = $<span class="title">USER_HOME</span>/<span class="title">STMicroelectronics</span>/<span class="title">STM32Programmer</span>/<span class="title">SWV_Log</span>/<span class="title">swv.log</span></span></span><br><span class="line"><span class="function">      -<span class="title">RA</span>                   : <span class="title">Start</span> <span class="title">the</span> <span class="title">reception</span> <span class="title">of</span> <span class="title">swv</span> <span class="title">automatically</span></span></span><br><span class="line"><span class="function"> -<span class="title">startswv</span>                  :  <span class="title">Printf</span> <span class="title">via</span> <span class="title">SWO</span> &amp; <span class="title">Start</span> <span class="title">the</span> <span class="title">reception</span> <span class="title">of</span> <span class="title">swv</span> <span class="title">automatically</span></span></span><br><span class="line"><span class="function"><span class="title">Script</span> <span class="title">Manager</span> <span class="title">command</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> -<span class="title">script</span>                    : <span class="title">Start</span> <span class="title">the</span> <span class="title">execution</span> <span class="title">of</span> <span class="title">Script</span> <span class="title">File</span></span></span><br><span class="line"><span class="function"> &lt;<span class="title">file_Path.prg</span>&gt;            : <span class="title">Path</span> <span class="title">of</span> <span class="title">the</span> <span class="title">script</span> <span class="title">file</span> (.<span class="title">prg</span>)</span></span><br></pre></td></tr></table></figure>
<h2 id="查看设备列表">查看设备列表</h2>
<p>下面语句可以查看所有连接至PC端的设备。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STM32_Programmer_CLI <span class="literal">-l</span></span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121113727.png"
alt="设备列表" />
<figcaption aria-hidden="true">设备列表</figcaption>
</figure>
<p>详见：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-l</span>,     -<span class="literal">-list</span>         : List all available communication interfaces</span><br><span class="line">    &lt;uart&gt;             : UART interface</span><br><span class="line">    &lt;usb&gt;              : USB interface</span><br><span class="line">    &lt;st<span class="literal">-link</span>&gt;              : st<span class="literal">-link</span> interface</span><br></pre></td></tr></table></figure>
<h2 id="设备连接">设备连接</h2>
<p>可以使用多种连接方式，将ST的从设备与PC上位机进行连接，包括 USB / UART
/ JTAG / SWD / SPI / CAN / I2C 。</p>
<p>使用指令 <code>STM32_Programmer_CLI -c port=SWD</code>
即可自动连接至设备。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615122116373.png"
alt="设备自动连接" />
<figcaption aria-hidden="true">设备自动连接</figcaption>
</figure>
<h2 id="内容读取">内容读取</h2>
<p>使用指令
<code>STM32_Programmer_CLI -c port=SWD -r32 0x08000000 0x400</code>
可以从 地址 <code>0x08000000</code> 起，以 <code>32bit</code>
格式（<code>-r32</code> ）读取 <code>0x400</code> <strong>byte</strong>
数据。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121414609.png"
alt="以32bit格式读取数据" />
<figcaption aria-hidden="true">以32bit格式读取数据</figcaption>
</figure>
<p><code>-r32</code> 可以更换成 <code>-r16</code> 或 <code>-r8</code>
。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121643968.png"
alt="以16bit格式读取数据" />
<figcaption aria-hidden="true">以16bit格式读取数据</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121729021.png"
alt="以8bit格式读取数据" />
<figcaption aria-hidden="true">以8bit格式读取数据</figcaption>
</figure>
<h2 id="内容擦除">内容擦除</h2>
<p>大面积擦除（Mass
erase）所有内容，一般来说烧录的时候不会去擦除全部内容，这部分应该看情况。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STM32_Programmer_CLI <span class="literal">-c</span> port=SWD <span class="literal">-e</span> all</span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615124617282.png"
alt="擦除全部内容" />
<figcaption aria-hidden="true">擦除全部内容</figcaption>
</figure>
<p>详见：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-e</span>,     -<span class="literal">-erase</span>        : <span class="built_in">Erase</span> memory pages/sectors devices:</span><br><span class="line">                         Not supported <span class="keyword">for</span> STM32<span class="built_in">MP</span></span><br><span class="line">    [<span class="type">all</span>]              : <span class="built_in">Erase</span> all sectors</span><br><span class="line">    [&lt;<span class="type">sectorsCodes</span>&gt;]   : <span class="built_in">Erase</span> the specified sectors identified by sectors</span><br><span class="line">                         codes. ex: <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span> to <span class="built_in">erase</span> sectors <span class="number">0</span>, <span class="number">1</span> and <span class="number">2</span></span><br><span class="line">                         <span class="keyword">for</span> EEPROM : ed1 &amp; ed2</span><br><span class="line">    [&lt;[<span class="type">start</span> <span class="type">end</span>]&gt;]    : <span class="built_in">Erase</span> the specified sectors starting from</span><br><span class="line">                         <span class="built_in">start</span> code to <span class="keyword">end</span> code, ex: <span class="literal">-e</span> [<span class="number">5</span> <span class="number">10</span>]</span><br></pre></td></tr></table></figure>
<p>下面两张图是烧录完某 <code>.bin</code>
文件后，flash内部结束尾部临界处的数据。交替烧录两个大小不易的
<code>.bin</code> 文件，可以观察到结尾处都是正常的，并没有出现异常。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615130250432.png"
alt="临界处数据" />
<figcaption aria-hidden="true">临界处数据</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615130543343.png"
alt="image-20220615130543343" />
<figcaption aria-hidden="true">image-20220615130543343</figcaption>
</figure>
<h2 id="程序烧录">程序烧录</h2>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STM32_Programmer_CLI <span class="literal">-c</span> port=SWD <span class="literal">-d</span> <span class="string">&quot;\\wsl.localhost\kali-linux\home\liewzheng\Workspace\stm32\20220511-galileo-manifest\out\mixosense_apps\data_collection_irq\data_collection_irq.bin&quot;</span> <span class="number">0</span>x00 <span class="literal">-v</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>-d</code> 是指 文件下载，后方接 <strong>文件路径</strong>
以及 <strong>起始地址</strong> <code>0x00</code> 。这个起始地址应该是
<code>0x08000000</code> 还是 <code>0x00</code> 我也还没搞清楚。</p></li>
<li><p><code>-v</code> 是指 代码验证。</p></li>
</ul>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615123114639.png"
alt="image-20220615123114639" />
<figcaption aria-hidden="true">image-20220615123114639</figcaption>
</figure>
<p>详见：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-d</span>,     -<span class="literal">-download</span>     : Download the content of a file into device memory</span><br><span class="line">    &lt;file_path&gt;        : File path name to be downloaded: (bin, hex, srec,</span><br><span class="line">                         elf, stm32 or tsv file)</span><br><span class="line">    [&lt;<span class="type">address</span>&gt;]        : <span class="built_in">Start</span> address of download</span><br></pre></td></tr></table></figure>
<h2 id="设备复位和运行">设备复位和运行</h2>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">STM32_Programmer_CLI <span class="literal">-c</span> port=SWD <span class="literal">-hardRst</span></span><br><span class="line">STM32_Programmer_CLI <span class="literal">-c</span> port=SWD <span class="literal">-s</span></span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615124508137.png"
alt="image-20220615124508137" />
<figcaption aria-hidden="true">image-20220615124508137</figcaption>
</figure>
<h1 id="报错">报错</h1>
<h2 id="端口占用报错">端口占用报错</h2>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220615121045036.png"
alt="image-20220615121045036" />
<figcaption aria-hidden="true">image-20220615121045036</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/06/09/Programming/Windows/2022-06-09-Bat-Script/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/09/Programming/Windows/2022-06-09-Bat-Script/" class="post-title-link" itemprop="url">Bat Script</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-06-09 15:30:00 / Modified: 21:53:36" itemprop="dateCreated datePublished" datetime="2022-06-09T15:30:00+08:00">2022-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>下面所有的脚本都会类比 Linux Shell Script 进行。</p>
<blockquote>
<p>Windows有两个命令行 shell：Command shell 和 PowerShell。 每个 shell
都是一个软件程序，它提供你与操作系统或应用程序之间的直接通信，提供一个环境来自动执行
IT 操作。</p>
<p>Command shell 是内置于
Windows中，用于自动执行常规任务（例如用户帐户管理或夜间备份）和批处理
(.bat) 文件。 使用Windows脚本主机，可以在命令外壳中运行更复杂的脚本。
有关详细信息，请参阅 cscript 或 wscript。
通过使用脚本可以比使用用户界面更有效地执行操作。
脚本接受命令行中提供的所有命令。</p>
<p>PowerShell 旨在扩展 Command shell 的功能，以运行名为 cmdlet 的
PowerShell 命令。 Cmdlet 类似于
Windows命令，但提供了更具可扩展性的脚本语言。 可以在 PowerShell
中Windows命令和 PowerShell cmdlet，但命令外壳只能运行 Windows
命令，不能运行 PowerShell cmdlet。</p>
<p>若要实现最可靠、最新的自动化Windows，建议使用 PowerShell 而不是
Windows 命令或 Windows 脚本主机Windows自动化。</p>
</blockquote>
<h1 id="generic-script">Generic Script</h1>
<h2 id="注释">注释</h2>
<p>windows bat 批处理和 PowerShell 都可以使用 <code>::</code>
作为注释头部信息。与 Linux Shell Script 和 Python 的 <code>#</code>
不一致（反人类罪）。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:: 注释</span><br></pre></td></tr></table></figure>
<h2 id="del-rd">DEL&amp; RD</h2>
<p><code>del</code> 删除命令只能删除文件，<code>rd</code>
可以删除文件夹</p>
<p><code>/Q</code> 是静默删除，不提示文字。<code>/S</code>
除目录本身外，还将删除指定目录下的所有子目录和文件。用于删除目录树。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:: 静默删除所有文件和文件夹</span><br><span class="line"><span class="built_in">del</span> /Q %BUILD_PATH%\*.o</span><br><span class="line"><span class="built_in">rd</span> /S /Q %BUILD_PATH%\bin</span><br><span class="line"><span class="built_in">rd</span> /S /Q %BUILD_PATH%\log</span><br><span class="line"><span class="built_in">rd</span> /S /Q %BUILD_PATH%\lib</span><br><span class="line"><span class="built_in">rd</span> /S /Q %BUILD_PATH%\map</span><br></pre></td></tr></table></figure>
<h2 id="常见命令对照表">常见命令对照表</h2>
<table>
<thead>
<tr class="header">
<th>Windows Bat</th>
<th>Windows PowerShell</th>
<th>Linux Shell</th>
<th>Others</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>help</td>
<td>Get-Help</td>
<td>man</td>
<td></td>
</tr>
<tr class="even">
<td>cd /D</td>
<td>Set-Location</td>
<td>cd</td>
<td></td>
</tr>
<tr class="odd">
<td>cd</td>
<td>Get-Location</td>
<td>pwd</td>
<td></td>
</tr>
<tr class="even">
<td>type</td>
<td>Get-Content</td>
<td>cat</td>
<td></td>
</tr>
<tr class="odd">
<td>rd /S<br>rmdir /S</td>
<td>Remove-Item</td>
<td>rm -r</td>
<td></td>
</tr>
<tr class="even">
<td>del<br>erase</td>
<td>Remove-Item</td>
<td>rm</td>
<td></td>
</tr>
<tr class="odd">
<td>dir /b</td>
<td></td>
<td>ls</td>
<td></td>
</tr>
<tr class="even">
<td>dir</td>
<td>Get-ChildItem</td>
<td>ll</td>
<td></td>
</tr>
<tr class="odd">
<td>cls</td>
<td>Clear-Host</td>
<td>clear</td>
<td></td>
</tr>
<tr class="even">
<td>doskey</td>
<td>Set-Alias</td>
<td>alias</td>
<td></td>
</tr>
<tr class="odd">
<td>md<br>mkdir</td>
<td>New-Item</td>
<td>mkdir</td>
<td></td>
</tr>
<tr class="even">
<td>move</td>
<td>Move-Item</td>
<td>mv</td>
<td></td>
</tr>
<tr class="odd">
<td>ren<br>rename</td>
<td>Rename-Item</td>
<td>mv</td>
<td></td>
</tr>
<tr class="even">
<td>copy</td>
<td>Copy-Item</td>
<td>cp</td>
<td></td>
</tr>
<tr class="odd">
<td>echo</td>
<td>Write-Output</td>
<td>echo</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="条件语句">条件语句</h2>
<p>bat 的条件语句教程：《<a
target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/if">if</a>》</p>
<p>PowerShell 的条件语句教程：《<a
target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_if?view=powershell-7.2">about_If</a>》</p>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/powershell/scripting/overview?view=powershell-7.2">什么是
PowerShell？</a></li>
<li><a
target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.management/?view=powershell-7.2">Microsoft.PowerShell.Management</a></li>
<li><a
target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/windows-commands">Windows
命令</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/05/25/Programming/Compiling/2022-05-25-armcc%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/25/Programming/Compiling/2022-05-25-armcc%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98/" class="post-title-link" itemprop="url">armcc的交叉编译和持续交付</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-25 16:00:00" itemprop="dateCreated datePublished" datetime="2022-05-25T16:00:00+08:00">2022-05-25</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-09 21:53:25" itemprop="dateModified" datetime="2022-06-09T21:53:25+08:00">2022-06-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>因为基本上没什么人直接使用 armcc
作为自动化编译、持续集成和交付的工具，更多是使用 UV4 软件读取
<code>.uvprojx</code> 文件来获取编译信息，进而驱动 armcc
进行编译过程。</p>
<p>通过自行编辑 <code>Makefile</code> 文件，使用 make 和 armcc
工具可以对代码文件进行编译，可以进行静态库的生成，也可以生成可烧录文件，但是就不要想着复杂的
<code>make test</code> 等测试功能了。</p>
<h1 id="diff-between-them">DIFF BETWEEN THEM</h1>
<p>下方详细描述一下使用 <code>arm-none-eabi-gcc</code>
、<code>make</code> 、<code>cmake</code> 与 <code>armcc</code>
、<code>make</code> 的不同。</p>
<ol type="1">
<li>使用 <code>arm-none-eabi-gcc</code> 和 <code>make</code> 编译的 SDK
过程属于 Unix Makefile 编译过程（详见 CMake 工具及官网对 <a
target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">CMakefiles
Generators</a> 说明）。暂时不清楚使用 <code>armcc</code> 和
<code>cmake</code> 是如何生成 <code>Makefile</code>
的，因为尚不了解toolchain的绑定过程，导致一致检测到的是
windows平台本地的 <code>mingw</code> 工具。</li>
<li>启动文件不同。详见 <a href="##ABOUT%20STARTUP%20FILE">ABOUT STARTUP
FILE</a></li>
<li>工具链指定方式不同。详见 <a href="##TOOLCHAIN">TOOLCHAIN</a></li>
</ol>
<h1 id="keil-mdk-env">KEIL MDK ENV</h1>
<h2 id="mdk-softpack">MDK SOFTPACK</h2>
<p><a target="_blank" rel="noopener" href="https://www.keil.com/dd2/pack/">MDK5 Software Packs</a></p>
<h2 id="toolchain-downloads">TOOLCHAIN DOWNLOADS</h2>
<p>首先需要安装版本较新的 Keil MDK-ARM
开发软件。最好是在Windows上安装，方便破解。</p>
<p>可以从 <code>About uVision</code> 中查看版本信息。也可以直接在
PowerShell 中直接调用查看。</p>
<p>MDK 的版本为 <code>v5.22</code> 确实是比较老旧的，建议下载
<code>v5.27</code> 及以上版本。</p>
<p>下载链接：<a
target="_blank" rel="noopener" href="https://storage.islet.space/02_Softwares/06_Embedded/01_CrossCompiler/keil_mdk_armcc/MDK528.exe">MDKv5.28</a>、<a
target="_blank" rel="noopener" href="https://storage.islet.space/02_Softwares/06_Embedded/01_CrossCompiler/keil_mdk_armcc/MDK537.exe">MDKv5.37</a>、<a
target="_blank" rel="noopener" href="https://storage.islet.space/02_Softwares/06_Embedded/01_CrossCompiler/keil_mdk_armcc/keygen.exe">keygen</a></p>
<p>官网下载：<a
target="_blank" rel="noopener" href="https://developer.arm.com/tools-and-software/embedded/arm-compiler/arm-compiler-5/downloads">ARM
Compiler 5 Downloads</a></p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608100300944.png"
alt="image-20220608100300944" />
<figcaption aria-hidden="true">image-20220608100300944</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608100748964.png"
alt="image-20220608100748964" />
<figcaption aria-hidden="true">image-20220608100748964</figcaption>
</figure>
<h1 id="toolchain">TOOLCHAIN</h1>
<p>下面的一些参数可以从 <a
target="_blank" rel="noopener" href="https://developer.arm.com/documentation/dui0375/g/Compiler-Command-line-Options/">ARM
Compiler v5.06 for uVision armcc User Guide</a> 获取帮助。</p>
<h2 id="fromelf">FROMELF</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Options:</span><br><span class="line">       --<span class="built_in">help</span>         display this <span class="built_in">help</span> screen</span><br><span class="line">       --vsn          display version information</span><br><span class="line">       --output file  the output file. (defaults to stdout <span class="keyword">for</span> -text format)</span><br><span class="line">       --nodebug      <span class="keyword">do</span> not put debug areas <span class="keyword">in</span> the output image</span><br><span class="line">       --nolinkview   <span class="keyword">do</span> not put sections <span class="keyword">in</span> the output image</span><br><span class="line"></span><br><span class="line">Binary Output Formats:</span><br><span class="line">       --bin          Plain Binary</span><br><span class="line">       --m32          Motorola 32 bit Hex</span><br><span class="line">       --i32          Intel 32 bit Hex</span><br><span class="line">       --vhx          Byte Oriented Hex format</span><br><span class="line"></span><br><span class="line">       --base addr    Optionally <span class="built_in">set</span> base address <span class="keyword">for</span> m32,i32</span><br><span class="line"></span><br><span class="line">Output Formats Requiring Debug Information</span><br><span class="line">       --fieldoffsets Assembly Language Description of Structures/Classes</span><br><span class="line">       --expandarrays Arrays inside and outside structures are expanded</span><br><span class="line"></span><br><span class="line">Other Output Formats:</span><br><span class="line">       --elf         ELF</span><br><span class="line">       --text        Text Information</span><br><span class="line"></span><br><span class="line">                Flags <span class="keyword">for</span> Text Information</span><br><span class="line">                -v          verbose</span><br><span class="line">                -a          <span class="built_in">print</span> data addresses (For images built with debug)</span><br><span class="line">                -c          disassemble code</span><br><span class="line">                -d          <span class="built_in">print</span> contents of data section</span><br><span class="line">                -e          <span class="built_in">print</span> exception tables</span><br><span class="line">                -g          <span class="built_in">print</span> debug tables</span><br><span class="line">                -r          <span class="built_in">print</span> relocation information</span><br><span class="line">                -s          <span class="built_in">print</span> symbol table</span><br><span class="line">                -t          <span class="built_in">print</span> string table</span><br><span class="line">                -y          <span class="built_in">print</span> dynamic segment contents</span><br><span class="line">                -z          <span class="built_in">print</span> code and data size information</span><br></pre></td></tr></table></figure>
<h2 id="armlink">ARMLINK</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Usage: armlink option-list input-file-list</span><br><span class="line"><span class="built_in">where</span></span><br><span class="line">    option-list      is a list of case-insensitive options.</span><br><span class="line">    input-file-list  is a list of input object and library files.</span><br><span class="line"></span><br><span class="line">General options (abbreviations shown capitalised):</span><br><span class="line">   --<span class="built_in">help</span>          Print this summary.</span><br><span class="line">   --output file   Specify the name of the output file.</span><br><span class="line">   --via file      Read further arguments from file.</span><br><span class="line"></span><br><span class="line">Options <span class="keyword">for</span> specifying memory map information:</span><br><span class="line">   --partial       Generate a partially linked object.</span><br><span class="line">   --scatter file  Create the memory map as described <span class="keyword">in</span> file.</span><br><span class="line">   --ro-base n     Set <span class="built_in">exec</span> addr of region containing RO sections.</span><br><span class="line">   --rw-base n     Set <span class="built_in">exec</span> addr of region containing RW/ZI sections.</span><br><span class="line"></span><br><span class="line">Options <span class="keyword">for</span> controlling image contents:</span><br><span class="line">   --bestdebug     Add debug information giving best debug view to image.</span><br><span class="line">   --datacompressor off</span><br><span class="line">                   Do not compress RW data sections.</span><br><span class="line">   --no_debug      Do not add debug information to image.</span><br><span class="line">   --entry         Specify entry sections and entry point.</span><br><span class="line">   --libpath       Specify path to find system libraries from.</span><br><span class="line">   --userlibpath   Specify path to find user libraries from.</span><br><span class="line">   --no_locals     Do not add <span class="built_in">local</span> symbols to image symbol table.</span><br><span class="line">   --no_remove     Do not remove unused sections from image.</span><br><span class="line"></span><br><span class="line">Options <span class="keyword">for</span> controlling image related information:</span><br><span class="line">   --callgraph     Create a static callgraph of <span class="built_in">functions</span>.</span><br><span class="line">   --feedback file Generate feedback that can be used by the compiler <span class="keyword">in</span> file.</span><br><span class="line">   --info topic    List misc. information about image.</span><br><span class="line">                    Available topics: (separate multiple topics with comma)</span><br><span class="line">                     common   List common sections eliminated from the image.</span><br><span class="line">                     debug    List eliminated input debug sections.</span><br><span class="line">                     sizes    List code and data sizes <span class="keyword">for</span> objects <span class="keyword">in</span> image.</span><br><span class="line">                     totals   List total sizes of all objects <span class="keyword">in</span> image.</span><br><span class="line">                     veneers  List veneers that have been generated.</span><br><span class="line">                     unused   List sections eliminated from the image.</span><br><span class="line">   --map           Display memory map of image.</span><br><span class="line">   --symbols       List symbols <span class="keyword">in</span> image.</span><br><span class="line">   --xref          List all cross-references between input sections.</span><br></pre></td></tr></table></figure>
<p><code>--summary_stderr</code></p>
<h2 id="armcc">ARMCC</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Usage:         armcc [options] file1 file2 ... filen</span><br><span class="line">Main options:</span><br><span class="line">        </span><br><span class="line">--arm          Generate ARM code</span><br><span class="line">--thumb        Generate Thumb code</span><br><span class="line">--c90          Switch to C mode (default <span class="keyword">for</span> .c files)</span><br><span class="line">--cpp          Switch to C++ mode (default <span class="keyword">for</span> .cpp files)</span><br><span class="line">-O0            Minimum optimization</span><br><span class="line">-O1            Restricted optimization <span class="keyword">for</span> debugging</span><br><span class="line">-O2            High optimization</span><br><span class="line">-O3            Maximum optimization</span><br><span class="line">-Ospace        Optimize <span class="keyword">for</span> codesize</span><br><span class="line">-Otime         Optimize <span class="keyword">for</span> maximum performance</span><br><span class="line">--cpu &lt;cpu&gt;    Select CPU to generate code <span class="keyword">for</span></span><br><span class="line">--cpu list     Output a list of all the selectable CPUs</span><br><span class="line">-o &lt;file&gt;      Name the final output file of the compilation</span><br><span class="line">-c             Compile only, <span class="keyword">do</span> not link</span><br><span class="line">--asm          Output assembly code as well as object code</span><br><span class="line">-S             Output assembly code instead of object code</span><br><span class="line">--interleave   Interleave <span class="built_in">source</span> with disassembly (use with --asm or -S)</span><br><span class="line">-E             Preprocess the C <span class="built_in">source</span> code only</span><br><span class="line">-D&lt;symbol&gt;     Define &lt;symbol&gt; on entry to the compiler</span><br><span class="line">-g             Generate tables <span class="keyword">for</span> high-level debugging</span><br><span class="line">-I&lt;directory&gt;  Include &lt;directory&gt; on the <span class="comment">#include search pat</span></span><br></pre></td></tr></table></figure>
<h1 id="makefile">MAKEFILE</h1>
<p>make 可以在任一路径下执行，只需要加入 <code>-C &lt;path&gt;</code>
即可，即告诉make工具在 <code>&lt;path&gt;</code>
路径下执行编译。方便了在 windows 命令行环境下的执行。</p>
<p>编写 Makefile
的时候，某些变量可以通过外部传递，而且方法也很简单，甚至内部甚至不需要声明，只需要在引用处写明变量名称即可。然后外部调用时以
<code>VARIABLE="value"</code> 的形式进行声明即可。如下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make libmxs <span class="literal">-C</span> <span class="number">20220607</span> MANIFEST_PATH=<span class="string">&quot;F:\Workspace\20220511-galileo-manifest&quot;</span> TOOLCHAIN_PATH=<span class="string">&quot;D:\Keil_v528\ARM\ARMCC\bin&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="compiling-control-strings">COMPILING CONTROL STRINGS</h2>
<p>下面这些编译参数是复制自 KEIL IDE 的，对应的平台是 STM32L4R9。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">--c99</span><br><span class="line">-c </span><br><span class="line">--cpu Cortex-M4.fp</span><br><span class="line">-D__MICROLIB -g -O3 --apcs&#x3D;interwork --split_sections </span><br><span class="line"></span><br><span class="line">-I ..&#x2F;app </span><br><span class="line">-I ..&#x2F;M_BSP </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;BMM150 </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;Sensor_R1 </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;lps33k </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;lcd </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;PSRAM </span><br><span class="line">-I ..&#x2F;M_BSP&#x2F;OSPI_NOR </span><br><span class="line">-I ..&#x2F;Driver </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;CMSIS&#x2F;Include </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;CMSIS&#x2F;Device&#x2F;ST&#x2F;STM32L4xx&#x2F;Include </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;STM32L4xx_HAL_Driver&#x2F;Inc </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;BSP&#x2F;STM32L4R9I_EVAL </span><br><span class="line">-I ..&#x2F;..&#x2F;..&#x2F;Drivers&#x2F;BSP&#x2F;Components&#x2F;Common </span><br><span class="line"></span><br><span class="line">-I.&#x2F;RTE&#x2F;_Watch_EVAL</span><br><span class="line">-IC:&#x2F;Users&#x2F;mixo&#x2F;AppData&#x2F;Local&#x2F;Arm&#x2F;Packs&#x2F;ARM&#x2F;CMSIS&#x2F;5.5.1&#x2F;CMSIS&#x2F;Core&#x2F;Include</span><br><span class="line">-IDrivers&#x2F;CMSIS&#x2F;Device&#x2F;ST&#x2F;STM32L4xx&#x2F;Include</span><br><span class="line">-D__UVISION_VERSION&#x3D;&quot;528&quot; -D_RTE_ -DSTM32L4R9xx -DUSE_HAL_DRIVER -DUSE_GVO_390x390</span><br><span class="line">-o .\Watch\*.o --omf_browse .\Watch\*.crf --depend .\Watch\*.d</span><br></pre></td></tr></table></figure>
<h2 id="toolchain-1">TOOLCHAIN</h2>
<p>在 Makefile 文件中，往往为了互相兼容，默认编译器的名称就是
<code>gcc</code> ，只是前缀不同而已，而 <code>armcc</code>
编译器在使用时则需清晰指定名称。</p>
<p>下方为 <code>armcc</code> 工具链的指定方式：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 工具链</span></span><br><span class="line">CC=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>armcc.exe<span class="string">&quot;</span></span><br><span class="line"><span class="string">AS=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>armasm.exe&quot;</span></span><br><span class="line">AR=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>armar.exe<span class="string">&quot;</span></span><br><span class="line"><span class="string">LINK=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>armlink.exe&quot;</span></span><br><span class="line">FROM_ELF=<span class="variable">$(TOOLCHAIN_PATH)\&quot;</span>fromelf.exe<span class="string">&quot;</span></span><br></pre></td></tr></table></figure>
<p>下方为 <code>arm-none-eabi-gcc</code> 工具链的指定（由 stm32 CubeMX
生成）。</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">PREFIX = arm-none-eabi-</span><br><span class="line"><span class="comment"># The gcc compiler bin path can be either defined in make command via GCC_PATH variable (&gt; make GCC_PATH=xxx)</span></span><br><span class="line"><span class="comment"># either it can be added to the PATH environment variable.</span></span><br><span class="line"><span class="keyword">ifdef</span> GCC_PATH</span><br><span class="line">CC = <span class="variable">$(GCC_PATH)</span>/<span class="variable">$(PREFIX)</span>gcc</span><br><span class="line">AS = <span class="variable">$(GCC_PATH)</span>/<span class="variable">$(PREFIX)</span>gcc -x assembler-with-cpp</span><br><span class="line">CP = <span class="variable">$(GCC_PATH)</span>/<span class="variable">$(PREFIX)</span>objcopy</span><br><span class="line">SZ = <span class="variable">$(GCC_PATH)</span>/<span class="variable">$(PREFIX)</span>size</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">CC = <span class="variable">$(PREFIX)</span>gcc</span><br><span class="line">AS = <span class="variable">$(PREFIX)</span>gcc -x assembler-with-cpp</span><br><span class="line">CP = <span class="variable">$(PREFIX)</span>objcopy</span><br><span class="line">SZ = <span class="variable">$(PREFIX)</span>size</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line">HEX = <span class="variable">$(CP)</span> -O ihex</span><br><span class="line">BIN = <span class="variable">$(CP)</span> -O binary -S</span><br></pre></td></tr></table></figure>
<h2 id="compiling-parameters">COMPILING PARAMETERS</h2>
<p>总结出常见的编译参数如下：</p>
<h3 id="macro-definitions">MACRO DEFINITIONS</h3>
<p>宏定义参数：<code>-DUSE_HAL_DRIVER</code> /
<code>-DSTM32L4R9xx</code> / <code>-D__MICROLIB</code> 。</p>
<p>其中，前两个还是要依具体芯片的硬件参数来看的</p>
<h3 id="cpu">CPU</h3>
<p>CPU 参数：<code>--cpu Cortex-M4.fp</code> /
<code>--cpu Cortex-M4</code> 等。</p>
<p>使用<code>armcc --cpu list</code>
命令可以查看所有可接受的芯片，如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">--cpu=<span class="number">4</span></span><br><span class="line">--cpu=<span class="number">4</span>T</span><br><span class="line">--cpu=<span class="number">5</span>T</span><br><span class="line">--cpu=<span class="number">5</span>TE</span><br><span class="line">--cpu=<span class="number">5</span>TEJ</span><br><span class="line">--cpu=<span class="number">6</span>-M</span><br><span class="line">--cpu=<span class="number">6</span>S-M</span><br><span class="line">--cpu=<span class="number">7</span>-A</span><br><span class="line">--cpu=<span class="number">7</span>-R</span><br><span class="line">--cpu=<span class="number">7</span>-M</span><br><span class="line">--cpu=<span class="number">7</span>E-M</span><br><span class="line">--cpu=<span class="number">7</span>-A.security</span><br><span class="line">--cpu=ARM7EJ-S</span><br><span class="line">--cpu=ARM7TDMI</span><br><span class="line">--cpu=ARM720T</span><br><span class="line">--cpu=ARM7TDMI-S</span><br><span class="line">--cpu=ARM9TDMI</span><br><span class="line">--cpu=ARM920T</span><br><span class="line">--cpu=ARM922T</span><br><span class="line">--cpu=ARM9E-S</span><br><span class="line">--cpu=ARM926EJ-S</span><br><span class="line">--cpu=ARM946E-S</span><br><span class="line">--cpu=ARM966E-S</span><br><span class="line">--cpu=Cortex-M0</span><br><span class="line">--cpu=Cortex-M0plus</span><br><span class="line">--cpu=SC000</span><br><span class="line">--cpu=Cortex-M1</span><br><span class="line">--cpu=Cortex-M1.os_extension</span><br><span class="line">--cpu=Cortex-M1.no_os_extension</span><br><span class="line">--cpu=Cortex-M3</span><br><span class="line">--cpu=Cortex-M3-rev0</span><br><span class="line">--cpu=SC300</span><br><span class="line">--cpu=Cortex-M4</span><br><span class="line">--cpu=Cortex-M4.fp.sp</span><br><span class="line">--cpu=Cortex-M7</span><br><span class="line">--cpu=Cortex-M7.fp.sp</span><br><span class="line">--cpu=Cortex-M7.fp.dp</span><br><span class="line">--cpu=Cortex-R4</span><br><span class="line">--cpu=Cortex-R4F</span><br><span class="line">--cpu=Cortex-A5</span><br><span class="line">--cpu=Cortex-A5.vfp</span><br><span class="line">--cpu=Cortex-A5.neon</span><br><span class="line">--cpu=Cortex-A7</span><br><span class="line">--cpu=Cortex-A7.no_neon</span><br><span class="line">--cpu=Cortex-A7.no_neon.no_vfp</span><br><span class="line">--cpu=Cortex-A8</span><br><span class="line">--cpu=Cortex-A8.no_neon</span><br><span class="line">--cpu=Cortex-A8NoNEON</span><br><span class="line">--cpu=Cortex-A9</span><br><span class="line">--cpu=Cortex-A9.no_neon</span><br><span class="line">--cpu=Cortex-A9.no_neon.no_vfp</span><br><span class="line">--cpu=Cortex-A12</span><br><span class="line">--cpu=Cortex-A12.no_neon.no_vfp</span><br><span class="line">--cpu=Cortex-A15</span><br><span class="line">--cpu=Cortex-A15.no_neon</span><br><span class="line">--cpu=Cortex-A15.no_neon.no_vfp</span><br><span class="line">--cpu=Cortex-A17</span><br><span class="line">--cpu=Cortex-A17.no_neon.no_vfp</span><br></pre></td></tr></table></figure>
<h2 id="about-startup-file">ABOUT STARTUP FILE</h2>
<p>CubeMX 针对不同的编译方式和平台生成对应的 <code>startup file</code>
。而使用 Unix Makefile 编译的 <code>startup_stm32l476xx.s</code> 和 使用
Keil MDK-ARM 的是不一样的。</p>
<p><code>startup_stm32xxxxxx.s</code>
是使用汇编语言写好的基本程序，当STM32
芯片上电启动的时候，会执行此处的汇编程序，从而建立 C
语言的运行环境，所以称之为启动文件。</p>
<p>由于编译器不一致，所以 <code>.s</code>
的启动文件也不能互相兼容，需要使用 CubeMX重新生成。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220609110616631.png"
alt="image-20220609110616631" />
<figcaption aria-hidden="true">image-20220609110616631</figcaption>
</figure>
<h1 id="debug">DEBUG</h1>
<h2 id="error">ERROR</h2>
<h3
id="error-35-please-select-first-the-target-stm32l4xx-device-used-in-your-application">ERROR
#35: PLEASE SELECT FIRST THE TARGET STM32L4XX DEVICE USED IN YOUR
APPLICATION</h3>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608105439447.png"
alt="image-20220608105439447" />
<figcaption aria-hidden="true">image-20220608105439447</figcaption>
</figure>
<p>没有添加宏定义，添加 <code>-DSTM32L476xx</code> 和
<code>-DUSE_HAL_DRIVER</code> 即可。</p>
<h3
id="error-l6050u-the-code-size-of-the-image-exceeds-the-maximum">ERROR
L6050U: THE CODE SIZE OF THE IMAGE EXCEEDS THE MAXIMUM</h3>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608110734097.png"
alt="image-20220608110734097" />
<figcaption aria-hidden="true">image-20220608110734097</figcaption>
</figure>
<blockquote>
<p>版权问题，当你在使用keil时，出现
<code>error: L6050U: The code size of this image (45178 bytes) exceeds the maximum allowed for this version of the linker.</code>
的时候，那就是 keil
没有被破解，软件本身的字节数有局限性，需要下载个MDK注册机进行破解！</p>
</blockquote>
<h3 id="error-a1854e-unknown-opcode-blx-maybe-wrong-target-cpu">Error:
A1854E: Unknown opcode 'BLX', maybe wrong target CPU?</h3>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608151900214.png"
alt="image-20220608151900214" />
<figcaption aria-hidden="true">image-20220608151900214</figcaption>
</figure>
<h2 id="warning">WARNING</h2>
<h3
id="warning-1295-d-deprecated-declaration-two_wired_resync---give-arg-types">Warning:
#1295-D: Deprecated declaration two_wired_resync - give arg types</h3>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220608135309057.png"
alt="image-20220608135309057" />
<figcaption aria-hidden="true">image-20220608135309057</figcaption>
</figure>
<p>在传递参数为空的函数中，必须写 <code>void</code>
，armcc要求比较严格，<code>arm-none-eabi</code> 的要求比较宽松。</p>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://www.cnblogs.com/zhangsx/p/zhangsx_keil_tools_usage.html">keil编译链接过程以及ARMCC、ARMASM、FROMELF、ARMLINK、ARMAR的使用</a></li>
<li><a
target="_blank" rel="noopener" href="https://developer.arm.com/documentation/dui0375/g/Compiler-Command-line-Options/">ARM
Compiler v5.06 for uVision armcc User Guide</a></li>
<li>《<a
target="_blank" rel="noopener" href="https://documentation-service.arm.com/static/5f721c6c1b758617cd950f6f?token=">ARM®
Compiler v5.06 for μVision®</a>》</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/05/24/Computer/2022-05-24-%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/24/Computer/2022-05-24-%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">嵌入式软件工程师的生产力工具</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-24 10:45:00" itemprop="dateCreated datePublished" datetime="2022-05-24T10:45:00+08:00">2022-05-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-11 14:47:56" itemprop="dateModified" datetime="2022-06-11T14:47:56+08:00">2022-06-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer/" itemprop="url" rel="index"><span itemprop="name">Computer</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="common-tools">Common Tools</h1>
<p>软件启动：utools / alfred</p>
<p>小插件合集：utools</p>
<p>文件搜索：everything(windows)</p>
<p>MD：Typora（插件Pandoc）</p>
<p>图床：picgo</p>
<p>自由：V2Ray-Core / ClashX</p>
<p>网站视频下载：Downie4</p>
<p>截图：Snipaste</p>
<p>解压：Bandizip</p>
<p>思维导图：Xmind</p>
<p>翻译：deepl /</p>
<h1 id="engineer">Engineer</h1>
<p>BASH：zsh（Oh-my-zsh）</p>
<p>终端插件：<a href="fig.io">fig</a></p>
<p>zsh皮肤：powerlevel10k</p>
<h1 id="python">Python</h1>
<p>代码编辑器：Jupyter Lab（比Notebook更好用）</p>
<p>Python环境管理工具：Miniconda</p>
<p>Python常用库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pandas xlrd openpyxl xlsxwriter requests lxml html5lib BeautifulSoup4 matplotlib seaborn plotly bokeh scipy statsmodels python-frontmatter opencv-python</span><br></pre></td></tr></table></figure>
<h1 id="embedded">Embedded</h1>
<h2 id="vs-code-插件">VS code 插件</h2>
<p>git痕迹查看：GitLens</p>
<p>代码注释：Doxygen</p>
<p>Keil开发代替IDE：EIDE</p>
<h2 id="compiling">Compiling</h2>
<p>交叉编译：cmake / make</p>
<p>单元测试：valgrind lcov</p>
<h1 id="jenkins">Jenkins</h1>
<p>environment Injector</p>
<p>Publish Over FTP</p>
<p>CMake</p>
<p>xUnit</p>
<h1 id="linux">Linux</h1>
<ul>
<li><code>rsync</code> ：同步文件。</li>
<li><code>tree</code> ：目录树</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/05/22/Programming/Python/2022-05-22-python-%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/22/Programming/Python/2022-05-22-python-%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97/" class="post-title-link" itemprop="url">python 调试日志</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-22 01:25:00" itemprop="dateCreated datePublished" datetime="2022-05-22T01:25:00+08:00">2022-05-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-06-09 21:57:55" itemprop="dateModified" datetime="2022-06-09T21:57:55+08:00">2022-06-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="奇淫巧技">奇淫巧技</h1>
<h2 id="文本替换">文本替换</h2>
<h3 id="object-类型文本替换">object 类型文本替换</h3>
<p>object 目前还没有找到替换方法，可以将 <code>object</code> 类型转换成
<code>string</code> 数据类型，再用 <code>str.replace()</code>
方法进行文本替换。</p>
<ol type="1">
<li>用 <code>.astype('string')</code> 方法将 <code>object</code>
类型转换成 <code>string</code> 类型。</li>
<li>使用
<code>.str.replace(&lt;old-string&gt;,&lt;new-string&gt;)</code>
方法对文本进行替换。并使用 <code>tmp</code> 变量进行保存。</li>
<li>将 <code>tmp</code> 变量重新赋值给原来的变量。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pdata[<span class="string">&#x27;timestamp&#x27;</span>] = pdata.timestamp.astype(<span class="string">&#x27;string&#x27;</span>)  <span class="comment"># 将 object 类型转换成 string类型</span></span><br><span class="line">tmp = pdata[<span class="string">&#x27;timestamp&#x27;</span>].<span class="built_in">str</span>.replace(<span class="string">&#x27;BIN3-&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">pdata[<span class="string">&#x27;timestamp&#x27;</span>] = tmp</span><br></pre></td></tr></table></figure>
<h1 id="debug-record">DEBUG RECORD</h1>
<h2 id="nonetype-object-is-not-subscriptable">nonetype object is not
subscriptable</h2>
<p>大概意思就是，这个 <code>timestamp</code> 是 <code>object</code>
数据类型，替换了之后这个不能显示了估计。</p>
<figure>
<img src="https://pic.islet.space/2022/06/image-20220522012451872.png"
alt="image-20220522012451872" />
<figcaption aria-hidden="true">image-20220522012451872</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.12.0/dist/mermaid.min.js","integrity":"sha256-0dD7vUjUCTGJjeLnPotQQJIcSzug5fO6WDMYYyNIX4c="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"enable","tags":"all","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
