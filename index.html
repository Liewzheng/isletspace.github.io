<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://code.islet.space/font//css?family=/CascadiaCode/CascadiaCode:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"islet.space","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/db.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>
<meta name="description" content="笔记分享的旮旯孤岛而已">
<meta property="og:type" content="website">
<meta property="og:title" content="Coder的孤岛">
<meta property="og:url" content="http://islet.space/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="笔记分享的旮旯孤岛而已">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liewzheng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://islet.space/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Coder的孤岛</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
        <li class="menu-item menu-item-目录"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-简历"><a href="/resume/" rel="section"><i class="fa fa-address-card fa-fw"></i>简历</a></li>
        <li class="menu-item menu-item-友链"><a href="/friends/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>友链</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">104</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">192</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@foxmail.com" title="E-Mail → mailto:liewzheng@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/01/28/Linux/System/2022-01-28-Kali-%E4%B8%8E-MBA-2015/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/28/Linux/System/2022-01-28-Kali-%E4%B8%8E-MBA-2015/" class="post-title-link" itemprop="url">Kali 与 MBA-2015</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-28 12:00:00" itemprop="dateCreated datePublished" datetime="2022-01-28T12:00:00+08:00">2022-01-28</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-31 00:34:35" itemprop="dateModified" datetime="2022-01-31T00:34:35+08:00">2022-01-31</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="网卡驱动安装">网卡驱动安装</h1>
<p>Macbook Air 2015年 13英寸版所使用的的网卡是 博通的 <code>BCM94360CS2</code> 。</p>
<p>可以从 <code>关于本机</code> --&gt; <code>系统报告</code> --&gt; <code>Wi-Fi</code> 中查看到硬件固件版本。</p>
<figure>
<img src="/Users/liewzheng/Library/Application%20Support/typora-user-images/image-20220128154108052.png" alt="image-20220128154108052" /><figcaption aria-hidden="true">image-20220128154108052</figcaption>
</figure>
<p>安装完Linux之后，暂时无法联网，需要使用有线网络进行上网，可以使用 iPhone 接 <code>lighting-USBA</code> 的转接线进行上网，然后下载安装 <code>bcmwl-kernel-source</code> 。</p>
<p>如果使用 <code>pkgs.org</code> 官网上下载的 <code>bcmwl-kernel-source.dpkg</code> 则会提示缺少很多依赖，无法直接一步安装到位。</p>
<figure>
<img src="/Users/liewzheng/Library/Application%20Support/typora-user-images/image-20220128154312606.png" alt="image-20220128154312606" /><figcaption aria-hidden="true">image-20220128154312606</figcaption>
</figure>
<h1 id="apfs-硬盘内容读取">APFS 硬盘内容读取</h1>
<p><code>https://github.com/sgan81/apfs-fuse/</code></p>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lovesKey/p/10791914.html">在linux访问macos下的分区</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/01/23/Computer/2022-01-23-%E7%BB%99Mac-Big-Sur%E4%BF%AE%E6%94%B9%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8%E7%9A%84%E5%88%86%E8%BE%A8%E7%8E%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/23/Computer/2022-01-23-%E7%BB%99Mac-Big-Sur%E4%BF%AE%E6%94%B9%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8%E7%9A%84%E5%88%86%E8%BE%A8%E7%8E%87/" class="post-title-link" itemprop="url">给Mac Big Sur修改外接显示器的分辨率</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-01-23 17:30:00 / Modified: 18:11:59" itemprop="dateCreated datePublished" datetime="2022-01-23T17:30:00+08:00">2022-01-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer/" itemprop="url" rel="index"><span itemprop="name">Computer</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文参考 《<a target="_blank" rel="noopener" href="https://zhangzi.life/articles/1605255382000">Mac 外接显示器色彩问题</a>》和 《<a target="_blank" rel="noopener" href="https://sspai.com/post/57549#!">为 macOS 10.15 开启 HiDPI，让 2K 显示器更舒适</a>》两篇文章。</p>
<p>刚买来新的 HUAWEI Mateview 无线版，显示器分辨率为 <code>3840*2560</code> ，该死的 <code>3:2</code> 屏幕啊，我图啥......</p>
<p>外接2015年的Macbook Air的MiniDP口输出准4K分辨率。</p>
<p>但是，但是，但是~~Air只能输出 <code>16:9</code> 和 <code>16:10</code> 的分辨率，让我搞了整整一下午来调整这个分辨率，4个小时啊。</p>
<p>算了，总结一下吧。</p>
<h1 id="关闭sip">关闭SIP</h1>
<p>Big sur 和之前版本不同，需要的操作如下：</p>
<ol type="1">
<li>关机</li>
<li>长按 <code>Command</code> 键 和 <code>R</code> 键（都不要松开），短按 开机电源键，直到出现进度条才能松开。</li>
<li>找到终端，然后输入 <code>csrutil authenticated-root disable</code> ，出现 <code>successfully</code> 字样就算是成功了。（之前的版本是 <code>csrutil disable</code> ）</li>
</ol>
<h1 id="查询设备号">查询设备号</h1>
<ol type="1">
<li>先断开显示器，输入如下代码：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ioreg -l | grep <span class="string">&quot;DisplayVendorID&quot;</span></span><br><span class="line">ioreg -l | grep <span class="string">&quot;DisplayProductID&quot;</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>再插上显示器，再次运行上方代码。</li>
<li>两次得出来的不同的设备号就可以区分哪个 <code>VendorID</code> 和 <code>ProductID</code> 是外接显示器的。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220123175000229.png" alt="image-20220123175000229" /><figcaption aria-hidden="true">image-20220123175000229</figcaption>
</figure>
<ol start="4" type="1">
<li>记下那串代码，并将外接显示器的两个ID转换成对应的十六进制数， 如 <code>8950</code> 即 <code>22f6</code> , <code>28194</code> 即 <code>66e2</code></li>
</ol>
<h1 id="生成配置参数">生成配置参数</h1>
<ol type="1">
<li>在用户目录 ，即 <code>~</code> 下，使用 <code>DisplayVendorID-xxxx</code> （<code>xxxx</code> 即对应外接显示器 Vendor 号的16进制 ）创建一个文件夹。</li>
<li>然后在对应文件夹下创建一个 使用 <code>DisplayProductID-yyyy</code> （ yyyy` 即对应外接显示器 Product 号的16进制 ）创建一个无后缀名的文件。</li>
<li>到 <a target="_blank" rel="noopener" href="https://codeclou.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/">Scaled Resolution for your Mac</a> 网站生成配置参数，在红色框中分别填入你外接显示器的对应参数，和你想使你的显示器所呈现的分辨率参数。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220123175609151.png" alt="image-20220123175609151" /><figcaption aria-hidden="true">image-20220123175609151</figcaption>
</figure>
<ol start="4" type="1">
<li>复制右侧的 xml 代码至刚刚的 <code>DisplayProductID-yyyy</code> 文件中，并保存。</li>
</ol>
<h1 id="导入系统">导入系统</h1>
<p>在Big Sur系统下，根目录 <code>/</code> 是禁止写入的，需要稍微用点技巧（走点弯路）。</p>
<ol type="1">
<li>新建一个文件夹，将解除SIP之后的 <code>/</code> 挂载到某个地方，如下方所示：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/nvme</span><br><span class="line">sudo mount -o nobrowse -t apfs /dev/disk1s5 ~/nvme/</span><br></pre></td></tr></table></figure>
<p>其中，<code>/dev/disk1s5</code> 中的 <code>/disk1s5</code> 要通过 <strong>磁盘工具</strong> 各自查看自己的 <strong>设备</strong> ，最后面的 <code>s1</code> 去掉不写。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220123173550666.png" alt="image-20220123173550666" /><figcaption aria-hidden="true">image-20220123173550666</figcaption>
</figure>
<ol start="2" type="1">
<li>然后就可以 <code>cd</code> 进去查看对应目录下的文件内容，但是所有读写操作都需要加上 <code>sudo</code> 才可以。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/nvme/System/Library/Displays/Contents/Resources/Overrides</span><br><span class="line">ls</span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220123173806535.png" alt="image-20220123173806535" /><figcaption aria-hidden="true">image-20220123173806535</figcaption>
</figure>
<ol start="3" type="1">
<li>把 <code>~/DisplayVendorID-xxxx</code> 复制到 <code>~/nvme/System/Library/Displays/Contents/Resources/Overrides</code> 里面：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -r ~/DisplayVendorID-22f6 ~/nvme/System/Library/Displays/Contents/Resources/Overrides/DisplayVendorID-22f6</span><br></pre></td></tr></table></figure>
<p>复制完毕之后可以再 <code>ls</code> 查看，就存在了。</p>
<ol start="4" type="1">
<li>但是这种复制只是一种暂时的，重启之后就会被镜像文件所覆盖，所以要重新 snapshot 一下。<mark style="font-weight: 900;">注意，这一步一定要做，否则重启就失效了。</mark></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo bless --folder ~/nvme/System/Library/Displays/Contents/Resources/Overrides --bootefi --create-snapshot</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/01/22/Hardware/STM32/2022-01-22-STM32-NUCLEOL476RG-DEVELOP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/22/Hardware/STM32/2022-01-22-STM32-NUCLEOL476RG-DEVELOP/" class="post-title-link" itemprop="url">STM32-NUCLEOL476RG DEVELOP</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-22 19:30:00" itemprop="dateCreated datePublished" datetime="2022-01-22T19:30:00+08:00">2022-01-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-24 08:38:28" itemprop="dateModified" datetime="2022-01-24T08:38:28+08:00">2022-01-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/InternetOfThings/" itemprop="url" rel="index"><span itemprop="name">InternetOfThings</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>截止2022年1月23日，以下是ST公司的产品线，下图通过Flash大小和Nucleo类型对产品进行了一定划分。</p>
<p><img src="https://pic.islet.space/2022/01/en.ln1847_stm32_nucleo.jpg" alt="img" style="zoom: 67%;" /></p>
<h1 id="necleo-l476rg-data-brief">NECLEO-L476RG DATA BRIEF</h1>
<p>Necleo系列开发板下面有很多型号，且每个型号的板子（除开芯片以外）设计应该都是大同小异的，所以最底层板子也就有了自己的型号。</p>
<p>而 NecleoL476RG 开发板的底板型号为 <code>MB1136</code> 。且下方所有Necleo的产品都自带 ST-LINK/V2-1 调试器。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220122193806691.png" alt="image-20220122193806691" /><figcaption aria-hidden="true">image-20220122193806691</figcaption>
</figure>
<h2 id="st-linkv2-1">ST-LINK/V2-1</h2>
<p>支持USB软件 <strong>重新检查</strong>（re-enumeration） 、支持虚拟COM口、支持大容量储存、支持超过 <code>100mA</code> 电流的电源管理，但是不支持 <strong><em>SWIM</em></strong> 接口且最小输入电压为 <code>3V</code> 。</p>
<p>注意：一旦激活了 ST-LINK/V2-1 的目标读出保护功能，就会阻止目标应用运行事后运行（prevents the target application from running afterward.）目标读出保护必须被关闭（must be kept disabled on board）。</p>
<p>可以根据跳线帽的两种状态来使用 ST-LINK/V2-1:</p>
<ul>
<li>在线编程和调试STM32（Program/debug the on-board STM32），此时 <code>CN2</code> 的两个跳线帽都连接着，处于在线编程状态（默认）。</li>
<li>使用连接到SWD连接器CN4的电缆对外部应用板中的MCU进行编程/调试，此时 <code>CN2</code> 的两个跳线帽都不连接，以允许 <code>CN4</code> （即 <code>SWD</code> 接口）连接至外部连接器。</li>
</ul>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220123183857115.png" alt="image-20220123183857115" /><figcaption aria-hidden="true">image-20220123183857115</figcaption>
</figure>
<h2 id="layout">LAYOUT</h2>
<p><img src="https://pic.islet.space/2022/01/image-20220123182028068.png" alt="image-20220123182028068" style="zoom:50%;" /></p>
<p><img src="https://pic.islet.space/2022/01/image-20220123182139437.png" alt="image-20220123182139437" style="zoom:50%;" /></p>
<h1 id="chip-breief">CHIP BREIEF</h1>
<p>STM32 Nucleo L476RG 所使用的芯片是 <code>STM32L476RGT6U</code>，其中 <code>L4</code> 是系列号，<code>76</code> 是产线，<code>R</code> 是指64pin，<code>C</code> 是指 256Kbytes 的 Flash内存大小。</p>
<p>下方为《<a target="_blank" rel="noopener" href="https://www.st.com/resource/en/data_brief/nucleo-l476rg.pdf">STM32 Nucleo-64 boards data brief</a>》提供的 <strong>产品芯片命名方法</strong>：</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220122195540612.png" alt="image-20220122195540612" /><figcaption aria-hidden="true">image-20220122195540612</figcaption>
</figure>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://www.st.com/en/evaluation-tools/nucleo-l476rg.html">NUCLEO-L476RG</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/01/22/Linux/2022-01-22-customize-vscode-font-in-debian-linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/22/Linux/2022-01-22-customize-vscode-font-in-debian-linux/" class="post-title-link" itemprop="url">customize vscode font in debian linux</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-01-22 15:20:00 / Modified: 16:19:33" itemprop="dateCreated datePublished" datetime="2022-01-22T15:20:00+08:00">2022-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="install-fonts-on-debian-linux">INSTALL FONTS ON DEBIAN LINUX</h1>
<p>We can install <strong><em>True Type</em></strong> or <strong><em>Open Type</em></strong> fonts(<code>.ttf</code> / <code>.otf</code> / <code>.ttc</code>) in <em>DEBIAN LINUX</em>, like ubuntu or kali.</p>
<h2 id="download-font-from-website">DOWNLOAD FONT FROM WEBSITE</h2>
<ol type="1">
<li>Download <code>Cascadia Code</code> from <code>https://github.com/microsoft/cascadia-code/releases</code> and unzip it.</li>
<li>We got 3 folders here: <code>/otf/</code> , <code>/ttf/</code> and <code>woff2</code> , and we only need `ttf</li>
</ol>
<h2 id="copy-files-to-system-font-directory">COPY FILES TO SYSTEM FONT DIRECTORY</h2>
<p>Font fils are generally installed in either the system font directory on the path <code>/usr/share/fonts/</code> or in a user font directory that is frequently on one of the following paths:</p>
<ul>
<li><code>~/.local/share/fonts/</code></li>
<li><code>~/usr/local/share/fonts/</code></li>
</ul>
<ol type="1">
<li>Execute the following command to copy the fonts to system path</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -r ttf /usr/share/fonts/CascadiaCode</span><br></pre></td></tr></table></figure>
<h2 id="generate-font-chache">GENERATE FONT CHACHE</h2>
<p>We need to build font infomation caches for apps using fontconfig for their font handling.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/share/fonts/CascadiaCode</span><br><span class="line">fc-cache -f -v</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>NOTE</em></strong></p>
<p>If you cannot execute <code>fc-cache</code> command , copy and execute the following command in terminal.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fontconfig</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="verify-the-font-installation">VERIFY THE FONT INSTALLATION</h2>
<p>Confirm that the fonts are installed by displaying the paths and style definitions with <code>fc-list</code> command filtered on the font family name with <code>grep</code> .</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fc-list | grep <span class="string">&quot;Cascadia Code&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="customize-vscode">CUSTOMIZE VSCODE</h1>
<ol type="1">
<li>Get to <code>Setting</code></li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220122161611892.png" alt="image-20220122161611892" /><figcaption aria-hidden="true">image-20220122161611892</figcaption>
</figure>
<ol start="2" type="1">
<li>Search <code>font</code> in the bar</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220122161750043.png" alt="image-20220122161750043" /><figcaption aria-hidden="true">image-20220122161750043</figcaption>
</figure>
<ol start="3" type="1">
<li>Add <code>'Cascadia Code',</code> to the <code>Editor: Font Family</code> .</li>
<li>Restart vscode.</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2022/01/11/Hardware/STM32/2022-01-11-%E5%85%89%E7%94%B5%E4%BC%A0%E6%84%9F%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/11/Hardware/STM32/2022-01-11-%E5%85%89%E7%94%B5%E4%BC%A0%E6%84%9F%E5%99%A8/" class="post-title-link" itemprop="url">Optical Sensor Development</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-11 14:30:00" itemprop="dateCreated datePublished" datetime="2022-01-11T14:30:00+08:00">2022-01-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-23 19:37:19" itemprop="dateModified" datetime="2022-01-23T19:37:19+08:00">2022-01-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/InternetOfThings/" itemprop="url" rel="index"><span itemprop="name">InternetOfThings</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基础技能">基础技能</h1>
<ol type="1">
<li>ARM架构芯片的样例代码加载、编译、烧录、调试工作熟悉。</li>
<li>bitbucket 如何使用（是否需要配置SSH、repository如何pull和push、add、commit等） √</li>
<li>confluence 如何使用（任务的查看、提交、文章的发布、协作等等）</li>
</ol>
<h1 id="ide-for-realtek">IDE for Realtek</h1>
<h2 id="vscode-arm">VSCODE ARM</h2>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112105541195.png" alt="image-20220112105541195" /><figcaption aria-hidden="true">image-20220112105541195</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112110410253.png" alt="image-20220112110410253" /><figcaption aria-hidden="true">image-20220112110410253</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112110533598.png" alt="image-20220112110533598" /><figcaption aria-hidden="true">image-20220112110533598</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112110507665.png" alt="image-20220112110507665" /><figcaption aria-hidden="true">image-20220112110507665</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112105734831.png" alt="image-20220112105734831" /><figcaption aria-hidden="true">image-20220112105734831</figcaption>
</figure>
<h2 id="keil-arm">KEIL ARM</h2>
<p>将Realtek RTL8762D SDK中的项目单独摘出来，放到某个文件夹下进行管理时，需要单独更改好几处内容：</p>
<ol type="1">
<li>C/C++的Include Path</li>
<li>源文件的Source Path</li>
<li>APP Image（<code>.bin</code> 生成文件），即 <code>after_build_common.bat</code> 的路径和内容。</li>
</ol>
<p>如下所示，把单独某个Project摘出来时会产生很多感叹号。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112111951120.png" alt="image-20220112111951120" /><figcaption aria-hidden="true">image-20220112111951120</figcaption>
</figure>
<h3 id="头文件路径修改">头文件路径修改</h3>
<p>此时需要进入设置中进行头文件路径修改</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112133356533.png" alt="image-20220112133356533" /><figcaption aria-hidden="true">image-20220112133356533</figcaption>
</figure>
<p>选择 <code>C/C++</code> 选项卡下的 <code>Include Paths</code> 进行修改。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112133505056.png" alt="image-20220112133505056" /><figcaption aria-hidden="true">image-20220112133505056</figcaption>
</figure>
<p>原来的路径设置都是使用相对路径进行的，此时需要将 <code>sbee2-sdk-v1.0.0</code> 文件夹放到与你项目文件同盘的某个文件夹下，最好不要相距太远。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112133731688.png" alt="image-20220112133731688" /><figcaption aria-hidden="true">image-20220112133731688</figcaption>
</figure>
<p>可以使用 VS Code将 <code>.uvprojx</code> 文件打开，使用搜索和替换工具对相关头文件的路径进行替换。</p>
<h3 id="源文件路径修改">源文件路径修改</h3>
<p>修改方法同头文件，</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117094508419.png" alt="image-20220117094508419" /><figcaption aria-hidden="true">image-20220117094508419</figcaption>
</figure>
<h3 id="bat文件路径修改">bat文件路径修改</h3>
<p><code>.bat</code> 文件是用于在 <code>.o</code> 文件生成后的链接脚本。所以如果该脚本自身路径和脚本内的包含路径出错，可能会导致无法编译出对应的 <code>app_MP_adk#####</code> 文件。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117095506866.png" alt="image-20220117095506866" /><figcaption aria-hidden="true">image-20220117095506866</figcaption>
</figure>
<p>下方为样例代码原来的设置情况：</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220120134642405.png" alt="image-20220120134642405" /><figcaption aria-hidden="true">image-20220120134642405</figcaption>
</figure>
<p>在 <code>Option-User</code> 设置中，可以查看到 <code>After Build/Rebuild</code> 相关的设置，其中 <code>Run #1</code> 则是 Realtek MP Tools 需要烧录 EVB开发板相关的脚本文件。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117095438927.png" alt="image-20220117095438927" /><figcaption aria-hidden="true">image-20220117095438927</figcaption>
</figure>
<p>将单独摘放出来的项目文件夹 <code>pixart_i2c</code> 与 <code>sbee2-sdk-v1.0.0</code> 和 <code>sbee2_wristband_sdk_upperstack_img</code> 放到同一个文件夹下。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117110446703.png" alt="image-20220117110446703" /><figcaption aria-hidden="true">image-20220117110446703</figcaption>
</figure>
<p>因此修改 <code>.uvprojx</code> 文件内容下 <code>after_build_common.bat</code> 的路径时，将该路径修改为如下的相对路径即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">..\sbee2-sdk-v1.0.0\tool\after_build_common.bat <span class="variable">$J</span> <span class="comment">#L @L</span></span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117104943624.png" alt="image-20220117104943624" /><figcaption aria-hidden="true">image-20220117104943624</figcaption>
</figure>
<p>保存修改后的 <code>.uvprojx</code> 文件，可以看到 Keil V5 自动更新了相关设置。如下：</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117104955125.png" alt="image-20220117104955125" /><figcaption aria-hidden="true">image-20220117104955125</figcaption>
</figure>
<p><code>after_build_common.bat</code> 控制着自动生成Realtek 的 MP Tool 需要使用的 APP Bin文件，如果该 <code>Run #1</code> 没有启用，则无法生产该文件。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117105247314.png" alt="image-20220117105247314" /><figcaption aria-hidden="true">image-20220117105247314</figcaption>
</figure>
<p>该<code>.bat</code> 文件下所有的 <code>..\..\..\tool\</code> 都要修改成 <code>..\sbee2-sdk-v1.0.0\tool\</code>，如果项目文件夹和SDK文件夹路径有异，则需要适当修改。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117105040885.png" alt="image-20220117105040885" /><figcaption aria-hidden="true">image-20220117105040885</figcaption>
</figure>
<p>启用完成之后即可生成对应 <code>app_MP_adk#####</code> 文件</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220117105414578.png" alt="image-20220117105414578" /><figcaption aria-hidden="true">image-20220117105414578</figcaption>
</figure>
<h1 id="hardwares">HARDWARES</h1>
<h2 id="adapter">ADAPTER</h2>
<h3 id="specification">SPECIFICATION</h3>
<p>A4芯片，即KA8G2芯片用的转接板需要接入5V电压，LDO会转换电压。</p>
<p>而PAT9126JA芯片则使用两个3.3V进行接入。</p>
<h2 id="chip-board">CHIP &amp; BOARD</h2>
<p>开发测试板为 Realtek RTL8762D EVB KIT。</p>
<p>型号： RTL8762DW</p>
<h2 id="sensor---ka8g2">SENSOR - KA8G2</h2>
<blockquote>
<p><strong><em>KAG2</em></strong> is a high performance and ultra low power <strong><em>CMOS-processed optical image sensor</em></strong> with <em>integrated digital image process circuits</em>. It is based on an optical navigation technology which measures changes in position by optically acquiring sequential surface images(frames) and mathematically determining the speed, the direction and the magnitude of motion. <strong><em>The displacement delta_X and delta_Y information are available in registers which are accessible through SPI serial interface.</em></strong> A host controller reads and translates the data from the SPI serial interface into RF signals before sending them to the host PC.</p>
</blockquote>
<h3 id="specification-1">SPECIFICATION</h3>
<p><img src="https://pic.islet.space/2022/01/image-20220113150323525.png" alt="image-20220113150323525" style="zoom:50%;" /></p>
<h3 id="hardware-linking">HARDWARE LINKING</h3>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112172532934.png" alt="image-20220112172532934" /><figcaption aria-hidden="true">image-20220112172532934</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_16391255852712.png" alt="企业微信截图_16391255852712" /><figcaption aria-hidden="true">企业微信截图_16391255852712</figcaption>
</figure>
<h3 id="chip-initiate">CHIP INITIATE</h3>
<p>这个芯片启动时，需要对一些寄存器进行写入以初始化。下方为二维数组，<code>sensor_init_regs[][0]</code> 为寄存器地址，<code>sensor_init_regs[][1]</code> 为寄存器需要写入的数据。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">uint8_t</span> sensor_init_regs[<span class="number">7</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">	&#123;<span class="number">0X09</span>, <span class="number">0XA5</span>&#125;,</span><br><span class="line">	&#123;<span class="number">0X26</span>, <span class="number">0X34</span>&#125;,</span><br><span class="line">	&#123;<span class="number">0X19</span>, <span class="number">0X04</span>&#125;,</span><br><span class="line">	&#123;<span class="number">0X6D</span>, <span class="number">0X39</span>&#125;,</span><br><span class="line">	&#123;<span class="number">0X0D</span>, <span class="number">0X20</span>&#125;,</span><br><span class="line">	&#123;<span class="number">0X0E</span>, <span class="number">0X20</span>&#125;,</span><br><span class="line">	&#123;<span class="number">0X09</span>, <span class="number">0X00</span>&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>初始化时，需要注意以下问题：</p>
<ol type="1">
<li>某些主控芯片在使用两线SPI进行数据写入时，会有要求使用 <code>7bit</code> 地址，且 MSB 为 <code>1</code> 。此时需要判断是否需要认为修改地址的 MSB为 <code>1</code> ，例如 Realtek 的 RTL8762DW 芯片就不需要人为修改，人为修改会导致波形异常。而某些芯片需要人为写入MSB。</li>
<li>在每一次写入寄存器之后，<mark style="font-weight: 900;">强烈建议进行延时</mark>，可以使用 <code>delay(0xFFFF)</code>，（尝试过 <code>0xFF</code> 太短，不能完成初始化写入）。</li>
</ol>
<h2 id="sensor---pat9126ja">SENSOR - PAT9126JA</h2>
<ol type="1">
<li>需要确定 <code>ID_SEL</code> 引脚的连接情况，是拉高、接地还是悬空。分别对应的 <code>CHIP ID</code> 都是不一样的，可能是<code>0x73</code>  <code>0x75</code>  <code>0x79</code> 三者之一。</li>
</ol>
<p>transformer 上的 <code>VCC</code> 为 <code>3.3V</code></p>
<h3 id="specification-2">SPECIFICATION</h3>
<p>这个芯片有两种电压要求，默认为高电压版本 <code>3.3V</code> ，可以通过SPI写入寄存器和硬件并线来达到降低至 <code>1.8V</code> 低电压的模式。</p>
<h3 id="hadware-linking">HADWARE LINKING</h3>
<figure>
<img src="https://pic.islet.space/2022/01/OpticalSensorTransfer_I2C.png" alt="OpticalSensorTransfer_I2C" /><figcaption aria-hidden="true">OpticalSensorTransfer_I2C</figcaption>
</figure>
<h1 id="sdk-tools">SDK &amp; Tools</h1>
<p>此处有 2个SDK包 和 3个tool包，分别是：</p>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://storage.islet.space/07_Mixosense/01_Realtek/RTL8762D/SDK/sbee2-sdk-v1.0.0.zip">sbee2-sdk-v1.0.0.zip</a></li>
<li><a target="_blank" rel="noopener" href="https://storage.islet.space/07_Mixosense/01_Realtek/RTL8762D/SDK/sbee2_wristband_sdk_upperstack_img.zip">sbee2_wristband_sdk_upperstack_img.zip</a></li>
<li><a target="_blank" rel="noopener" href="https://storage.islet.space/07_Mixosense/01_Realtek/RTL8762D/SDK/MPPackTool_v2.0.5.2.zip">MPPackTool_v2.0.5.2.zip</a></li>
<li>日志输出软件：<a target="_blank" rel="noopener" href="https://storage.islet.space/07_Mixosense/01_Realtek/RTL8762D/SDK/DebugAnalyzer-v4.0.0.14.zip">DebugAnalyzer-v4.0.0.14.zip</a></li>
<li>代码烧录软件：<a target="_blank" rel="noopener" href="https://storage.islet.space/07_Mixosense/01_Realtek/RTL8762D/SDK/BeeMPTool_kits_v1.0.5.0.zip">BeeMPTool_kits_v1.0.5.0.zip</a></li>
</ol>
<h1 id="build-flash-log">BUILD / FLASH / LOG</h1>
<h2 id="build">BUILD</h2>
<p>点击 <code>build</code> 按钮即可进行代码构建。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113090856565.png" alt="image-20220113090856565" /><figcaption aria-hidden="true">image-20220113090856565</figcaption>
</figure>
<p><code>build</code> 完毕之后可以看到下方的成功提示 <code>0 Error(s), 0 Warning(s)</code>。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113091008941.png" alt="image-20220113091008941" /><figcaption aria-hidden="true">image-20220113091008941</figcaption>
</figure>
<h2 id="flash">FLASH</h2>
<p>FLAHS需要经过 configuration 、 detect 和 download 三步</p>
<h3 id="configuration">configuration</h3>
<p>根据《RTL8762D SDK User Guide CN》文件，RTL8762D 的 EVB KIT 是可以支持 JLINK 的（如下图所示）。</p>
<p><img src="https://pic.islet.space/2022/01/image-20220113095321215.png" alt="image-20220113095321215" style="zoom:50%;" /></p>
<p>但这里并未使用 JLINK，而是使用 Realtek 专门的工具 <code>BeeMPTool_kits</code>， 通过 <code>UART</code> 进行烧录。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113095804076.png" alt="image-20220113095804076" /><figcaption aria-hidden="true">image-20220113095804076</figcaption>
</figure>
<p>打开 <code>MPTool.exe</code> ，并选中对应的芯片型号 <code>RTL8762D</code> ：</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113095854784.png" alt="image-20220113095854784" /><figcaption aria-hidden="true">image-20220113095854784</figcaption>
</figure>
<p>在这里选择 <code>调试</code> 模式进行烧录</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113095949881.png" alt="image-20220113095949881" /><figcaption aria-hidden="true">image-20220113095949881</figcaption>
</figure>
<p>在 <code>Config Set</code> 中选择 <code>Confirm</code> ，不需要修改什么东西。</p>
<p><img src="https://pic.islet.space/2022/01/image-20220113100100098.png" alt="image-20220113100100098" style="zoom:50%;" /></p>
<p>此处需要设置 Flash 地址映射文件 <code>flash map.ini</code> 。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113100324900.png" alt="image-20220113100324900" /><figcaption aria-hidden="true">image-20220113100324900</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113101953154.png" alt="image-20220113101953154" /><figcaption aria-hidden="true">image-20220113101953154</figcaption>
</figure>
<p>下方为 《RTL8762D SDK User Guide CN》文件中，9.1章节对五个images文件进行了描述。</p>
<p><img src="https://pic.islet.space/2022/01/image-20220113102036834.png" alt="image-20220113102036834" style="zoom:67%;" /></p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 32%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="header">
<th>FILE TYPE</th>
<th>DESCRIPTION</th>
<th>FILE PATH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>System Config File</td>
<td>- 来自 <code>BeeMPTool_kits</code></td>
<td><code>\BeeMPTool_kits_v1.0.5.0\BeeMPTool\ConfigFile\</code></td>
</tr>
<tr class="even">
<td>Bank0 OTA Header File</td>
<td>- 来自 <code>sbee2_wristband_sdk_upperstack_img</code></td>
<td><code>\sbee2_wristband_sdk_upperstack_img\src\app\wristband\firmware\</code></td>
</tr>
<tr class="odd">
<td>Bank0 Secure Boot Loader Image</td>
<td>- 来自 <code>sbee2_wristband_sdk_upperstack_img</code></td>
<td><code>\sbee2_wristband_sdk_upperstack_img\src\app\wristband\firmware\</code></td>
</tr>
<tr class="even">
<td>Bank0 ROM Patch Image</td>
<td>- 来自 <code>sbee2_wristband_sdk_upperstack_img</code></td>
<td><code>\sbee2_wristband_sdk_upperstack_img\src\app\wristband\firmware\</code></td>
</tr>
<tr class="odd">
<td>Bank0 APP Image</td>
<td>- 来自 <code>sbee2-sdk-v1.0.0</code></td>
<td><code>sbee2-sdk-v1.0.0\board\evb\io_sample\SPI3WIRE\spi3wire_polling\bin</code></td>
</tr>
</tbody>
</table>
<h4 id="关于app-image文件选择">关于app image文件选择</h4>
<p>在Build完成后，会生成三个 <code>.bin</code> 文件，如果选择错误，会提示 <code>MD5 check error!Image type doesn't match IC type.</code> ，选择正确的话会提示 <code>File check OK</code> 。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113111301561.png" alt="image-20220113111301561" /><figcaption aria-hidden="true">image-20220113111301561</figcaption>
</figure>
<h3 id="detect">detect</h3>
<p>detect 的时候需要注意：</p>
<ol type="1">
<li>将 EVB kit上的 <code>J15</code> LOG口接地，否则会检测失败</li>
<li>如果出现 <code>Failed</code> 字样，则按一下 EVB KIT 上的红色的 <code>RESET</code> 按钮进行复位后再尝试。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113111054035.png" alt="image-20220113111054035" /><figcaption aria-hidden="true">image-20220113111054035</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113103853161.png" alt="image-20220113103853161" /><figcaption aria-hidden="true">image-20220113103853161</figcaption>
</figure>
<h3 id="download">download</h3>
<p>最后选择 <code>download</code> 下载即可。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113104047601.png" alt="image-20220113104047601" /><figcaption aria-hidden="true">image-20220113104047601</figcaption>
</figure>
<h2 id="upperstack-flash">UPPERSTACK FLASH</h2>
<p>自带的 <code>\sbee2-sdk-v1.0.0\doc\</code> 路径下的教程是，都是有 <code>Bank0 Upperstack Image</code> 需要烧录的。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220120140307997.png" alt="image-20220120140307997" /><figcaption aria-hidden="true">image-20220120140307997</figcaption>
</figure>
<p>步骤如下：</p>
<ol type="1">
<li><p>使用 <code>\sbee2_wristband_sdk_upperstack_img\src\app\wristband\firmware\upperstack_img</code> 路径下的 <code>.ini</code> 文件作为 layout 文件。（而之前使用的<code>flash map.ini</code> 地址为 <code>\sbee2_wristband_sdk_upperstack_img\src\app\wristband\firmware\</code>）</p></li>
<li><p>指定 <code>\sbee2_wristband_sdk_upperstack_img\src\app\wristband\firmware\upperstack_img</code> 路径下的 <code>.bin</code> 文件作为 Upperstack Image 文件。</p></li>
<li><p>将 <code>\sbee2_wristband_sdk_upperstack_img\board\evb_stack_img\wristband\flash_map.h</code> 文件作为项目工程里的唯一内存映射文件依赖。<code>flash_map.h</code> 被放在 <code>mem_config.h</code> 头文件下，间接被 <code>syetem_rtl876x.h</code> 引用。</p></li>
</ol>
<h2 id="log">LOG</h2>
<p>RTL8762D 的 EVB KIT 不支持 JTAG 方式进行观察，（听说是）通信过程容易被打断。</p>
<p>这里使用 <code>UART</code> 和 EVB KIT 上的 <code>J15</code> 口来观察 LOG数据。</p>
<h3 id="log软件">LOG软件</h3>
<p>使用专用工具 <code>DebugAnalyzer</code> 进行日志输出。</p>
<ol type="1">
<li>选择合适的串口，即使用 <code>FT232</code> 的UART口，将该芯片口的 <code>RX</code> 连接至 <code>RTL8762D</code> 板子上的 <code>J15</code> 口。并在电脑中选中对应的 <code>FT232</code> 设备。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113093030488.png" alt="image-20220113093030488" /><figcaption aria-hidden="true">image-20220113093030488</figcaption>
</figure>
<ol start="2" type="1">
<li>需要设置 <code>App Trace File</code> 。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113093723962.png" alt="image-20220113093723962" /><figcaption aria-hidden="true">image-20220113093723962</figcaption>
</figure>
<ol start="3" type="1">
<li>观察日志输出</li>
</ol>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113104331739.png" alt="image-20220113104331739" /><figcaption aria-hidden="true">image-20220113104331739</figcaption>
</figure>
<h1 id="com-setting">COM SETTING</h1>
<h2 id="uart-setting">UART SETTING</h2>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220113111953878.png" alt="image-20220113111953878" /><figcaption aria-hidden="true">image-20220113111953878</figcaption>
</figure>
<h1 id="peripheral">PERIPHERAL</h1>
<h1 id="wired-spi">3-WIRED SPI</h1>
<p>以下是主控板 RTL8762D 的SDK对3线SPI的相关设置结构体。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">uint32_t</span> SPI3WIRE_SysClock;     <span class="comment">/*!&lt; Specifies system clock */</span></span><br><span class="line">    <span class="keyword">uint32_t</span> SPI3WIRE_Speed;        <span class="comment">/*!&lt; Specifies SPI clock. */</span></span><br><span class="line">    <span class="keyword">uint32_t</span> SPI3WIRE_Mode;         <span class="comment">/*!&lt; Specifies SPI operation mode.</span></span><br><span class="line"><span class="comment">                                This parameter can be a value of @ref THREE_WIRE_SPI_mode */</span></span><br><span class="line">    <span class="keyword">uint32_t</span> SPI3WIRE_ReadDelay;    <span class="comment">/*!&lt; Specifies the delay time from the end of address phase to the start of read data phase.</span></span><br><span class="line"><span class="comment">                                    This parameter can be a value of 0x0 to 0x1f, delay time = (SPI3WIRE_ReadDelay+1)/(2*SPI3WIRE_Speed) */</span></span><br><span class="line">    <span class="keyword">uint32_t</span> SPI3WIRE_OutputDelay;  <span class="comment">/*!&lt; Specifies SPI output delay 1T or not.</span></span><br><span class="line"><span class="comment">                                 This parameter can be a value of @ref THREE_WIRE_SPI_OE_delay_config */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint32_t</span> SPI3WIRE_ExtMode;      <span class="comment">/*!&lt; Specifies extended timing window for SPI output enable = 0. */</span></span><br><span class="line">&#125; SPI3WIRE_InitTypeDef;</span><br></pre></td></tr></table></figure>
<h2 id="writing-delay">WRITING-DELAY</h2>
<p><span class="math display">\[
1s = 1^3ms = 1^6us = 1^9ns\\
1Hz = 1^{-3}KHz = 1^{-6}MHz = 1^{-9}GHz
\]</span></p>
<p>在3线SPI的数据线读取过程中，在前一段地址帧结束且尚未开始读取数据前，会有一段延时。由 <code>spiReadDelay</code> 和 <code>spiWireSpeed</code> 两个参数控制。 <span class="math display">\[
DelayTime = (spiReadDelay +1) / (2* spiWireSpeed)
\tag{延时计算公式}
\]</span> 例如， 当 <code>spiWireSpeed = 8e5</code> 时， 设置 <code>spiReadDelay = 0x03</code> ，此时 可以在中间延时 <code>2.5us</code> 。</p>
<h2 id="clock_freq">CLOCK_FREQ</h2>
<p>将RTL8762D的SPI通信时钟频率从 <code>2E7</code> 更改为 <code>1E6</code> 后可以短时间正常通信，但是稍微过一段时间就出现了不稳定，度数全为 <code>0</code> ，且复位后读取的 <code>chipID</code> 也为 <code>0x00, 0x00</code> 。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the actual frequency of spi is set by `SPI3_WIRE_SysClock`</span></span><br><span class="line"><span class="comment">// `1E6` means 1MHz, and `2E7` means 20MHz.</span></span><br><span class="line">SPI3WIRE_InitStruct.SPI3WIRE_SysClock       = <span class="number">1E6</span>;</span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220119152741283.png" alt="image-20220119152741283" /><figcaption aria-hidden="true">image-20220119152741283</figcaption>
</figure>
<h2 id="timing">TIMING</h2>
<p><span class="math display">\[
Sysclk = 1e7 \\
wirespeek = 8e5
\]</span></p>
<h1 id="wired-spi-1">2-WIRED SPI</h1>
<blockquote>
<p>To recover the correct communication of SPI, the host controller can de-assert the SCLK for at least tRESYNC (1us min), and then keep SCLK asserted for a certain time interval tWDT (1.7ms, min) as shown in below Figure . to force the SPI control circuits of the sensor to reset.</p>
</blockquote>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220120154724619.png" alt="image-20220120154724619" /><figcaption aria-hidden="true">image-20220120154724619</figcaption>
</figure>
<h1 id="debug-records">DEBUG RECORDS</h1>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220112163300158.png" alt="image-20220112163300158" /><figcaption aria-hidden="true">image-20220112163300158</figcaption>
</figure>
<p>0x05 // 0000 0101</p>
<p>// 1000 0101</p>
<h2 id="delta_x-delta_y-unread">DELTA_X &amp; DELTA_Y UNREAD</h2>
<p><code>Motion</code>  <code>DYOVF</code>  <code>DXOVF</code> 并未读出，未检测到移动。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220114110802052.png" alt="image-20220114110802052" /><figcaption aria-hidden="true">image-20220114110802052</figcaption>
</figure>
<p><code>Operation_Mode = 0xB8, cofiguration = 0x17</code> 均为默认</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220114111325286.png" alt="image-20220114111325286" /><figcaption aria-hidden="true">image-20220114111325286</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220114111114776.png" alt="image-20220114111114776" /><figcaption aria-hidden="true">image-20220114111114776</figcaption>
</figure>
<p><code>0xB8</code> 使 设备处于睡眠模式，<code>configuration = 0x17</code> 使设备未处于 <code>sleep3</code> 且 <code>powerDown</code> 为正常模式，即未断电。</p>
<p>所以需要修改 <code>Operation_Mode</code> 为 <code>0x01</code> 。</p>
<p>在设置了下方的语句之后，LOG记录传送回来的 <code>OperationMode</code> 对应的数据为 <code>0xFC</code> 或 <code>0xB8</code> （ <code>1111 1100</code> 和 <code>1011 1000</code>） 。</p>
<p>默认情况下 <code>OperationMode</code> 为 <code>0xB8</code> 即 <code>1011 1000</code> 。</p>
<p>异常情况下 <code>OperationMode</code> 为 <code>0xFC</code> 即 <code>1111 1100</code> 。</p>
<p>即第 <code>2</code> 位和 第 <code>6</code> 位会变，查数据手册，<mark>只有第 <code>2</code> 位（<code>Slp2mu_Enh</code>）有影响，该位控制芯片强制进入 <code>睡眠2</code> 模式。</mark></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spi3wire_writebyte(REG_KA8G2_OPERATION_MODE, KA8G2_OM_RUN);  <span class="comment">// edited by liew in 20211114</span></span><br></pre></td></tr></table></figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220114135400211.png" alt="image-20220114135400211" /><figcaption aria-hidden="true">image-20220114135400211</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220114135647079.png" alt="image-20220114135647079" /><figcaption aria-hidden="true">image-20220114135647079</figcaption>
</figure>
<p>从《KA8G2 optical mouse sensor》中的 <strong>MOTION Pin Function</strong> 可以看出，<code>Motion</code> 寄存器即运动检测标志相关寄存器。</p>
<p><img src="https://pic.islet.space/2022/01/image-20220114142319440.png" alt="image-20220114142319440" style="zoom:50%;" /></p>
<h2 id="主控板io口数据异常">主控板IO口数据异常</h2>
<p>下方为利用SDK进行 <strong>读数据</strong> 的相关操作：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">uint32_t</span> random_seed_value;</span><br><span class="line">    srand(random_seed_value);</span><br><span class="line">    spi3wire_demo();</span><br><span class="line">	DBG_DIRECT(<span class="string">&quot;TEST_20220120&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">uint8_t</span> i = <span class="number">0</span>; i&lt; <span class="number">0xFF</span>; i++)&#123;	</span><br><span class="line">			spi3wire_writebyte(<span class="number">0x7F</span>, i);</span><br><span class="line">			delaySys(<span class="number">0xF</span>);</span><br><span class="line">		&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>并用逻辑分析仪进行捕获和分析，发现数据异常：</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220120151632286.png" alt="image-20220120151632286" /><figcaption aria-hidden="true">image-20220120151632286</figcaption>
</figure>
<p>经过检查，发现时序解码无误，所有波形的高低和解码结果一致。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220120151645002.png" alt="image-20220120151645002" /><figcaption aria-hidden="true">image-20220120151645002</figcaption>
</figure>
<p>但是相连的数据之间数据差异较大。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220120151638254.png" alt="image-20220120151638254" /><figcaption aria-hidden="true">image-20220120151638254</figcaption>
</figure>
<p>查看LOG也发现数据的确有按照预定的逻辑进行循环：</p>
<figure>
<img src="https://pic.islet.space/2022/01/20220120.png" alt="20220120" /><figcaption aria-hidden="true">20220120</figcaption>
</figure>
<p>但是逻辑分析仪采出来的数据就是异常。</p>
<p>经过分析，是因为逻辑分析仪的采样率为 <code>1MHz</code> ，与SPI外设的频率 <code>1e6</code> 一致。</p>
<p>修改了逻辑分析仪的采样率为 <code>2MHz</code> ，提高了1倍，采样出来的逻辑就正常了。</p>
<figure>
<img src="https://pic.islet.space/2022/01/image-20220120162227888.png" alt="image-20220120162227888" /><figcaption aria-hidden="true">image-20220120162227888</figcaption>
</figure>
<p>但是之前的项目只用了写数据的函数。示波器波形和逻辑分析仪都能正常。</p>
<p>改了项目主循环中的语句为读数据之后，就出现异常了。</p>
<h3 id="问题推断">问题推断</h3>
<p>通过注释部分语句，进行间歇性测试和波形观察。</p>
<p>发现，spi读取语句 <code>uint8_t spi3wire_readbyte(uint8_t address)</code> 可能是波形不正常的原因。</p>
<p>硬件查找主控板和底板的引脚问题：</p>
<ol type="1">
<li>找到扩展板上的GPIO口对应核心板上的哪个口</li>
<li>使用示波器探头直接接触对应的GPIO口并查看波形，查看主控板和底板之间是否存在问题。</li>
</ol>
<p>发现示波器探头从底板更换至主控板之后，示波器所显示波形并无差异。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/12/27/Hardware/ESP32/2021-12-27-islet%E5%AE%B6%E5%BA%AD%E7%89%A9%E8%81%94%E7%BD%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/27/Hardware/ESP32/2021-12-27-islet%E5%AE%B6%E5%BA%AD%E7%89%A9%E8%81%94%E7%BD%91/" class="post-title-link" itemprop="url">islet家庭物联网</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-12-27 19:40:00" itemprop="dateCreated datePublished" datetime="2021-12-27T19:40:00+08:00">2021-12-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-16 15:13:56" itemprop="dateModified" datetime="2022-01-16T15:13:56+08:00">2022-01-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/InternetOfThings/" itemprop="url" rel="index"><span itemprop="name">InternetOfThings</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>GITEE</strong>: https://gitee.com/isletspace/esp32iot</p>
<p>本项目是使用 <strong>微信小程序</strong>+<strong>腾讯云</strong>+<strong>乐鑫开发板</strong>+<strong>5V-多路-继电器</strong>+<strong>220V-AC-电器</strong> 的模式对家庭中的硬件进行检测和控制，本项目涉及到 <strong>网络前端</strong>、<strong>服务器后端</strong>、<strong>网络通信</strong> 和 <strong>物联网硬件控制</strong> 方面的相关知识。</p>
<p><strong>需要实现的功能</strong>：</p>
<ol type="1">
<li>开发板能够自动连接家庭WiFi</li>
<li>开发板能够通过MQTT协议与后台服务器取得联系</li>
<li>开发板能够定时自动获取时钟并校准</li>
<li>开发板能够根据MQTT协议控制外围电路</li>
<li>开发板能够根据已经设置的参数与实时的传感器参数比对，并在一定环境条件内开启/关闭相关电路</li>
<li>手机可以通过微信小程序发送MQTT数据至服务器</li>
</ol>
<p><strong>软件开发平台</strong>：Mac</p>
<p><strong>硬件开发IDE</strong>：Arduino</p>
<h1 id="硬件准备">硬件准备</h1>
<ol type="1">
<li>4路5V红板（光耦/高低电平）继电器 *1</li>
<li>DHT11温度模块 *2</li>
<li>加热器 *1</li>
<li>ESP32-WROOM-32开发板 *1</li>
</ol>
<p>其他：</p>
<ol type="1">
<li>杜邦线</li>
<li>电烙铁</li>
<li>锡丝</li>
<li>松香</li>
<li>面包板</li>
</ol>
<h2 id="芯片模组比对选型">芯片模组比对选型</h2>
<p>ESP32-WROOM-32X（此处 <code>X</code> 代表不确定） 和 ESP32-WROVER-X（此处 <code>X</code> 代表不确定） 在性能上基本一模一样，包括核心数、最大时钟频率、Flash大小、支持的接口类型 和 特殊传感器等等。除了在 PSRAM、工作温度范围、天线、WiFi最高频率 和 模组尺寸上有所区别外。 ESP32-WROVER-X 则具有PSRAM 和 最大的面积（18mm × 31.4mm × 3.3mm）。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228014701607.png" alt="官方展示的ESP32模组性能参数对比" /><figcaption aria-hidden="true">官方展示的ESP32模组性能参数对比</figcaption>
</figure>
<h2 id="芯片选型">芯片选型</h2>
<p>无脑选了ESP32-WROOM-32SE，反正自己用，而且便宜（￥21.5包邮）。</p>
<h2 id="芯片基本信息">芯片基本信息</h2>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228012555509.png" alt="Arduino所展示的开发板可调参数" /><figcaption aria-hidden="true">Arduino所展示的开发板可调参数</figcaption>
</figure>
<h1 id="arduino-ide准备">Arduino IDE准备</h1>
<p>使用 Arduino IDE 进行开发，但开发配置相关的 <code>.json</code> 文件 及其安装包都在 <code>github.com</code> 上，即使使用了科学上网进行加速，但因为加速器的加速层级可能和IDE拉取资源包所用的数据层级不在同一个上面，无法代理，就白天基本上无法下载，凌晨（正经程序员谁tm熬夜）才有机会下载东西。</p>
<blockquote>
<p>英文版下的 <code>首选项</code> 是 <code>Preferences</code> 。</p>
</blockquote>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228011905234.png" alt="修改附加开发板管理网址" /><figcaption aria-hidden="true">修改附加开发板管理网址</figcaption>
</figure>
<p>然后去 <code>开发板管理器</code> 中搜索 <code>esp32</code> 进行安装。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228012156101.png" alt="目录-开发板-开发板管理器" /><figcaption aria-hidden="true">目录-开发板-开发板管理器</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228012244049.png" alt="搜索关键词“esp32”" /><figcaption aria-hidden="true">搜索关键词“esp32”</figcaption>
</figure>
<h2 id="解决github问题">解决github问题</h2>
<h3 id="方法一">方法一</h3>
<p>本来应该用如下链接进行配置的：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://dl.espressif.com/dl/package_esp32_index.json </span><br></pre></td></tr></table></figure>
<p>自己扒拉了一遍该文件中可能包含的所有资源包（主要是 <code>github.com</code> 上的），然后修改了 <code>.json</code> 文件，放到自己的桶里，然后放出来使用，还好这个文件里有明确提到要哪些资源不然也没法扒拉。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://code.islet.space/espressif/dl/package_esp32_index.json</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：Mac系统下可能会因为曾经下载过的缓存文件无法生效（如果自行修改了网站上的 <code>.json</code> 文件的话），需要自行清除缓存，打开 <code>~/Library/ArduinoXX/cache/</code> 并对应删除该网站的文件夹即可，如 <code>code.islet.space</code> 。（这里的 <code>ArduinoXX</code> 中的 <code>XX</code> 需要自己去看自己的文件夹，应该是受版本控制的）</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228005455101.png" alt="修改链接后可以正常下载" /><figcaption aria-hidden="true">修改链接后可以正常下载</figcaption>
</figure>
<h3 id="方法二">方法二</h3>
<p>自己去github，用浏览器或者下载器下好了以后放到 <code>用户目录--资源库--程序缓存--指定位置</code>（如下）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~&#x2F;Library&#x2F;ArduinoXX&#x2F;staging&#x2F;packages&#x2F;</span><br></pre></td></tr></table></figure>
<p>这个文件夹也就需要放这么多文件吧。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228012028024.png" alt="资源库缓存指定位置下的文件" /><figcaption aria-hidden="true">资源库缓存指定位置下的文件</figcaption>
</figure>
<p>亲测，第二种方法更好用。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228011814461.png" alt="提示安装成功" /><figcaption aria-hidden="true">提示安装成功</figcaption>
</figure>
<h1 id="visual-studio-code-ide准备">Visual Studio Code IDE准备</h1>
<p>总的来说，VS Code的IDE配置会比Arduino更为复杂，但是无奈在都是科学上网的情况下，VS Code下载毫无压力，且VS Code使用习惯之后更加方便。</p>
<p>至少前期配置工作来说，VS Code更为友好。</p>
<h2 id="espressif-idf插件安装">Espressif IDF插件安装</h2>
<p>首先去插件市场搜索 <code>Espressif IDF</code> 插件进行安装，然后点击 <code>查看</code> -&gt; <code>命令面板</code>。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228182209737.png" alt="image-20211228182209737" /><figcaption aria-hidden="true">image-20211228182209737</figcaption>
</figure>
<p>到这里需要输入 <code>configure esp-idf extension</code> 以进入该插件的配置页面。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228182314161.png" alt="image-20211228182314161" /><figcaption aria-hidden="true">image-20211228182314161</figcaption>
</figure>
<h2 id="必要工具安装">必要工具安装</h2>
<p>然后它就会提示你需要安装几个必要插件，有 Git / Python / CMake 和 Ninja。这些都可以从Espressif的 <a target="_blank" rel="noopener" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/get-started/index.html">官方文档</a> 中获取到安装步骤。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228182508965.png" alt="image-20211228182508965" /><figcaption aria-hidden="true">image-20211228182508965</figcaption>
</figure>
<p>下方为四个工具的官方下载链接，前三个都可以通过官方下载软件包进行安装，第四个 Ninja 我安装不成功，是通过 Mac Ports 进行安装的。</p>
<p>GIT : https://git-scm.com/</p>
<p>PYTHON : https://www.python.org/downloads/</p>
<p>CMAKE : https://cmake.org/download/</p>
<p>NINJA : https://github.com/ninja-build/ninja/releases</p>
<p>需要注意的是，CMAKE 和 Ninja 安装完还需要加入到系统环境变量 <code>PATH</code> 中去，Windows系统下的系统环境变量添加比较方便，下方为 Mac 系统下 CMake 的系统环境变量添加方法。</p>
<h3 id="cmake命令行">CMAKE命令行</h3>
<p>打开Mac系统下的 CMake GUI，点击 <code>Tools</code> --&gt; <code>How to Install For Command Line Use</code> ，可以查看到三种将 CMake 添加到命令行中去运行的方法。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228183126458.png" alt="点击“工具”菜单中的“如何为命令行使用进行安装”" /><figcaption aria-hidden="true">点击“工具”菜单中的“如何为命令行使用进行安装”</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228183411724.png" alt="可以查看到三种安装方法" /><figcaption aria-hidden="true">可以查看到三种安装方法</figcaption>
</figure>
<p>使用的是第二种方法，向命令行输入 <code>sudo "/Applications/CMake.app/Contents/bin/cmake-gui" --install</code> 并输入管理员密码即可。</p>
<p>然后通过 <code>cmake --version</code> 可以查看到版本号说明安装成功，但需要注意的是 <code>whereis cmake</code> 还是没有用。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228183403876.png" alt="操作结果" /><figcaption aria-hidden="true">操作结果</figcaption>
</figure>
<h3 id="工具安装验证">工具安装验证</h3>
<p>四个必须要安装的软件都已经安装完毕，通过 <code>--version</code> 可以查看版本号。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228184801497.png" alt="安装验证" /><figcaption aria-hidden="true">安装验证</figcaption>
</figure>
<h2 id="配置继续">配置继续</h2>
<p>四个必要工具安装完毕之后，关闭 <code>ESP-IDF Setup</code> 页面，然后重新在 <strong>命令面板</strong> 输入 <code>configure esp-idf extension</code> 以进入该插件的配置页面。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228184938407.png" alt="再次进入配置页面" /><figcaption aria-hidden="true">再次进入配置页面</figcaption>
</figure>
<p>此处选择 <code>EXPRESS</code> 即可，里面会要求选择从哪个服务器下载（自己看情况选择<code>Github</code> / <code>Espressif</code>）、IDF版本（默认选最新）、IDF放置路径、工具路径、使用的Python3路径 等几个信息，选完了就进入下一界面，会自动下载安装 ESP-IDF。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228185458736.png" alt="详细配置页面" /><figcaption aria-hidden="true">详细配置页面</figcaption>
</figure>
<p>耐心等待下载完毕即可，我用 <code>Espressif</code> 服务器下载不下来，然后该用 <code>Github</code> 和 科学上网进行下载的。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228185748221.png" alt="image-20211228185748221" /><figcaption aria-hidden="true">image-20211228185748221</figcaption>
</figure>
<p>下载过程页面如下：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228190058612.png" alt="image-20211228190058612" /><figcaption aria-hidden="true">image-20211228190058612</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228190027057.png" alt="image-20211228190027057" /><figcaption aria-hidden="true">image-20211228190027057</figcaption>
</figure>
<p>最后提示的安装成功：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228190438498.png" alt="image-20211228190438498" /><figcaption aria-hidden="true">image-20211228190438498</figcaption>
</figure>
<h1 id="示例项目载入">示例项目载入</h1>
<p>在 <strong>命令面板</strong> 中输入 <code>show examples projects</code> 。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228190651117.png" alt="image-20211228190651117" /><figcaption aria-hidden="true">image-20211228190651117</figcaption>
</figure>
<p>即可调出 ESP-IDF的示例代码项目列表。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228190738993.png" alt="image-20211228190738993" /><figcaption aria-hidden="true">image-20211228190738993</figcaption>
</figure>
<p>选择 <code>blink</code> 作为测试代码。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228190839371.png" alt="image-20211228190839371" /><figcaption aria-hidden="true">image-20211228190839371</figcaption>
</figure>
<h2 id="项目构建">项目构建</h2>
<p>这里可以用命令面板输入 <code>esp build your project</code> ，也可以点击GUI下方的 <img src="https://pic.islet.space/2021/12/image-20211231124940242.png" alt="image-20211231124940242" />进行构建。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228191057987.png" alt="命令面板构建" /><figcaption aria-hidden="true">命令面板构建</figcaption>
</figure>
<p>构建完成后，会生成 <code>build</code> 文件夹，下次构建时CMake会查看变动的文件然后只编译变动过的代码。</p>
<p>也可以删除该 <code>build</code> 文件夹，使其全部重新构建，会比较费时。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228191156613.png" alt="build过程" /><figcaption aria-hidden="true">build过程</figcaption>
</figure>
<p>点击下方的闪电按钮<img src="https://pic.islet.space/2021/12/image-20211231125445685.png" alt="烧录按钮" />即可烧录，烧录成功提示如下：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228221323556.png" alt="烧录过程" /><figcaption aria-hidden="true">烧录过程</figcaption>
</figure>
<h1 id="连接wifi">连接WiFi</h1>
<p>下图为使用示例代码更改的项目代码文件内容：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228222302314.png" alt="项目文件内容示例" /><figcaption aria-hidden="true">项目文件内容示例</figcaption>
</figure>
<p>利用ESP自带的示例代码<code>station</code> 进行调试和更改，需要注意以下几点：</p>
<ol type="1">
<li><p>不用去更改 <code>isletSpaceIotMain.c</code> 中的 <code>SSID</code> 和 <code>PASS</code> ，只需要在 <code>sdkconfig</code> 文件中进行更改即可（如下图）。</p></li>
<li><p>所有的 WiFi设置参数 都可以在 <code>sdkconfig</code> 文件中进行修改，如需要连接 AP 的 名称和密码，还有自身设备所显示的名称。</p></li>
<li><p>修改文件名之后，需要对两个 <code>CMakeList.txt</code>文件 和 一个<code>Makefile</code> 文件中的项目和文件名进行修改（如下图）。</p></li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228222645861.png" alt="如果修改代码名称需要修改main文件夹下的CMakeList文件" /><figcaption aria-hidden="true">如果修改代码名称需要修改main文件夹下的CMakeList文件</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228222717269.png" alt="如果修改项目名称需要修改根目录下的CMakeList" /><figcaption aria-hidden="true">如果修改项目名称需要修改根目录下的CMakeList</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228222733903.png" alt="如果修改项目名称需要修改根目录下的Makefile" /><figcaption aria-hidden="true">如果修改项目名称需要修改根目录下的Makefile</figcaption>
</figure>
<h2 id="menuconfig">MENUCONFIG</h2>
<p>MENUCONFIG 或者说 <code>sdkconfig</code> ，一个是图形界面的，一个是纯文本形式的。</p>
<p>用menuconfig的话只需要找到下方的齿轮按钮即可。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211231130402110.png" alt="image-20211231130402110" /><figcaption aria-hidden="true">image-20211231130402110</figcaption>
</figure>
<p>可以找到WiFi相关的配置位置：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211231130507316.png" alt="image-20211231130507316" /><figcaption aria-hidden="true">image-20211231130507316</figcaption>
</figure>
<p>对 <code>sdkconfig</code> 文件中的设备名称进行修改。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228223040901.png" alt="image-20211228223040901" /><figcaption aria-hidden="true">image-20211228223040901</figcaption>
</figure>
<p>修改完毕后可以在路由器 AP 的后台查看到已经连接的设备的名称，如下。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228223134009.png" alt="image-20211228223134009" /><figcaption aria-hidden="true">image-20211228223134009</figcaption>
</figure>
<h1 id="mqtt协议">MQTT协议</h1>
<p>根据 Espressif 官网的 <a target="_blank" rel="noopener" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/api-reference/protocols/mqtt.html">ESP-MQTT</a> 开发文档可知，MQTT 协议支持以下几种形式：</p>
<ul>
<li><p>MQTT over TCP</p></li>
<li><p>MQTT over SSL with mbedtls</p></li>
<li><p>MQTT over Websocket</p></li>
<li><p>MQTT over Websocket Secure.</p></li>
</ul>
<p>各MQTT协议形式（与对应SDK里的 <a href="##MQTT相关示例代码">MQTT示例代码</a>）及其所使用的端口号不同：</p>
<ul>
<li><code>protocols/mqtt/tcp</code>: MQTT over tcp, default port 1883</li>
<li><code>protocols/mqtt/ssl</code>: MQTT over tcp, default port 8883</li>
<li><code>protocols/mqtt/ssl_psk</code>: MQTT over tcp using pre-shared keys for authentication, default port 8883</li>
<li><code>protocols/mqtt/ws</code>: MQTT over Websocket, default port 80</li>
<li><code>protocols/mqtt/wss</code>: MQTT over Websocket Secure, default port 443</li>
</ul>
<h2 id="mqtt事件结构体">MQTT事件结构体</h2>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MQTT event configuration structure</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">esp_mqtt_event_id_t</span> event_id;       <span class="comment">/*!&lt; MQTT event type */</span></span><br><span class="line">    <span class="keyword">esp_mqtt_client_handle_t</span> client;    <span class="comment">/*!&lt; MQTT client handle for this event */</span></span><br><span class="line">    <span class="keyword">void</span> *user_context;                 <span class="comment">/*!&lt; User context passed from MQTT client config */</span></span><br><span class="line">    <span class="keyword">char</span> *data;                         <span class="comment">/*!&lt; Data associated with this event */</span></span><br><span class="line">    <span class="keyword">int</span> data_len;                       <span class="comment">/*!&lt; Length of the data for this event */</span></span><br><span class="line">    <span class="keyword">int</span> total_data_len;                 <span class="comment">/*!&lt; Total length of the data (longer data are supplied with multiple events) */</span></span><br><span class="line">    <span class="keyword">int</span> current_data_offset;            <span class="comment">/*!&lt; Actual offset for the data associated with this event */</span></span><br><span class="line">    <span class="keyword">char</span> *topic;                        <span class="comment">/*!&lt; Topic associated with this event */</span></span><br><span class="line">    <span class="keyword">int</span> topic_len;                      <span class="comment">/*!&lt; Length of the topic for this event associated with this event */</span></span><br><span class="line">    <span class="keyword">int</span> msg_id;                         <span class="comment">/*!&lt; MQTT messaged id of message */</span></span><br><span class="line">    <span class="keyword">int</span> session_present;                <span class="comment">/*!&lt; MQTT session_present flag for connection event */</span></span><br><span class="line">    <span class="keyword">esp_mqtt_error_codes_t</span> *error_handle; <span class="comment">/*!&lt; esp-mqtt error handle including esp-tls errors as well as internal mqtt errors */</span></span><br><span class="line">    <span class="keyword">bool</span> retain;                        <span class="comment">/*!&lt; Retained flag of the message associated with this event */</span></span><br><span class="line">&#125; <span class="keyword">esp_mqtt_event_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">esp_mqtt_event_t</span> *<span class="keyword">esp_mqtt_event_handle_t</span>;</span><br></pre></td></tr></table></figure>
<h2 id="mqtt相关示例代码">MQTT相关示例代码</h2>
<p>了解完官方开发文档中的信息，就可以知道MQTT示例代码里的这些文件夹命名含义，以及自己需要打开哪个示例代码了。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228223617579.png" alt="image-20211228223617579" /><figcaption aria-hidden="true">image-20211228223617579</figcaption>
</figure>
<h2 id="menuconfig-1">MENUCONFIG</h2>
<p>MENUCONFIG 页面可以看到MQTT的相关配置信息。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229011902429.png" alt="image-20211229011902429" /><figcaption aria-hidden="true">image-20211229011902429</figcaption>
</figure>
<h1 id="mqtt服务器开发">MQTT服务器开发</h1>
<p>自行购买了腾讯云的服务器，然后完成了配置（步骤略），发现自测“主题订阅”不成功。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229033019004.png" alt="image-20211229033019004" /><figcaption aria-hidden="true">image-20211229033019004</figcaption>
</figure>
<p>然后刚好发现服务器的 Ubuntu 20 系统使用的防火墙是 <code>iptables</code> ，顺利打开 <code>1883</code> 端口。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -A INPUT -p tcp --dport 1883 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>然后查看打开情况。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229032825212.png" alt="image-20211229032825212" /><figcaption aria-hidden="true">image-20211229032825212</figcaption>
</figure>
<p>顺便在服务器页面也打开相关配置。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229032753559.png" alt="image-20211229032753559" /><figcaption aria-hidden="true">image-20211229032753559</figcaption>
</figure>
<p>最后自测成功：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229032920902.png" alt="image-20211229032920902" /><figcaption aria-hidden="true">image-20211229032920902</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229032953396.png" alt="image-20211229032953396" /><figcaption aria-hidden="true">image-20211229032953396</figcaption>
</figure>
<h1 id="小程序开发未完">小程序开发（未完）</h1>
<p>因为个人使用腾讯云注册了自己的域名 islet.space，且小程序也属于腾讯自家产品，为了后续开发的兼容性和便利性，就同步参阅了腾讯云的 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/1081/47684">物联网自主品牌小程序开发文档</a> 。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211227202550338.png" alt="image-20211227202550338" /><figcaption aria-hidden="true">image-20211227202550338</figcaption>
</figure>
<h2 id="微信开发者工具">微信开发者工具</h2>
<p>微信开发者工具下载页面：https://cloud.tencent.com/document/product/1081/47685</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211227202759080.png" alt="image-20211227202759080" /><figcaption aria-hidden="true">image-20211227202759080</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211227203058077.png" alt="image-20211227203058077" /><figcaption aria-hidden="true">image-20211227203058077</figcaption>
</figure>
<h2 id="后台设置">后台设置</h2>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/1081/34738">物联网开发平台</a></p>
<h1 id="debug">DEBUG</h1>
<h2 id="烧录和调试过程报错">烧录和调试过程报错</h2>
<p>出现这种情况，可能是所选芯片不正确导致。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228214645589.png" alt="烧录错误提示" /><figcaption aria-hidden="true">烧录错误提示</figcaption>
</figure>
<h3 id="解决过程">解决过程</h3>
<p>重新选择了芯片，然后将烧录方法改为 <code>UART</code> ，重新烧录即可成功。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228215715687.png" alt="在插件中选择”扩展设置“" /><figcaption aria-hidden="true">在插件中选择”扩展设置“</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228215826153.png" alt="选择需要调试的设备类型" /><figcaption aria-hidden="true">选择需要调试的设备类型</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228215747432.png" alt="选择烧录方式" /><figcaption aria-hidden="true">选择烧录方式</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228215518196.png" alt="烧录成功提示" /><figcaption aria-hidden="true">烧录成功提示</figcaption>
</figure>
<h2 id="头文件查找错误">头文件查找错误</h2>
<p>这个bug始终没有解决，之后再说吧。。。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211228232022467.png" alt="提示无该文件" /><figcaption aria-hidden="true">提示无该文件</figcaption>
</figure>
<h2 id="wifi初始化出错">WIFI初始化出错</h2>
<p>将WiFi-station的代码搬到 MQTT-TCP中，发现 <code>wifiStationInit()</code> 函数初始化错误，报错的行数是 <code>117</code> 。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229143428551.png" alt="wifi初始化函数出错" /><figcaption aria-hidden="true">wifi初始化函数出错</figcaption>
</figure>
<p>经检查，发现该函数示例代码的一部分，并未改动，且未添加其他自定义的 <code>.h</code> 或 <code>.c</code> 文件进行编译，应该不存在人为修改错误。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229150011594.png" alt="检查函数定义" /><figcaption aria-hidden="true">检查函数定义</figcaption>
</figure>
<p>因为仅修改了本 <code>isletSpaceIotMain.c</code> 文件，就在本文件中搜索 <code>esp_event_loop_create_default</code> 关键字，发现在 <code>app_main()</code> 中也有该语句，初步判断可能是两次调用导致错误，就注释了 <code>298</code> 行 和 <code>299</code> 行进行重新编译和烧录，问题解决，设备可以正常连接到路由器。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229150054429.png" alt="注释重复语句" /><figcaption aria-hidden="true">注释重复语句</figcaption>
</figure>
<h2 id="mqtt服务器连接错误">MQTT服务器连接错误</h2>
<p>在设备成功接入WiFi后，发现MQTT客户端无法连接至服务器。给出的错误提示是 <code>There are no transports valid</code> ，大致意思即连接不可用。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229150744192.png" alt="Monitor提示无可用传输" /><figcaption aria-hidden="true">Monitor提示无可用传输</figcaption>
</figure>
<p>经过检查，发现原来填写在 <code>sdkconfig</code> 文件中的 <code>Broker URL</code> 链接为 <code>https://iot.islet.space</code> ，而实际上，官网给出的配置方式如下：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229152435708.png" alt="查看官方URI定义" /><figcaption aria-hidden="true">查看官方URI定义</figcaption>
</figure>
<p>打开项目配置菜单，修改为 <code>mqtt://iot.islet.space</code> ，并重新 Build 和 Flash。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229151252895.png" alt="修改URL" /><figcaption aria-hidden="true">修改URL</figcaption>
</figure>
<p>可以发现错误已解决，设备已经正常连接至服务器。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229152118764.png" alt="Monitor提示成功" /><figcaption aria-hidden="true">Monitor提示成功</figcaption>
</figure>
<p>尝试在对应主题下发布信息进行测试：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229152036214.png" alt="尝试发布信息" /><figcaption aria-hidden="true">尝试发布信息</figcaption>
</figure>
<p>通过终端Monitor可以观察到，设备正常接收到数据：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229152141547.png" alt="设备接收成功" /><figcaption aria-hidden="true">设备接收成功</figcaption>
</figure>
<h2 id="eventhandler未进入">eventHandler未进入</h2>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211229182911935.png" alt="image-20211229182911935" /><figcaption aria-hidden="true">image-20211229182911935</figcaption>
</figure>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/xujiuba/article/details/107234040">Mac 安装 CMake 配置及环境配置</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Lc6ausiKvQM">Quick User Guide for the ESP-IDF VS Code Extension</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/get-started/index.html#id2">ESP-IDF 编程指南</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/protocols/mqtt.html">ESP-MQTT</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/12/27/Blog/2021-12-27-hexo%E5%BF%85%E8%A3%85%E6%8F%92%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/27/Blog/2021-12-27-hexo%E5%BF%85%E8%A3%85%E6%8F%92%E4%BB%B6/" class="post-title-link" itemprop="url">hexo必装插件及安装脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-27 10:30:00 / Modified: 11:05:03" itemprop="dateCreated datePublished" datetime="2021-12-27T10:30:00+08:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>请先确保电脑上已经安装了必须的软件，如 <code>node.js</code> 和 <code>git</code> ，因为日常需要使用 <strong>代码</strong>、<strong>数学公式</strong>、<strong>流程图</strong>、<strong>搜索</strong> 等工具，所以下方的插件安装也主要是与此相关的。</p>
<p><strong>注意</strong>：以下仅适用于 <code>hexo-next</code> 主题。</p>
<h1 id="插件安装">插件安装</h1>
<p>先放一个博客 islet.space 需要使用到的插件，都需要使用 <code>npm</code> 进行安装。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211227103125833.png" alt="本博客使用到的一些插件" /><figcaption aria-hidden="true">本博客使用到的一些插件</figcaption>
</figure>
<p>将下方这段脚本保存至 <code>hexo_install.sh</code> 文件中，并使用 <code>chmod +x hexo_install.sh</code> 命令为其添加执行权限，并使用 <code>./hexo_install.sh</code> 进行执行即可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> uninstall the unnecessary renderer,like marked and kramed</span></span><br><span class="line">sudo npm uninstall hexo-renderer-marked --save</span><br><span class="line">sudo npm uninstall hexo-renderer-kramed --save</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> install the necessary plugins <span class="keyword">for</span> hexo</span></span><br><span class="line">sudo npm install @fancyapps/fancybox --save</span><br><span class="line">sudo npm install @fortawesome/fontawesome-free --save</span><br><span class="line">sudo npm install @next-theme/pjax --save</span><br><span class="line">sudo npm install @next-theme/plugins --save</span><br><span class="line">sudo npm install hexo-deployer-git --save</span><br><span class="line">sudo npm install hexo-filter-mermaid-diagrams --save</span><br><span class="line">sudo npm install hexo-generator-searchdb --save</span><br><span class="line">sudo npm install hexo-math --save</span><br><span class="line">sudo npm install hexo-renderer-ejs --save</span><br><span class="line">sudo npm install hexo-renderer-pandoc --save</span><br><span class="line">sudo npm install hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure>
<h1 id="插件启用">插件启用</h1>
<h2 id="pandoc">pandoc</h2>
<p>若要启用pandoc进行渲染，除了之前必须要卸载旧的渲染器（如 <code>marked</code> 和 <code>kramed</code> 外），还需要去github页面下载一个pandoc的渲染器软件并进行安装。</p>
<p><strong>pandoc下载链接</strong>：https://github.com/jgm/pandoc/releases</p>
<h2 id="mermaid">mermaid</h2>
<p>mermaid需要显示的话也需要安装插件，需要在hexo-next主题文件夹下的 <code>_config.yml</code> 文件中进行启用，如下：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211227105005422.png" alt="mermaid在主题配置文件中的启用" /><figcaption aria-hidden="true">mermaid在主题配置文件中的启用</figcaption>
</figure>
<h2 id="latex">latex</h2>
<p>latex数学公式可以由 <code>pandoc</code> 渲染器进行渲染，只需要在hexo-next主题文件夹下的 <code>_config.yml</code> 文件中启用 <code>mathjax</code> ，如下：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211227104717614.png" alt="数学公式在主题配置文件中的启用" /><figcaption aria-hidden="true">数学公式在主题配置文件中的启用</figcaption>
</figure>
<h2 id="search">search</h2>
<p>搜索功能功能不仅需要安装插件，还需要分别在博客文件夹根目录中的 <code>_config.yml</code> 和 hexo-next主题文件夹下的 <code>_config.yml</code> 文件中进行启用，如下：</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211227105545754.png" alt="博客根目录配置文件下的启用" /><figcaption aria-hidden="true">博客根目录配置文件下的启用</figcaption>
</figure>
<p><strong>注意</strong>：此处的 <code>db.json</code> 需要在 <code>public</code> 文件夹中也有一份的时候启用；如果 <code>db.json</code> 无法使用，则更换为 <code>search.xml</code> 。因为 <code>db.json</code> 或 <code>search.xml</code> 是由插件生成的搜索数据库（可以这么看）。</p>
<figure>
<img src="https://pic.islet.space/2021/12/image-20211227105510478.png" alt="hexo主题配置文件下的启用" /><figcaption aria-hidden="true">hexo主题配置文件下的启用</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/12/10/Others/2021-12-10-%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/10/Others/2021-12-10-%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/" class="post-title-link" itemprop="url">面试经验</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-10 08:30:00 / Modified: 22:35:27" itemprop="dateCreated datePublished" datetime="2021-12-10T08:30:00+08:00">2021-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Others/" itemprop="url" rel="index"><span itemprop="name">Others</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>因为也是人力资源管理专业出身，所以基于面试者（员工）角度来写这篇文章的时候，其实是左右手互博的感觉。</p>
<p>特殊性说明，本文所描述的岗位背景其实是 <strong>嵌入式DSP裸机软件（驱动）开发</strong> 。</p>
<p><strong>注意</strong>：下面标灰色的部分都是跟HR工作相关的概念，如果看不太懂可以跳过。</p>
<h1 id="面试流程">面试流程</h1>
<p>技术类岗位招聘通常会遇到 <strong>2~3轮面试</strong> 和一次 <strong>HR提供Offer</strong> 的环节，最经典的流程如下：</p>
<pre class="mermaid">graph LR
简历投送 --> ID1((HR面)) --> ID2((项目面)) --> ID3((技术面)) --> 拿Offer</pre>
<h2 id="面试原则">面试原则</h2>
<p>面试者需要在面试过程中适当包装和美化一下自己的工作经历，但是还是需要秉承着相对诚实的原则。</p>
<h3 id="为什么说是相对诚实的原则">为什么说是相对诚实的原则</h3>
<p>你可以说“自己的工作很难但按时完成”，“自己独立完成”，“自主编写代码” 等等他人较难去鉴别的工作，这些都是一个人工作能力不错的表现。但假如把自己没做过的项目放进去，一旦被问技术面的时候问到细节就会露馅。即使面试时没有露馅，工作时露馅了，大概率也会被面试官知道的。</p>
<blockquote>
<p>一个HR有可能是在一家公司专门从事招聘的专员，也有可能是为多家公司做招聘的猎头（专门从事招聘工作的人员，通常是成立一个猎头公司，专门帮其他公司找人才）。一旦技术面的时候夸大自己的工作经验，技术面也会跟HR反馈你的夸大情况，然后你就再也不能通过该猎头或者专员找到其他的工作了，相当于自己白白损失了一个资源口。</p>
</blockquote>
<p>而，嵌入式开发之类的技术岗位（目前）是绝对的版本答案之一，企业通过猎头找人才已经是常态，因此绝对不能有这种作死行为。</p>
<h1 id="hr面">HR面</h1>
<p>由专门/兼职做人力资源的工作人员负责，主要有以下流程：</p>
<ol type="1">
<li><strong>说明招聘信息</strong>（包括所招聘的岗位的基本要求和职责、企业背景、团队情况和项目情况）</li>
<li><strong>在职情况</strong>（千万不能说自己已经离职，否则你就会很掉价，因为HR会觉得你急于找到新工作而压低你的价格——对，就是你的薪酬，你的卖身一个月的价格，当然也有其他方法可以来试着压低你的薪酬，后面再谈）</li>
<li><strong>询问面试者的离职原因</strong>（以判断该员工是否足够稳定，因为薪酬给的更高的员工其离职后给企业造成的离职成本会更高，因此需要该员工足够稳定，后面详谈如何回答离职原因）</li>
<li><strong>询问面试者当前的工作内容</strong>（以确定该员工与所招聘岗位的匹配度，就是说，面试者目前的工作内容如果和他招聘的岗位的工作内容差异太大，他就不会想要再继续去问了，这点应该比较容易懂吧。当然，面试者也不能明明不匹配就瞎说自己会该工作技能，不然就是坑自己也坑别人，这里尽量坦白一些比较好）</li>
<li><strong>询问面试者的求职意向及工作意愿</strong>（就是会问面试者是否愿意从事本岗，一般到这里如果没有回答“愿意”，都没得聊了）</li>
<li><strong>询问面试者期待的薪资及目前薪资</strong>（这一点在招聘网站看可以看到该企业所招聘的岗位能提供的薪资范围，通常也就是个薪酬区间，后面详谈如何回答这部分内容。询问目前薪资就是来确定你的人力成本，进而探寻能够压缩你人力成本空间的可能性的。）</li>
<li><strong>约定下一步面试时间</strong>（这一点应该没什么好说，通常都是电话技术面或视频技术面，确认好双方有空闲的时间）</li>
<li><strong>其他</strong>（会问是不是符合一些硬性条件，比如统招本科（就是学信网能够查到本科学历信息），毕业时间等等）</li>
</ol>
<h2 id="如何回答离职原因">如何回答离职原因</h2>
<p>这一部分看似回答很简单，其实会藏着很多坑。</p>
<blockquote>
<p>首先，要明白为什么需要HR面，为什么面试第一个打来的都是HR，而不是技术员工直接打过来。</p>
<p>从企业运行的角度考虑，每一时刻的企业运作都是需要运行成本的，包括场地成本、设备成本（采购、折旧、损耗等等）、物料成本、人力成本（招聘成本、培训成本、薪酬成本等）等等，就特别多，专人专事这个大家都能理解。</p>
<p>如果一个员工匆忙从一家企业离职，该员工入职前的招聘成本、入职时的培训成本和所需要支付的薪酬成本就会拜拜支出，不能给企业带来盈利，但企业在招聘一个员工前后所支出的成本又是实实在在支出了的，就会造成巨大损失（绿厂就不是，就完全不担心这一点，因为给的太少了（通俗点就是成本不高），打着500强名号，韭菜一茬一茬就随便割，又不会特地挽留员工离职，而且全公司现状都是培训工作做得差，成本就不高）。</p>
<p>（个人觉得）企业当然不能实现所有人终身雇佣，没有新鲜血液是不行的，一定比例的人员流动可以给企业带来活力（这个原因我就不必讲了吧）。HR是学过这些东西的，需要站在企业角度去帮企业考虑招聘什么样子的人会让企业更加稳定，人员稳定（流失减少，并控制在一定范围内）就能帮助企业降低运行成本。</p>
</blockquote>
<p>因此，<mark style="font-weight: 900;">面试者需要体现出自己的稳定性，证明自己是一个不太会轻易离职的人，并说明是一些客观的因素（并不是自己的原因）造成了面试者的离职</mark>。当然，面试者自己在一家企业就业时，也不应该轻易离职，如果是高校毕业者，最好在第一家企业从事1年及以上再离职（建议！）。以下列举了几个较为客观（不能说绝对客观）的原因：</p>
<ul>
<li>办公室氛围太过压抑，缺少团队活动</li>
<li>团队协作性太差</li>
<li>领导风格太过压迫和强势</li>
</ul>
<p>一些员工的主观原因（或者说是令HR反感的原因），这些话是绝对不能说的，绝对禁区！</p>
<ul>
<li>自己不喜欢目前的工作</li>
<li>工作太难了</li>
</ul>
<p>一些员工可以说的话：</p>
<ul>
<li>自己不太挑工作，比较看重团队氛围和工作环境（一般有自信点的HR都会觉得这点没问题，“不太挑工作”的前提是，也得是自己觉得对口的才行，别不对口你不挑个啥。比如，做MCU/ARM/SOC/DSP的相通性较高，说自己不挑可以，但是跨行业太大也敢说自己不挑那就是找事儿）（另，不太挑工作其实对HR来说是个好品质，但自己也得好好掂量掂量自己）</li>
</ul>
<h2 id="如何回答目前薪资及期望薪资">如何回答目前薪资及期望薪资</h2>
<blockquote>
<p>HR之所以需要问你的目前薪资，不仅是了解本行业或者某个岗位在某个地区的大致薪酬情况（以对比公司招聘员工的薪酬竞争优势），也是在探寻面试者的薪酬上涨或可以压缩的空间。</p>
</blockquote>
<p>面试者首先需要了解（或者说准备好）几点信息：</p>
<ol type="1">
<li>该行业该岗位在某个地区的 <strong>普遍薪资范围</strong> 是如何（当然不能拿最高薪资来当做普遍薪资，得看自己的能力和对应岗位的工作难度）</li>
<li>所面试的公司提供的薪酬范围</li>
<li>自己所期待的薪资底线</li>
<li>自己目前薪资</li>
</ol>
<p>首先是，如果HR问目前薪资。面试者可以适当夸大自己目前的薪资，税后薪资可能都很低，可以说税前，多说几千没关系，不要与对方公司提供的薪酬底线相差太大即可。如果HR说自己公司有30%或者40%的涨薪幅度限制，那么可以放心，该HR觉得你岗位匹配度较高，只是想通过这个来压一压你的成本而已。</p>
<p>此时，你可以说自己期待在某个地区某个岗位的薪酬底线，低于这个就不行。HR态度一般都会更为委婉些。</p>
<p>如果你通过面试，到了拿offer的环节，HR还是会再跟你谈一遍。豪气的公司（一种薪酬策略，用高于行业平均水平的薪资招聘员工，但也要求更高）一般开价都会比你要求的更高，但这是后面的事情了。</p>
<h2 id="hr面结束之后">HR面结束之后</h2>
<p>（如果你对HR提供的岗位较为满意，接收了技术面/项目面的预约）需要记住一些最基础、关键、有用的信息。这些HR面时都已经说明了，最好是拿个小本本记好，这是对面试企业的一个尊重，也是为了防止后面出现的一些莫名其妙的（跟你面试岗位无关的）问题把你问倒。</p>
<ol type="1">
<li><strong>岗位工作地点</strong>（很多大企业全国都有研究中心和技术中心，可以选择的，看对方给你提供的是哪个城市的就业岗位）</li>
<li><strong>对方面试官的名字</strong>（至少记住姓啥）</li>
<li><strong>对方的公司名称及背景</strong>（比如是帮别人做外包的还是做自研的，有没有上市或者有没有股权激励，成立多久了之类的）</li>
<li><strong>岗位基本信息</strong> （任职要求和工作职责等）</li>
</ol>
<h1 id="项目面和技术面">项目面和技术面</h1>
<p>普遍情况下，二轮/三轮面试都会问你一些技术和项目上的东西，根据所闻内容的不同，将其分别称呼为 <strong>技术面</strong> 和 <strong>项目面</strong>。</p>
<p>有些公司会将这两轮分开，面试的先后顺序不一，总得占比是项目经历会问得更多一些，技术面的占比较少。</p>
<p>有些公司也会将项目面和技术面合在一起（就是同一次面试里就有技术面和项目面），夹杂交替着问。</p>
<h2 id="项目面">项目面</h2>
<p>主要是问你从事（主要负责或者协助负责）过的一些项目/经历，了解你对研发的产品、芯片、硬件、软件、工具、设备的认知。项目面会有三种类型的提问：</p>
<ol type="1">
<li>工具认知提问。了解面试者对工具使用的经验。</li>
<li>问题解决提问。了解面试者对一些解决问题的方法和经历。</li>
<li>情景假设提问。考验面试者解决问题的思路。</li>
</ol>
<p><strong>项目面的面试形式：</strong>一般都是电话提问和视频提问。</p>
<p><strong>面试时长</strong>：单轮面试时间都是在15分钟以上，最长30分钟左右。</p>
<h3 id="工具认知提问">工具认知提问</h3>
<p>就是会问你开发过程中遇到的一些工具模块是如何使用的，一些算法或者逻辑的原理。这部分比较简单，都是经验而已。</p>
<p>例如，面试官问我ADC的使用，我就如实回答我是如何用ADC的，以及我对ADC模块的认知。</p>
<h3 id="问题解决提问">问题解决提问</h3>
<blockquote>
<p>有很大概率（不一定是所有公司都会问的），会问你一些“发现问题解决问题”的经验。这里面试官主要是想知道以下几点情况：</p>
<ol type="1">
<li><strong>面试者对工作问题的解决思路</strong>。是否足够清晰，有什么角度可以去考虑，需要面试者自己去总结，然后可以清晰地向他人阐述。</li>
<li><strong>面试者在解决问题时的耐心</strong>。面试者需要介绍一个以上的案例，向面试官说明问题现象，自己的思考方式、检查方法、解决方法、过程 和 结果 等等。</li>
<li><strong>面试者的经验</strong>。你能说出自己在遇到一些问题（比如调试问题）时的解决思路，或者看待问题（较为全面）的角度时，就说明了你已经具有足够经验了。</li>
</ol>
</blockquote>
<p>如果面试官问你“发现问题解决问题”的经验，你回答自己不知道，不太记得，忘记了这些话，就妥妥失败了。</p>
<p>因为这些工作问题的发现、解决和记录工作，在日常工作过程中其实都是可以稍微花点时间去完成的（这并不难，只是你有没有耐心而已），如果面试者自己没有做这部分 <strong>经验积累工作</strong>，那就很吃亏，大部分人都有相关的工作经验，自己不会去 <strong>总结</strong> 而已。</p>
<h3 id="情景假设提问">情景假设提问</h3>
<p>面试官可能会抛出情景题，例如问你给你一个芯片，2周之内完成开发，你需要怎么准备，有什么计划。其实就是一个经验问题，或者思路问题。回答方法我就不详细说了。</p>
<h2 id="技术面">技术面</h2>
<p>技术面，就是会问一些项目之下的一些底层技术问题，一般来说都不会太难，也偶尔会有一些面试官问的问题比较偏门（开发过程中较难出现的问题）。例如，我经历过的偏门提问，会问C语言的野指针出现和排查，C++的继承概念等等（这些是我项目上比较难涉及到的）。</p>
<p>但大部分情况下，这些技术提问，都是提问一些你做过的东西，比如你做过某种通信协议的开发，请你表述以下该协议的相关内容（例如，时序、通信格式（通信起始和结束的变化）、电气特性（电平、电压范围）等）。这些其实也是经验的一部分，真的做过的话就应该自己做做笔记，一定会有点印象的，不应该去抱佛脚。</p>
<p><strong>面试原则</strong>：问到你会的，你就自信回答。问到偏门的，开发过程中较少出现/遇到和使用的，你就如实回答就好了，不要不懂装懂。</p>
<p><strong>技术面的面试形式：</strong>可能是让你线上答卷，现场答卷，也可以是电话提问、视频提问。</p>
<p><strong>面试时长</strong>：同项目面，也可能夹杂着在项目面中间进行提问。</p>
<h1 id="拿offer">拿Offer</h1>
<p>拿到Offer后，你可能需要向HR详细确认的信息：</p>
<ol type="1">
<li>每天上班时间，从几点到几点</li>
<li>每个月的薪资计算时间是从几号到几号</li>
<li>每个月的薪资发放日期、时间</li>
<li>是否双休、年假情况</li>
<li>每天的加班强度、每个月的加班强度、加班薪资等</li>
<li>每年发放多少个月的薪资（就是年终奖发放情况，好一点的是15薪以上，最基本的13薪）</li>
<li><strong>每个（税前）月薪资是多少</strong>（可能需要关心一下社保和公积金的缴纳情况等）</li>
</ol>
<p>基本信息了解完毕之后，需要自己有意识地去提问的一些问题：</p>
<ol type="1">
<li>近期可以签订合同的最晚时间（合同期限一般都是3年，这个就比较不用担心）</li>
<li>期望入职时间（自己期望什么时候入职，对方期望最晚什么时候入职，可否协调程度）</li>
<li>涨薪计划（入职后会有哪些涨薪激励计划，或之前其他股权发放啊、年终奖增长等等）</li>
<li>绩效计划（可能这时候不太愿意说，但是入职后可以去了解）</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/11/12/Networking/2021-11-12-%E7%BE%A4%E6%99%96%E3%80%81%E8%85%BE%E8%AE%AF%E4%BA%91%E5%92%8C%E5%85%AC%E7%BD%91IP%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/12/Networking/2021-11-12-%E7%BE%A4%E6%99%96%E3%80%81%E8%85%BE%E8%AE%AF%E4%BA%91%E5%92%8C%E5%85%AC%E7%BD%91IP%E8%AE%BE%E7%BD%AE/" class="post-title-link" itemprop="url">群晖、腾讯云和公网IP设置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-12 17:30:00" itemprop="dateCreated datePublished" datetime="2021-11-12T17:30:00+08:00">2021-11-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-11-21 16:35:30" itemprop="dateModified" datetime="2021-11-21T16:35:30+08:00">2021-11-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Networking/" itemprop="url" rel="index"><span itemprop="name">Networking</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>双十一豪豪酱买了群晖DS220j家用NAS服务器，为了方便工作文件的备份传输，让电脑（PC、Mac）能用上远程网络驱动，就需要让服务器穿透内网，并申请一个独立域名，想着就用腾讯云和家里的小米路由器AX3600来干吧。下方是对硬件上需要的一些要求：</p>
<p><strong>光猫</strong>：使用 <strong>桥接模式</strong>，具有 <strong>独立公网IP</strong></p>
<p><strong>路由器</strong>：使用 <strong>PPPoE模式</strong> 进行拨号、支持 <strong>端口映射</strong>、 <strong>端口转发</strong> 和 <strong>DMZ</strong></p>
<p><strong>群晖NAS</strong>：支持 <strong>DDNS</strong>、<strong>UPnP</strong> 协议、支持 <strong>证书使用范围管理</strong></p>
<h1 id="前期准备工作">前期准备工作</h1>
<h2 id="更改工作模式">更改工作模式</h2>
<p><strong>光猫</strong> 和 <strong>路由器</strong> 都支持 <strong>路由模式</strong> 和 <strong>桥接模式</strong>，都支持多个无线接入和有线接入，但因为自己购买的路由器具有更多不一样的功能，例如支持UPnP等，而且光猫是连接物理光纤进行上网的，而自己购买的路由器不能直接连接光纤上网，还得依赖于光猫，所以可以认为是两种不一样的工作硬件。</p>
<p>如果光猫已经工作在桥接模式（通过查看路由器后台的 <strong>上网方式</strong> 是否为PPPoE，如果是则说明自己购买的路由器工作在路由模式，电信光猫工作在桥接模式）。一般没有此类服务器需求的家庭网络，都是让光猫工作在路由拨号模式（即路由模式）的，而路由器则工作在桥接模式，此情况则需要将两个硬件设备的工作模式进行互换，参考以下步骤：</p>
<ol type="1">
<li>打电话给电信营业厅 <code>(0000)10000</code> （前方的 <code>(0000)</code> 是自己的市区号），确认一下光猫是路由模式还是桥接模式，如果是路由模式，则将其改成桥接模式。</li>
<li>确认改成桥接模式后，询问宽带的账户和密码，在路由器后台输入账户密码并连接测试，确保路由器工作在拨号模式，而光猫工作在桥接模式。</li>
</ol>
<blockquote>
<p>目前国内家庭宽带都是默认内网IP，想要公网IP就只能向运营商申请了，这并不需要额外的收费。电信手上的IP资源最多，也最大方。我也是照着别人的说法，打电话给电信客服，说装监控需要公网IP，客服登记之后，过几个小时就打电话说已经换好了，干净利落，服务好。目前好像还没见到过电信要不到公网IP的情况。</p>
<p>——《<a target="_blank" rel="noopener" href="https://post.smzdm.com/p/awxqqwkg/">BT下载教程 篇一：BT下载大提速！ 获取公网IP和端口映射转发简单教程</a> 》</p>
</blockquote>
<figure>
<img src="https://pic.islet.space/2021/11/202111130020050.png" alt="image-20211113000614809" /><figcaption aria-hidden="true">image-20211113000614809</figcaption>
</figure>
<h2 id="多重nat改成公网ip">多重NAT改成公网IP</h2>
<p>同样是打给电信，然后申请公网IP，电信客服专员一般会在一个小时内处理完毕，然后就可以得到公网IP了。</p>
<p>“谁拨号，谁就有公网IP” ——即此时如果路由器已经成功设置了路由模式（使用PPPoE拨号上网），则可以在路由器后台查看到其公网IP地址，如：</p>
<figure>
<img src="https://pic.islet.space/2021/11/202111130020200.png" alt="image-20211113001927548" /><figcaption aria-hidden="true">image-20211113001927548</figcaption>
</figure>
<h2 id="ddns域名绑定">DDNS域名绑定</h2>
<p>虽然已经获得公网IP，但是该IP还是会随机变动，还会需要使用DDNS服务将公网IP映射到对应域名上，而群辉服务器则提供此功能，此处需要自己申请一个域名（此步骤省略）。进入群辉服务器后台，开启DDNS功能，将域名和随机公网IP绑定和更新。</p>
<p>另外，需要自己上所用的服务器上开启API Token，并提供给群辉DDNS服务（类似于授权，可以由DDNS服务自己检测家庭网络的公网IP，并自动绑定最新的公网IP）。</p>
<h3 id="api-token申请">API Token申请</h3>
<p>下方以腾讯云的DNSPOD为例，点击DNSPOD中的 <strong>API密钥</strong>，进行 <strong>新建密钥</strong> 即可，将对应的 <strong>SecretId</strong> 和 <strong>SecretKey</strong> 复制下来。</p>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022335.png" alt="image-20211113002208036" /><figcaption aria-hidden="true">image-20211113002208036</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022186.png" alt="image-20211113001142315" /><figcaption aria-hidden="true">image-20211113001142315</figcaption>
</figure>
<h3 id="ddns添加">DDNS添加</h3>
<p>将获取到的 <strong>SecretId</strong> 填写到 <strong>用户名/电子邮件</strong> 中， 将 <strong>SecretKey</strong> 填写到 <strong>密码/密钥</strong> 中。</p>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022727.png" alt="image-20211113001623814" /><figcaption aria-hidden="true">image-20211113001623814</figcaption>
</figure>
<p>经过前面的步骤，可以看到群晖NAS服务器自动测试的 <strong>DDNS状态</strong> 为 <strong>正常</strong> 即可。</p>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022986.png" alt="image-20211112175853513" /><figcaption aria-hidden="true">image-20211112175853513</figcaption>
</figure>
<h2 id="端口映射和转发">端口映射和转发</h2>
<p><strong>端口映射</strong>：Port Mapping， 即将内网中的主机的一个端口映射到外网主机的一个端口，以提供相应的服务。当用户访问外网IP的这个端口时，服务器自动将请求映射到对应局域网内部的机器上。</p>
<p><strong>端口转发</strong>：Port Forwarding， 即将外网对应 EA 端口上收到的数据转发到内网某个主机对应的某个 IA 端口上，或者反过来将内网某个主机 IB 端口的数据转发到对应外网的 EB端口 上。</p>
<p><strong>UPnP协议</strong>：Universal Plug and Play，即 即插即用。主要是微软在推行的一个标准，适用于家庭网络，用于设备间的发现和连接。UPnP 最大的愿景就是希望实现任何设备只要一接入网络就能被网络中的所有其它设备发现，做到完全的即插即用。UPnP是一个多层协议构成的框架体系，每一层都以相邻的下层为基础，同时又是相邻上层的基础。直至达到应用层为止。</p>
<h3 id="手动端口转发或自动端口转发">手动端口转发或自动端口转发</h3>
<p>手动端口转发：</p>
<p>自动端口转发：</p>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022401.png" alt="image-20211112180357037" /><figcaption aria-hidden="true">image-20211112180357037</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/11/202111211632483.png" alt="image-20211112175632036" /><figcaption aria-hidden="true">image-20211112175632036</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022536.png" alt="image-20211112180450097" /><figcaption aria-hidden="true">image-20211112180450097</figcaption>
</figure>
<h2 id="配置dmz">配置DMZ</h2>
<blockquote>
<p>通过配置DMZ，我们可以将需要保护的Web应用程序服务器和数据库系统放在内网中，把没有包含敏感数据、担当代理数据访问职责的主机放置于DMZ中，这样就为应用系统安全提供了保障。</p>
<p>DMZ使包含重要数据的内部系统免于直接暴露给外部网络而受到攻击，攻击者即使初步入侵成功，还要面临DMZ设置的新的障碍。</p>
</blockquote>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022178.png" alt="image-20211112172411026" /><figcaption aria-hidden="true">image-20211112172411026</figcaption>
</figure>
<h3 id="dmz开启前">DMZ开启前</h3>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022255.png" alt="image-20211112172343953" /><figcaption aria-hidden="true">image-20211112172343953</figcaption>
</figure>
<h3 id="dmz开启后">DMZ开启后</h3>
<p>虽然也是随机公网IP，但是可以使用DMZ将连接到路由器的设备映射到外网上。</p>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022517.png" alt="image-20211112175925384" /><figcaption aria-hidden="true">image-20211112175925384</figcaption>
</figure>
<h2 id="安全证书设置">安全证书设置</h2>
<p>设置安全证书及其使用范围，<mark style="font-weight: 900;">不要使用自我签名的证书，所有浏览器都会识别和阻止你访问的</mark>。</p>
<p>经过前面DDNS的 API token 配置之后，群晖NAS能够获取到对应域名的免费证书，并提供页面进行管理，将所有使用到的应用安全验证证书都设置为对应云服务提供商提供的证书即可。</p>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022177.png" alt="image-20211112180133874" /><figcaption aria-hidden="true">image-20211112180133874</figcaption>
</figure>
<h1 id="后台服务器访问">后台服务器访问</h1>
<p>经过上面复杂的折腾之后，就可以使用自定义的域名进行后台登录和管理了。</p>
<p>输入 <code>https://nax.xxx.xxx:5000</code> 即可进行后台服务器的访问，也可以使用 ping 进行测试，如下：</p>
<figure>
<img src="https://pic.islet.space/2021/11/202111130029734.png" alt="image-20211113002928045" /><figcaption aria-hidden="true">image-20211113002928045</figcaption>
</figure>
<h1 id="远程驱动器设置">远程驱动器设置</h1>
<ol type="1">
<li>在文件管理器中右键点击 <strong>此电脑</strong> 的属性</li>
<li>然后点击 <strong>映射网络驱动器</strong></li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022518.png" alt="image-20211112174837538" /><figcaption aria-hidden="true">image-20211112174837538</figcaption>
</figure>
<ol start="3" type="1">
<li>选择本地的 <strong>虚拟驱动号</strong> 进行设置</li>
<li>输入 <strong>网络地址</strong> 和 <strong>端口号</strong>，格式如 <code>https://nas.xxx.xxx:5006</code></li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022793.png" alt="image-20211112175022321" /><figcaption aria-hidden="true">image-20211112175022321</figcaption>
</figure>
<ol start="5" type="1">
<li>按照提示输入群晖提供的账户名和密码即可进行连接</li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022607.png" alt="image-20211112174513370" /><figcaption aria-hidden="true">image-20211112174513370</figcaption>
</figure>
<ol start="6" type="1">
<li>连接完毕即可查看到对应的网络驱动器</li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/11/202111130022504.png" alt="image-20211112174559989" /><figcaption aria-hidden="true">image-20211112174559989</figcaption>
</figure>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/75648110">【干货】什么是端口转发？什么是端口映射？如何设置端口映射？</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/DMZ/631225#6">DMZ</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/braddoris/article/details/41646789">upnp协议简介（一）</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/10/27/Programming/C++/2021-10-27-C++-Primer-Plus-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/10/27/Programming/C++/2021-10-27-C++-Primer-Plus-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">C++ Primer Plus 学习笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-10-27 11:00:00" itemprop="dateCreated datePublished" datetime="2021-10-27T11:00:00+08:00">2021-10-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-31 10:40:41" itemprop="dateModified" datetime="2021-10-31T10:40:41+08:00">2021-10-31</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本笔记不是全面的C++学习笔记，而是基于个人在原有的C语言基础和浅薄的C++的开发经验上的补足笔记。</p>
<p>本笔记仅供个人学习记录，不提供完整学习指导，如有需要请自行阅读《<a target="_blank" rel="noopener" href="https://storage.islet.space/01_Learning/02_CPP/C%2B%2B_Primer_Plus.pdf">C++ Primer Plus</a>》。</p>
<p>本文会参考 GNU C++ 进行代码调试，部分文档内容会参考 MS C++ 进行理解。</p>
<h1 id="简介">简介</h1>
<p>C++融合了三种不同的编程方式：</p>
<ul>
<li>面向过程编程（继承于C）</li>
<li>面向对象编程</li>
<li>泛型编程（Generic Programming），即C++模板（Template）</li>
</ul>
<h2 id="过程-vs-对象">过程 VS 对象</h2>
<p><strong>面向过程编程</strong>（Process Oriented Programming），即 <strong>结构化编程</strong> 或 <strong>过程结构化编程</strong>，是指根据执行的操作来构思一个程序。程序任务需要解决的问题按照 “1、2、3、4” 这样的顺序一一编写，如果程序任务过大，则将较大的任务拆解成较小的可以理清结构逻辑的小任务去完成。C语言的编程开发思路就是使用程序模块（函数）来表示各个任务模块。</p>
<p><strong>面向对象编程</strong>（Object Oriented Programming），简称 OOP。</p>
<p>结构化编程在程序逻辑的清晰度和可靠性上占据优势，但是在代码量上和面向对象相比不占优势</p>
<blockquote>
<p>为了应付代码量的挑战，与强调算法的过程性编程不同，OOP强调数据。过程性编程试图使问题满足语言要求，OOP则是使语言满足问题的要求。</p>
</blockquote>
<p><strong>类</strong>（Class） 是规定了 <strong>数据</strong> 和 <strong>操作</strong> 的 <strong>数据类型</strong>（Data Type）。类所创建的实体称为对象。</p>
<blockquote>
<p>OOP 强调的是编程的数据方面，GP编程强调的是 <mark style="font-weight: 900;">独立于特定数据类型</mark>，即强调 <strong>通用</strong> 和 <strong>非特定</strong> 类型。</p>
</blockquote>
<figure>
<img src="https://pic.islet.space/2021/10/20211030171646.png" alt="image-20211027135117490" /><figcaption aria-hidden="true">image-20211027135117490</figcaption>
</figure>
<h2 id="系统的位数">系统的位数</h2>
<ul>
<li>系统的位数是由什么决定的？包括嵌入式系统的8位、16位、32位和通用系统的32位和64位？</li>
</ul>
<p>位数 是由CPU的最大寻址空间决定的。</p>
<h1 id="new-features-in-c">New Features in C++</h1>
<p>以下主要从C++和C的区别点进行记录，是个人之前从未掌握过的知识，另外也会记录C++的一些高级用法。</p>
<h2 id="statement">Statement</h2>
<ul>
<li>C与C++的语句申明位置有哪些差异？</li>
</ul>
<p>C语言的变量声明通常都应位于函数或过程开始位置（Pascal也是），而C++并没有该限制，因此这点可以说是C++的优点也可以是缺点。</p>
<h3 id="range-based-for">Range-based for</h3>
<p>C++11 引入了一种崭新的 <code>for()</code> 循环形式，可以逐一迭代某个给定的 <strong>区间</strong>、<strong>数组</strong> 或 <strong>集合</strong>（range, array or collection） 内的每一个元素。而其他语言可能称之为 <code>foreach</code> 循环，其一般性用法如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(decl:coll)&#123;</span><br><span class="line">    statement</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中：</p>
<ul>
<li><em>decl</em> 是给定之 <em>coll</em> 集合中的每个元素的声明。</li>
<li><em>statement</em> 会针对给定之 <em>decl</em> 进行执行</li>
</ul>
</blockquote>
<p>使用样例（下左）及其输出结果（下右）如：</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211030171650.png" alt="image-20211030084723644" /><figcaption aria-hidden="true">image-20211030084723644</figcaption>
</figure>
<p>而且上面这种是基于 C-style array 的新旧语法搭配的 C++，实际上如果 <em>coll</em> 集合提供成员函数 <code>begin()</code> 和 <code>end()</code> ，那么使用 <code>for(decl:coll)</code> 时便等同于使用 <code>for(auto _pos=coll.begin(), _end=coll.end(); _pos!=_end;++_pos)</code></p>
<h2 id="data-type">Data Type</h2>
<ul>
<li>数据类型的大小由什么决定？数据类型大小（即占空内存空间）与系统位数、编译器的关联性？</li>
<li>嵌入式系统与通用系统的数据类型大小差异在哪？</li>
<li>double 和 float 在内存上的差异？</li>
</ul>
<p>在 C++ 中， <strong>变量</strong>（Variable） 一词通常用于 引用 <strong>标量数据类型</strong> 的 实例，而 <strong>其他类型</strong>（class / struct）的实例通常称为 <strong>对象</strong>（Object）。</p>
<p>C++ 是 <strong>强类型语言</strong> ，也是 <strong>静态类型</strong>。</p>
<p>在代码中声明变量时，必须 <mark>显式指定其类型</mark>，或使用 关键字指示编译器从初始值表达式 <strong><code>auto</code></strong> 推断类型。 在代码中声明函数时，必须指定每个参数的类型及其返回值；如果函数未返回任何 <strong><code>void</code></strong> 值，则必须指定 。当使用允许任意类型参数的函数模板时例外。</p>
<h3 id="基本内置类型">基本（内置）类型</h3>
<p><strong>基本数据类型</strong>，简称 <strong>基本类型</strong> 或 <strong>基类型</strong>。</p>
<p>下图显示了 Microsoft C++ 实现中的内置类型的相对大小：</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211030171653.png" alt="多个内置类型的相对大小（以字节为单位）的关系图。" /><figcaption aria-hidden="true">多个内置类型的相对大小（以字节为单位）的关系图。</figcaption>
</figure>
<p>下表列出了最常用的基本类型及其在 Microsoft C++ 实现中的大小：</p>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 9%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="header">
<th>类型</th>
<th>大小</th>
<th>评论</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><code>int</code></strong></td>
<td>4 个字节</td>
<td>整数值的默认选择。</td>
</tr>
<tr class="even">
<td><strong><code>double</code></strong></td>
<td>8 个字节</td>
<td>浮点值的默认选择。</td>
</tr>
<tr class="odd">
<td><strong><code>bool</code></strong></td>
<td>1 个字节</td>
<td>表示可为 true 或 false 的值。</td>
</tr>
<tr class="even">
<td><strong><code>char</code></strong></td>
<td>1 个字节</td>
<td>用于早期 C 样式字符串或 std:: 字符串对象中无需转换为 UNICODE 的 ASCII 字符。</td>
</tr>
<tr class="odd">
<td><strong><code>wchar_t</code></strong></td>
<td>2 个字节</td>
<td>表示可能以 UNICODE 格式进行编码的“宽”字符值（Windows 上为 UTF-16，其他操作系统上可能不同）。 这是用于 <code>std::wstring</code> 类型字符串的字符类型。</td>
</tr>
<tr class="even">
<td><strong><code>unsigned char</code></strong></td>
<td>1 个字节</td>
<td>C++ 没有内置字节类型。 使用 <strong><code>unsigned char</code></strong> 表示字节值。</td>
</tr>
<tr class="odd">
<td><strong><code>unsigned int</code></strong></td>
<td>4 个字节</td>
<td>位标志的默认选项。</td>
</tr>
<tr class="even">
<td><strong><code>long long</code></strong></td>
<td>8 个字节</td>
<td>表示非常大的整数值。</td>
</tr>
</tbody>
</table>
<p>类型数据的宽度（Width），即占用内存大小是由 <strong>计算机字长</strong> 和 <strong>编译程序</strong> 决定的。计算机字长提供了硬件计算精度的支持，编译程序则提供了源程序到机器码的转换。</p>
<p>下方为C/C++ 在通用系统或嵌入式系统中的常见数据类型的大小，所有值的单位均为 <em>bit</em> 。</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 17%" />
<col style="width: 18%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th>BASIC DATA TYPE</th>
<th>8 bit MCU</th>
<th>16bit MCU (51)</th>
<th>32bit (x86)</th>
<th>32bit (TI F28004x)<br>CLA ON</th>
<th>32bit (TI F28004x)<br>CLA OFF</th>
<th>64bit (x86)<br>in C++ (g++)</th>
<th>64bit (x86)<br>in C (gcc)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>char</td>
<td></td>
<td>8</td>
<td>8</td>
<td>8</td>
<td>8</td>
<td>8</td>
<td>8</td>
</tr>
<tr class="even">
<td>short</td>
<td></td>
<td>16</td>
<td>16</td>
<td>16</td>
<td>8</td>
<td>16</td>
<td>16</td>
</tr>
<tr class="odd">
<td>int</td>
<td></td>
<td>16</td>
<td>32</td>
<td>32</td>
<td><mark>16</mark></td>
<td>32</td>
<td>32</td>
</tr>
<tr class="even">
<td>long</td>
<td></td>
<td>32</td>
<td>32</td>
<td>32</td>
<td><mark>16</mark></td>
<td>64</td>
<td>64</td>
</tr>
<tr class="odd">
<td>long long</td>
<td></td>
<td>/</td>
<td>64</td>
<td>64</td>
<td>32</td>
<td>64</td>
<td>64</td>
</tr>
<tr class="even">
<td>float</td>
<td></td>
<td>32</td>
<td>32</td>
<td>32</td>
<td>32</td>
<td>32</td>
<td>32</td>
</tr>
<tr class="odd">
<td>double</td>
<td></td>
<td>32</td>
<td>64</td>
<td></td>
<td>16</td>
<td>64</td>
<td>64</td>
</tr>
<tr class="even">
<td>long double</td>
<td></td>
<td>/</td>
<td></td>
<td></td>
<td>32</td>
<td>128</td>
<td>128</td>
</tr>
</tbody>
</table>
<p>下方内容转自网络，待验证。</p>
<blockquote>
<p>（x86平台下）<code>long int</code> 即 <code>long</code>，给人的感觉好像是长整型，但实际上，它和 <code>int</code> 一样，只有32位。cppreference 给出的定义如下，但在实际的使用中，<code>long</code> 与 <code>int</code> 几乎没有区别。</p>
<blockquote>
<p><strong><em>int</em></strong> - basic integer type. The keyword int may be omitted if any of the modifiers listed below are used. If no length modifiers are present, it’s guaranteed to have a width of at least 16 bits. However, on 32/64 bit systems it is almost exclusively guaranteed to have width of at least 32 bits. <strong><em>long</em></strong> - target type will have width of at least 32 bits.</p>
</blockquote>
</blockquote>
<p><strong>实际上经过测试</strong>：在 x86_64 平台下，C 和 C++ 中的 <code>long</code> 长度都是要比 <code>int</code> 更长的，即 <code>int</code> 默认为 <code>32bit</code> 宽度，<code>long</code> 为 <code>64bit</code> 宽度。</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211030171657.png" alt="image-20211028101248341" /><figcaption aria-hidden="true">image-20211028101248341</figcaption>
</figure>
<h3 id="embedded-system">Embedded System</h3>
<p>嵌入式C语言中常用的数据类型如下图所示，而不同的</p>
<p><img src="https://pic.islet.space/2021/10/20211030171712.png" alt="image-20211027155153218" style="zoom: 67%;" /></p>
<h3 id="double-float">double / float</h3>
<p><strong>IEEE二进制浮点数算术标准</strong>（<strong>IEEE 754</strong>）是20世纪80年代以来最广泛使用的浮点数运算标准，为许多CPU与浮点运算器所采用。这个标准定义了表示浮点数的格式（包括负零-0）与反常值（denormal number）），一些特殊数值（无穷（Inf）与非数值（NaN）），以及这些数值的“浮点数运算符”；它也指明了四种数值舍入规则和五种例外状况（包括例外发生的时机与处理方式）。</p>
<p>IEEE 754规定了四种表示浮点数值的方式：单精确度（32位）、双精确度（64位）、延伸单精确度（43比特以上，很少使用）与延伸双精确度（79比特以上，通常以80比特实做）。只有32位模式有强制要求，其他都是选择性的。大部分编程语言都有提供IEEE浮点数格式与算术，但有些将其列为非必需的。例如，IEEE 754问世之前就有的C语言，现在有包括IEEE算术，但不算作强制要求（C语言的<code>float</code>通常是指IEEE单精确度，而<code>double</code>是指双精确度）。</p>
<p>该标准的全称为<strong>IEEE二进制浮点数算术标准（ANSI/IEEE Std 754-1985）</strong>，又称<strong>IEC 60559:1989，微处理器系统的二进制浮点数算术</strong>（本来的编号是IEC 559:1989）。后来还有“与基数无关的浮点数”的“IEEE 854-1987标准”，有规定基数为2跟10的状况。现在最新标准是“IEEE 854-2008标准”。</p>
<h2 id="variable">Variable</h2>
<p>C++ 与 ANSI C（C99标准）不同之处，在于后者只保证名称中的前63个字符有意义，即使第64个字符不同，但是只要前63个字符相同的变量则被认为是相同的。</p>
<p>在某些情况下，其他程序员会使用的变量命名风格及其意义：</p>
<ul>
<li><code>str</code> 或 <code>sz</code> 前缀：表示以空字符结束的字符串</li>
<li><code>b</code> 前缀：表示布尔值</li>
<li><code>p</code> 前缀：表示指针</li>
<li><code>c</code> 前缀：表示单个字符</li>
</ul>
<h2 id="class">Class</h2>
<p><strong>类</strong>：（用户定义/标准的）数据类型规范，详细描述了如何表示信息以及对数据执行的操作。</p>
<p><strong>对象</strong>：是根据类规范创建的实体（好似之于变量和基本数据类型）。</p>
<p>就像函数可以来自函数库一样，类也可以来自 <strong>类库</strong>。从技术上说，大部分类库都没有被内置到C++语言中，而是语言标准指定的类。<strong>类定义</strong> 位于类库文件中，并没有被内置到编译器里（有需要可以修改，虽然不建议）。</p>
<p>C++之所以如此有吸引力，很大程度上是由于存在大量支持UNIX、Macintosh 和 Windows 编程的类库。</p>
<p><strong>类描述</strong> 指定了可以对类对象执行的所有操作。要对特定对象执行这些允许的操作有两种方法，一是直接使用类方法（本质即函数调用），二是重定义运算符（如 <code>cin</code> 和 <code>cout</code> 使用的 <code>&gt;&gt;</code> 和 <code>&lt;&lt;</code> ）</p>
<h2 id="function">Function</h2>
<p>被调用的函数称为 <strong>被调用函数</strong>（called function），包含函数调用的函数称为 <strong>调用函数</strong>（calling function）。</p>
<p><strong>函数原型</strong>：即 <strong>函数声明</strong>，函数原型或声明只描述函数接口，指仅有函数头和分号 <code>;</code> 而没有函数体的语句。函数原型定义了需要传递给函数的参数以及函数本身需要返回的值的类型。</p>
<p><strong>库文件</strong>：存放了函数编译代码的文件。</p>
<p><strong>头文件</strong>：包含了函数原型的文件。</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211030171703.png" alt="image-20211028085847535" /><figcaption aria-hidden="true">image-20211028085847535</figcaption>
</figure>
<blockquote>
<p>在有些语言中，有返回值的函数被称为 <strong>函数</strong>（function），无返回值的函数被称为 <strong>过程</strong>（procedure） 或 子程序（subroutine）。</p>
<p>但在C/C++中，都被称为 <strong>函数</strong>。</p>
</blockquote>
<h3 id="main-function">Main Function</h3>
<ul>
<li>有什么有些IDE中的main函数的括号里是带参数的？</li>
</ul>
<p>是否在 主函数<code>main()</code> 参数括号 <code>()</code> 中使用关键字 <code>void</code> ，在C++和C中有明显的区别：</p>
<ul>
<li>在C++中，让括号空着和在括号中写 <code>void</code> 等效。</li>
<li>而在C中，让括号空着意味着对是否接受参数保持沉默。</li>
</ul>
<blockquote>
<p><code>int main(int argc, const char * argv[])</code> 是UNIX和linux中的标准写法。<code>int main()</code> 只是默许的用法。</p>
<p>使用main函数时经常都是不带参数的，因此main 后的括号都是空括号。实际上，main函数可以带参数，这个参数可以认为是 main函数的 <strong>形式参数</strong>。</p>
<p>Ｃ语言规定</p>
<ol type="1">
<li>main函数的参数只能有两个，习惯上这两个参数写为 <code>argc</code> 和 <code>argv</code>。因此，main函数的函数头可写为：<code>main (argc,argv)</code> 。</li>
<li><code>argc</code> （第一个形参）必须是 <strong>整型变量</strong> ，<code>argv</code> （第二个形参）必须是指向字符串的 <strong>指针数组</strong>。</li>
</ol>
<p>由于main函数不能被其它函数调用，因此不可能在程序内部取得实际值。那么，在何处把实参值赋予main函数的形参呢?</p>
<p>实际上，main函数的参数值是从 <strong>操作系统命令行</strong>/Terminal 上获得的。当我们要运行一个可执行文件时，输入空格，输入文件名，再输入实际参数即可把这些实参传送到main的形参中去。</p>
</blockquote>
<p><code>argc</code> 的数值会随着通过命令行传递给可执行文件的参数的增加而增加，即 <code>argc</code> 其实是代表着 <strong>参数的数量</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211030171706.png" alt="image-20211027144512641" /><figcaption aria-hidden="true">image-20211027144512641</figcaption>
</figure>
<h2 id="编译指令">编译指令</h2>
<p><code>using</code> 是编译指令的关键字，</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《<a target="_blank" rel="noopener" href="https://storage.islet.space/01_Learning/02_CPP/C%2B%2B_Primer_Plus.pdf">C++ Primer Plus</a>》</li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ab21bfe6a5b2">int main(int argc, const char * argv[])</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/cpp/cpp/cpp-type-system-modern-cpp?view=msvc-160">C++ 类型系统</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/noble/p/4144120.html">IEEE二进制浮点数算术标准（IEEE 754）</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.12.0/dist/mermaid.min.js","integrity":"sha256-0dD7vUjUCTGJjeLnPotQQJIcSzug5fO6WDMYYyNIX4c="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"enable","tags":"all","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
