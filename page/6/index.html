<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"islet.space","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="笔记分享的旮旯孤岛而已">
<meta property="og:type" content="website">
<meta property="og:title" content="Coder的孤岛">
<meta property="og:url" content="http://islet.space/page/6/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="笔记分享的旮旯孤岛而已">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liewzheng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://islet.space/page/6/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/6/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Coder的孤岛</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
        <li class="menu-item menu-item-目录"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-简历"><a href="/resume/" rel="section"><i class="fa fa-address-card fa-fw"></i>简历</a></li>
        <li class="menu-item menu-item-友链"><a href="/friends/" rel="section"><i class="fa fa-group fa-fw"></i>友链</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">95</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">174</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@foxmail.com" title="E-Mail → mailto:liewzheng@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/05/05/Signal/2021-05-05-%E6%A8%A1%E6%95%B0%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E5%8F%AF%E7%BC%96%E7%A8%8B%E5%A2%9E%E7%9B%8A%E6%94%BE%E5%A4%A7%E5%99%A8%EF%BC%88PGA%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/05/Signal/2021-05-05-%E6%A8%A1%E6%95%B0%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E5%8F%AF%E7%BC%96%E7%A8%8B%E5%A2%9E%E7%9B%8A%E6%94%BE%E5%A4%A7%E5%99%A8%EF%BC%88PGA%EF%BC%89/" class="post-title-link" itemprop="url">模数接口中的可编程增益放大器（PGA）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-05-05 23:58:32" itemprop="dateCreated datePublished" datetime="2021-05-05T23:58:32+08:00">2021-05-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-05-20 22:53:04" itemprop="dateModified" datetime="2021-05-20T22:53:04+08:00">2021-05-20</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Signal/" itemprop="url" rel="index"><span itemprop="name">Signal</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>原文出处：https://www.21ic.com/app/analog/201207/134812.htm</p>
<p>用可编程增益放大器(PGA)处理数据采集系统中传感器/变送器模拟输出和信号处理数字之间的接口。单片和高集成度PGA现在被可编程、更高精度、更高吞吐量和更小封装尺寸的模块和混合方案替代。</p>
<p>由于来自传感器/变送器的模拟信号的本性，使其工作必须具备相当大的动态范围。这要求采用连续增益级在进行任何实际的数字处理之前增大这些信号，PGA能满足这种要求。</p>
<p>PGA是可变增益放大器(VGA)的一种。VGA提供可变和连续增益控制，而PGA <mark>必须在软件控制下以固定步(通常6dB步)做到可变增益控制</mark>。达到更精细的分辨步0.5dB是可能的。 一般多通道数据采集系统用很多不同类型的传感器/变送器，这包括 <strong>热电偶</strong>、<strong>惠斯登电桥</strong>，<strong>热敏电阻</strong>、<strong>应变计</strong> 和 <strong>超声系统</strong>。虽然，传感器/变送器是基于不同的物理原理，但大多数产品是 <strong>以电压做为输出</strong>。甚至这会产生中间值(如电容或电阻)，但最终变换为电压，以便在数据采集系统中进行</p>
<p><img src="http://pic.islet.space/2021/04/fb222bc5a544088d5a7fc0c708476621.jpg" /></p>
<p>传感器/变送器的输出可覆盖非常大的范围，需要PGA来处理传感器/变送器输出到ADC的接口。</p>
<blockquote>
<p>例如，在工业过程控制系统中，低频信号可以几毫伏到几伏变化。需要PGA来匹配这种宽传感器/变送器输出范围到特定的ADC输入范围。通常，在输入数据采集通道最低信号电平与最高信号电平之比是2个量级或更大。 12位ADC接收小于ADC满标输入十分之一的信号仅可提供8位分辨率，除非在信号到达ADC之前用PGA放大。PGA允许在软件控制下使接收信号的增益达到宽范围增益一带宽乘积。这可避免钳位并允许采用较便宜的ADC，如用12位ADC替代16位ADC。</p>
</blockquote>
<p>PGA可做更多事情。PGA缓冲来自前级(通常是多路转换器)ADC的输入，防止多路转换器导通电阻所引起的加载。PGA也提供差分别单端的变换，大多数跟踪和保持型ADC需要单输入。把PGA连接到差分多路转换器输出时，PGA提供共模抑制。</p>
<p>在市场上可以得到很多种PGA和支持元件。这包括可独立应用的运放被专门设计成PGA、ASIC、集成有可编程滤波器的PGA、仪表放大器PGA、用于运放的数字电位器前端、PGA用数字可编程分压器、ADC驱动器。有时把PGA和DAC集成在同一芯片上。</p>
<p>对于不需要信号宽动态范围的应用，PGA不是必须的。放大器可以直接接口传感器/变送器到ADC。</p>
<blockquote>
<p>例如，Maxim的MAX1494仪表放大器适合于250V/V或更小增益范围的应用。</p>
</blockquote>
<h1 id="各种性能的pga">各种性能的PGA</h1>
<p>对于特殊性能参量(如高增益稳定性和高精度，低漂移，低失真，高输出驱动电流，高转换率，快速建立时间，高共模抑制比，低功率和小尺寸)有很多PGA是最佳的。</p>
<blockquote>
<ul>
<li>Microchip公司的MCP6S2X家族PGA具有2、6和8通道输入，包含多路转换器并可通过串行外设接口(SPI)总线进行增益控制和通道选择。</li>
<li>NS公司的LMH6718IC是双PGA，具有高输出(200mA)驱动信号。<br />
</li>
<li>高性能小封装的PAG有ADI公司的AD8555，这是封装在微型8引线SOIC中的数字可编程信号调理自动零放大器，它包含放大器，比较器，用Digit Trim技术的电阻调节分压器和缓冲器。其500V/℃总输入失调漂移是其他竞争产品的1/20。</li>
<li>Linear公司的LTC6915A也是小封装高性能PGA。此仪表放大器封装为16引线SSOP或12引线DFN，可把它放置在最靠近传感器/变送器的地方。它所占电路板面积是等效分立方案的1/6。零漂移特性具有高达4096的宽可编程动态范围(增益精度0.1%)。它也有50mV/℃漂移和与增益无关的125dB CMRR。<br />
</li>
<li>对于低失真是主要考虑因素的应用，可以选择Intersil公司PGA缓冲器HFA11XX，其低失真电平低到-73dBc、噪声电平低到7"9nV/√Hz。</li>
<li>TI公司的THS7001/7002单/双PGA采用Power PAD封装，包含分离的低噪声前置放大器和增益放大级。此器件可达到非常低的噪声电平(低到1.7nV/√Hz)。</li>
<li>其他可注意的PGA包括ADI公司的AD628首款具有可编程增益的共模差分放大器和Linear公司的LTC1564 PGA(除放大器外，它还具有8阶软件可编程抗混淆滤波器)。</li>
</ul>
</blockquote>
<p>PGA也集成有其他前端电路。</p>
<blockquote>
<p>如Maxim公司的MAX14XX家族，这是包含PGA的信号调理ASIC。这种器件直接用于传感器/变送器和ADC之间。</p>
<p>Maxim公司的ADC驱动器MAX2055具有低失真(-76dBc 2次谐波和-69dBc 3次谐波)特性，其差分输出是为驱动高速ADC专门设计的。</p>
</blockquote>
<p>一些PGA供应商也提供驱动PGA前端的数字电位计和分压器IC。</p>
<blockquote>
<p>例如，Maxim公司的MAX5420/21数字可编程电压分压器；</p>
<p>ADI公司的AD5321数字电位计(常用于可编程增益和衰减的非易失性存储器)。</p>
<p>另外，Xicor也提供不少PGA器件，这些PGA器件对于执行数字控制的电位计(DCP)是最佳的。</p>
</blockquote>
<h1 id="集成方案">集成方案</h1>
<p>现在，很多公司把PGA和其他信号调理电路直接集成在ADC芯片上。这种方法有利于所占空间更小，比分离PGA和ADC方案具有更好的性能。然而，其成本比较高，集成PGA在ADC上除灵活性较低外，还有 <mark>较高的时钟噪声电平</mark>。</p>
<blockquote>
<p>带线化前端的Maxim公司的MAX1457(图2)传统器线性化IC就是其中一种，它包含12位ADC。</p>
<p>ADI公司的ADC7707高精度信号调理16位S-D ADC包含多路转换器、缓冲器、PGA、电荷平衡电路、串行接口和时钟产生器。</p>
<p>ADI公司的ADC7708/18S-D6位/24位ADC具有与AD7707相同的电路，但它们的目标是低电压和低功率应用。</p>
</blockquote>
<figure>
<img src="http://pic.islet.space/2021/04/8b55f596bcfdf9a408bd3c959504fb21.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>一个感兴趣的高集成度ADC是ADC7731 24位S-D器件，它具有ADC77017的所有电路。另外，还加上定标微控制器(图3)。此IC的目标是低噪声高吞吐量应用。</p>
<p>Maxim公司也有带集成PGA的双6位ADC，它具有90Sample/s吞吐率、功耗仅550mW。</p>
<p><img src="http://pic.islet.space/2021/04/8CzZ7BjS2OMEYQJ.jpg" /></p>
<p>我们将会看到更多包含PGA和其他信号处理电路的ADC吗？</p>
<p>不可回避的事实是高集成度是IC业的准则，而PGA和其他信号调理支持电路也不例外。所以希望看到PGA与ADC集成在同一芯片，并能解决片上性能参量(如时钟引起的噪声)和降低高分辨率器件的单个ADC价格。</p>
<p>事实上，设计人员主要的目标是把传感器/变送器电路放在高集成度ADC上。</p>
<p>这将是最终解决问题：现实世界模拟信号与计算机的数字世界结合起来的途经。</p>
<p>这也将聚焦在模拟和数字电路设计的两种不同方法。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/05/05/Signal/2021-05-05-%E5%88%86%E8%B4%9D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/05/Signal/2021-05-05-%E5%88%86%E8%B4%9D/" class="post-title-link" itemprop="url">分贝</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-05-05 14:30:32" itemprop="dateCreated datePublished" datetime="2021-05-05T14:30:32+08:00">2021-05-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-05-09 13:01:39" itemprop="dateModified" datetime="2021-05-09T13:01:39+08:00">2021-05-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Signal/" itemprop="url" rel="index"><span itemprop="name">Signal</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%88%86%E8%B2%9D">Wikipedia</a></p>
<h1 id="分貝">分貝</h1>
<p><strong>分贝</strong>（decibel）是量度两个相同单位之数量<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/比例">比例</a>的单位，常用<strong>dB</strong>表示。“<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/分">分</a>”（deci-）指十分之一，个位是“贝”或“贝尔”（bel，纪念发明家<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/亚历山大·格拉汉姆·贝尔">亚历山大·格拉汉姆·贝尔</a>），但一般只用分贝。</p>
<table>
<thead>
<tr class="header">
<th>dB</th>
<th>声能比</th>
<th>声压比</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>100</td>
<td>10 000 000 000</td>
<td></td>
<td>100 000</td>
<td></td>
</tr>
<tr class="even">
<td>90</td>
<td>1 000 000 000</td>
<td></td>
<td>31 623</td>
<td></td>
</tr>
<tr class="odd">
<td>80</td>
<td>100 000 000</td>
<td></td>
<td>10 000</td>
<td></td>
</tr>
<tr class="even">
<td>70</td>
<td>10 000 000</td>
<td></td>
<td>3 162</td>
<td></td>
</tr>
<tr class="odd">
<td>60</td>
<td>1 000 000</td>
<td></td>
<td>1 000</td>
<td></td>
</tr>
<tr class="even">
<td>50</td>
<td>100 000</td>
<td></td>
<td>316</td>
<td>.2</td>
</tr>
<tr class="odd">
<td>40</td>
<td>10 000</td>
<td></td>
<td>100</td>
<td></td>
</tr>
<tr class="even">
<td>30</td>
<td>1 000</td>
<td></td>
<td>31</td>
<td>.62</td>
</tr>
<tr class="odd">
<td>20</td>
<td>100</td>
<td></td>
<td>10</td>
<td></td>
</tr>
<tr class="even">
<td>10</td>
<td>10</td>
<td></td>
<td>3</td>
<td>.162</td>
</tr>
<tr class="odd">
<td>6</td>
<td>3</td>
<td>.981（≈4）</td>
<td>1</td>
<td>.995（≈2）</td>
</tr>
<tr class="even">
<td>3</td>
<td>1</td>
<td>.995（≈2）</td>
<td>1</td>
<td>.413（≈√2）</td>
</tr>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>.259</td>
<td>1</td>
<td>.122</td>
</tr>
<tr class="even">
<td>0</td>
<td>1</td>
<td></td>
<td>1</td>
<td></td>
</tr>
<tr class="odd">
<td>-3</td>
<td>0</td>
<td>.501（≈½）</td>
<td>0</td>
<td>.708（≈√½）</td>
</tr>
<tr class="even">
<td>-6</td>
<td>0</td>
<td>.251（≈¼）</td>
<td>0</td>
<td>.501（≈½）</td>
</tr>
<tr class="odd">
<td>-10</td>
<td>0</td>
<td>.1</td>
<td>0</td>
<td>.316 2</td>
</tr>
<tr class="even">
<td>-20</td>
<td>0</td>
<td>.01</td>
<td>0</td>
<td>.1</td>
</tr>
<tr class="odd">
<td>-30</td>
<td>0</td>
<td>.001</td>
<td>0</td>
<td>.031 62</td>
</tr>
<tr class="even">
<td>-40</td>
<td>0</td>
<td>.000 1</td>
<td>0</td>
<td>.01</td>
</tr>
<tr class="odd">
<td>-50</td>
<td>0</td>
<td>.000 01</td>
<td>0</td>
<td>.003 162</td>
</tr>
<tr class="even">
<td>-60</td>
<td>0</td>
<td>.000 001</td>
<td>0</td>
<td>.001</td>
</tr>
<tr class="odd">
<td>-70</td>
<td>0</td>
<td>.000 000 1</td>
<td>0</td>
<td>.000 316 2</td>
</tr>
<tr class="even">
<td>-80</td>
<td>0</td>
<td>.000 000 01</td>
<td>0</td>
<td>.000 1</td>
</tr>
<tr class="odd">
<td>-90</td>
<td>0</td>
<td>.000 000 001</td>
<td>0</td>
<td>.000 031 62</td>
</tr>
<tr class="even">
<td>-100</td>
<td>0</td>
<td>.000 000 000 1</td>
<td>0</td>
<td>.000 01</td>
</tr>
</tbody>
</table>
<p>这是一个说明声源能量 (<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/87f9e315fd7e2ba406057a97300593c4802b53e4" alt="x" />), 声压 (<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/d62b24be305beff66cba9bfbcc01a362ba390f44" alt="{}" />)，与声音分贝数 dB (<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/be2b0b75f65fbc06b19e6e8548ce8ec33b0c0c4f" alt="{_{10}{x}}" />) 正比关系的对照表 从声音分贝数 dB 只有 2~3 个数字的差异，相比声源或声压 9~10 个数字的差异，dB可<strong>帮助人们更快的理解数字代表的意义</strong>。</p>
<h2 id="计算方法">计算方法</h2>
<p>分贝（dB）是十分之一贝尔（B）：<code>1B = 10dB</code>。1贝尔的两个功率量的比值是10:1，1贝尔的两个场量的比值是<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/2f35055a56f97ce282bf4797deddb716cfa8a924" alt="{}:1" />[<a href="about:reader?url=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E5%88%86%E8%B2%9D#cite_note-1">1]</a>。'</p>
<p>场量（field quantity）是诸如<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/电压">电压</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/电流">电流</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/声压">声压</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/电场强度">电场强度</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/速度">速度</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/電荷密度">电荷密度</a>等量值，其平方值在一个线性系统中与功率成比例。功率量（power quantity）是功率值或者直接与功率值成比例的其它量，如<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/能量密度">能量密度</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/音强">音强</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/发光强度">发光强度</a>等。</p>
<p>分贝的计算，依赖于是 <strong>功率量</strong> 还是 <strong>场量</strong> 而不同。</p>
<p>两个信号具有1分贝的差异，那么其功率比值是1.25892（即<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/99d92002d56747705f253a7c0aac2c7e4c310f20" alt="10^{}," />）而幅值之比是1.12202（即<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/a515a9617441696adc7fb0f3a2cd1f74210cee64" alt="{}^{}," />）[<a href="about:reader?url=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E5%88%86%E8%B2%9D#cite_note-2">2]</a>。</p>
<h2 id="好处">好处</h2>
<p>使用分贝有很多便利之处：</p>
<ul>
<li>分贝实际上是对数值，因此可以用常用的数量来表示非常大的比值，可以清楚地表示非常大的数量变化。</li>
<li>多部件系统的整体增益（如级联的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/放大器">放大器</a>）可以直接用各部件的增益分贝相加而求得。不必把这些增益值相乘（例如log(A × B × C) = log(A) + log(B) + log(C)）。</li>
<li>人对强度的感知，如声音或者光照，更接近与强度的对数成正比而不是强度值本身，依据<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/韋伯定理">韦伯定理</a>，因此分贝值可用于描述感知级别或级差。</li>
</ul>
<h2 id="使用">使用</h2>
<h3 id="声学">声学</h3>
<p>声学中，<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/声强">声音的强度</a>定义为声压。计算分贝值时采用20微帕斯卡为参考值[<a href="about:reader?url=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E5%88%86%E8%B2%9D#cite_note-ElectronicEngineersHandbook-5">5]</a>。这一参考值是人类对声音能够感知的阈值下限。声压是场量，因此使用声压计算分贝时使用下述版本的公式：</p>
<figure>
<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/3994b439a75418d133c3c75063bdea671f5f16ae" alt="声音强度公式" /><figcaption aria-hidden="true">声音强度公式</figcaption>
</figure>
<p>在空气中 <strong>1帕斯卡等于94分贝声压级</strong>。在其他介质，如水下，1微帕斯卡更为普遍[<a href="about:reader?url=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E5%88%86%E8%B2%9D#cite_note-Morfey-6">6]</a>。这些标准被<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/ANSI">ANSI</a>S1.1-1994.所收录[<a href="about:reader?url=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E5%88%86%E8%B2%9D#cite_note-7">7]</a>。</p>
<p>人耳对声音感知具有很大的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/动态范围">动态范围</a>。从短期暴露即会永久损害听力的声强到最静的人耳能听到的声强，其比值是1万亿（10<sup>12</sup>）。[<a href="about:reader?url=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E5%88%86%E8%B2%9D#cite_note-8">8]</a>这么大的比值范围表示为对数度量：1万亿（10<sup>12</sup>）基于10的对数为12，用分贝表示是240。人的听力并不是对所有频率都是相同敏感，最敏感的频率范围是20<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/赫兹">Hz</a>~20<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/千赫兹">kHz</a>.</p>
<p>当一个空间受外来声音干扰，而影响预期的正常作息时，需要建置一个六面结构的宁静空间，而当宁静空间建置完成后，能否达到预期的效果，则于施工前制定一个规范，此规范即为声学规范。</p>
<h3 id="电子学">电子学</h3>
<p>电子学中，通常用分贝表示功率或幅值之比（<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/增益">增益</a>），而不常用算术比或者百分比。一项好处是一些列部件组成的系统的总增益是各部件增益之和。类似的，电信领域中，从一个发射器到一个接收器通过一些媒介（<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/w/index.php?title=光无线通信&amp;action=edit&amp;redlink=1">光无线通信</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/波导">波导</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/同轴电缆">同轴电缆</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/光纤">光纤</a>等等）的信号增益用分贝表示，用于<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/链路预算">链路预算</a>。</p>
<p>分贝也可以组合一些后缀，表示电功率的绝对单位。例如，后缀"m"表示"毫瓦"组合出"dBm"，0 dBm等于1毫瓦，1 dBm约为1.259 毫瓦。</p>
<p>在专业声学领域，常用单位是dBu。"u"代表"unloaded"。dBu是电压的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/平方平均数">平方平均数</a>（RMS）度量的单位，其参考电压约为 0.775 VRMS。由于历史原因，此参考电压是在600欧姆电阻上耗散1 mW功率的电压，用于电话音频电路的标准阻抗。</p>
<h2 id="后缀与参考值">后缀与参考值</h2>
<p>dB与后缀的组合，指出计算比值时的参考值。例如dBm指示功率值与1毫瓦的比值的分贝数。</p>
<p>如果计算分贝时的参考值明确、确切地给出，那么分贝数值可以作为绝对量，如同被测量的功率量或者场量。例如，20dBm即为100毫瓦。</p>
<p>SI国际单位制不允许使用分贝与后缀的组合形式如dBm, dBu, dBA，等等[<a href="about:reader?url=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E5%88%86%E8%B2%9D#cite_note-13">13]</a>。但这种不遵从SI单位制的表示却广泛应用于很多场合。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/05/05/Signal/2021-05-05-%E4%BD%BF%E7%94%A8ADAU1761-PGA%E3%80%81ALC-%E7%9A%84DSP%E6%8E%A7%E5%88%B6%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/05/Signal/2021-05-05-%E4%BD%BF%E7%94%A8ADAU1761-PGA%E3%80%81ALC-%E7%9A%84DSP%E6%8E%A7%E5%88%B6%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">使用ADAU1761 PGA、ALC 的DSP控制模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-05-05 11:00:32" itemprop="dateCreated datePublished" datetime="2021-05-05T11:00:32+08:00">2021-05-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-05-09 13:01:38" itemprop="dateModified" datetime="2021-05-09T13:01:38+08:00">2021-05-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Signal/" itemprop="url" rel="index"><span itemprop="name">Signal</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="使用adau1761-pga-alc的dsp控制模式">使用ADAU1761 PGA / ALC的DSP控制模式</h1>
<p>ADAU1761模拟前端具有ALC（自动电平控制）功能，可根据输入信号的电平动态设置差分输入路径的增益。但是，可以绕过ALC，DSP程序可以直接控制应用于 <strong>差分输入</strong> 的增益量。</p>
<p>为此，一个或两个通道的差分路径需要<strong>启用和取消静音</strong>。为了启用 <strong>差分路径</strong>，还应根据需要将<strong>LDBOOST</strong>（和/或<strong>RDBOOST</strong>）设置为0 dB或20 dB。</p>
<p><a target="_blank" rel="noopener" href="https://ez.analog.com/cfs-file/__key/communityserver-wikis-components-files/00-00-00-01-75/1e169c85b74a88a01485d3c18fecd396.jpg"><img src="https://ez.analog.com/cfs-filesystemfile/__key/communityserver-components-secureimagefileviewer/communityserver-wikis-components-files-00-00-00-01-75/1e169c85b74a88a01485d3c18fecd396.jpg_2D00_373x238.jpg?_=636716033579270573" alt="img" /></a></p>
<p>然后，<strong>应将ALCSEL</strong>位设置为<strong>DSP控制</strong>模式。</p>
<p><a target="_blank" rel="noopener" href="https://ez.analog.com/cfs-file/__key/communityserver-wikis-components-files/00-00-00-01-75/be2493be5fd62ceb941ade31bb1c2ea2.jpg"><img src="https://ez.analog.com/cfs-filesystemfile/__key/communityserver-components-secureimagefileviewer/communityserver-wikis-components-files-00-00-00-01-75/be2493be5fd62ceb941ade31bb1c2ea2.jpg_2D00_136x228.jpg?_=636716033581410640" alt="img" /></a></p>
<p>现在，在DSP程序原理图中，用户可以将<strong>AIGC输出</strong>单元添加到项目中：</p>
<p><a target="_blank" rel="noopener" href="https://ez.analog.com/cfs-file/__key/communityserver-wikis-components-files/00-00-00-01-75/a6abc0254ac0020e47fd1b347f706504.jpg"><img src="https://ez.analog.com/cfs-filesystemfile/__key/communityserver-components-secureimagefileviewer/communityserver-wikis-components-files-00-00-00-01-75/a6abc0254ac0020e47fd1b347f706504.jpg_2D00_215x49.jpg?_=636716033575290474" alt="img" /></a></p>
<p>通道0映射到左侧的PGA。</p>
<p><a target="_blank" rel="noopener" href="https://ez.analog.com/cfs-file/__key/communityserver-wikis-components-files/00-00-00-01-75/524d0fbf699c770a6e85e142dd636b3b.png"><img src="https://ez.analog.com/cfs-filesystemfile/__key/communityserver-components-secureimagefileviewer/communityserver-wikis-components-files-00-00-00-01-75/524d0fbf699c770a6e85e142dd636b3b.png_2D00_91x54.png?_=636716033578360546" alt="img" /></a></p>
<p>通道1映射到右侧的PGA。</p>
<p><a target="_blank" rel="noopener" href="https://ez.analog.com/cfs-file/__key/communityserver-wikis-components-files/00-00-00-01-75/3a9410be5a75f96f99e4087743e69d2f.jpg"><img src="https://ez.analog.com/cfs-filesystemfile/__key/communityserver-components-secureimagefileviewer/communityserver-wikis-components-files-00-00-00-01-75/3a9410be5a75f96f99e4087743e69d2f.jpg_2D00_94x57.jpg?_=636716033575450467" alt="img" /></a></p>
<p>现在，馈送到这些单元中每个单元的5.23信号确定了相应PGA的增益。</p>
<p>作为一个简单的示例，要将每个PGA的增益设置为0.5（或-6 dB），请从<strong>Sources</strong>库创建一个<strong>DC Input Entry</strong>单元并将其设置为0.5，然后将其连接到<strong>AIGC输出</strong>。</p>
<p><a target="_blank" rel="noopener" href="https://ez.analog.com/cfs-file/__key/communityserver-wikis-components-files/00-00-00-01-75/462b7691a9c4c01ab55c2f09825bd18e.jpg"><img src="https://ez.analog.com/cfs-filesystemfile/__key/communityserver-components-secureimagefileviewer/communityserver-wikis-components-files-00-00-00-01-75/462b7691a9c4c01ab55c2f09825bd18e.jpg_2D00_208x103.jpg?_=636716033578360546" alt="img" /></a></p>
<p>在下一个示例中，使用“<strong>乘”</strong>和“<strong>加”</strong>单元缩放并移动10 Hz的<strong>正弦音调</strong>，使其范围在0到1之间，然后将其发送到<strong>AIGC输出</strong>单元。这会导致PGA增益在0 dB和静音之间快速来回移动，从而产生颤音效果。</p>
<p><a target="_blank" rel="noopener" href="https://ez.analog.com/cfs-file/__key/communityserver-wikis-components-files/00-00-00-01-75/8f391a0c6d528ce961e9f54617503cd9.jpg"><img src="https://ez.analog.com/cfs-filesystemfile/__key/communityserver-components-secureimagefileviewer/communityserver-wikis-components-files-00-00-00-01-75/8f391a0c6d528ce961e9f54617503cd9.jpg_2D00_349x178.jpg?_=636716033575530468" alt="img" /></a></p>
<p>在下面的示例中，每个输入的峰值电平由“<strong>峰值包络”</strong>单元检测，并且使用“<strong>除法”</strong>单元和“ <strong>DC输入条目”</strong>单元创建该信号的反相。结果发送到<strong>AIGC输出</strong>单元。这意味着输入峰值电平的倒数用于缩放PGA增益。结果是，当输入信号为低电平时，增益较高；但是，当输入电平增加时，增益将降低以避免削波。</p>
<p><a target="_blank" rel="noopener" href="https://ez.analog.com/cfs-file/__key/communityserver-wikis-components-files/00-00-00-01-75/d24015ce9b3e9d247f8a8fb1e43943a3.jpg"><img src="https://ez.analog.com/cfs-filesystemfile/__key/communityserver-components-secureimagefileviewer/communityserver-wikis-components-files-00-00-00-01-75/d24015ce9b3e9d247f8a8fb1e43943a3.jpg_2D00_400x379.jpg?_=636716033578810577" alt="img" /></a></p>
<p>这些只是在ADAU1761的PGA上使用DSP控制模式可以完成的操作的几个示例。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/05/03/Signal/2021-05-03-%E9%9F%B3%E9%A2%91%E8%AE%BE%E5%A4%87%E8%BF%9E%E6%8E%A5%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/03/Signal/2021-05-03-%E9%9F%B3%E9%A2%91%E8%AE%BE%E5%A4%87%E8%BF%9E%E6%8E%A5%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="post-title-link" itemprop="url">音频设备连接基础知识</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-05-03 17:08:00" itemprop="dateCreated datePublished" datetime="2021-05-03T17:08:00+08:00">2021-05-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-07 00:03:25" itemprop="dateModified" datetime="2021-08-07T00:03:25+08:00">2021-08-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Signal/" itemprop="url" rel="index"><span itemprop="name">Signal</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>​</p>
<p><a target="_blank" rel="noopener" href="https://www.sohu.com/a/418986148_142772">sohu.com</a></p>
<h1 id="阻抗介绍">阻抗介绍</h1>
<p>仅针对音频系统中的电路进行说明</p>
<ul>
<li>在对电路施加电压时，电阻抗是 <strong>对电路中交流电的抵抗力的度量</strong>。</li>
<li>阻抗以欧姆为单位（类似于电阻）测量，并且 <strong>可以认为是交流电路中的一种“交流电阻”</strong>。</li>
<li>音频信号是交流电压，因为它们同时具有负电压和正电压（信号的正振幅和负振幅）。<strong>因此，音频信号是交流电</strong>（具有负电流和正电流）。</li>
<li>仅当<strong>上级设备</strong>输出连接到前置放大器（或串联的下一个音频设备）时，音频信号才会通过。（上级设备的输出必须创建一个带有负载的电路，以使音频信号流动。）</li>
</ul>
<p><img src="https://pic.islet.space/2021/05/a0fcf0d70d88400289cafcd70441614e.png" alt="img" style="zoom:33%;" /></p>
<p>在音频系统的连接中，有各式各样的设备进行设备串联，首先说两个概念：</p>
<blockquote>
<p><strong>输出阻抗</strong>： 音频设备输出端上的固有阻抗。</p>
<p><strong>负载阻抗</strong>： 音频设备下一级（通常是前置放大器）的输入阻抗，该阻抗与上级的输出共同构成电路。</p>
</blockquote>
<p>在音频行业内，行业规定 <mark>输入接口的阻抗应为输出阻抗的10倍以上，这样才能保证音频信号的传输质量</mark>。</p>
<p><mark>这样的 “<strong>阻抗匹配</strong>” 其实是为了 “<strong>电压匹配</strong>” ，而不是传统电学概念中的输入输出等阻抗的“阻抗匹配”。</mark></p>
<p>源输出阻抗和输入阻抗之间的电压传递公式：</p>
<p><strong>V<sub>L</sub>= Z<sub>L</sub>·V<sub>S</sub> / (Z<sub>S</sub>+ Z<sub>L</sub>)</strong></p>
<blockquote>
<p>V<sub>L</sub>输入端 =前置放大器输入端的电压。</p>
<p>V<sub>S</sub>输出端 =麦克风输出端的电压。</p>
<p>Z<sub>L</sub>输入端 =前置放大器的输入阻抗（麦克风负载阻抗）。</p>
<p>Z<sub>S</sub>输出端 =麦克风输出阻抗。</p>
</blockquote>
<p>可以将其可视化为简单的分压器：</p>
<p><img src="https://pic.islet.space/2021/05/db9e3783f23c47a4b3529b34e2d8710a.png" alt="img" style="zoom: 33%;" /></p>
<div style="text-align: center; font-size: 10px; color: #aaa;">
图 简化电路
</div>
<p>不难推算，如果其他所有条件保持不变，增加负载阻抗“ Z输入端”可使上级设备的输出电压与前置放大器的输入电压之间的匹配度更高。</p>
<p>Z输入端起码要达到Z输出端的10倍以上，电压才可达到源输出端电压的90%，但是我们也不希望输入端的阻抗过大，因为阻抗过高会增加线路出现噪音的可能。</p>
<p>这种最大化的电压传输称为“阻抗桥接”，或者称为“电压匹配”。</p>
<h1 id="音频信号">音频信号</h1>
<p>HOLA，在了解完阻抗的秘密之后，在这里我们简单说一下各个种类的信号等级和阻抗的差异。我们在这说下经常遇到的三类信号：<strong>麦克风信号</strong>、<strong>线路信号</strong>、<strong>乐器信号</strong>。</p>
<div style="text-align: center; font-size: 10px; color: #aaa;">
表 各类信号参数表
</div>
<p><img src="https://pic.islet.space/2021/05/0a2b0b9619794c908f565d648a72eec6.png" alt="img" style="zoom:50%;" /></p>
<p><strong>麦克风信号</strong>，就是麦克风输出的信号，其电平大概在 <strong>-60dBV和-40dBV（0.001V - 0.010V)之间</strong>，通常需要前级放大器的放大才能正常使用，麦克风的<strong>输出阻抗通常在150Ω至200Ω之间</strong>。</p>
<p>所以呢，你的声卡或者话放的Mic Input（麦克风输入）接口的阻值应至少该有1500Ω。</p>
<p><img src="https://pic.islet.space/2021/05/d969f365edb84996b66525d18320fe3c.jpeg" alt="img" style="zoom:50%;" /></p>
<div style="text-align: center; font-size: 10px; color: #aaa;">
图 麦克风信号输入接口
</div>
<p><strong>线路信号</strong>也就是Line Level Signal，一般由TRS（大三芯）平衡线缆传递，比如一些播放器、效果器的输出信号都为线路信号，<strong>其电平约为0dBV（1V）</strong>，<strong>是麦克风信号电平的100倍-1000倍</strong>；<strong>其输出阻抗通常在100Ω至600Ω之间</strong>，Line Input（线路信号输入）接口的阻抗通常大于10,000Ω。有些音频接口有独立的Line Input，有的则是复合型。比如M-Audio Air192 | 4</p>
<p><img src="https://pic.islet.space/2021/05/image-20210503171654739.png" alt="M-Audio  Air192|4" style="zoom: 50%;" /></p>
<div style="text-align: center; font-size: 10px; color: #aaa;">
图 M-Audio Air192 | 4
</div>
<p><strong>乐器信号</strong> - Instrument Level Signal，乐器信号的电平位于麦克风信号和线路信号之间，通常以TS（大两芯）线缆传递，通常需要<strong>前级放大器</strong>将其提升到合适的<strong>线路电平等级</strong>；电吉他、电贝斯、带有拾音器的原声乐器输出的信号均为乐器信号，通常这些乐器的输出阻抗非常高，约在7,000Ω至15,000Ω甚至更高。因此你经常能看到话放、声卡的线路输入通道上有“Hi-Z(高阻抗）”或者“Line/Instrument”切换开关，能使线路输入接口的阻值增加，以适配乐器信号输入，有些音频接口则直接独立出来高阻乐器输入接口。乐器输入接口阻值通常在1MΩ（100万欧姆）左右。</p>
<p>在前文说过，如果<strong>乐器输入接口阻值过低时，信号会失真、高频丢失，声音听起来会很沉闷</strong>；而<strong>阻值过高时，会增加线路出现噪音</strong>的可能。而有一类设备能完美的解决这一问题，让你随心所欲的调节满意的音色。比如：</p>
<p>IK Multimedia的Z‑Tone系列产品可对这些变量进行控制，通过使用高质量的前置放大器，并配备可调的输入阻抗，以使各种拾音器都能发出其完美的声音。Z-Tone系列有两款相关产品，有体积较大的Z‑Tone DI和更紧凑的Z‑Tone Buffer Boost。</p>
<figure>
<img src="https://pic.islet.space/2021/05/image-20210503172016745.png" alt="Z‑Tone Buffer Boost" /><figcaption aria-hidden="true">Z‑Tone Buffer Boost</figcaption>
</figure>
<div style="text-align: center; font-size: 10px; color: #aaa;">
图 Z‑Tone Buffer Boost
</div>
<h1 id="实际应用">实际应用</h1>
<p>如果<strong>将高阻抗输出输入到低阻抗麦克风电平输入中，它通常会使前置放大器过载</strong>。这将导致<strong>失真</strong>，甚至可能<strong>损坏前置放大器的电路</strong>！</p>
<p>例如，如果你想将合成器、吉他等高阻信号插入调音台、音频接口的麦克风（XLR）输入，建议你使用<strong>DI盒转换</strong>，将高阻抗信号转换为低阻抗信号。</p>
<p><img src="https://pic.islet.space/2021/05/c9178428f8ad4ecf8272344c07e24c02.jpeg" alt="img" style="zoom:50%;" /></p>
<div style="text-align: center; font-size: 10px; color: #aaa;">
图 使用Z-Tone DI录制箱琴
</div>
<p><strong>注意</strong>：最好将DI盒尽可能靠近高阻抗输出源，较长的走线应将转换后的低阻抗信号传送到调音台或声卡。通俗点说就是，连接时，两芯线短，卡农线长。这将有助于节省更多的音频信号高端频率。</p>
<p>那么有的好奇的同学会问，低阻抗的输出接入高阻抗会怎样呢？按理论来说，低阻出，高阻入，很完美呀！但是…</p>
<p>举个栗子🌰，我们的麦克风是低阻输出，你的吉他单块效果器是高阻输入，串联在一起是理想的选择，也有一些朋友想实现这样的操作，让声音变得更有意思。但是你直接拿XLR卡农转TS大两芯，从麦克风插到效果器上，这样是有问题的。</p>
<p>问题在于，线路或乐器输入需要线路或乐器信号等级。线路和乐器信号的电压比麦克风信号高得多。</p>
<p><strong>将低阻抗麦克风插入高阻抗乐器或线路输入会产生很低的电平信号。音频信号将接近接收端设备本底噪声，因此当你提升放大器的增益时也会产生更大噪声，这种不良的信噪比是很令人绝望的。</strong></p>
<p>这时候你就需要Re-amp盒或者类似AXE I/O这种带有Re-amp功能的音频接口来实现你的这一想法。</p>
<p><img src="https://pic.islet.space/2021/05/cb59d2afa93b469b91fe410bbc38df23.jpeg" alt="img" style="zoom:50%;" /></p>
<div style="text-align: center; font-size: 10px; color: #aaa;">
图 IK Multimedia AXE I/O
</div>
<p>​</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/05/01/Computer/2021-05-01-Fixed-Point-and-Floating-Point-Number-Representations/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/01/Computer/2021-05-01-Fixed-Point-and-Floating-Point-Number-Representations/" class="post-title-link" itemprop="url">Fixed Point and Floating Point Number Representations</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-05-01 10:05:00" itemprop="dateCreated datePublished" datetime="2021-05-01T10:05:00+08:00">2021-05-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-05-09 13:12:08" itemprop="dateModified" datetime="2021-05-09T13:12:08+08:00">2021-05-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer/" itemprop="url" rel="index"><span itemprop="name">Computer</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>​</p>
<p><a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/fixed-point-and-floating-point-number-representations#:~:text=In%20fixed%20point%20notation%2C%20there%20are%20a%20fixed,varying%20number%20of%20digits%20after%20the%20decimal%20point.">tutorialspoint.com</a></p>
<p><em>Arjun Thakur</em></p>
<p>Digital Computers use Binary number system to represent all types of information inside the computers. Alphanumeric characters are represented using binary bits (i.e., 0 and 1). Digital representations are easier to design, storage is easy, accuracy and precision are greater.</p>
<p>There are various types of number representation techniques for digital number representation, for example: Binary number system, octal number system, decimal number system, and hexadecimal number system etc. But Binary number system is most relevant and popular for representing numbers in digital computer system.</p>
<h1 id="storing-real-number">Storing Real Number</h1>
<p>These are structures as following below −</p>
<figure>
<img src="https://pic.islet.space/2021/05/36_1.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>There are two major approaches to store real numbers (i.e., numbers with fractional component) in modern computing. These are (i) Fixed Point Notation and (ii) Floating Point Notation.</p>
<p><mark>In fixed point notation, there are a fixed number of digits after the decimal point, whereas floating point number allows for a varying number of digits after the decimal point.</mark> 在定点表示法中，小数点后有固定位数，而浮点数允许小数点后有不同位数。</p>
<h1 id="fixed-point-representation">Fixed-Point Representation</h1>
<p>This representation has fixed number of bits for integer part and for fractional part. For example, if given fixed-point representation is <code>IIII.FFFF</code>, then you can store minimum value is <code>0000.0001</code> and maximum value is <code>9999.9999</code>. There are three parts of a fixed-point number representation: <strong><em>the sign field</em></strong>, <strong><em>integer field</em></strong>, and <strong><em>fractional field</em></strong>.</p>
<figure>
<img src="https://pic.islet.space/2021/05/36_2.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>We can represent these numbers using:</p>
<ul>
<li>Signed representation: range from -(2<sup>(k-1)</sup>-1) to (2<sup>(k-1)</sup>-1), for k bits.</li>
<li>1’s complement representation: range from -(2<sup>(k-1)</sup>-1) to (2<sup>(k-1)</sup>-1), for k bits.</li>
<li>2’s complementation representation: range from -(2<sup>(k-1)</sup>) to (2<sup>(k-1)</sup>-1), for k bits.</li>
</ul>
<p>2’s complementation representation is preferred in computer system because of unambiguous property and easier for arithmetic operations.</p>
<h3 id="example">Example</h3>
<p>Assume number is using 32-bit format which reserve 1 bit for the sign, 15 bits for the integer part and 16 bits for the fractional part.</p>
<p>Then, <code>-43.625</code> is represented as following:</p>
<figure>
<img src="https://pic.islet.space/2021/05/36_3.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>Where, <mark>0 is used to represent plus(+) and 1 is used to represent minus(-) </mark>. 000000000101011 is 15 bit binary value for decimal 43 and 1010000000000000 is 16 bit binary value for fractional 0.625.</p>
<p>The advantage of using a fixed-point representation is performance and disadvantage is relatively limited range of values that they can represent. So, <mark>it is usually inadequate for numerical analysis as it does not allow enough numbers and accuracy</mark>. A number whose representation exceeds 32 bits would have to be stored inexactly.</p>
<figure>
<img src="https://pic.islet.space/2021/05/36_4.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>These are above smallest positive number and largest positive number which can be store in 32-bit representation as given above format. Therefore, the smallest positive number is 2<sup>-16</sup> ≈ 0.000015 approximate and the largest positive number is (2<sup>15</sup>-1)+(1-2<sup>-16</sup>)=2<sup>15</sup>(1-2<sup>-16</sup>) =32768, and gap between these numbers is 2<sup>-16</sup>.</p>
<p>We can move the radix point either left or right with the help of only integer field is 1.</p>
<h1 id="floating-point-representation">Floating-Point Representation</h1>
<p>This representation does not reserve a specific number of bits for the integer part or the fractional part. Instead it reserves a certain number of bits for the number (called the mantissa or significand) and a certain number of bits to say where within that number the decimal place sits (called the exponent).</p>
<p>The floating number representation of a number has two part: the first part represents a signed fixed point number called mantissa. The second part of designates the position of the decimal (or binary) point and is called the exponent. The fixed point mantissa（定点尾数） may be fraction or an integer. Floating -point is always interpreted to represent a number in the following form: Mxr<sup>e</sup>.</p>
<p>Only the mantissa m and the exponent e are physically represented in the register (including their sign). A floating-point binary number is represented in a similar manner except that is uses base 2 for the exponent. A floating-point number is said to be normalized if the most significant digit of the mantissa is <code>1</code>.</p>
<figure>
<img src="https://pic.islet.space/2021/05/36_5.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>So, actual number is (-1)<sup>s</sup> (1+m) x2<sup>(e-Bias)</sup>, where <em>s</em> is the sign bit, <em>m</em> is the mantissa, <em>e</em> is the exponent value, and <em>Bias</em> is the bias number.</p>
<p>Note that signed integers and exponent are represented by either sign representation, or one’s complement representation, or two’s complement representation.</p>
<p>The floating point representation is more flexible. Any non-zero number can be represented in the normalized form of ±(1.b<sub>1</sub>b<sub>2</sub>b<sub>3</sub> ...)<sub>2</sub> x2<sup>n</sup> This is normalized form of a number <code>x</code>.</p>
<h3 id="example-1">Example</h3>
<p>Suppose number is using 32-bit format: the 1 bit sign bit（符号位）, 8 bits for signed exponent（符号数）, and 23 bits for the fractional part（小数）. The leading bit 1 is not stored (as it is always 1 for a normalized number) and is referred to as a <em>“hidden bit</em>”.</p>
<p>Then −53.5 is normalized as -53.5=(-110101.1)<sub>2</sub>=(-1.101011) x2<sup>5</sup> , which is represented as following below,</p>
<figure>
<img src="https://pic.islet.space/2021/05/36_6.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>Where <code>00000101</code> is the 8-bit binary value of exponent value <code>+5</code>.</p>
<p>Note that 8-bit exponent ﬁeld is used to store integer exponents <code>-126 ≤  n ≤ 127</code>.</p>
<p>The smallest normalized positive number that ﬁts into 32 bits is (1.000,000,000,000,000,000,000,00)2x26<sup>-126</sup>=2<sup>-126</sup>≈1.18x10<sup>-38</sup> , and largest normalized positive number that ﬁts into 32 bits is (1.111,111,111,111,111,111,111,11)2x2<sup>127</sup>=(224-1)x2<sup>104</sup> ≈ 3.40x10<sup>38</sup>. These numbers are represented as following below,</p>
<figure>
<img src="https://pic.islet.space/2021/05/36_7.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>The precision of a ﬂoating-point format is the number of positions reserved for binary digits plus one (for the hidden bit). In the examples considered here the precision is <code>23+1=24</code>.</p>
<p>The gap between 1 and the next normalized ﬂoating-point number is known as machine epsilon. the gap is (1+2<sup>-23</sup>)-1=2<sup>-23</sup> for above example, but this is same as the smallest positive ﬂoating-point number because of non-uniform spacing unlike in the ﬁxed-point scenario.</p>
<p>Note that non-terminating binary numbers can be represented in floating point representation, e.g., 1/3 = (0.010101 ...)<sup>2</sup> cannot be a ﬂoating-point number as its binary representation is non-terminating.</p>
<h1 id="ieee-floating-point-number-representation">IEEE Floating point Number Representation</h1>
<p>IEEE (Institute of Electrical and Electronics Engineers) has standardized Floating-Point Representation as following diagram.</p>
<figure>
<img src="https://pic.islet.space/2021/05/36_8.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>So, actual number is (-1)<sup>s</sup>(1+m)x2<sup>(e-Bias)</sup>, where <em>s</em> is the sign bit, <em>m</em> is the mantissa, <em>e</em> is the exponent value, and <em>Bias</em> is the bias number. The sign bit is 0 for positive number and 1 for negative number. Exponents are represented by or two’s complement representation.</p>
<p><strong>According to IEEE 754 standard, the floating-point number is represented in following ways:</strong></p>
<ul>
<li>Half Precision (16 bit): 1 sign bit, 5 bit exponent, and 10 bit mantissa</li>
<li>Single Precision (32 bit): 1 sign bit, 8 bit exponent, and 23 bit mantissa</li>
<li>Double Precision (64 bit): 1 sign bit, 11 bit exponent, and 52 bit mantissa</li>
<li>Quadruple Precision (128 bit): 1 sign bit, 15 bit exponent, and 112 bit mantissa</li>
</ul>
<h1 id="special-value-representation"><strong>Special Value Representation</strong></h1>
<p>There are some special values depended upon different values of the exponent and mantissa in the IEEE 754 standard.</p>
<ul>
<li>All the exponent bits 0 with all mantissa bits 0 represents 0. If sign bit is 0, then +0, else -0.</li>
<li>All the exponent bits 1 with all mantissa bits 0 represents infinity. If sign bit is 0, then +∞, else -∞.</li>
<li>All the exponent bits 0 and mantissa bits non-zero represents <strong>denormalized number</strong>.</li>
<li>All the exponent bits 1 and mantissa bits non-zero represents <strong>error</strong>.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/04/23/Hardware/DSP/2021-04-23-ADI%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/23/Hardware/DSP/2021-04-23-ADI%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">ADI开发笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-04-23 23:58:32" itemprop="dateCreated datePublished" datetime="2021-04-23T23:58:32+08:00">2021-04-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-08 22:41:04" itemprop="dateModified" datetime="2021-07-08T22:41:04+08:00">2021-07-08</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<h1 id="terminology">TERMINOLOGY</h1>
<h2 id="processors-microcontrollers-dsp">Processors / Microcontrollers / DSP</h2>
<p>以下是ADI官方对Processors、Microcontrollers、DSP 等词的解释：</p>
<p><img src="https://pic.islet.space/2021/05/image-20210501094933998.png" alt="image-20210501094933998" style="zoom: 80%;" /></p>
<p><img src="https://pic.islet.space/2021/05/image-20210501094947031.png" alt="image-20210501094947031" style="zoom: 80%;" /></p>
<p><img src="https://pic.islet.space/2021/05/image-20210501094923111.png" alt="image-20210501094923111" style="zoom: 80%;" /></p>
<p><img src="https://pic.islet.space/2021/05/image-20210501095225573.png" alt="image-20210501095225573" style="zoom: 80%;" /></p>
<p><strong>Harvard Architecture</strong>，即哈佛结构，是一种将程序指令存储和数据存储分开的存储器结构。哈佛结构是一种并行体系结构，它的主要特点是将程序和数据存储在不同的存储空间中，即程序存储器和数据存储器是两个独立的存储器，每个存储器独立编址、独立访问。</p>
<p><strong>Super Harvard Architecture</strong>（超级哈佛架构，SHARC），由ADI开发，具体解释见下方 BLACKFIN / SHARC。</p>
<h3 id="why-floating-point-dsp">Why Floating-Point DSP?</h3>
<blockquote>
<p>A digital signal processor’s data format determines its ability to handle signals of <em>differing precision</em>, <em>dynamic range</em>, and <em>signal-to-noise ratios</em>. Because floating-point DSP math reduces the need for scaling and probability of overflow, <mark>using a floating-point DSP can ease algorithm and software development</mark>. The extent to which this is true depends on the floating-point processor’s architecture.</p>
<p><u>Consistency with IEEE workstation simulations and the elimination of scaling are two clear ease-of-use advantages.</u> High-level language programmability, large address spaces, and wide dynamic range allow system development time to be spent on algorithms and signal processing concerns, rather than assembly language coding, code paging, and error handling.</p>
<p><em>--&lt;ADSP-21160 SHARC® DSP Hardware Reference&gt;</em></p>
</blockquote>
<p>总结一下就是：</p>
<ul>
<li>(The data format is) <strong>Suitable to handle various kind of task</strong> (like <em>differing precision</em>, <em>dynamic range</em>, and <em>signal-to-noise ratios</em>).</li>
<li>(F-P DSP math) <strong>Reduces the need of scaling and probability of overflow.</strong></li>
<li><strong>High-level language programmability, large address spaces, wide dynamic range</strong>.</li>
</ul>
<h2 id="blackfin-sharc">BLACKFIN / SHARC</h2>
<p>以下是ADI官网对BLACKFIN 和 SHARC的描述</p>
<p><strong>BLACKFIN</strong></p>
<blockquote>
<p>Blackfin® 16/32位嵌入式处理器提供软件灵活性和扩展能力，适合融合应用：多格式音频、视频、语音和图像处理、多模式基带和分组处理、控制处理以及实时安全。</p>
</blockquote>
<p><strong>SHARC</strong></p>
<blockquote>
<p>SHARC音频处理器产品系列采用ADI公司的SHARC®和SHARC+®数字信号处理(DSP)内核技术，提供确定性和极低处理延迟以及出色的MIPS/mW性能。SHARC处理器系列在浮点DSP市场占据主导地位，拥有出色的内核和存储器性能以及优异的I/O吞吐能力。SHARC具有多个产品版本和价位，能够为动态范围至关重要的许多应用提供实时浮点处理性能。</p>
<p>许多处理器集成了FIR/IIR硬件加速器，可分流内核的通用数字信号处理算法任务，从而使内核能够并行执行后处理算法，因而非常适合实时音频应用。广泛的SHARC+ SoC产品组合提供高达1GHz的性能可扩展性以及各种片内存储器配置和混合外设。对于以太网和USB等复杂的外设，一些SoC集成了ARM内核以便处理运行堆栈软件和其他微控制器任务。</p>
</blockquote>
<p>以下文字是《ADSP-21479 EZ-Board Evaluation System Manual》全篇唯一出现blackfin关键字（Page28）的地方，但是21479不属于Blackfin系列，应该是错误来的。</p>
<p><img src="https://pic.islet.space/2021/05/20210520135658.png" alt="image-20210520135616863" style="zoom:50%;" /></p>
<figure>
<img src="https://pic.islet.space/2021/05/20210520135659.png" alt="image-20210520135407091" /><figcaption aria-hidden="true">image-20210520135407091</figcaption>
</figure>
<h1 id="basic-knowledge">BASIC KNOWLEDGE</h1>
<p>原理图模块 是指用于构建SigmaStudio设计的模块。每个处理器可用的块显示在“工具箱”和“树形工具箱”窗口中，可以将其拖放到原理图中。</p>
<h2 id="usbi">USBi</h2>
<ul>
<li><p>USBi features a standard Aardvark-compatible programming header.</p></li>
<li><p>USBi can be used for real-time tuning of Sigma-DSP with SigmaStudio</p></li>
</ul>
<p>下图为USBi的功能框架：</p>
<p><img src="https://pic.islet.space/2021/05/image-20210518114358905.png" alt="image-20210518114358905" style="zoom:80%;" /></p>
<blockquote>
<p>USBi在I2C总线上有一个EEPROM，地址为0x50。它用来向PC显示其供应商ID和产品ID，以及启动其内部程序。应该避免在你的系统设计中在这个地址上有任何其他的EEPROMs。</p>
<p>这个EEPROM没有写保护；因此，如果你试图写到地址0x50，你将覆盖USBi的板载EEPROM，USBi将停止工作。如果不把板子还给Analog Devices，就不能对USBi进行重新编程。大多数EEPROM被设置为地址0x50的方法是将其引脚A0 = 1 和A1 = A2 = 0。</p>
</blockquote>
<h2 id="algorithms-addremove-growreduce">Algorithms: Add/Remove, Grow/Reduce</h2>
<p>每个原理图块代表一种或多种信号处理算法。算法的范围从非常简单的<a target="_blank" rel="noopener" href="https://wiki.analog.com/resources/tools-software/sigmastudio/toolbox/basicdsp/signaladd">信号添加</a>（如<a target="_blank" rel="noopener" href="https://wiki.analog.com/resources/tools-software/sigmastudio/toolbox/basicdsp/signaladd">Signal Add</a>）到高级系统组件（如<a target="_blank" rel="noopener" href="https://wiki.analog.com/resources/tools-software/sigmastudio/toolbox/adialgorithms/dynamicbassboost">Dynamic Bass Boost）</a>。您可以从块中添加或删除算法以满足您的特定要求。如下所述，算法也可以增长。</p>
<hr />
<p><strong>添加算法：</strong></p>
<p>您必须添加一种算法-通常与一组I / O引脚关联-才能使块起作用。要将算法添加到块，请<strong>右键单击</strong>该块，然后选择<strong>添加算法&gt; IC＃</strong>，然后选择<strong>算法</strong>的DSP IC。请注意，如果您的项目中有多个处理器（IC / DSP），则可以选择哪个DSP将运行算法，有关更多信息，请参见下文。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic1.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Aalgorithms"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic1.png" alt="img" /></a></p>
<p>此时，如果需要，右键单击块的边界或标签以添加其他算法。（重要的是右键单击边框或标签；如果右键单击中心，则可能会显示用于输入参数值的弹出窗口。）</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic2.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Aalgorithms"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic2.png" alt="img" /></a></p>
<p>不包含算法的块将没有控件或引脚，并且您只会看到该块的名称（如下图所示）。必须在空块中添加算法，然后才能在原理图设计中使用它们。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic3.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Aalgorithms"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic3.png" alt="img" /></a></p>
<p><strong>注意</strong>：使用“<a target="_blank" rel="noopener" href="https://wiki.analog.com/resources/tools-software/sigmastudio/developmentenvironment/toolbox">树形工具箱”窗口时</a>，总是为每个插入的块创建一个算法。但是，如果使用传统的“<a target="_blank" rel="noopener" href="https://wiki.analog.com/resources/tools-software/sigmastudio/developmentenvironment/toolbox">工具箱”</a>窗口插入块，则可能还必须添加算法。</p>
<p>添加算法时，不仅要为模块选择计算方法，还要为算法选择特定的DSP关联。如果要连接多个DSP处理器，这一点很重要：通过将算法添加到模块中，可以共享模块和控件，并同时与多个DSP进行通信。</p>
<p><strong>例如</strong>：<a target="_blank" rel="noopener" href="https://wiki.analog.com/resources/tools-software/sigmastudio/volumecontrols/singlevolumecontrol">单个音量控制</a>块具有用于所有算法的单个滑块控件。如果使用2个DSP处理器（IC 1（AD1940）和IC 2（ADAU1701））创建一个项目，然后选择“添加算法”，则系统将提示您要将该算法添加到哪个芯片。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic4.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Aalgorithms"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic4.png" alt="img" /></a></p>
<p>可以将第一种算法分配给IC 1，将第二种算法分配给IC 2，但是它们共享音量块和单个滑块控件。请注意，您不能在不同的处理器之间建立连线，有关更多信息，请参见<a target="_blank" rel="noopener" href="https://wiki.analog.com/resources/tools-software/sigmastudio/usingsigmastudio/wiresandaliases">连线</a>主题。</p>
<hr />
<p><strong>删除算法：</strong></p>
<p>也可以从块中删除算法。要删除算法，请<strong>右键单击</strong>该块，然后选择“<strong>删除算法”</strong>。这将删除最后添加的算法（底部引脚）。如果该块仅包含一种算法，则删除该算法将导致一个空块</p>
<hr />
<p><strong>增长算法：</strong></p>
<p>不断增长的算法意味着在该块的现有算法的基础上，保持相同的算法（在其上进行扩展）和相同的DSP关联（添加算法均不执行）。要增长算法，请<strong>右键单击</strong>该块，然后选择“<strong>增长算法”&gt;“（算法名称）”&gt;“（增长量）”</strong>。请注意，并非所有算法都可以使用增长。</p>
<p>理解添加和增长之间区别的最简单方法是使用混合器块。将交叉混合器（2个输入）拖到工作区中。右键单击并选择“增长算法”，请参见下面的示例。</p>
<ul>
<li>增加混音器会创建更多的混音器输出引脚，实际上，您正在创建共享公共输入的额外混音器输出通道。块中仍然只有一个算法。</li>
<li>添加算法将创建单独的算法，这些算法共享控制窗口，但不共享输入/输出引脚或资源。在混频器示例中，一个附加的输入引脚，输出引脚和一个交叉混频器控件被添加到了该模块中。</li>
</ul>
<hr />
<p><strong>减少算法：</strong></p>
<p>减少与增加相反，减少了由“增加算法”操作创建的多余控件和引脚。像删除算法一样，reduce将删除从底部或最近增长的项目开始的控件/大头针。</p>
<figure>
<img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/algorithmpic5.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<h3 id="wires-and-aliases">Wires and Aliases</h3>
<p>SigmaStudio原理图设计由与“导线”连接在一起的模块构建。导线定义了系统的信号流。</p>
<p><strong>要创建原理图导线：</strong> 将鼠标光标移到块的<a target="_blank" rel="noopener" href="https://wiki.analog.com/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/schematicblocks">引脚上，</a>以便显示导线图标<a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/icon.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/icon.png" alt="img" /></a>。接下来，左键单击一个块引脚，然后在按住鼠标按钮的同时，将光标拖到另一个块的相应引脚上。输入引脚只能连接到输出引脚，而输出引脚只能连接到输入引脚。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic1.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic1.png" alt="img" /></a></p>
<p><strong>选择：</strong></p>
<p>要选择一条导线，请用鼠标左键单击它。选定的电线用绿色正方形（点）表示，如下所示。<strong>位置：</strong></p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic2.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic2.png" alt="img" /></a></p>
<p>要更改导线的位置，请将鼠标光标放在一个点上。接下来，在导线点上<strong>单击</strong>鼠标左键，并在按住鼠标键的同时拖动光标以重新放置导线。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic3.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic3.png" alt="img" /></a></p>
<p><strong>菜单：</strong></p>
<p>右键单击导线以调出导线菜单。该菜单包括以下命令：</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic4.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic4.png" alt="img" /></a></p>
<p><strong>电线颜色：</strong></p>
<p>电线根据其关联的DSP处理器进行着色。导线的输入和输出引脚必须与同一DSP关联，否则您将无法在引脚之间建立导线。具有多个处理器IC的项目的每个IC将具有不同的颜色。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic5.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic5.png" alt="img" /></a></p>
<hr />
<p><strong>引脚（导线）备注：</strong></p>
<p>为了直观地组织项目，通常有助于创建备注，以在原理图中的信号流中提供清晰的连接参考（“跳转”）。一个<strong>备注</strong>由一对输入的备注和备注输出块组成。使用备注块可以减少长导线连接所造成的原理图窗口中的视觉混乱。</p>
<p>要创建备注，请<strong>右键单击</strong>块的输出引脚（蓝色引脚），然后从菜单中选择“<strong>备注</strong>”。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic6.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic6.png" alt="img" /></a></p>
<p>当您单击<strong>Alias时</strong>，将出现两个块，分别是输入和输出。备注输入自动连接到源模块的输出引脚。接下来，创建一条从备注输出块（在下面的示例中为备注2）到信号目标的导线。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic7.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic7.png" alt="img" /></a></p>
<p><strong>注意：</strong>使用备注在功能上等同于用电线连接两个引脚。以下示例中的信号流与上面的备注示例相同。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic8.png?id=resources%3Atools-software%3Asigmastudio%3Ausingsigmastudio%3Abuildingschematics%3Awiresandaliases"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/usingsigmastudio/buildingschematics/wirespic8.png" alt="img" /></a></p>
<h3 id="hardware-configuration-tab">Hardware Configuration Tab</h3>
<p>硬件配置工作区允许您为设计选择一个或多个处理器。它还允许您设置SigmaStudio与硬件之间的通信。</p>
<p>要了解可以在“硬件配置”选项卡中访问的高级操作（包括“输出捕获”，“ Flash / E2Prom下载”，“寄存器控制”窗口和“寄存器读/写”窗口），请参阅“硬件Windows”部分中的主题。</p>
<p><strong>要将处理器（IC / DSP）插入设计中：</strong></p>
<ol type="1">
<li><p>用鼠标左键从工具箱中选择一个“处理器”：</p>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic1.png?id=resources%3Atools-software%3Asigmastudio%3Adevelopmentenvironment%3Ahardwareconfigurationtab"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic1.png" alt="img" /></a></li>
</ol></li>
<li><p>将处理器模块拖放到右侧的“硬件配置”窗口中：</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic2.png?id=resources%3Atools-software%3Asigmastudio%3Adevelopmentenvironment%3Ahardwareconfigurationtab"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic2.png" alt="img" /></a></p></li>
</ol>
<p><strong>注意：</strong>一旦在“硬件配置”窗口中插入DSP，就会出现“原理图（Schematic）”选项卡。</p>
<p><strong>在DSP处理器和硬件之间建立连接：</strong></p>
<ol type="1">
<li>单击“通信渠道（Communication Channel）”类别（在“工具箱”列的底部）。</li>
<li>从列表中选择评估板或USB设备，并将其拖放到工作区中。</li>
<li>通过在通信通道和处理器模块之间画线来连接两个模块，从蓝色菱形到绿色菱形。对于使用AD1940的USB连接，工作空间中的单元格应如下所示：</li>
</ol>
<p><strong>注意</strong>：“通信通道”菜单列出了带有前缀EvalBoard的名称和板号。这些通信通道将在不使用评估板设置的平台上适用于相同的IC类型。还有通用的通信通道，USBSerialConv和USBi。（有关更多信息，请参见USB串行转换器通信通道或USBi。）</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic3.png?id=resources%3Atools-software%3Asigmastudio%3Adevelopmentenvironment%3Ahardwareconfigurationtab"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic3.png" alt="img" /></a></p>
<p>通信模块上USB标签 的颜色表示是否已建立USB通信通道。如果您已正确配置USB硬件，则背景色将为浅橙色或白色。如果未初始化通信，则背景将为红色。请注意，这仅表示USB连接处于活动状态，不能保证与SigmaDSP IC的通信或SigmaDSP硬件已正确配置。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic4.png?id=resources%3Atools-software%3Asigmastudio%3Adevelopmentenvironment%3Ahardwareconfigurationtab"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic4.png" alt="img" /></a></p>
<p>连接所有板卡IC时，“已连接”背景色为白色，而仅连接部分IC（但不是全部）时为“橙色”。例如，ADAU1701评估板包括ADAU1701 IC和E2Prom IC。仅连接ADAU1701时，背景将为浅橙色，但同时连接ADAU1701和E2Prom IC时，背景将为白色。</p>
<p><a target="_blank" rel="noopener" href="https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic5.png?id=resources%3Atools-software%3Asigmastudio%3Adevelopmentenvironment%3Ahardwareconfigurationtab"><img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/developmentenvironment/hardwareconfpic5.png" alt="img" /></a></p>
<p>https://wiki.analog.com/_detail/resources/tools-software/sigmastudio/gettingstarted/usbinterfaces/usbpic4.png?id=resources%3Atools-software%3Asigmastudio%3Agettingstarted%3Ausbinterfaces%3Ausbserialconverter)</p>
<hr />
<p><strong>EVAL-ADUSB1板开关和跳线：</strong></p>
<ul>
<li>S1-将闪存中保存的程序加载到SigmaDSP。</li>
<li>S2-选择当按下S1时将加载八个SigmaDSP程序中的哪一个。</li>
<li>S3-重置USB适配器板。</li>
<li>TP1-+ 5Vdc连接，用于适配器未通过PC的USB端口供电的情况。</li>
<li>TP2-接地，用于适配器未通过PC的USB端口供电的情况。</li>
<li>J3-当该接头连接器上有跳线时，将启用对闪存的写操作（用于存储SigmaDSP程序）。</li>
<li>D4-此LED指示USB板已通电。</li>
</ul>
<p>可以使用SigmaStudio中的Flash Downloader工具将SigmaDSP程序和参数文件保存到USB板上的闪存中。通过将S2设置为适当的设置，然后按下程序加载按钮S1，可以将每个程序加载到SigmaDSP。请参阅Flash Downloader页面。 有关更多信息，请参见EVAL-ADUSB1数据手册，analog.com / sigmadsp。</p>
<h2 id="digital-attenuator">Digital Attenuator</h2>
<p>即数字衰减器， 与可变衰减器不同，数字衰减器在离散和有限衰减状态下切换。该切换通常以二进制步骤实现。数字衰减器采用半导体器件来实现每个衰减步骤。为此目的而使用的一些半导体器件包括：PIN二极管，MOSFET和GaAs MESFET。数字衰减器能够实现与固态开关速度相当的开关速率。数字衰减器使用的最常见逻辑类型 是CMOS逻辑电平和晶体管晶体管逻辑（TTL）。</p>
<p>数字衰减器利用驱动器电路来确定要使用的逻辑类型。驱动器电路的复杂性取决于所使用的位数。复杂度随着位数的增加而增加。通常根据数字衰减器设计提供的衰减状态对其进行分类。使用的位数决定了这些衰减状态。最高有效位提供最大的衰减，而最低有效位提供组件提供的最小衰减。其余位提供中间衰减值。通常，这些产品采用1位，5位，8位和6位数字衰减器。</p>
<p>如果选择了所有位，则数字衰减器旨在提供最大的额定衰减。另一方面，其最小衰减步长仅通过选择最低有效位来实现。数字衰减器在3G和4G蜂窝网络，点对点节点，中继器以及广泛的测试和测量应用中具有广泛的用途。</p>
<p class="italicp" style="font-style: italic; color: #BBB;">
Shop Arrow.com选择了数字RF步进衰减器，数字音频衰减器等。 <a hre="https://www.arrow.com/en/categories/attenuators/fixedvariable-attenuators/digital-attenuators#">&gt;&gt;&gt; read more</a>
</p>
<h2 id="asrc">ASRC</h2>
<p>异步采样速率转换器(ASRC，Asynchronous Sample Rate Converter)是一款可同时用于消费电子和专业应用的音频采样速率转换通用软件模块。 ASRC支持多种不同的采样速率配置。</p>
<p><strong>ASRC软件模块</strong> 可用于以小步长改变采样频率，步长随着时间改变，且在变化过程中不生成任何输出音频干扰。 在许多多媒体系统中，时变采样速率的改变是非常重要的功能，例如能实现多个数据流的精密同步以及服务器和客户端的同步等。</p>
<p>ADI公司的ASRC实施方案经过高度优化，适合在ADI公司的Blackfin系列处理器上运行。它是一个基于ADI专利设计的独立自足软件模块。该模块已经过各种根据音频信号质量分析定义的策略质量测试。</p>
<p>ASRC模块是应用于PCM（脉冲编码调制）上的后处理模块，通过模拟输入、数字输入通道或解码应用的PCM输出接收数据。 ASRC模块能够处理多个通道的输入信息，并能够输出至同样多的通道。 开发的模块支持全面的重入和多实例。 ASRC模块是一个独立的模块，不依赖其他任何模块。 ADRC模块配备一个示例轻型包装器API，将模块插入至整体系统。 这使得该应用的系统集成简单易行。</p>
<h3 id="asrc-inputoutput">ASRC INPUT/OUTPUT</h3>
<p>ASRC输入和输出模块在原理图设计和硬件ASRC（异步采样率转换器）之间路由信号。</p>
<p>使用输入块的复选框来启用或禁用特定输入。使用输出块的下拉列表控件从可用的ASRC中进行选择。</p>
<ul>
<li>每个ASRC输出必须连接其输入，否则编译时将出错。</li>
<li>可以看到，随着将更多的ASRC输出块拖到原理图中，下拉列表中的可用输出数量会减少，因为一次只能由一个块表示。</li>
<li>要更改ASRC <strong>输入采样率</strong>，请右键单击块名称，然后选择“设置采样率”，这将打开“采样率”窗口（默认值为44.1 kHz）。</li>
</ul>
<figure>
<img src="https://wiki.analog.com/_media/resources/tools-software/sigmastudio/toolbox/io/asrc_input_output_020.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<h2 id="limiter-限幅器">Limiter 限幅器</h2>
<p>限幅器（Limiter）是指能按限定的范围削平信号电压波幅的电路，又称削波器。限幅电路的作用是把输出信号幅度限定在一定的范围内，亦即当输入电压超过或低于某一参考值后，输出电压将被限制在某一电平（称作限幅电平），且再不随输入电压变化。</p>
<h2 id="lsb-aligned">LSB-aligned</h2>
<p>LSB(Least Significant Bit)是“最低有效位”。MSB(Most Significant Bit)是“最高有效位”。</p>
<p>最高有效位是指二进制中最高值的比特，如：</p>
<blockquote>
<ol type="1">
<li><p>在16比特的数字音频中，其第1个比特便对16bit的字的数值有最大的影响。</p></li>
<li><p>在十进制的15，389这一数字中，相当于万数那1行（1）的数字便对数值的影响最大。比较与之相反的“最低有效位”（LSB）。</p></li>
<li><p>汇编中，比如8位2进制数10000001，其中第一个1是MSB,第二个1是LSB。<mark>1</mark>（MSB）100 001<mark>1</mark>（LSB）</p></li>
<li><p>在计算时，如果是整数，那么小数点（实际上是没有小数点的，但就把那一位和下一位之间看作有）在LSB后面；如果是小数，小数点在MSB后面；其中MSB在有符号数中又是符号位。</p></li>
</ol>
</blockquote>
<p>在网络通信方面，大家说的更多的是：“<strong>Big-Endian</strong>”和“<strong>Small-Endian</strong>”的问题。指的都是对于多字节的数据类型（比如4字节的32位整数），其多个字节的顺序问题，是最高字节在前（Big-Endian）还是最低字节在前（Small-Endian）。</p>
<p>比如对于123456789这个整数，其16进制为0x075BCD15，那么按照Big-Endian的方式，它在网络上传输（或者在内存里存储）的4个字节依次是：<code>07 4B CD 15</code>，而Small-Endian的顺序正相反，是：<code>15 CD 4B 07</code>。</p>
<p><strong>MSB</strong> 和 <strong>LSB</strong> 虽然跟这个事情看起来有点相似，但不是一回事。</p>
<p>通常，一个芯片的管脚中，对于一个多比特的信号，比如32根的地址线，从低开始按0到31编个号。MSB就是31，LSB就是0。那么如果标记为：ADDR[31:0]就是MSB first的方式，如果标记为ADDR[0:31]就是LSB first的方式。</p>
<p><strong>MSB LSB</strong>：起始地址为最高位， 最后地址为最低位。</p>
<p><strong>LSB MSB</strong>：起始地址为最低位，最后地址为最高位。</p>
<p>比如AD中，8位，最低有效位指D0</p>
<h2 id="cofficient-write">Cofficient Write</h2>
<p>即 <strong>参数写入</strong>，是指对参数中两组 <strong><em>寄存器参数集</em></strong> 的系数写入。当然也可以单独写入某个寄存器的数值。</p>
<p>可写入的参数如：filter coefficients、limiter settings、volume control settings等。</p>
<p>每组 <strong>寄存器参数集</strong> 可写入至多 160个参数（32个过滤器*5个系数）。</p>
<h2 id="filters">Filters</h2>
<p>在ADAU1772的General(2<sup>nd</sup> Order) Filter Setting中有几项过滤器，分别是 Parametric 、 Shelving 、 General HP/LP/BP/BS 、 Butterworth/Bessel 、 Tone Control、IIR Coefficient 、First Order Filters 、All Pass 、Peaking 、Notch 、 Chebyshev 共11中过滤器。</p>
<figure>
<img src="https://pic.islet.space/2021/04/image-20210428152357233.png" alt="image-20210428152357233" /><figcaption aria-hidden="true">image-20210428152357233</figcaption>
</figure>
<h1 id="sigmastudio">SigmaStudio</h1>
<p>以下简称sigma</p>
<h2 id="capture">Capture</h2>
<p>Capture 窗口会捕捉开发者对设置的相关改动记录。</p>
<figure>
<img src="https://pic.islet.space/2021/04/image-20210422165857465.png" alt="image-20210422165857465" /><figcaption aria-hidden="true">image-20210422165857465</figcaption>
</figure>
<h2 id="register-control">Register Control</h2>
<figure>
<img src="https://pic.islet.space/2021/04/image-20210422163633005.png" alt="image-20210422163633005" /><figcaption aria-hidden="true">image-20210422163633005</figcaption>
</figure>
<h3 id="outputserial-port">Output/Serial Port</h3>
<h4 id="下压式音量按键">下压式音量按键</h4>
<p>使用前需要进行跳线，跳线方法如下：</p>
<p><img src="https://pic.islet.space/2021/04/image-20210422163804275.png" alt="image-20210422163804275" style="zoom:50%;" /></p>
<p>控制界面如下：</p>
<figure>
<img src="https://pic.islet.space/2021/04/image-20210422163228410.png" alt="image-20210422163228410" /><figcaption aria-hidden="true">image-20210422163228410</figcaption>
</figure>
<blockquote>
<p>？？ Time</p>
<p>Initial PB Volume 初始化下压式按键的音量值</p>
<p>Gain Step 增益速度</p>
<p>Ramp Speed 增加速度</p>
<p>Converters Controlled by PushButton Volume 被控制的转换器</p>
</blockquote>
<h2 id="download-program">Download Program</h2>
<p><img src="https://pic.islet.space/2021/04/image-20210422170248954.png" alt="image-20210422170248954" style="zoom:67%;" /></p>
<figure>
<img src="https://pic.islet.space/2021/04/image-20210422170328013.png" alt="image-20210422170328013" /><figcaption aria-hidden="true">image-20210422170328013</figcaption>
</figure>
<h2 id="microphone">Microphone</h2>
<p>TRS 1/8-inch mini-plug stereo headphones</p>
<p><img src="https://pic.islet.space/2021/04/048f07ee-e357-4c06-a8e4-1724e62765a4_1.e937ba0bd42739fc09e9ef63602645b8.jpeg" alt="查看源图像" style="zoom:50%;" /></p>
<p>standard 0.100” headers</p>
<p><img src="https://pic.islet.space/2021/04/R68f2db356a43d3653db1298ccd26e835" alt="查看源图像" style="zoom:50%;" /></p>
<h3 id="bias-setting">Bias Setting</h3>
<figure>
<img src="https://pic.islet.space/2021/04/image-20210423102647330.png" alt="image-20210423102647330" /><figcaption aria-hidden="true">image-20210423102647330</figcaption>
</figure>
<p>ADAU1772包括两个麦克风偏置输出：MICBIAS0和MICBIAS1。这些引脚为驻极体模拟麦克风提供电压参考。</p>
<ol type="1">
<li>MICBIASx引脚也可用于为具有独立电源引脚的数字或模拟MEMS麦克风干净地提供电压。</li>
<li>MICBIASx电压在麦克风偏置控制寄存器（地址0x002D）中设置。可以利用这个寄存器对MICBIAS0或MICBIAS1的输出进行启用或禁用。</li>
<li>增益选项提供了两种可能的电压：0.65 × AVDD或0.90 × AVDD。许多应用要求只启用两个偏置输出中的一个。当系统中使用许多传声器时，或者当传声器在PCB上的位置不允许一个引脚对所有传声器进行偏置时，两个偏置输出都应该被启用。</li>
</ol>
<p>dataword byte : 在突发模式（burst mode）中使用。</p>
<p>data byte : 在单字模式（single-word mode）下写入。</p>
<h2 id="由dsp启动1772">由DSP启动1772</h2>
<p>1772启动可以通过以下两种方式执行：</p>
<ol type="1">
<li>通过SPI或I2C协议，将执行代码写入到SRAM的方式来执行</li>
<li>通过将代码写入EEPROM，并设置自启动的方式来读取和执行代码。</li>
</ol>
<p>由DSP启动1772，其实是通过上述第一种方式来进行，其中又可以再分为两种方法：</p>
<ol type="1">
<li>通过在SigmaStudio中导出项目系统文件，并加载至DSP项目工程的方式来执行，具体方法后述。</li>
<li>通过SPI协议，由DSP片选1772后逐各写入寄存器的方式来执行（注意：使用本方法时，单次写入量不可超过128个字节）。</li>
</ol>
<h3 id="通过导出系统文件的方式">通过导出系统文件的方式</h3>
<p>在SigmaStudio中，执行过 <code>Link Compile Downloa</code> 后，可以点击 <code>Export System Files</code> 导出项目工程文件（C格式）</p>
<p><img src="https://pic.islet.space/2021/05/image-20210510084234044.png" alt="image-20210510084234044" style="zoom:80%;" />，并将 <code>.h</code> 、<code>_PARAM.h</code> 及<code>_REG.h</code> 三个类型文件插入到DSP的项目文件中。</p>
<p><strong>注意</strong>：如图所示，所选的三个文件为主IC（1772）的工程文件，另外三个同后缀名的IC_2是另一个芯片（EEPROM）的文件，看情况决定是否使用。</p>
<p><img src="https://pic.islet.space/2021/05/image-20210510091831286.png" alt="image-20210510091831286" style="zoom:67%;" /></p>
<p>其中，<code>_PARAM.h</code> 及<code>_REG.h</code> 提供了对寄存器的定义，<code>.h</code> 文件中提供了唯一的执行方法 <code>default_download_IC_1()</code>，在DSP项目工程文件中执行即可。</p>
<p><img src="https://pic.islet.space/2021/06/20210601105542.png" alt="image-20210510092602442" style="zoom: 50%;" /></p>
<p><strong>注意：</strong>本文件依赖于 <code>SigmaStudioFW.h</code> 头文件，<img src="https://pic.islet.space/2021/05/image-20210510093228165.png" alt="image-20210510093228165" />，可以复制粘贴以下原代码，也可以在SigmaStudio的安装目录下查找。</p>
<p><mark>需要注意的是，以下所有宏定义内容都为空，需要开发者自行编写。</mark></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * File:			SigmaStudioFW.h</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Description:  	SigmaStudio System Framwork macro definitions. These </span></span><br><span class="line"><span class="comment"> *				macros should be implemented for your system&#x27;s software.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This software is distributed in the hope that it will be useful,</span></span><br><span class="line"><span class="comment"> * but is distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR </span></span><br><span class="line"><span class="comment"> * CONDITIONS OF ANY KIND, without even the implied warranty of</span></span><br><span class="line"><span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * This software may only be used to program products purchased from</span></span><br><span class="line"><span class="comment"> * Analog Devices for incorporation by you into audio products that </span></span><br><span class="line"><span class="comment"> * are intended for resale to audio product end users. This software</span></span><br><span class="line"><span class="comment"> * may not be distributed whole or in any part to third parties.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Copyright � 2008 Analog Devices, Inc. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span>	</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __SIGMASTUDIOFW_H__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SIGMASTUDIOFW_H__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * <span class="doctag">TODO:</span> Update for your system&#x27;s data type</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">short</span> ADI_DATA_U16;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">char</span>  ADI_REG_TYPE;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * Parameter data format</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMASTUDIOTYPE_FIXPOINT 	0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMASTUDIOTYPE_INTEGER 	1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * Write to a single Device register</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMA_WRITE_REGISTER( devAddress, address, dataLength, data ) &#123;<span class="comment">/*<span class="doctag">TODO:</span> implement macro or define as function*/</span>&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * <span class="doctag">TODO:</span> CUSTOM MACRO IMPLEMENTATION</span></span><br><span class="line"><span class="comment"> * Write to multiple Device registers </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMA_WRITE_REGISTER_BLOCK( devAddress, address, length, pData ) &#123;<span class="comment">/*<span class="doctag">TODO:</span> implement macro or define as function*/</span>&#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * <span class="doctag">TODO:</span> CUSTOM MACRO IMPLEMENTATION</span></span><br><span class="line"><span class="comment"> * Writes delay (in ms) </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMA_WRITE_DELAY( devAddress, length, pData ) &#123;<span class="comment">/*<span class="doctag">TODO:</span> implement macro or define as function*/</span>&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Read device registers </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMA_READ_REGISTER( devAddress, address, length, pData ) &#123;<span class="comment">/*<span class="doctag">TODO:</span> implement macro or define as function*/</span>&#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Set a register field&#x27;s value</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMA_SET_REGSITER_FIELD( regVal, fieldVal, fieldMask, fieldShift )  \</span></span><br><span class="line">		&#123; (regVal) = (((regVal) &amp; (~(fieldMask))) | (((fieldVal) &lt;&lt; (fieldShift)) &amp;&amp; (fieldMask))) &#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Get the value of a register field</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMA_GET_REGSITER_FIELD( regVal, fieldMask, fieldShift )  \</span></span><br><span class="line">		&#123; ((regVal) &amp; (fieldMask)) &gt;&gt; (fieldShift) &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * Convert a floating-point value to SigmaDSP (5.23) fixed point format </span></span><br><span class="line"><span class="comment"> *    This optional macro is intended for systems having special implementation</span></span><br><span class="line"><span class="comment"> *    requirements (for example: limited memory size or endianness)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMASTUDIOTYPE_FIXPOINT_CONVERT( _value ) &#123;<span class="comment">/*<span class="doctag">TODO:</span> IMPLEMENT MACRO*/</span>&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * Convert integer data to system compatible format</span></span><br><span class="line"><span class="comment"> *    This optional macro is intended for systems having special implementation</span></span><br><span class="line"><span class="comment"> *    requirements (for example: limited memory size or endianness)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIGMASTUDIOTYPE_INTEGER_CONVERT( _value ) &#123;<span class="comment">/*<span class="doctag">TODO:</span> IMPLEMENT MACRO*/</span>&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<h3 id="通过写入寄存器的方式">通过写入寄存器的方式</h3>
<p>在 Capture 面板中，对寄存器的所有操作都会以 <strong>参数名</strong>、<strong>地址</strong> 和 <strong>数据</strong> 的方式展现，几乎所有参数名都可以在《ADAU1772》中查询。</p>
<p><img src="https://pic.islet.space/2021/05/image-20210510091150821.png" alt="image-20210510091150821" style="zoom: 67%;" /></p>
<ol type="1">
<li>全选面板中所有的值，可以点选第一个值，按 <code>SHIFT</code> + <code>END</code> 来全选，然后右键选择 <code>Save as Raw Data</code> 下的 <code>Address+Data(Text)...</code> ，会以文本格式 (.txt) 保存。</li>
</ol>
<p><img src="https://pic.islet.space/2021/05/image-20210510085052186.png" alt="image-20210510085052186" style="zoom:67%;" /></p>
<p>保存结果：</p>
<p><img src="https://pic.islet.space/2021/05/image-20210510085331956.png" alt="image-20210510085331956" style="zoom:67%;" /></p>
<ol start="2" type="1">
<li>将地址和值整理到DSP项目文件中进行写入，这种方式不太好操作，需要开发人员自行编写对应的代码，较为不友好。</li>
</ol>
<h1 id="chip-adau1772">CHIP-ADAU1772</h1>
<ul>
<li>ADAU1772以下简称1772</li>
<li>《Evaluation Board User Guide UG-477》以下简称UG</li>
</ul>
<h2 id="i2s及i2c接口">I2S及I2C接口</h2>
<p><img src="https://pic.islet.space/2021/06/20210601105550.png" alt="image-20210513171416187" style="zoom:67%;" /></p>
<p><img src="https://pic.islet.space/2021/06/20210601105615.png" alt="image-20210513171524562" style="zoom:67%;" /></p>
<h2 id="usbi-仿真器">USBi 仿真器</h2>
<ul>
<li>USBi驱动安装：进入设备管理器，安装驱动在SigmaStudio安装目录 <code>\Analog Devices\SigmaStudio 4.6\USB drivers\</code> 下。</li>
<li>连接到USBi未成功时是红色，设备驱动安装且连接成功时，USBi 在sigma中会由红变绿。</li>
<li>USBi作为中间板对1772进行控制，在USBi右键可以控制1772设备开断，开断时板上D1区的VDD指示灯也会通断（见page10）。</li>
<li>如果需要对设备进行实时控制，请务必记得打开设备，否则无法操作。</li>
</ul>
<p><img src="https://pic.islet.space/2021/04/image-20210428150645112.png" alt="image-20210428150645112" style="zoom: 67%;" /></p>
<ul>
<li>USBi将例程down到了板子上ADAU1772的SRAM上，断电就没有了。USBi的这种调试是为了快速验证功能，最终需要把这个例程的代码导出，并通过单片机的 <strong>启动工程集成</strong>，烧写到单片机中，实现单片机启动。</li>
</ul>
<p><img src="https://pic.islet.space/2021/04/image-20210427110916316.png" alt="image-20210427110916316" style="zoom:67%;" /></p>
<h3 id="编译烧录">编译烧录</h3>
<ul>
<li>烧录按键如下：</li>
</ul>
<figure>
<img src="https://pic.islet.space/2021/04/image-20210427162529600.png" alt="image-20210427162529600" /><figcaption aria-hidden="true">image-20210427162529600</figcaption>
</figure>
<ul>
<li>编译完毕后，SS会在右边的output窗体里显示编译结果，如有错误会提示错误信息，用户可据此信息去修改设计；</li>
<li>如成功则会显示资源占用信息，用户可根据百分比来增减模块。</li>
</ul>
<p><img src="https://pic.islet.space/2021/04/image-20210427111013493.png" alt="image-20210427111013493" style="zoom:67%;" /></p>
<h3 id="芯片">芯片</h3>
<p>板上共有4颗芯片，分别是 <strong>DSP</strong>、<strong>EEPROM</strong>、<strong>线性整流芯片</strong> 和 <strong>升压芯片</strong></p>
<p><img src="https://pic.islet.space/2021/04/image-20210427171901213.png" alt="image-20210427171901213" style="zoom:50%;" /></p>
<h4 id="u2-eeprom">U2: EEPROM</h4>
<p>ST官网对M24C32-F串行E2PROM的描述：</p>
<p>容量：32-Kbit</p>
<p>电压：1.7 ~ 5.5V</p>
<p>温差：-40 ~ +85℃</p>
<p><img src="https://pic.islet.space/2021/04/Snipaste_2021-04-27_17-18-01.png" alt="Snipaste_2021-04-27_17-18-01" style="zoom: 67%;" /></p>
<p><img src="https://pic.islet.space/2021/04/Snipaste_2021-04-27_17-18-18.png" alt="Snipaste_2021-04-27_17-18-18" style="zoom:67%;" /></p>
<h2 id="输入输出控制">输入输出控制</h2>
<h3 id="供电电压">供电电压</h3>
<p>以下为实际测量数值</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>USB_5V</th>
<th>SCL/SDA(H)</th>
<th></th>
<th>VDD</th>
<th>IOVDD</th>
<th>AVDD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>接USBi实测电压(V)-3.3V档</td>
<td>3.471</td>
<td>1.961</td>
<td></td>
<td>1.997</td>
<td>1.997</td>
<td>1.988</td>
</tr>
<tr class="even">
<td>接21479实测电压(V)-3.3V档</td>
<td>4.463</td>
<td>3.518</td>
<td></td>
<td>3.518</td>
<td>3.518</td>
<td>3.518</td>
</tr>
<tr class="odd">
<td>接21479实测电压(V)-1.8V档</td>
<td>4.468</td>
<td>2.260</td>
<td></td>
<td>1.934</td>
<td>1.934</td>
<td>1.933</td>
</tr>
<tr class="even">
<td>接21479实测电压(V)-3.3V档</td>
<td>3.3</td>
<td>3.3088</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="hp输出">HP输出</h2>
<p>HP即Headphone缩写，HP输出有两个输出端，分别是DAC0 和 DAC1，分别对应为 EVAL板 上的 OUT R(HP Right) 和 OUT L(HP Left)。</p>
<p><img src="https://pic.islet.space/2021/04/image-20210427152251539.png" alt="image-20210427152251539" style="zoom:50%;" /></p>
<p><img src="https://pic.islet.space/2021/04/image-20210427143628880.png" alt="image-20210427143628880" style="zoom: 33%;" /></p>
<h3 id="输出静音">输出静音</h3>
<p><img src="https://pic.islet.space/2021/04/image-20210427153425633.png" alt="image-20210427153425633" style="zoom:50%;" /></p>
<h3 id="输出断电">输出断电</h3>
<p>关于HP输出的寄存器 <code>HP_EN_R</code> 及 <code>HP_EN_L</code> 说明：</p>
<p><img src="https://pic.islet.space/2021/04/image-20210427152528194.png" alt="image-20210427152528194" style="zoom:50%;" /></p>
<p><code>0x31</code> 即 <code>0011 0001</code> ，最后两位 <code>01</code> 即 <code>HP_PDN_L</code> 中的 <code>01</code> 。</p>
<h3 id="输出音量控制">输出音量控制</h3>
<ul>
<li>对输出音量进行控制需要先对S5、S6进行跳针。</li>
</ul>
<p><img src="https://pic.islet.space/2021/04/image-20210427110159648.png" alt="image-20210427110159648" style="zoom:67%;" /></p>
<h3 id="talkthru-dsp-bypass">TALKTHRU / DSP BYPASS</h3>
<blockquote>
<p>DSP BYPASS MODE When DSP bypass mode is enabled, a direct path from the ADC outputs to the DACs is set up to enable bypassing the core processing to listen to environmental sounds.</p>
<p>This is useful for listening to someone speaking without having to remove the noise cancelling headphones. The DSP bypass path is <strong>enabled by setting an MPx pin low</strong>.</p>
<p>Figure 92 shows the DSP bypass path disabled, and Figure 93 shows the DSP bypass path enabled by pressing the push-button switch.</p>
<figure>
<img src="https://pic.islet.space/2021/04/image-20210427144110884.png" alt="image-20210427144110884" /><figcaption aria-hidden="true">image-20210427144110884</figcaption>
</figure>
<p>The DSP bypass feature works for both analog and digital microphone inputs.</p>
<ul>
<li>Enabled when <strong><em>a switch</em></strong> connected to an MPx pin that is set to DSP bypass mode is closed and the MPx pin signal is pulled low.</li>
</ul>
<p>Pressing and holding the switch closed enables the DSP bypass signal path as defined in the TALKTHRU register (Address 0x002A).</p>
<p>The DAC volume control setting is switched from the default gain setting to the new TALKTHRU_GAINx register setting (Address 0x002B and Address 0x002C).</p>
<ul>
<li>DSP bypass is enabled only on ADC0 and ADC1.</li>
</ul>
<p>The DSP bypass signal path is from the output of ADCx to the input of the DAC(s). When DSP bypass is enabled, the current DAC volume setting is ramped down to −95.625 dB and the DSP bypass volume setting is ramped up to avoid pops when switching paths.</p>
</blockquote>
<h1 id="chip-adsp21479">CHIP-ADSP21479</h1>
<h2 id="芯片及评估板资料">芯片及评估板资料</h2>
<p><strong>关于芯片特性</strong>：《ADSP-21477 / ADSP-21478 / ADSP-21479》</p>
<p><strong>关于评估板</strong>：《ADSP-21479 EZ-Board® Evaluation System Manual》</p>
<h2 id="仿真器配置">仿真器配置</h2>
<p>与《HPUSB, USB, and HPPCI Emulators User’s Guide》所描述的并不完全一致。</p>
<p><img src="https://pic.islet.space/2021/05/image-20210519104127472.png" alt="image-20210519104127472" style="zoom: 50%;" /></p>
<p>下图为实际安装后，查看官方对21479提供的相关仿真器的信息和从设备管理器中可查看到的设备信息。</p>
<figure>
<img src="https://pic.islet.space/2021/05/20210519110546.png" alt="image-20210519104034539" /><figcaption aria-hidden="true">image-20210519104034539</figcaption>
</figure>
<p><img src="https://pic.islet.space/2021/05/20210519110551.png" alt="image-20210519104001549" style="zoom:67%;" /></p>
<p>本评估板提供的仿真器使用的是14针脚的HPPCI JTAG，PCI仿真器支持的<mark>操作模式取决于目标机上</mark>14针JTAG接头<mark>的连接方式</mark>。表1-2显示了目标机JTAG头在传统和自动检测模式下的连接方式。</p>
<p><img src="https://pic.islet.space/2021/05/image-20210519105525684.png" alt="image-20210519105525684" style="zoom:67%;" /></p>
<p><strong>注意</strong>：其中3口是无针脚的防呆设计。</p>
<h3 id="hpusb-jtag模式">HPUSB JTAG模式</h3>
<p>在实际开发中，使用的是HPUSB传统模式。</p>
<p>传统模式用于不提供目标VDDIO输入的旧目标，供仿真器自动检测电压。 在这种模式下，JTAG信号运行的电压是通过配置器工具手动设置的。在配置目标时，配置器工具提供了一个电压选择设置。</p>
<blockquote>
<p>Legacy mode is used for older targets that do not provide a target VDDIO input for automatic voltage detection by the emulator.</p>
<p>In this mode, the voltage at which the JTAG signals run is set manually through the Configurator utility.</p>
<p>The configurator utility provides a voltage selection setting when configuring the target.</p>
</blockquote>
<p><strong>注意</strong>：HPUSB-ICE 和 USB-ICE 仿真器都不支持自动电压检测模式。</p>
<p>以下为JTAG的电路示意：</p>
<p><img src="https://pic.islet.space/2021/05/20210519111130.png" alt="image-20210519111126670" style="zoom:80%;" /></p>
<h2 id="i2ctwi串行通信">I2C/TWI串行通信</h2>
<p>根据文件《ADSP-21477_21478_21479_cn》的描述，可知21479支持TWI接口，进而支持I2C。</p>
<p><img src="https://pic.islet.space/2021/05/20210519112440.png" alt="image-20210519112357298" style="zoom:67%;" /></p>
<p>21479没有针对TWI做专门的驱动，Blackfin系列大部分产品都提供了。</p>
<h2 id="dai接口">DAI接口</h2>
<p><strong>Digital Application Interface</strong>，即数字应用接口。所有数字应用接口都以SRU的方式连接至处理器。</p>
<p><strong>SRU</strong>（Signal Routing Unit），即信号路由单元。SRU是处理器内部的一个提供超大系统信号流的复杂路由系统。通过SRU可以将DAI针脚利用不同组合路由至不同的内部设备。DAI所能连接的设备在每块评估板上都不同。下图展示了DAI接口的针脚、所连接的设备及其网络、所连接的开关和默认设置。</p>
<p><mark>要在扩展II接口上使用DAI，请先用相关开关禁用驱动DAI引脚上的任何信号。</mark></p>
<p><img src="https://pic.islet.space/2021/05/20210520110351.png" alt="image-20210520110207578" style="zoom:67%;" /></p>
<p><img src="https://pic.islet.space/2021/05/20210520110355.png" alt="image-20210520110221920" style="zoom:67%;" /></p>
<h2 id="dpi接口">DPI接口</h2>
<p>Digital Peripheral Interface，即数字外围（设备）接口 或 数字设备接口。DPI连接至第二块信号路由单元（SRU2）。</p>
<p>与SRU相似，SRU2也是一块能将大型系统信号流路由至处理器的复杂路由系统。</p>
<p>同样，每块评估板的DPI所连接的设备也不同。下图同：</p>
<p><img src="https://pic.islet.space/2021/06/20210601105459.png" alt="image-20210520111001486" style="zoom:67%;" /></p>
<p><img src="https://pic.islet.space/2021/06/20210612111612.png" alt="image-20210612111607855" style="zoom:67%;" /></p>
<p><img src="https://pic.islet.space/2021/06/20210612111852.png" alt="image-20210612111848897" style="zoom:67%;" /></p>
<h2 id="sru.h">SRU.H</h2>
<h3 id="sru">SRU()</h3>
<p>以下是 <code>&lt;sru21479.h&gt;</code> 中对 <code>SRU()</code> 的宏定义，<code>SRU2()</code> 与其相同 ：<code>#define SRU2(out,in)   SRU(out,in)</code>。</p>
<p>读取、修改和写回一个特定的SRU寄存器，以改变一个SRU的分配（即选择一个输入到一个输出）。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">** Macro: SRU</span></span><br><span class="line"><span class="comment">** Reads, modifies and writes back a particular SRU register to change a single</span></span><br><span class="line"><span class="comment">** SRU assignment (i.e. selects an input to an output).</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">ifdef</span> _LANGUAGE_C</span></span><br><span class="line"><span class="meta">#  <span class="meta-keyword">define</span> SRU(out,in)                        \</span></span><br><span class="line">     <span class="keyword">do</span> &#123;                                    \</span><br><span class="line">       *(<span class="keyword">volatile</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> *) in##_REG = \</span><br><span class="line">         ((<span class="keyword">unsigned</span> <span class="keyword">int</span>)sru_field(out,in) |  \</span><br><span class="line">         (* (<span class="keyword">volatile</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> *) in##_REG &amp; (<span class="keyword">unsigned</span> <span class="keyword">int</span>)sru_mask(out,in))); \</span><br><span class="line">     &#125; <span class="keyword">while</span> (<span class="number">0</span>)</span><br><span class="line"><span class="meta"># <span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#  <span class="meta-keyword">define</span> SRU(out,in)        \</span></span><br><span class="line">     r0=dm(in##_REG);        \</span><br><span class="line">     r1=sru_mask(out,in);    \</span><br><span class="line">     r0=r0 <span class="keyword">and</span> r1;           \</span><br><span class="line">     r1=sru_field(out,in);   \</span><br><span class="line">     r0=r0 <span class="keyword">or</span> r1;            \</span><br><span class="line">     dm(in##_REG)=r0;</span><br><span class="line"><span class="meta"># <span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<h3 id="sru_field">sru_field()</h3>
<p>为一个给定的输入和输出信号创建位域（bit field）。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">**   Macro: sru_field</span></span><br><span class="line"><span class="comment">**   Creates the bit field for a given input and output signal.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sru_field(out,in) \</span></span><br><span class="line">    (((in##_GROUP &amp; GROUP_A) &gt;&gt; LOG_GROUP_A) * A_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_B) &gt;&gt; LOG_GROUP_B) * B_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_C) &gt;&gt; LOG_GROUP_C) * C_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_D) &gt;&gt; LOG_GROUP_D) * D_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_E) &gt;&gt; LOG_GROUP_E) * E_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_F) &gt;&gt; LOG_GROUP_F) * F_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_G) &gt;&gt; LOG_GROUP_G) * G_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_H) &gt;&gt; LOG_GROUP_H) * H_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_I) &gt;&gt; LOG_GROUP_I) * I_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_A2)&gt;&gt; LOG_GROUP_A2)* A2_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_B2)&gt;&gt; LOG_GROUP_B2)* B2_#<span class="meta">#out \</span></span><br><span class="line">    |((in##_GROUP &amp; GROUP_C2)&gt;&gt; LOG_GROUP_C2)* C2_#<span class="meta">#out ) &lt;&lt; in##_SHIFT</span></span><br></pre></td></tr></table></figure>
<h3 id="sru_mask">sru_mask()</h3>
<p>创建一个掩码，可用于清除属于给定输入和输出信号的位域。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">**   Macro: sru_mask </span></span><br><span class="line"><span class="comment">**   Creates a mask which can be used for clearing the bitfield belonging </span></span><br><span class="line"><span class="comment">**   to the given input and output signal.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sru_mask(out,in) \</span></span><br><span class="line">     ~((((in##_GROUP &amp; GROUP_A) &gt;&gt; LOG_GROUP_A) * MASK_A \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_B) &gt;&gt; LOG_GROUP_B) * MASK_B \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_C) &gt;&gt; LOG_GROUP_C) * MASK_C \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_D) &gt;&gt; LOG_GROUP_D) * MASK_D \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_E) &gt;&gt; LOG_GROUP_E) * MASK_E \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_F) &gt;&gt; LOG_GROUP_F) * MASK_F \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_G) &gt;&gt; LOG_GROUP_G) * MASK_G \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_H) &gt;&gt; LOG_GROUP_H) * MASK_H \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_I) &gt;&gt; LOG_GROUP_I) * MASK_I \</span><br><span class="line">       |((in##_GROUP &amp; GROUP_A2)&gt;&gt; LOG_GROUP_A2)* MASK_A2\</span><br><span class="line">       |((in##_GROUP &amp; GROUP_B2)&gt;&gt; LOG_GROUP_B2)* MASK_B2\</span><br><span class="line">       |((in##_GROUP &amp; GROUP_C2)&gt;&gt; LOG_GROUP_C2)* MASK_C2) &lt;&lt; in##_SHIFT)</span><br></pre></td></tr></table></figure>
<h3 id="示例">示例</h3>
<p>如下图所示，1~8的LED灯珠都与一个处理器针脚相连。DPI和DAI在此处并没有严格划分界限，但是用法上仍有些差异，如前三个LED连接的是DPI针脚，其函数<code>SRU()</code>的第一个参数写的是 <code>FLAG</code>，而其他 DAI 的第一个参数是 <code>LOW</code> 。</p>
<p><img src="https://pic.islet.space/2021/05/20210520113348.png" alt="image-20210520113025876" style="zoom:50%;" /></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">void Init_LEDs(void)</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;* 设置SRU和路由，使标志引脚连接到DPI引脚缓冲区 *&#x2F;</span><br><span class="line"></span><br><span class="line">	&#x2F;* 只使用标志4至15，标志0至3在DPI上不可用。 *&#x2F;</span><br><span class="line"></span><br><span class="line">	SRU(FLAG4_O,DPI_PB06_I);	&#x2F;* 将 Flag4 输出 连接到 DPI_PB06 输入（用于LED1） *&#x2F;</span><br><span class="line">	SRU(FLAG5_O,DPI_PB13_I);	&#x2F;* 将 Flag5 输出 连接到 DPI_PB13 输入（用于LED2） *&#x2F;</span><br><span class="line">	SRU(FLAG6_O,DPI_PB14_I);	&#x2F;* 将 Flag6 输出 连接到 DPI_PB14 输入（用于LED3） *&#x2F;</span><br><span class="line"></span><br><span class="line">	SRU(LOW,DAI_PB03_I);	    &#x2F;* connect Input LOW to LED4 *&#x2F;</span><br><span class="line">	SRU(LOW,DAI_PB04_I);    	&#x2F;* connect Input LOW to LED5 *&#x2F;</span><br><span class="line">	SRU(LOW,DAI_PB15_I);		&#x2F;* connect Input LOW to LED6 *&#x2F;</span><br><span class="line">	SRU(LOW,DAI_PB16_I);		&#x2F;* connect Input LOW to LED7 *&#x2F;</span><br><span class="line">	SRU(LOW,DAI_PB17_I);		&#x2F;* connect Input LOW to LED8 *&#x2F;</span><br><span class="line"></span><br><span class="line">	&#x2F;* 使用以下顺序启用缓冲器：高电平-&gt;输出，低电平-&gt;输入 *&#x2F;</span><br><span class="line"></span><br><span class="line">	SRU(HIGH,DPI_PBEN06_I);		&#x2F;* LED1 *&#x2F;</span><br><span class="line">	SRU(HIGH,DPI_PBEN13_I);		&#x2F;* LED2 *&#x2F;</span><br><span class="line">	SRU(HIGH,DPI_PBEN14_I);		&#x2F;* LED3 *&#x2F;</span><br><span class="line">	SRU(HIGH,PBEN03_I);			&#x2F;* LED4 *&#x2F;</span><br><span class="line">	SRU(HIGH,PBEN04_I);			&#x2F;* LED5 *&#x2F;</span><br><span class="line">	SRU(HIGH,PBEN15_I);			&#x2F;* LED6 *&#x2F;</span><br><span class="line">	SRU(HIGH,PBEN16_I);			&#x2F;* LED7 *&#x2F;</span><br><span class="line">	SRU(HIGH,PBEN17_I);			&#x2F;* LED8 *&#x2F;</span><br><span class="line"></span><br><span class="line">	&#x2F;* 将标志引脚设置为输出 *&#x2F;</span><br><span class="line">	sysreg_bit_set( sysreg_FLAGS, (FLG4O|FLG5O|FLG6O) );</span><br><span class="line"></span><br><span class="line">	&#x2F;* 清除标志引脚 *&#x2F;</span><br><span class="line">	sysreg_bit_clr( sysreg_FLAGS, (FLG4|FLG5|FLG6) );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="定时器">定时器</h2>
<p>《ADSP-21477_21478_21479_cn》</p>
<figure>
<img src="https://pic.islet.space/2021/06/20210611170206.png" alt="image-20210611170204474" /><figcaption aria-hidden="true">image-20210611170204474</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/06/20210611170307.png" alt="image-20210611170253655" /><figcaption aria-hidden="true">image-20210611170253655</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/06/20210611170344.png" alt="image-20210611170342735" /><figcaption aria-hidden="true">image-20210611170342735</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/06/20210611170357.png" alt="image-20210611170355842" /><figcaption aria-hidden="true">image-20210611170355842</figcaption>
</figure>
<h3 id="创建定时器">创建定时器</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Install and enable a handler for the high priority core timer interrupt.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">adi_int_InstallHandler(ADI_CID_TMZHI, <span class="comment">/*iid - high priority core timer */</span></span><br><span class="line">		               timer_isr,     <span class="comment">/*handler*/</span></span><br><span class="line">		               (<span class="keyword">void</span> *)&amp;timer_isr_count1, <span class="comment">/*handler parameter*/</span></span><br><span class="line">		                <span class="literal">true</span>           <span class="comment">/*do enable*/</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="定时器中断句柄">定时器中断句柄</h3>
<p>来自实例《core_timer》:</p>
<ul>
<li>在定时器中断句柄 <code>timer_isr</code> 里面，不能调用标准IO函数，或者更新非volatile全局变量</li>
<li>可以使用处理程序参数来识别被处理的中断 <code>iid</code>，并通过中断特定的回调指针参数 <code>handlerArg</code> 来访问数据。</li>
</ul>
<figure>
<img src="https://pic.islet.space/2021/06/20210621154021.png" alt="image-20210612151008408" /><figcaption aria-hidden="true">image-20210612151008408</figcaption>
</figure>
<h1 id="examples">EXAMPLES</h1>
<h2 id="exp1">EXP1</h2>
<p>本案例使用麦克风采集信号并从前两个通道输入，经过信号增益放大器调整后经过立体声通道输出。</p>
<p>具体步骤如下：</p>
<ol type="1">
<li>从左侧 <strong>树状工具箱</strong>(TreeToolBox)中拖出1772和USBi，并进行连接。</li>
</ol>
<p><img src="https://pic.islet.space/2021/05/image-20210428094527305.png" alt="image-20210428094527305" style="zoom: 67%;" /></p>
<ol start="2" type="1">
<li>在 <strong>原理图（SCHEMATIC)</strong> <img src="https://pic.islet.space/2021/05/image-20210506150111553.png" alt="image-20210506150111553" style="zoom:80%;" />中需要对输入输出路径进行定义，在此处定义的所有图形编程内容都是对 <strong>可编程增益放大器（PGA）</strong>的使用，即此处的输入到输出所有内容都不经过 <strong>信号通路（SIGNAL ROUTING）</strong> 选项卡中的 <strong>音频处理核心（AUDIO PROCESSING CORE）</strong>，是由 <strong>核心输入选择器（CORE INPUT SELECTION）</strong>完成的，<mark>也可以理解为PGA就是在其中，且PGA的设置在原理图中进行。</mark></li>
</ol>
<p><img src="https://pic.islet.space/2021/05/image-20210506145903478.png" alt="image-20210506145903478" style="zoom:67%;" /></p>
<ol start="3" type="1">
<li>在原理图中，从左侧 <img src="https://pic.islet.space/2021/05/image-20210506150230833.png" alt="image-20210506150230833" style="zoom:80%;" /> 拖出组件并连线如下，其中需要用到四个通道中的第1及第2通道，每个通告分别连接到一个 <strong>线性增益器（LINEAR GAIN）</strong>，增益50分贝，将原本的麦克风信号从-60分贝左右提升一下。然后经过 <strong>全通角过滤器（ALL POLE FILTER）</strong>,对1500Hz以下的声音增益10分贝。再经过 <strong>分线器（T CONNECTION）</strong>，将信号分别传输给 <strong>分贝显示器（DISPLAY DBREG）</strong>及 <strong>输出通道（OUTPUT）</strong>。</li>
</ol>
<p><img src="https://pic.islet.space/2021/05/image-20210428095433721.png" alt="image-20210428095433721" style="zoom:80%;" /></p>
<p><img src="https://pic.islet.space/2021/05/image-20210506144919655.png" alt="image-20210506144919655" style="zoom: 80%;" /></p>
<ol start="4" type="1">
<li>另，PGA的设置还需要在 <strong>PGA/ADC</strong> 选项卡中进行设置：</li>
</ol>
<ul>
<li>启用<strong>PGA<sub>x</sub></strong> 及 <strong>PGA<sub>x</sub> Boost</strong></li>
<li>启用 <strong>Mic<sub>x</sub> Bias</strong></li>
<li>调整 各通道的增益大小等</li>
</ul>
<p><img src="https://pic.islet.space/2021/05/image-20210506145534521.png" alt="image-20210506145534521" style="zoom:80%;" /></p>
<ol start="5" type="1">
<li>对 <strong>信号通路</strong> 选项卡进行设置，使信号不经过 <strong>音频处理核心</strong> ，启用 <strong>输出ASRC源选择器（OUTPUT ASRC SOURCE SELECT）</strong> ，信号经流如图示：</li>
</ol>
<p><img src="https://pic.islet.space/2021/05/image-20210506150516695.png" alt="image-20210506150516695" style="zoom: 80%;" /></p>
<ol start="6" type="1">
<li>​ 如果设置芯片使用，可以在 <strong>芯片控制（CHIP CONTROL）</strong>选项卡中设置性能增强模式</li>
</ol>
<p><img src="https://pic.islet.space/2021/05/image-20210506151533990.png" alt="image-20210506151533990" style="zoom:80%;" /></p>
<ol start="7" type="1">
<li>接入正常的TS接口麦克风即可输入正常波形。</li>
</ol>
<h2 id="exp2">EXP2</h2>
<p>本案例为PLL及时钟案例，首先需要明确以下几点：</p>
<ol type="1">
<li>1772的工作频率为12.288兆赫，PLL的输出频率被要求一定是24.576兆赫。</li>
<li>且从MCLKIN输入的频率范围为8至27兆赫，可以通过整数或分数分频来获得1772所需的工作频率（最终必须是12.288兆赫）。</li>
<li>通过设置4个参数 <code>x</code> 、<code>R</code>、<code>N</code> 及 <code>M</code> 对PLL进行参数调整，其中整数倍分频时只有在 <code>MCLKIN = 12.288MHz</code> 或 <code>MCLKIN = 24.576MHz</code> 时可用。</li>
</ol>
<p>已知，MCLK的输入频率16.625MHz，符合输入范围要求，以及最终目标输出频率24.576MHz。</p>
<p>首先启用PLL，点击<img src="https://pic.islet.space/2021/05/image-20210513100438475.png" alt="image-20210513100438475" style="zoom: 67%;" />，然后通过对 <code>PLL M and N Calculator</code> 进行设置，并点击 <code>Load Parameters</code> 进行自动计算和加载即可。</p>
<p>在主时钟源选项（Main Clock Source）中选择经过PLL处理的时钟源，并设置主时钟和核心时钟的分频率为 1/2即可。</p>
<p>从旁边也可以看到自动计算出来的分频系数：<img src="https://pic.islet.space/2021/05/image-20210513100800163.png" alt="image-20210513100800163" /></p>
<figure>
<img src="https://pic.islet.space/2021/05/image-20210513100908671.png" alt="image-20210513100908671" /><figcaption aria-hidden="true">image-20210513100908671</figcaption>
</figure>
<p>除了可以直接应用 SigmaStudio 的 <code>load parameters</code> 直接进行参数计算外，可以参考《在linux上编写求解ADAU1772的PLL系数》文章，自行系数计算。</p>
<h2 id="exp3">EXP3</h2>
<p>本例中主要完成TWI代码的编写，具体可以参见《I2C通信》笔记。以下是一开始的开发思路：</p>
<p>利用ADI官方提供（导出）的C代码，通过I2C协议向ADAU1772 codec芯片写入寄存器值，在ADAU寄存器写入的C代码中，依赖头文件<code>&lt;SigmaStudioFW.h&gt;</code>，其所有宏定义类型的函数都需要用户自行定义。</p>
<figure>
<img src="https://pic.islet.space/2021/05/20210520095649.png" alt="image-20210520095648245" /><figcaption aria-hidden="true">image-20210520095648245</figcaption>
</figure>
<h3 id="arduino示例">Arduino示例</h3>
<p>在Github上的 <strong><a target="_blank" rel="noopener" href="https://github.com/ColeMahlowitz/ADAU1761-Self-Boot-With-Arduino">ADAU1761-Self-Boot-With-Arduino</a></strong> 中，适用于 Arduino 和 ADAU1761 的寄存器块（WRITE_REGISTER_BLOCK）定义实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">void SIGMA_WRITE_REGISTER_BLOCK(byte IC_address, word subAddress, int dataLength, byte pdata[]) &#123;</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; start I2C transfer</span><br><span class="line">  if (!i2c_start((IC_address)|I2C_WRITE)) &#123; </span><br><span class="line">    Serial.println(&quot;I2C device busy for WRITE REGISTER BLOCK&quot;);</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; write subAddresses. (ADAU1761 needs the 16 bit subAddress written as two 8 bit bytes with an &quot;ACK&quot; inbetween</span><br><span class="line">  uint8_t addressLowByte &#x3D; subAddress &amp; 0xff;</span><br><span class="line">  uint8_t addressHighByte &#x3D; (subAddress &gt;&gt; 8);</span><br><span class="line"></span><br><span class="line">  i2c_write(addressHighByte); </span><br><span class="line">  i2c_write(addressLowByte); </span><br><span class="line"></span><br><span class="line">  if (dataLength &lt; 50 ) &#123;</span><br><span class="line">    for (int i&#x3D;0; i&lt;dataLength; i++) &#123; </span><br><span class="line">      i2c_write(pdata[i]); &#x2F;&#x2F;write data bytes</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  else &#123; </span><br><span class="line">    for (int i&#x3D;0; i&lt;dataLength; i++) &#123;</span><br><span class="line">      i2c_write(pgm_read_byte_near(pdata + i)); &#x2F;&#x2F;write data bytes from PROGMEM (for param and program data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  i2c_stop(); &#x2F;&#x2F; stop the I2C communication</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在MBED网站中，大量往右对ADAU1701的 <code>&lt;SigmaStudioFW.h&gt;</code> 提供了支持，原网页如：<a target="_blank" rel="noopener" href="https://os.mbed.com/forum/electronics/topic/4784/">ADAU1701</a></p>
<p>将宏定义改为函数形式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SIGMA_WRITE_REGISTER_BLOCK</span><span class="params">(<span class="keyword">int</span> devAddress, <span class="keyword">int</span> address, <span class="keyword">int</span> length, ADI_REG_TYPE *pData )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ii = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> zz = <span class="number">0</span>;</span><br><span class="line">    Tx_Idx = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*----- Transmission Phase -----*/</span></span><br><span class="line">    ThisBufferSize = Address_Length + length; </span><br><span class="line"> </span><br><span class="line">    I2C1_Buffer_Tx[<span class="number">0</span>] =   (address &amp; <span class="number">0xFF00</span>)&gt;&gt;<span class="number">8</span>;</span><br><span class="line">    I2C1_Buffer_Tx[<span class="number">1</span>] =   address &amp; <span class="number">0x00FF</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span>(zz=<span class="number">0</span>;zz&lt;length;zz++)&#123;</span><br><span class="line">    	I2C1_Buffer_Tx [zz + Address_Length] =   pData[zz];</span><br><span class="line">    &#125; </span><br><span class="line">    Tx_Idx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ii =<span class="number">0</span>;ii &lt; ThisBufferSize;ii++)&#123;    </span><br><span class="line">        NextBufferEnd =  ThisBufferSize;<span class="comment">//I2C1_numbytes[ii];    </span></span><br><span class="line">        <span class="keyword">if</span>(ii == <span class="number">0</span>)&#123;</span><br><span class="line">            I2C_GenerateSTART(I2C1, ENABLE);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">/* Send data */</span></span><br><span class="line">        <span class="keyword">while</span>(Tx_Idx &lt; NextBufferEnd)   </span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">        &#125;   </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SIGMA_WRITE_DELAY</span><span class="params">(<span class="keyword">int</span> devAddress, <span class="keyword">int</span> length, ADI_REG_TYPE *pData )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> nCount=<span class="number">0</span>;</span><br><span class="line">    nCount=<span class="number">0xFFFFF</span>;</span><br><span class="line">    <span class="keyword">for</span>(; nCount != <span class="number">0</span>; nCount--);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体的代码已经贴在《I2C通信》了，21478和21479支持TWI的寄存器控制，但是更为复杂，官方没有给示例，因此使用了引脚高低高低电平的控制来实现通信。</p>
<h3 id="数字逻辑分析仪">数字逻辑分析仪</h3>
<p>在EXP3中会频繁采集I2C、I2S、SPI等通信协议发过来的数据，因此需要使用数字逻辑分析仪进行数据采集和分析，在本次开发过程中使用了两种数字逻辑分析仪，分别是 <strong><em>USBee Suite</em></strong> 和 <strong><em>Saleae Logic</em></strong> ，推荐使用后者，软件更夹稳定、成熟和易使用。如果采用前者，那么软件经常崩溃。后者在采集I2S等高速通信协议中的电平信号时，需要将采样速率提升一下，24MS/s 的速度仍然能会采样变形。</p>
<figure>
<img src="https://pic.islet.space/2021/06/20210623161904.png" alt="image-20210623134058687" /><figcaption aria-hidden="true">image-20210623134058687</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/06/20210623161909.png" alt="image-20210623134114244" /><figcaption aria-hidden="true">image-20210623134114244</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/06/20210623161911.png" alt="image-20210623133953887" /><figcaption aria-hidden="true">image-20210623133953887</figcaption>
</figure>
<p>​</p>
<figure>
<img src="https://pic.islet.space/2021/06/20210623161914.png" alt="image-20210623134006076" /><figcaption aria-hidden="true">image-20210623134006076</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/04/23/Linux/GCC/2021-04-23-How%20to%20Install%20GCC%20(build-essential)%20on%20Ubuntu%2020.04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/23/Linux/GCC/2021-04-23-How%20to%20Install%20GCC%20(build-essential)%20on%20Ubuntu%2020.04/" class="post-title-link" itemprop="url">How to Install GCC (build-essential) on Ubuntu 20.04</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-04-23 23:58:32" itemprop="dateCreated datePublished" datetime="2021-04-23T23:58:32+08:00">2021-04-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-16 01:19:47" itemprop="dateModified" datetime="2021-09-16T01:19:47+08:00">2021-09-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://linuxize.com/post/how-to-install-gcc-on-ubuntu-20-04/#:~:text=The%20default%20Ubuntu%20repositories%20contain%20a%20meta-package%20named,as%20root%20or%20user%20with%20sudo%20privileges%20%3A">linuxize.com</a></p>
<p>The GNU Compiler Collection (GCC) is a collection of compilers and libraries for C, C++, Objective-C, Fortran, Ada, <a target="_blank" rel="noopener" href="https://linuxize.com/post/how-to-install-go-on-ubuntu-20-04/">Go</a> , and D programming languages. A lot of open-source projects, including the Linux kernel and GNU tools, are compiled using GCC.</p>
<p>This article explains how to install GCC on Ubuntu 20.04.</p>
<h1 id="installing-gcc-on-ubuntu-20.04">Installing GCC on Ubuntu 20.04</h1>
<p>The default Ubuntu repositories contain a meta-package named “build-essential” that includes the GNU compiler collection, GNU debugger, and other development libraries and tools required for compiling software.</p>
<p>To install the Development Tools packages, run the following command as root or <a target="_blank" rel="noopener" href="https://linuxize.com/post/how-to-create-a-sudo-user-on-ubuntu/">user with sudo privileges</a> :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install build-essential</span><br></pre></td></tr></table></figure>
<p>The command installs a lot of packages, including <code>gcc</code>, <code>g++</code> and <code>make</code>.</p>
<p>You may also want to install the manual pages about using GNU/Linux for development:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install manpages-dev</span><br></pre></td></tr></table></figure>
<p>Verify that the GCC compiler is successfully installed by running the following command that prints the GCC version:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc --version</span><br></pre></td></tr></table></figure>
<p>Ubuntu 20.04 repositories provide GCC version <code>9.3.0</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc (Ubuntu 9.3.0-10ubuntu2) 9.3.0</span><br><span class="line">Copyright (C) 2019 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the source for copying conditions.  There is NO</span><br><span class="line">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure>
<p>That’s it. GCC tools and libraries have been installed on your Ubuntu system.</p>
<h1 id="compiling-a-hello-world-example">Compiling a Hello World Example</h1>
<p>Compiling a basic C or C++ program using GCC is pretty easy. Open your <a target="_blank" rel="noopener" href="https://linuxize.com/post/how-to-install-visual-studio-code-on-ubuntu-18-04/">text editor</a> and create the following file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano hello.c</span><br></pre></td></tr></table></figure>
<p>hello.c</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; hello.c</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main() &#123;</span><br><span class="line">    printf(&quot;Hello, world!\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Save the file and compile it into an executable:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc hello.c -o hello</span><br></pre></td></tr></table></figure>
<p>This creates a binary file named <code>hello</code> in the same directory where you run the command.</p>
<p>Execute the <code>hello</code> program with:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;hello</span><br></pre></td></tr></table></figure>
<p>The program should print:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World!</span><br></pre></td></tr></table></figure>
<h1 id="installing-multiple-gcc-versions">Installing Multiple GCC Versions</h1>
<p>This section provides instructions about how to install and use multiple versions of GCC on Ubuntu 20.04. The newer versions of the GCC compiler include new functions and optimization improvements.</p>
<p>At the time of writing this article, the default Ubuntu repositories include several GCC versions, from <code>7.x.x</code> to <code>10.x.x</code>.</p>
<p>In the following example, we will install the latest three versions of GCC and G++.</p>
<p>Install the desired GCC and G++ versions by typing:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gcc-8 g++-8 gcc-9 g++-9 gcc-10 g++-10</span><br></pre></td></tr></table></figure>
<p>The commands below configures alternative for each version and associate a priority with it. The default version is the one with the highest priority, in our case that is <code>gcc-10</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install &#x2F;usr&#x2F;bin&#x2F;gcc gcc &#x2F;usr&#x2F;bin&#x2F;gcc-10 100 --slave &#x2F;usr&#x2F;bin&#x2F;g++ g++ &#x2F;usr&#x2F;bin&#x2F;g++-10 --slave &#x2F;usr&#x2F;bin&#x2F;gcov gcov &#x2F;usr&#x2F;bin&#x2F;gcov-10sudo update-alternatives --install &#x2F;usr&#x2F;bin&#x2F;gcc gcc &#x2F;usr&#x2F;bin&#x2F;gcc-9 90 --slave &#x2F;usr&#x2F;bin&#x2F;g++ g++ &#x2F;usr&#x2F;bin&#x2F;g++-9 --slave &#x2F;usr&#x2F;bin&#x2F;gcov gcov &#x2F;usr&#x2F;bin&#x2F;gcov-9sudo update-alternatives --install &#x2F;usr&#x2F;bin&#x2F;gcc gcc &#x2F;usr&#x2F;bin&#x2F;gcc-8 80 --slave &#x2F;usr&#x2F;bin&#x2F;g++ g++ &#x2F;usr&#x2F;bin&#x2F;g++-8 --slave &#x2F;usr&#x2F;bin&#x2F;gcov gcov &#x2F;usr&#x2F;bin&#x2F;gcov-8</span><br></pre></td></tr></table></figure>
<p>Later if you want to change the default version use the <code>update-alternatives</code> command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --config gcc</span><br><span class="line">There are 3 choices for the alternative gcc (providing &#x2F;usr&#x2F;bin&#x2F;gcc).</span><br><span class="line"></span><br><span class="line">  Selection    Path            Priority   Status</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">* 0            &#x2F;usr&#x2F;bin&#x2F;gcc-10   100       auto mode</span><br><span class="line">  1            &#x2F;usr&#x2F;bin&#x2F;gcc-10   100       manual mode</span><br><span class="line">  2            &#x2F;usr&#x2F;bin&#x2F;gcc-8    80        manual mode</span><br><span class="line">  3            &#x2F;usr&#x2F;bin&#x2F;gcc-9    90        manual mode</span><br><span class="line"></span><br><span class="line">Press &lt;enter&gt; to keep the current choice[*], or type selection number:</span><br></pre></td></tr></table></figure>
<p>You will be presented with a list of all installed GCC versions on your Ubuntu system. Enter the number of the version you want to be used as a default and press <code>Enter</code>.</p>
<p>The command will create <a target="_blank" rel="noopener" href="https://linuxize.com/post/how-to-create-symbolic-links-in-linux-using-the-ln-command/">symbolic links</a> to the specific versions of GCC and G++.</p>
<h1 id="conclusion">Conclusion</h1>
<p>We’ve shown you how to installed GCC on Ubuntu 20.04. You can now visit the official <a target="_blank" rel="noopener" href="https://gcc.gnu.org/onlinedocs/">GCC Documentation</a> page and learn how to use GCC and G++ to compile your C and C++ programs.</p>
<p>If you hit a problem or have feedback, leave a comment below.</p>
<p>​</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/04/22/Linux/System/2021-04-22-Linux%E5%88%86%E5%8C%BA%E5%8F%8A%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/22/Linux/System/2021-04-22-Linux%E5%88%86%E5%8C%BA%E5%8F%8A%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">Linux分区及文件系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-04-22 23:58:32" itemprop="dateCreated datePublished" datetime="2021-04-22T23:58:32+08:00">2021-04-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-04-26 00:14:16" itemprop="dateModified" datetime="2021-04-26T00:14:16+08:00">2021-04-26</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="linux分区与挂载">Linux分区与挂载</h1>
<h2 id="分区表">分区表</h2>
<p><strong>分区表</strong>(partition table)是将大表的数据分成称为分区的许多小的子集，类型有FAT16, FAT32, NTFS, exFAT, Ext2/3/4, HFS+, VMFS。另外，分区表的种类划分主要有：range（范围）、list（列表）和hash（散列）分区。划分依据主要是根据其表内部属性。同时，分区表可以创建其独特的分区索引。倘若硬盘丢失了分区表，数据就无法按顺序读取和写入，导致无法操作。</p>
<p>Kali Linux支持的分区表类型：aix、amiga、bsd、dvh、gpt、mac、msdos、pc98、sun、atari 及 loop。</p>
<h2 id="磁盘结构">磁盘结构</h2>
<p><img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/kzq6k9g8x7.png" /></p>
<p>磁盘结构</p>
<p>磁盘主要分为以下结构：</p>
<ul>
<li>磁头（head）：对磁盘的数据进行读写</li>
<li>磁道（track）：当磁盘旋转时，磁头若保持在一个位置上，则每个磁头都会在磁盘表面划出一个圆形轨迹，这些圆形轨迹就叫做磁道。 磁盘上的磁道是一组记录密度不同的同心圆</li>
<li>扇区（sector）：磁盘上的每个磁道被等分为若干个弧段，这些弧段便是硬盘的扇区。硬盘的第一个扇区，叫做引导扇区。 一个扇区的大小为512个字节。</li>
<li>柱面（cylinder）：在有多个盘片构成的盘组中，由不同盘片的面，但处于同一半径圆的多个磁道组成的一个圆柱面。</li>
</ul>
<p>整个磁盘的存储大小为： <strong>存储容量 ＝ 磁头数 × 磁道(柱面)数 × 每道扇区数 × 每扇区字节数</strong></p>
<h2 id="磁盘的使用">磁盘的使用</h2>
<p>一块新的硬盘或者U盘等外部设备在插入PC后，需要完成以下事情：</p>
<ul>
<li>在/dev/下创建一个新的目录，用来代表该磁盘。如/dev/hda，/dev/hdb等。</li>
<li>磁盘最开始需要进行格式化，使用<code>mkfs</code>命令为磁盘进行格式化，确定文件系统类型。</li>
<li>对硬盘进行分区后才可以使用。</li>
<li>在Linux中挂载到一个已经存在的目录下才可以访问该磁盘，否则无法访问。使用<code>mount</code>与<code>unmount</code>来进行挂载和卸载。</li>
</ul>
<blockquote>
<p>一般挂在点都在/mnt/xxx目录下，并且该目录必须是已经存在的，否则无法挂载</p>
</blockquote>
<h2 id="fdisk的使用">fdisk的使用</h2>
<p>在Linux中，使用fdisk来查看当前的硬盘以及硬盘的分区、文件系统等信息。并且使用fdisk命令可以为磁盘进行分区。 fdisk的命令有以下这些： Fdisk命令详解：</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">命令</th>
<th style="text-align: left;">备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">m</td>
<td style="text-align: left;">获取帮助</td>
</tr>
<tr class="even">
<td style="text-align: left;">n</td>
<td style="text-align: left;">新建分区</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p</td>
<td style="text-align: left;">显示分区表</td>
</tr>
<tr class="even">
<td style="text-align: left;">d</td>
<td style="text-align: left;">删除分区</td>
</tr>
<tr class="odd">
<td style="text-align: left;">b</td>
<td style="text-align: left;">设置卷标</td>
</tr>
<tr class="even">
<td style="text-align: left;">w</td>
<td style="text-align: left;">写入分区表</td>
</tr>
<tr class="odd">
<td style="text-align: left;">t</td>
<td style="text-align: left;">改变分区文件系统类型</td>
</tr>
<tr class="even">
<td style="text-align: left;">v</td>
<td style="text-align: left;">检验分区</td>
</tr>
<tr class="odd">
<td style="text-align: left;">l</td>
<td style="text-align: left;">显示fdisk所支持的文件系统代码</td>
</tr>
<tr class="even">
<td style="text-align: left;">q</td>
<td style="text-align: left;">退出</td>
</tr>
</tbody>
</table>
<h5 id="fdisk示例">fdisk示例</h5>
<ol type="1">
<li>使用<code>fdisk -l</code>查看当前所有硬盘以及分区的状态。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/sda: <span class="number">10.7</span> GB, <span class="number">10737418240</span> bytes</span><br><span class="line"><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">1305</span> cylinders</span><br><span class="line">Units = cylinders <span class="keyword">of</span> <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> bytes</span><br><span class="line"></span><br><span class="line">Device Boot   Start     End   Blocks  Id System</span><br><span class="line">/dev/sda1  *      <span class="number">1</span>     <span class="number">13</span>   <span class="number">104391</span>  <span class="number">83</span> Linux</span><br><span class="line">/dev/sda2       <span class="number">14</span>    <span class="number">1305</span>  <span class="number">10377990</span>  8e Linux LVM</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: <span class="number">5368</span> MB, <span class="number">5368709120</span> bytes</span><br><span class="line"><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">652</span> cylinders</span><br><span class="line">Units = cylinders <span class="keyword">of</span> <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> bytes</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb doesn<span class="string">&#x27;t contain a valid partition table</span></span><br></pre></td></tr></table></figure>
<p>可以看到目前有两个磁盘：</p>
<ul>
<li>sda：10.7G，255个磁头，63个磁道，1305个扇区
<ul>
<li>主分区1：/dev/sda1</li>
<li>主分区2：/dev/sda2</li>
</ul></li>
<li>sdb：5G，255个磁头，63个磁道，652个扇区
<ul>
<li>无分区</li>
</ul></li>
</ul>
<h2 id="分区的概念">分区的概念</h2>
<p>Linux中，磁盘只有被分区完后，才可以被挂载到目录下。</p>
<p>分区有三种：主分区，扩展分区，逻辑分区，每个磁盘最多只能有四个主分区，而可以有多个扩展分区，在扩展分区中，还可以创建多个逻辑分区。</p>
<ul>
<li>主分区：创建完后即可挂载</li>
<li>扩展分区：扩展分区创建完后，还需要创建逻辑分区才可以被挂载</li>
</ul>
<h2 id="示例">示例</h2>
<p>格式化一块硬盘(hdb)，并且对其进行分区，分区后进行挂载</p>
<h5 id="创建主分区">创建主分区</h5>
<ol type="1">
<li>通过<code>fdisk /dev/hdb</code>进入磁盘的命令模式</li>
</ol>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/s22aqd4o24.png" alt="s22aqd4o24" /><figcaption aria-hidden="true">s22aqd4o24</figcaption>
</figure>
<p>进入格式化命令模式</p>
<ol type="1">
<li>输入<code>n</code>代表创建分区，<code>e</code>代表扩展分区，<code>p</code>代表主分区</li>
</ol>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/0u6woej2nq.png" alt="0u6woej2nq" /><figcaption aria-hidden="true">0u6woej2nq</figcaption>
</figure>
<p>新建主分区</p>
<ol type="1">
<li>输入<code>First Cylinder</code>的值代表分区初始的柱面值，以及分区的大小<code>+3G</code>代表为该分区分3G</li>
</ol>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/vopy3iwz2v.png" alt="vopy3iwz2v" /><figcaption aria-hidden="true">vopy3iwz2v</figcaption>
</figure>
<p>输入初始柱面的值以及分区大小</p>
<ol type="1">
<li>输入<code>p</code>查看创建的分区<code>/dev/hdb1</code></li>
</ol>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/rflbc73wpf.png" alt="rflbc73wpf" /><figcaption aria-hidden="true">rflbc73wpf</figcaption>
</figure>
<p>新建分区</p>
<h5 id="创建扩展分区">创建扩展分区</h5>
<ol type="1">
<li>与创建主分区步骤相同，只是在选择<code>command action</code>的时候，选择<code>e</code>，表示创建扩展分区</li>
</ol>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/ymjwni22fr.png" alt="ymjwni22fr" /><figcaption aria-hidden="true">ymjwni22fr</figcaption>
</figure>
<p>创建后的扩展分区</p>
<ol type="1">
<li>在创建完扩展分区后，来创建逻辑分区，输入<code>l</code>代表创建逻辑分区</li>
</ol>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/ra4wa3017d.png" alt="ra4wa3017d" /><figcaption aria-hidden="true">ra4wa3017d</figcaption>
</figure>
<p>创建逻辑分区</p>
<ol type="1">
<li>与创建主分区、扩展分区一样，为逻辑分区选择起始的柱面，以及分配的大小</li>
</ol>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/y0kb4p9z23.png" alt="y0kb4p9z23" /><figcaption aria-hidden="true">y0kb4p9z23</figcaption>
</figure>
<p>分配分区大小</p>
<ol type="1">
<li>查看扩展分区</li>
</ol>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/c78q2lt7wi.png" alt="c78q2lt7wi" /><figcaption aria-hidden="true">c78q2lt7wi</figcaption>
</figure>
<p>查看分区信息</p>
<h5 id="分区格式化">分区格式化</h5>
<p>在磁盘分区创建完毕后，需要为分区通过<code>mkfs</code>进行格式化，赋予它文件系统： 如<code>ext2</code>,<code>ext3</code>,<code>vfat</code>等</p>
<p>使用命令 <code>mkfs -t ext3 /dev/hdb1</code>分别对分区<code>hdb1</code>进行格式化处理，格式化为ext3文件类型</p>
<p>其中<code>mkfs –t ext3</code>命令等价于<code>mkfs.ext3</code>，<code>mkfs -t ext2</code>命令等价于<code>mkfs.ext2</code></p>
<figure>
<img src="https://liewpicturestorage-20210408-1251513394.cos.ap-guangzhou.myqcloud.com/2021/04/513p7ponts.png" alt="513p7ponts" /><figcaption aria-hidden="true">513p7ponts</figcaption>
</figure>
<p>mkfs命令</p>
<h5 id="分区挂载">分区挂载</h5>
<p>当分区格式化完成文件系统后，就可以通过<code>mount</code>与<code>unmount</code>进行挂载与卸载了，当分区挂载到具体目录后，即可进行创建文件、删除文件等文件操作了。</p>
<p>如<code>mount /dev/hdb1 /mnt/hdb1</code>就会将<code>/dev/hdb1</code>分区挂载到<code>/mnt/hdb1</code>目录下，也就是该目录下的文件都会被写到<code>/dev/hdb1</code>的磁盘分区中保存。</p>
<p>本文参与<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/support-plan">腾讯云自媒体分享计划</a>，欢迎正在阅读的你也加入，一起分享。</p>
<h1 id="linux-文件系统">Linux 文件系统</h1>
<h2 id="文件系统类型">文件系统类型</h2>
<p>Kali Linux支持：btrfs、exfat、ext2\3\4、f2fs、fat16、fat32、hfs、hfs+、jfs、linux-swap、lvm2 pv、minix、nilfs2、ntfs、reiser4、reiserfs、udf、xfs;</p>
<h3 id="linux-swap">LINUX-SWAP</h3>
<p>Swap分区在系统的物理内存不够用的时候，把硬盘空间中的一部分空间释放出来，以供当前运行的程序使用。那些被释放的空间可能来自一些很长时间没有什么操作的程序，这些被释放的空间被临时保存到Swap分区中，等到那些程序要运行时，再从Swap分区中恢复保存的数据到内存中。 本文将从分区开始讲解如何开启SWAP交换空间</p>
<h4 id="分区">分区</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查看块设备</span><br><span class="line"># 如图可以看出硬盘sda和vdb还有剩余</span><br><span class="line">[root@rainss ~]# lsblk</span><br></pre></td></tr></table></figure>
<h2 id="分区类型">分区类型</h2>
<p>主分区、扩展分区、逻辑分区</p>
<h2 id="对齐类型">对齐类型</h2>
<p>对齐到MiB、对齐到柱面</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/04/22/Programming/C++/2021-04-22-Get%20Started%20with%20C++%20and%20Windows%20Subsystem%20for%20Linux%20in%20Visual%20Studio%20Code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/22/Programming/C++/2021-04-22-Get%20Started%20with%20C++%20and%20Windows%20Subsystem%20for%20Linux%20in%20Visual%20Studio%20Code/" class="post-title-link" itemprop="url">Get Started with C++ and Windows Subsystem for Linux in Visual Studio Code</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-04-22 23:58:32" itemprop="dateCreated datePublished" datetime="2021-04-22T23:58:32+08:00">2021-04-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-05-23 20:06:39" itemprop="dateModified" datetime="2021-05-23T20:06:39+08:00">2021-05-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/cpp/config-wsl">code.visualstudio.com</a></p>
<h2 id="using-c-and-wsl-in-vs-code">Using C++ and WSL in VS Code</h2>
<p>In this tutorial, you will configure Visual Studio Code to use the GCC C++ compiler (g++) and GDB debugger on Ubuntu in the <a target="_blank" rel="noopener" href="https://docs.microsoft.com/windows/wsl/install-win10">Windows Subsystem for Linux</a> (WSL). GCC stands for GNU Compiler Collection; GDB is the GNU debugger. WSL is a Linux environment within Windows that runs directly on the machine hardware, not in a virtual machine.</p>
<blockquote>
<p><strong>Note</strong>: Much of this tutorial is applicable to working with C++ and VS Code directly on a Linux machine.</p>
</blockquote>
<p>Visual Studio Code has support for working directly in WSL with the <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl">Remote - WSL extension</a>. We recommend this mode of <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/remote/wsl">WSL development</a>, where all your source code files, in addition to the compiler, are hosted on the Linux distro. For more background, see <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/remote/remote-overview">VS Code Remote Development</a>.</p>
<p>After completing this tutorial, you will be ready to create and configure your own C++ project, and to explore the VS Code documentation for further information about its many features. This tutorial does not teach you about GCC or Linux or the C++ language. For those subjects, there are many good resources available on the Web.</p>
<p>If you have any problems, feel free to file an issue for this tutorial in the <a target="_blank" rel="noopener" href="https://github.com/microsoft/vscode-docs/issues">VS Code documentation repository</a>.</p>
<h2 id="prerequisites">Prerequisites<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_prerequisites">#</a></h2>
<p>To successfully complete this tutorial, you must do the following steps:</p>
<ol type="1">
<li>Install <a target="_blank" rel="noopener" href="https://code.visualstudio.com/download">Visual Studio Code</a>.</li>
<li>Install the <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl">Remote - WSL extension</a>.</li>
<li>Install <a target="_blank" rel="noopener" href="https://docs.microsoft.com/windows/wsl/install-win10">Windows Subsystem for Linux</a> and then use the links on that same page to install your Linux distribution of choice. This tutorial uses Ubuntu. During installation, remember your Linux user password because you'll need it to install additional software.</li>
</ol>
<h2 id="set-up-your-linux-environment">Set up your Linux environment<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_set-up-your-linux-environment">#</a></h2>
<ol type="1">
<li><p>Open the Bash shell for WSL. If you installed an Ubuntu distro, type "Ubuntu" in the Windows search box and then click on it in the result list. For Debian, type "Debian", and so on.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/start-ubuntu.png" alt="Ubuntu in Start Menu" /><figcaption aria-hidden="true">Ubuntu in Start Menu</figcaption>
</figure>
<p>The shell appears with a command prompt that by default consists of your user name and computer name, and puts you in your home directory. For Ubuntu it looks like this:</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/bash-ubuntu.png" alt="Bash Shell" /><figcaption aria-hidden="true">Bash Shell</figcaption>
</figure></li>
<li><p>Make a directory called <code>projects</code> and then subdirectory under that called <code>helloworld</code>:</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir projects</span><br><span class="line">cd projects</span><br><span class="line">mkdir helloworld</span><br></pre></td></tr></table></figure></p></li>
<li><p>Although you will be using VS Code to edit your source code, you'll be <strong>compiling the source code on Linux using the g++ compiler</strong>. You'll also <strong>debug on Linux using GDB</strong>. These tools are not installed by default on Ubuntu, so you have to install them. Fortunately, that task is quite easy!</p></li>
<li><p>From the WSL command prompt, first run <code>apt-get update</code> to update the Ubuntu package lists. An out-of-date distro can sometimes interfere with attempts to install new packages.</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></p>
<p>If you like, you can run <code>sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade</code> to also download the latest versions of the system packages, but this can take significantly longer depending on your connection speed.</p></li>
<li><p>From the command prompt, install the GNU compiler tools and the GDB debugger by typing:</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential gdb</span><br></pre></td></tr></table></figure></p></li>
</ol>
<figure>
<img src="C:\Users\431240\AppData\Roaming\Typora\typora-user-images\image-20210419161354074.png" alt="image-20210419161354074" /><figcaption aria-hidden="true">image-20210419161354074</figcaption>
</figure>
<ol start="6" type="1">
<li>Verify that the install succeeded by locating g++ and gdb. If the filenames are not returned from the <code>whereis</code> command, try running the update command again.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">whereis g++</span><br><span class="line">whereis gdb</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note</strong>: The setup steps for installing the g++ compiler and GDB debugger apply if you are working directly on a Linux machine rather than in WSL. Running VS Code in your helloworld project, as well as the editing, building, and debugging steps are the same.</p>
</blockquote>
<h2 id="run-vs-code-in-wsl">Run VS Code in WSL<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_run-vs-code-in-wsl">#</a></h2>
<p>Navigate to your helloworld project folder and launch VS Code from the WSL terminal with <code>code .</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd $HOME&#x2F;projects&#x2F;helloworld</span><br><span class="line">code .</span><br></pre></td></tr></table></figure>
<p>You'll see a message about "Installing VS Code Server". <strong>VS Code is downloading and installing a small server on the Linux side that the desktop VS Code will then talk to.</strong></p>
<figure>
<img src="C:\Users\431240\AppData\Roaming\Typora\typora-user-images\image-20210419155740210.png" alt="image-20210419155740210" /><figcaption aria-hidden="true">image-20210419155740210</figcaption>
</figure>
<p>VS Code will then start and open the <code>helloWorld</code> folder. The File Explorer shows that VS Code is now running in the context of WSL with the title bar <strong>[WSL: Ubuntu]</strong>.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/file-explorer-wsl.png" alt="File Explorer in WSL" /><figcaption aria-hidden="true">File Explorer in WSL</figcaption>
</figure>
<p>You can also tell the remote context from the Status bar.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/wsl-status-bar.png" alt="Remote context in the Status bar" /><figcaption aria-hidden="true">Remote context in the Status bar</figcaption>
</figure>
<p>If you click on the Remote Status bar item, you will see a dropdown of Remote commands appropriate for the session.</p>
<figure>
<img src="C:\Users\431240\AppData\Roaming\Typora\typora-user-images\image-20210419155444952.png" alt="image-20210419155444952" /><figcaption aria-hidden="true">image-20210419155444952</figcaption>
</figure>
<p>For example, if you want to end your session running in WSL, you can select the <strong>Close Remote Connection</strong> command from the dropdown.</p>
<p>Running <code>code .</code> from your <em>WSL command prompt</em> will restart VS Code running in WSL.</p>
<p>The <strong>code .</strong> command opened VS Code in the current working folder, which becomes your "workspace". As you go through the tutorial, you will see three files created in a <code>.vscode</code> folder in the workspace:</p>
<ul>
<li><code>c_cpp_properties.json</code> (compiler path and IntelliSense settings)</li>
<li><code>tasks.json</code> (build instructions)</li>
<li><code>launch.json</code> (debugger settings)</li>
</ul>
<h2 id="add-a-source-code-file">Add a source code file<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_add-a-source-code-file">#</a></h2>
<p>In the File Explorer title bar, select the <strong>New File</strong> button and name the file <code>helloworld.cpp</code>.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/new-file-button.png" alt="New File title bar button" /><figcaption aria-hidden="true">New File title bar button</figcaption>
</figure>
<h3 id="install-the-cc-extension">Install the C/C++ extension<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_install-the-cc-extension">#</a></h3>
<p>Once you create the file and VS Code detects it is a C++ language file, you may be prompted to install the <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">Microsoft C/C++ extension</a> if you don't already have it installed.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/cpp-extension-notification.png" alt="C++ extension notification" /><figcaption aria-hidden="true">C++ extension notification</figcaption>
</figure>
<p>Choose <strong>Install</strong> and then <strong>Reload Required</strong> when the button is displayed in the Extensions view to complete installing the C/C++ extension.</p>
<p>If you already have C/C++ language extensions installed locally in VS Code, you'll need to go to the Extensions view (Ctrl+Shift+X) and install those extensions into WSL. Locally installed extensions can be installed into WSL by selecting the <strong>Install in WSL</strong> button and then <strong>Reload Required</strong>.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/install-in-wsl.png" alt="Install in WSL button" /><figcaption aria-hidden="true">Install in WSL button</figcaption>
</figure>
<h3 id="add-hello-world-source-code">Add hello world source code<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_add-hello-world-source-code">#</a></h3>
<p>Now paste in this source code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">   vector&lt;string&gt; msg &#123;&quot;Hello&quot;, &quot;C++&quot;, &quot;World&quot;, &quot;from&quot;, &quot;VS Code&quot;, &quot;and the C++ extension!&quot;&#125;;</span><br><span class="line"></span><br><span class="line">   for (const string&amp; word : msg)</span><br><span class="line">   &#123;</span><br><span class="line">      cout &lt;&lt; word &lt;&lt; &quot; &quot;;</span><br><span class="line">   &#125;</span><br><span class="line">   cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now press Ctrl+S to save the file. Notice how the file you just added appears in the <strong>File Explorer</strong> view (Ctrl+Shift+E) in the side bar of VS Code:</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/file-explorer-helloworld.png" alt="File Explorer" /><figcaption aria-hidden="true">File Explorer</figcaption>
</figure>
<p>You can also enable <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/codebasics#_saveauto-save">Auto Save</a> to automatically save your file changes, by checking <strong>Auto Save</strong> in the main <strong>File</strong> menu.</p>
<p>The Activity Bar on the far left lets you open different views such as <strong>Search</strong>, <strong>Source Control</strong>, and <strong>Run</strong>. You'll look at the <strong>Run</strong> view later in this tutorial. You can find out more about the other views in the VS Code <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/getstarted/userinterface">User Interface documentation</a>.</p>
<p>若在此处遇到未找到头文件的问题，请参照一下方法。</p>
<p><img src="C:\Users\431240\AppData\Roaming\Typora\typora-user-images\image-20210419160838596.png" alt="image-20210419160838596"  /></p>
<h2 id="explore-intellisense">Explore IntelliSense<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_explore-intellisense">#</a></h2>
<p>In your new <code>helloworld.cpp</code> file, hover over <code>vector</code> or <code>string</code> to see type information. After the declaration of the <code>msg</code> variable, start typing <code>msg.</code> as you would when calling a member function. You should immediately see a completion list that shows all the member functions, and a window that shows the type information for the <code>msg</code> object:</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/msg-intellisense.png" alt="Statement completion IntelliSense" /><figcaption aria-hidden="true">Statement completion IntelliSense</figcaption>
</figure>
<p>You can press the Tab key to insert the selected member; then, when you add the opening parenthesis, you will see information about any arguments that the function requires.您可以按Tab键插入所选的成员;然后，当添加左括号时，您将看到关于函数所需的任何参数的信息。</p>
<h2 id="build-helloworld.cpp">Build helloworld.cpp<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_build-helloworldcpp">#</a></h2>
<p>Next, you will create a <code>tasks.json</code> file to tell VS Code how to build (compile) the program. This task will invoke the g++ compiler on WSL to create an executable file based on the source code.</p>
<p>From the main menu, choose <strong>Terminal</strong> &gt; <strong>Configure Default Build Task</strong>. In the dropdown, which will display a tasks dropdown listing various predefined build tasks for C++ compilers. Choose <strong>g++ build active file</strong>, which will build the file that is currently displayed (active) in the editor.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/build-active-file.png" alt="Tasks C++ build dropdown" /><figcaption aria-hidden="true">Tasks C++ build dropdown</figcaption>
</figure>
<p>This will create a <code>tasks.json</code> file in a <code>.vscode</code> folder and open it in the editor.</p>
<p>Your new <code>tasks.json</code> file should look similar to the JSON below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;version&quot;: &quot;2.0.0&quot;,</span><br><span class="line">  &quot;tasks&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;shell&quot;,</span><br><span class="line">      &quot;label&quot;: &quot;g++ build active file&quot;,</span><br><span class="line">      &quot;command&quot;: &quot;&#x2F;usr&#x2F;bin&#x2F;g++&quot;,</span><br><span class="line">      &quot;args&quot;: [&quot;-g&quot;, &quot;$&#123;file&#125;&quot;, &quot;-o&quot;, &quot;$&#123;fileDirname&#125;&#x2F;$&#123;fileBasenameNoExtension&#125;&quot;],</span><br><span class="line">      &quot;options&quot;: &#123;</span><br><span class="line">        &quot;cwd&quot;: &quot;&#x2F;usr&#x2F;bin&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;problemMatcher&quot;: [&quot;$gcc&quot;],</span><br><span class="line">      &quot;group&quot;: &#123;</span><br><span class="line">        &quot;kind&quot;: &quot;build&quot;,</span><br><span class="line">        &quot;isDefault&quot;: true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The <code>command</code> setting specifies the program to run; in this case that is g++. The <code>args</code> array specifies the command-line arguments that will be passed to g++. These arguments must be specified in the order expected by the compiler. This task tells g++ to take the active file (<code>$&#123;file&#125;</code>), compile it, and create an executable file in the current directory (<code>$&#123;fileDirname&#125;</code>) with the same name as the active file but without an extension (<code>$&#123;fileBasenameNoExtension&#125;</code>), resulting in <code>helloworld</code> for our example.</p>
<blockquote>
<p><strong>Note</strong>: You can learn more about <code>tasks.json</code> variables in the <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/variables-reference">variables reference</a>.</p>
</blockquote>
<p>The <code>label</code> value is what you will see in the tasks list; you can name this whatever you like.</p>
<p>The <code>"isDefault": true</code> value in the <code>group</code> object specifies that this task will be run when you press Ctrl+Shift+B. This property is for convenience only; if you set it to false, you can still run it from the Terminal menu with <strong>Tasks: Run Build Task</strong>.</p>
<h3 id="running-the-build">Running the build<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_running-the-build">#</a></h3>
<ol type="1">
<li><p>Go back to <code>helloworld.cpp</code>. Your task builds the active file and you want to build <code>helloworld.cpp</code>.</p></li>
<li><p>To run the build task defined in <code>tasks.json</code>, press Ctrl+Shift+B or from the <strong>Terminal</strong> main menu choose <strong>Tasks: Run Build Task</strong>.</p></li>
<li><p>When the task starts, you should see the Integrated Terminal panel appear below the source code editor. After the task completes, the terminal shows output from the compiler that indicates whether the build succeeded or failed. For a successful g++ build, the output looks something like this:</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/wsl-task-in-terminal.png" alt="G++ build output in terminal" /><figcaption aria-hidden="true">G++ build output in terminal</figcaption>
</figure></li>
<li><p>Create a new terminal using the <strong>+</strong> button and you'll have a bash terminal running in the context of WSL with the <code>helloworld</code> folder as the working directory. Run <code>ls</code> and you should now see the executable <code>helloworld</code> (no file extension).</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/wsl-bash-terminal.png" alt="WSL bash terminal" /><figcaption aria-hidden="true">WSL bash terminal</figcaption>
</figure></li>
<li><p>You can run <code>helloworld</code> in the terminal by typing <code>./helloworld</code>.</p></li>
</ol>
<h3 id="modifying-tasks.json">Modifying tasks.json<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_modifying-tasksjson">#</a></h3>
<p>You can modify your <code>tasks.json</code> to build multiple C++ files by using an argument like <code>"$&#123;workspaceFolder&#125;/*.cpp"</code> instead of <code>$&#123;file&#125;</code>. You can also modify the output filename by replacing <code>"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;"</code> with a hard-coded filename (for example 'helloworld.out').</p>
<h2 id="debug-helloworld.cpp">Debug helloworld.cpp<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_debug-helloworldcpp">#</a></h2>
<p>Next, you'll create a <code>launch.json</code> file to configure VS Code to launch the GDB debugger when you press F5 to debug the program. From the main menu, choose <strong>Run</strong> &gt; <strong>Add Configuration...</strong> and then choose <strong>C++ (GDB/LLDB)</strong>.</p>
<p>You'll then see a dropdown for various predefined debugging configurations. Choose <strong>g++ build and debug active file</strong>.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/build-and-debug-active-file.png" alt="C++ debug configuration dropdown" /><figcaption aria-hidden="true">C++ debug configuration dropdown</figcaption>
</figure>
<p>VS Code creates a <code>launch.json</code> file, opens it in the editor, and builds and runs 'helloworld'.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">  &quot;configurations&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;g++ build and debug active file&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;cppdbg&quot;,</span><br><span class="line">      &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">      &quot;program&quot;: &quot;$&#123;fileDirname&#125;&#x2F;$&#123;fileBasenameNoExtension&#125;&quot;,</span><br><span class="line">      &quot;args&quot;: [],</span><br><span class="line">      &quot;stopAtEntry&quot;: false,</span><br><span class="line">      &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;,</span><br><span class="line">      &quot;environment&quot;: [],</span><br><span class="line">      &quot;externalConsole&quot;: false,</span><br><span class="line">      &quot;MIMode&quot;: &quot;gdb&quot;,</span><br><span class="line">      &quot;setupCommands&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,</span><br><span class="line">          &quot;text&quot;: &quot;-enable-pretty-printing&quot;,</span><br><span class="line">          &quot;ignoreFailures&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;preLaunchTask&quot;: &quot;g++ build active file&quot;,</span><br><span class="line">      &quot;miDebuggerPath&quot;: &quot;&#x2F;usr&#x2F;bin&#x2F;gdb&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The <code>program</code> setting specifies the program you want to debug. Here it is set to the active file folder <code>$&#123;fileDirname&#125;</code> and active filename without an extension <code>$&#123;fileBasenameNoExtension&#125;</code>, which if <code>helloworld.cpp</code> is the active file will be <code>helloworld</code>.</p>
<p>By default, the C++ extension won't add any breakpoints to your source code and the <code>stopAtEntry</code> value is set to <code>false</code>. Change the <code>stopAtEntry</code> value to <code>true</code> to cause the debugger to stop on the <code>main</code> method when you start debugging.</p>
<p>The remaining steps are provided as an optional exercise to help you get familiar with the editing and debugging experience.</p>
<h3 id="start-a-debugging-session">Start a debugging session<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_start-a-debugging-session">#</a></h3>
<ol type="1">
<li>Go back to <code>helloworld.cpp</code> so that it is the active file.</li>
<li>Press F5 or from the main menu choose <strong>Run &gt; Start Debugging</strong>. Before you start stepping through the code, let's take a moment to notice several changes in the user interface:</li>
</ol>
<ul>
<li><p>The Integrated Terminal appears at the bottom of the source code editor. In the <strong>Debug Output</strong> tab, you see output that indicates the debugger is up and running.</p></li>
<li><p>The editor highlights the first statement in the <code>main</code> method. This is a breakpoint that the C++ extension automatically sets for you:</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/wsl-breakpoint-default.png" alt="Initial breakpoint" /><figcaption aria-hidden="true">Initial breakpoint</figcaption>
</figure></li>
<li><p>The Run view on the left shows debugging information. You'll see an example later in the tutorial.</p></li>
<li><p>At the top of the code editor, a debugging control panel appears. You can move this around the screen by grabbing the dots on the left side.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/cpp/debug-controls.png" alt="Debugging controls" /><figcaption aria-hidden="true">Debugging controls</figcaption>
</figure></li>
</ul>
<h2 id="step-through-the-code">Step through the code<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_step-through-the-code">#</a></h2>
<p>Now you're ready to start stepping through the code.</p>
<ol type="1">
<li><p>Click or press the <strong>Step over</strong> icon in the debugging control panel.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/cpp/step-over-button.png" alt="Step over button" /><figcaption aria-hidden="true">Step over button</figcaption>
</figure>
<p>This will advance program execution to the first line of the for loop, and skip over all the internal function calls within the <code>vector</code> and <code>string</code> classes that are invoked when the <code>msg</code> variable is created and initialized. Notice the change in the <strong>Variables</strong> window on the left.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/debug-view-variables.png" alt="Debugging windows" /><figcaption aria-hidden="true">Debugging windows</figcaption>
</figure>
<p>In this case, the errors are expected because, although the variable names for the loop are now visible to the debugger, the statement has not executed yet, so there is nothing to read at this point. The contents of <code>msg</code> are visible, however, because that statement has completed.</p></li>
<li><p>Press <strong>Step over</strong> again to advance to the next statement in this program (skipping over all the internal code that is executed to initialize the loop). Now, the <strong>Variables</strong> window shows information about the loop variables.</p></li>
<li><p>Press <strong>Step over</strong> again to execute the <code>cout</code> statement. (Note that as of the March 2019 release, the C++ extension does not print any output to the <strong>Debug Console</strong> until the loop exits.)</p></li>
<li><p>If you like, you can keep pressing <strong>Step over</strong> until all the words in the vector have been printed to the console. But if you are curious, try pressing the <strong>Step Into</strong> button to step through source code in the C++ standard library!</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/cpp/gcc-system-header-stepping.png" alt="Breakpoint in gcc standard library header" /><figcaption aria-hidden="true">Breakpoint in gcc standard library header</figcaption>
</figure>
<p>To return to your own code, one way is to keep pressing <strong>Step over</strong>. Another way is to set a breakpoint in your code by switching to the <code>helloworld.cpp</code> tab in the code editor, putting the insertion point somewhere on the <code>cout</code> statement inside the loop, and pressing F9. A red dot appears in the gutter on the left to indicate that a breakpoint has been set on this line.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/cpp/breakpoint-in-main.png" alt="Breakpoint in main" /><figcaption aria-hidden="true">Breakpoint in main</figcaption>
</figure>
<p>Then press F5 to start execution from the current line in the standard library header. Execution will break on <code>cout</code>. If you like, you can press F9 again to toggle off the breakpoint.</p>
<p>When the loop has completed, you can see the output in the <strong>Debug Console</strong> tab of the integrated terminal, along with some other diagnostic information that is output by GDB.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/debug-console-output-wsl.png" alt="Debug console display" /><figcaption aria-hidden="true">Debug console display</figcaption>
</figure></li>
</ol>
<h2 id="set-a-watch">Set a watch<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_set-a-watch">#</a></h2>
<p>Sometimes you might want to keep track of the value of a variable as your program executes. You can do this by setting a <strong>watch</strong> on the variable.</p>
<ol type="1">
<li><p>Place the insertion point inside the loop. In the <strong>Watch</strong> window, click the plus sign and in the text box, type <code>word</code>, which is the name of the loop variable. Now view the Watch window as you step through the loop.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/cpp/watch-window.png" alt="Watch window" /><figcaption aria-hidden="true">Watch window</figcaption>
</figure></li>
<li><p>Add another watch by adding this statement before the loop: <code>int i = 0;</code>. Then, inside the loop, add this statement: <code>++i;</code>. Now add a watch for <code>i</code> as you did in the previous step.</p></li>
<li><p>To quickly view the value of any variable while execution is paused on a breakpoint, you can hover over it with the mouse pointer.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/cpp/mouse-hover.png" alt="Mouse hover" /><figcaption aria-hidden="true">Mouse hover</figcaption>
</figure></li>
</ol>
<h2 id="cc-configurations">C/C++ configurations<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_cc-configurations">#</a></h2>
<p>If you want more control over the C/C++ extension, you can create a <code>c_cpp_properties.json</code> file, which will allow you to change settings such as the path to the compiler, include paths, C++ standard (default is C++17), and more.</p>
<p>You can view the C/C++ configuration UI by running the command <strong>C/C++: Edit Configurations (UI)</strong> from the Command Palette (Ctrl+Shift+P).</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/cpp/command-palette.png" alt="Command Palette" /><figcaption aria-hidden="true">Command Palette</figcaption>
</figure>
<p>This opens the <strong>C/C++ Configurations</strong> page. When you make changes here, VS Code writes them to a file called <code>c_cpp_properties.json</code> in the <code>.vscode</code> folder.</p>
<figure>
<img src="https://code.visualstudio.com/assets/docs/cpp/wsl/intellisense-configurations-wsl.png" alt="Command Palette" /><figcaption aria-hidden="true">Command Palette</figcaption>
</figure>
<p>You only need to modify the <strong>Include path</strong> setting if your program includes header files that are not in your workspace or in the standard library path.</p>
<p>Visual Studio Code places these settings in <code>.vscode/c_cpp_properties.json</code>. If you open that file directly, it should look something like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;configurations&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;Linux&quot;,</span><br><span class="line">      &quot;includePath&quot;: [&quot;$&#123;workspaceFolder&#125;&#x2F;**&quot;],</span><br><span class="line">      &quot;defines&quot;: [],</span><br><span class="line">      &quot;compilerPath&quot;: &quot;&#x2F;usr&#x2F;bin&#x2F;gcc&quot;,</span><br><span class="line">      &quot;cStandard&quot;: &quot;c11&quot;,</span><br><span class="line">      &quot;cppStandard&quot;: &quot;c++17&quot;,</span><br><span class="line">      &quot;intelliSenseMode&quot;: &quot;clang-x64&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;version&quot;: 4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="closing-the-wsl-session">Closing the WSL session<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_closing-the-wsl-session">#</a></h2>
<p>When you are done working in WSL, you can close your remote session with the <strong>Close Remote Connection</strong> command available in the main <strong>File</strong> menu and the Command Palette (Ctrl+Shift+P). This will restart VS Code running locally. You can easily reopen your WSL session from the <strong>File</strong> &gt; <strong>Open Recent</strong> list by selecting folders with the <strong>[WSL]</strong> suffix.</p>
<h2 id="next-steps">Next steps<a href="about:reader?url=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcpp%2Fconfig-wsl#_next-steps">#</a></h2>
<ul>
<li>Explore the <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/codebasics">VS Code User Guide</a>.</li>
<li>Review the <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/languages/cpp">Overview of the C++ extension</a>.</li>
<li>Create a new workspace, copy your .json files to it, adjust the necessary settings for the new workspace path, program name, and so on, and start coding!</li>
</ul>
<p>11/22/2019</p>
<p>​</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/04/21/Signal/What%20is%20a%20Bypass%20Capacitor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/21/Signal/What%20is%20a%20Bypass%20Capacitor/" class="post-title-link" itemprop="url">What is a Bypass Capacitor?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-04-21 23:58:32" itemprop="dateCreated datePublished" datetime="2021-04-21T23:58:32+08:00">2021-04-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-04-29 00:50:14" itemprop="dateModified" datetime="2021-04-29T00:50:14+08:00">2021-04-29</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Signal/" itemprop="url" rel="index"><span itemprop="name">Signal</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="http://www.learningaboutelectronics.com/Articles/What-is-a-bypass-capacitor.html">learningaboutelectronics.com</a></p>
<h1 id="what-is-a-bypass-capacitor">What is a Bypass Capacitor?</h1>
<figure>
<img src="http://www.learningaboutelectronics.com/images/Bypass-capacitor.png" alt="Bypass capacitor" /><figcaption aria-hidden="true">Bypass capacitor</figcaption>
</figure>
<p>A bypass capacitor is a capacitor that shorts AC signals to ground, so that any AC noise that may be present on a DC signal is removed, producing a much cleaner and pure DC signal.</p>
<p>A bypass capacitor essentially bypasses AC noise that may be on a DC signal, filtering out the AC, so that a clean, pure DC signal goes through without any AC ripple.</p>
<p>For example, you may want a pure DC signal from a power source.</p>
<p>Below is a transistor circuit. A transistor is an active device, so in order to work, it needs DC power. This power source is VCC. In this case, VCC equals 15 volts.</p>
<figure>
<img src="http://www.learningaboutelectronics.com/images/DC-power-source-transistor.png" alt="DC Power Source for Transistor" /><figcaption aria-hidden="true">DC Power Source for Transistor</figcaption>
</figure>
<p>This 15 volts provides power to the transistor so that the transistor can amplify signals. We want this signal to be as purely DC as possible. Although we obtain our DC voltage, VCC, from a DC power source such as a power supply, the voltage isn't always purely DC. In fact, many times the voltage is very noisy and contains a lot of AC ripple on it, especially at the 60Hz frequency because this is the frequency at which AC signals run in many countries.</p>
<p>So although we want a pure DC signal, such as below:</p>
<figure>
<img src="http://www.learningaboutelectronics.com/images/Pure-DC-voltage.png" alt="Pure DC Voltage" /><figcaption aria-hidden="true">Pure DC Voltage</figcaption>
</figure>
<p>Many times, we get a noisy signal that looks like:</p>
<figure>
<img src="http://www.learningaboutelectronics.com/images/Noisy-dc-signal.png" alt="Noisy DC Voltage Signal" /><figcaption aria-hidden="true">Noisy DC Voltage Signal</figcaption>
</figure>
<p>A DC signal such as this is actually very common. This is undesired because it adds noise to the transistor circuit. Therefore, this noisy DC signal will be imposed on the AC signal. So the AC signal which may have music or some type of recording will now have much more noise.</p>
<p>This noise which is on the signal is AC ripple. Many times when using a DC power supply connected to an AC power outlet, it will have some of the AC noise transfer to the DC power voltage. AC ripple can also appear from other sources, so even batteries can produce noise.</p>
<p>To eliminate this AC ripple, we use a bypass capacitor. So our transistor circuit above will have a bypass capacitor added to it:</p>
<figure>
<img src="http://www.learningaboutelectronics.com/images/Bypass-capacitor-transistor-circuit.png" alt="Bypass Capacitor for a Transistor Circuit" /><figcaption aria-hidden="true">Bypass Capacitor for a Transistor Circuit</figcaption>
</figure>
<p>A capacitor is a device that offers a tremendously high resistance for signals of low frequencies. Therefore, signals at low frequencies will not go through them. This is because signals (current) always takes the path of least resistance. Therefore, they will instead go through the resistor, RE. Remember, again, this is for low frequency signals, which is basically DC signals.</p>
<p>However, capacitors offer much less resistance at higher frequencies (AC signals). So AC signals will go through the capacitor and then to gorund. Therefore, DC signals will go through the resistor, RE, while AC signals will go through the capacitor, getting shunted to ground. So AC signals get shunted to ground. This is how we have a clean DC signal across our circuit, while AC noise imposed on it is bypassed to ground.</p>
<figure>
<img src="http://www.learningaboutelectronics.com/images/How-a-bypass-capacitor-works.png" alt="How a Bypass Capacitor Works" /><figcaption aria-hidden="true">How a Bypass Capacitor Works</figcaption>
</figure>
<p>So a bypass capacitor blocks the DC from entering it by the great resistance it offers to the signal but accepts the AC noise that may be on the DC line and shunts or bypasses it to ground. This is how bypass capacitors work.</p>
<h1 id="how-to-choose-the-value-of-the-bypass-capacitor">How to Choose the Value of the Bypass Capacitor</h1>
<p>Now that you know conceptually what a bypass capacitor is, the next step is to know how to select the value of the bypass capacitor.</p>
<p>And selecting the value is pretty straightforward.</p>
<p>The value of the bypass capacitor should be at least 1/10th of the resistance across the emitter resistance, RE at the lowest frequency intended to be bypassed.</p>
<p>Because capacitors are reactive devices, they have different resistances to signals based on the signal's frequency. This is referred to as the capacitor's reactance, which can be seen as the resistance it offers. We want the capacitor to have 1/10th of the resistance to the flow of current than what the resistor offers for the frequency signal that we want to bypass.</p>
<p>If you visualize the current moving through the transistor, it can take one of 2 paths once it passes the collector and moves through the emitter. Current can either go the resistor, RE or current can flow through the bypass capacitor. Current always takes the path of least resistance. Therefore, current will take the path of the lower resistance. This is why you want the value of the resistance of the bypass capacitor to be at least 1/10th the value of the emitter resistor or, even better, less than one-tenth. We want the AC current to flow through the least resistance path, which is the bypass capacitor if the correct value is chosen.</p>
<p>However, DC signals do not see it as AC. To DC, the capacitor has infinite resistance. So DC will automatically go through the RE resistor, which offers lower resistance by far to the infinite resistance of the capacitor.</p>
<p>AC, however, does not see infinite resistance for the capacitor. If we choose the value correctly for the capacitor, we can make the capacitor a much lower-resistance path to ground, thus shorting out the AC signal to ground.</p>
<p>So let's go over a practical example of how we would select the bypass capacitor value.</p>
<p>Let's say we want to bypass the lowest possible frequency of 50Hz, because the frequency of AC voltages worldwide are 50-60Hz. Therefore, this frequency can be a very problematic because often there is AC ripple at this frequency.</p>
<p>Remember, when we said we bias the value of the bypass capacitor based on the lowest frequency that we want to bypass. So by selecting the frequency of 50Hz, this blocks frequencies from 50Hz and higher; so it covers 60Hz. As frequency of an AC signal increases, the resistance of the capacitor decreases and decreases with each increase. Therefore, all the frequencies above the frequency value that we choose get bypassed easier and easier. We'll demonstrate this all mathematically.</p>
<p>So we decided we want to bypass AC signals 50Hz or higher to ground.</p>
<p>The typical value of an emitter resistor is 400-500‎Ω. The resistance is kept low so that gain on the transistor isn't lowered too much.</p>
<p>So let's say we choose an emitter resistor of 470‎Ω.</p>
<p>This means that we want the reactance of the capacitor to be one-tenth of 470‎Ω or less, which is 47‎Ω or lower. So this is our target.</p>
<p>The formula for the reactance of a capacitor is, XC= 1/2πfc= 1/2(3.14)(50Hz)(C)=47Ω. Solving for the capacitance, C, we get the value of approximately 67μF. So we need a capacitor of at least 67μF to get a resistance of one-tenth the value of 470Ω resistor.</p>
<p>Since a 67μF capacitor isn't readily available, we can round up to 100μF, which is readily available and easy to obtain. This is even better, because with a larger capacitance, the capacitor offers even less resistance to the AC signal. If we plug a 100μF capacitor into the same capacitor reactance formula, we get XC= 1/2πfc= 1/2(3.14)(50Hz)(100μF)=31.8Ω. This is much lower than 1/10 of the 470Ω resistor that we have in parallel. So it will act effectively to short all AC signals 50Hz or higher to ground to clean up the DC signal.</p>
<p>Even if you wanted, you could increase the capacitance even more to allow for less AC noise on the signal. But a lot of times, this will not be done for cost and size constraints reasons. The larger the size a capacitor is, the more it costs per unit. Also the larger the size of a capacitor, the larger physically is. Therefore, if a company is designing a product, the size of the capacitor could be a problem if there are size constraint issues. The way things are going in electronics, companies want products to be as small and concise as possible. So due to reasons such as these, larger value capacitors won't always be chosen, but theoretically, they would increase the purity of the DC signal, by allowing more AC to ground.</p>
<p>So again, this is a summary of what a bypass capacitor is and how to select the value of them based on the lowest AC signal desired to be filtered out and the value of the resistance in parallel with the capacitor.</p>
<p>You can check out our <a target="_blank" rel="noopener" href="http://www.learningaboutelectronics.com/Articles/Bypass-capacitor-calculator.php">bypass capacitor calculator</a> to calculate the value of a bypass capacitor based on the input AC signal frequency and the value of the resistor in parallel.</p>
<p>Related Resources</p>
<p>​</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"enable","tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
