<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;islet.space&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Gemini&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;Searching...&quot;,&quot;empty&quot;:&quot;We didn&#39;t find any results for the search: ${query}&quot;,&quot;hits_time&quot;:&quot;${hits} results found in ${time} ms&quot;,&quot;hits&quot;:&quot;${hits} results found&quot;}}</script>
<meta name="description" content="笔记分享的旮旯孤岛而已">
<meta property="og:type" content="website">
<meta property="og:title" content="Coder的孤岛">
<meta property="og:url" content="http://islet.space/page/5/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="笔记分享的旮旯孤岛而已">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liewzheng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://islet.space/page/5/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;en&quot;,&quot;comments&quot;:&quot;&quot;,&quot;permalink&quot;:&quot;&quot;,&quot;path&quot;:&quot;page&#x2F;5&#x2F;index.html&quot;,&quot;title&quot;:&quot;&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>Coder的孤岛</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">54</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">102</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@qq.com" title="E-Mail → mailto:liewzheng@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/25/Blog/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/25/Blog/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">Hexo和博客评论系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2019-01-25 12:00:00 / Modified: 13:54:48" itemprop="dateCreated datePublished" datetime="2019-01-25T12:00:00+08:00">2019-01-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>为了让大家能在博文下评论两句也是费了老大劲儿了，各种搜评论系统和倒腾。<br>本篇博文在Hexo静态博客系统的基础上添加评论系统。</p>
<h1 id="1-博客评论系统"><a href="#1-博客评论系统" class="headerlink" title="1. 博客评论系统"></a>1. 博客评论系统</h1><p>现在知道的博客评论系统也不多，有所了解的是：<a target="_blank" rel="noopener" href="https://disqus.com/">Disqus</a>和Valine。目前也就只掌握了Disqus系统，下次有空学了其他评论系统的部署之后再来编辑吧。</p>
<h1 id="2-Disqus"><a href="#2-Disqus" class="headerlink" title="2. Disqus"></a>2. Disqus</h1><p>Disqus因为是国外的评论系统，因此最好是常在墙外的人使用，好像支持匿名评论。跟我国互联网的相关法规相违背，因此在国内使用的话，会加载不出来，因为被屏蔽了。当然，如果都是墙外的人，那就无所谓了。<br><strong>注意</strong><br>首先确认一下你的<strong>博客主题</strong>本身已经默认支持Disqus评论系统了，否则你可能会因为不懂js语言而被折腾得半死。至于怎么确认是否支持呢？主题文件夹中的<code>readme.md</code>文件或者<code>_config.yml</code>，看看里面是否有disqus支持字样及相关说明，确认完支持之后请继续下列步骤。<br>对了，如果你翻了墙也打不开Disqus官网，记得在你的SS软件中的PAC配置文件里，讲disqus.com代理相关语句添加进去。同理，如果你点进来看见没有评论系统，那说明你没有科学上网成功啊。</p>
<h2 id="2-1-注册账号"><a href="#2-1-注册账号" class="headerlink" title="2.1 注册账号"></a>2.1 注册账号</h2><ol>
<li>打开Disqus主页， 并点选<code>GET STARTED</code>。<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/WX20190125-111541.png" alt="Disqus主页"></li>
<li>根据提示注册。<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/031851.png" alt="Disqus账号注册"></li>
</ol>
<h2 id="2-2-Shortname获取"><a href="#2-2-Shortname获取" class="headerlink" title="2.2 Shortname获取"></a>2.2 Shortname获取</h2><ol>
<li>注册完之后，点选<code>I want to install Disqus on my site</code>网站会提示你输入Website Name。<br>后续我们会用到一个<strong>Shortname</strong>，区别于<strong>Website Name</strong>，Shortname是用来确保后续hexo部署的时候能够准确跟你的账户连接上的。（我当时好像没填Shortname，应该是自动生成的吧~）<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/032303.png"><br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/032455.png"></li>
<li> 找到Disqus右上角头像处，<code>Install on Site</code>选项。然后在左侧<code>SITE</code>栏目中找到<code>General</code>选项。从这里可以看到要找到Shortname。（下图中被圈中的马赛克部分就是你的Shortname）<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/032751.png"><br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/034605.png"></li>
</ol>
<h2 id="2-3-config-yml设置"><a href="#2-3-config-yml设置" class="headerlink" title="2.3 _config.yml设置"></a>2.3 _config.yml设置</h2><p>找到你的博客主题<code>/themes/hexo-theme-XXXXX-master/</code>下的<code>_config.yml</code>文件，然后修改或添加如下语句：（下列语句中，XXXXX为你的Shortname）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disqus_shortname: XXXXX</span><br></pre></td></tr></table></figure>

<h2 id="2-4-commont-ejs编辑"><a href="#2-4-commont-ejs编辑" class="headerlink" title="2.4 commont.ejs编辑"></a>2.4 commont.ejs编辑</h2><ol>
<li>找到与<code>_config.yml</code>文件同级目录底下的<code>layout/_partial/post/</code>中的<code>comment.ejs</code>文件。先复制一份到别处，做备份之用，修改坏了也不着急。然后讲源文件下的所有语句删除，复制以下语句并粘贴（没错，要复制粘贴的这段代码只有两行，因为等下要复制粘贴另外一段代码到这两行代码中间，表示”在非主页的时候执行评论系统“）：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if(!index)&#123; %&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></li>
<li>找到步骤2.2中的第2步骤里的页面，同为左侧<code>SITE</code>栏目中的<code>Installation</code>，下图所示：<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/040155.png"><br>然后滑动到底下，点选<code>Universal Code</code>，Disqus会自动生成连接到你账户的代码，复制中间部分的代码。（该区域的代码是有滑动条的，记得<strong>全选复制</strong>！）<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/040248.png"><br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/040459.png"><br>接着在刚刚的文件中，粘贴到那两行代码中间，完成后如下所示：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if(!index)&#123; %&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;disqus_thread&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line">*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.</span><br><span class="line">*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https:&#x2F;&#x2F;disqus.com&#x2F;admin&#x2F;universalcode&#x2F;#configuration-variables*&#x2F;</span><br><span class="line">&#x2F;*</span><br><span class="line">var disqus_config &#x3D; function () &#123;</span><br><span class="line">this.page.url &#x3D; PAGE_URL;  &#x2F;&#x2F; Replace PAGE_URL with your page&#39;s canonical URL variable</span><br><span class="line">this.page.identifier &#x3D; PAGE_IDENTIFIER; &#x2F;&#x2F; Replace PAGE_IDENTIFIER with your page&#39;s unique identifier variable</span><br><span class="line">&#125;;</span><br><span class="line">*&#x2F;</span><br><span class="line">(function() &#123; &#x2F;&#x2F; DON&#39;T EDIT BELOW THIS LINE</span><br><span class="line">var d &#x3D; document, s &#x3D; d.createElement(&#39;script&#39;);</span><br><span class="line">s.src &#x3D; &#39;https:&#x2F;&#x2F;blog-liewzheng-cn.disqus.com&#x2F;embed.js&#39;;</span><br><span class="line">s.setAttribute(&#39;data-timestamp&#39;, +new Date());</span><br><span class="line">(d.head || d.body).appendChild(s);</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;noscript&gt;Please enable JavaScript to view the &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;disqus.com&#x2F;?ref_noscript&quot;&gt;comments powered by Disqus.&lt;&#x2F;a&gt;&lt;&#x2F;noscript&gt;</span><br><span class="line"></span><br><span class="line">&lt;script id&#x3D;&quot;dsq-count-scr&quot; src&#x3D;&quot;&#x2F;&#x2F;blog-liewzheng-cn.disqus.com&#x2F;count.js&quot; async&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2-5-执行"><a href="#2-5-执行" class="headerlink" title="2.5 执行"></a>2.5 执行</h2><p>全部保存，重新运行以下语句便可进行网页预览啦！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/25/Hexo%E5%92%8C%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/041910.png"></p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol>
<li>《<a target="_blank" rel="noopener" href="http://moxfive.xyz/2016/01/02/hexo-comments/">为 Hexo 主题添加评论模块 — Disqus, 多说, 友言</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://valine.js.org/quickstart.html">快速开始</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/31411607">Hexo Next 主题点击加载 Disqus 和来必力双评论系统</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d68de067ea74">Hexo搭建博客系列：（六）Hexo添加Disqus评论</a>》</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/22/Hardware/FreeRTOS/FreeRTOS%E6%9C%AF%E8%AF%AD%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/22/Hardware/FreeRTOS/FreeRTOS%E6%9C%AF%E8%AF%AD%E6%95%B4%E7%90%86/" class="post-title-link" itemprop="url">FreeRTOS术语整理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-01-22 15:30:00" itemprop="dateCreated datePublished" datetime="2019-01-22T15:30:00+08:00">2019-01-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2019-01-24 17:05:56" itemprop="dateModified" datetime="2019-01-24T17:05:56+08:00">2019-01-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/InternetOfThings/" itemprop="url" rel="index"><span itemprop="name">InternetOfThings</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>以下术语解释为本人在学习FreeRTOS途中的整理，大多直接引用了官网的原解释，部分用自己的话进行描述。</p>
<h1 id="1-Task"><a href="#1-Task" class="headerlink" title="1. Task"></a>1. Task</h1><p>Task is used to process a serial of things. A task must be declared as void type and have a void-type pointer parameter , like: <code>void BLE_TASK(void * pvParameters);</code></p>
<p>And when used, it’s used in the function xTaskCreate() with 6 parameters, like: <code>xTaskCreate(BLE_TASK, “BEL_TASK”,4000, NULL, 5, NULL);</code></p>
<ul>
<li>The 1st parameter should be the task you defined, and it only need the name of your task function.</li>
<li>The 2nd parameter is the custom string you made in order to recognize it in the tasks list.</li>
<li>The 3rd parameter is task stack memory it need. <code>MEMORY = STACK DEPTH * STACK WIDTH</code></li>
<li>The 4th parameter is passed to the the task when it need, and it used to be NULL.</li>
<li>The 5th parameter is the priority of the task, the lowest priority is 0, the highest priority is 32. But it always advisable to keep it at the minimum necessary.</li>
<li>The 6th parameter is the return value: pdPASS or pdFAIL.</li>
</ul>
<h1 id="2-Scheduler"><a href="#2-Scheduler" class="headerlink" title="2. Scheduler"></a>2. Scheduler</h1><p>Scheduler is used to manage the tasks. It runs in the tick interrupt and select the highest priority task and bring it into RUNNING-STATE.</p>
<h1 id="3-IDLE-Task"><a href="#3-IDLE-Task" class="headerlink" title="3. IDLE Task"></a>3. IDLE Task</h1><p>IDLE Task is automatically created by the scheduler when vTaskStartScheduler() is called and it is always able to run.</p>
<h1 id="4-Task-State"><a href="#4-Task-State" class="headerlink" title="4. Task State"></a>4. Task State</h1><p>All the task has two big<br>states: <strong>RUNNING-STATE</strong> or <strong>NOT-RUNNING-STATE</strong>. BLOCKED-STATE, SUSPENDED-STATE and SUSPENDED-STATE are NON-RUNNING-STATE.</p>
<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/22/%E5%9B%BE%E7%89%871.png" alt="Task State"></p>
<h2 id="4-1-RUNNING-STATE"><a href="#4-1-RUNNING-STATE" class="headerlink" title="4.1 RUNNING-STATE"></a>4.1 RUNNING-STATE</h2><p>When the task is running, it is in the RUNNING-STATE.</p>
<h2 id="4-2-BLOCKED-STATE"><a href="#4-2-BLOCKED-STATE" class="headerlink" title="4.2 BLOCKED-STATE"></a>4.2 BLOCKED-STATE</h2><p>BLOCKED-STATE is a sub-state of NOT-RUNNING STATE.<br>Tasks can enter the BLOCKED-STATE to wait for two different types of event: Temporal Event &amp; Synchronization Events.<br>While in this state, tasks are not able to run, so cannot be selected by the scheduler.</p>
<h2 id="4-3-SUSPENDED-STATE"><a href="#4-3-SUSPENDED-STATE" class="headerlink" title="4.3 SUSPENDED-STATE"></a>4.3 SUSPENDED-STATE</h2><p>SUSPENDED-STATE is a sub-state of NOT-RUNNING STATE.</p>
<h2 id="4-4-READY-STATE"><a href="#4-4-READY-STATE" class="headerlink" title="4.4 READY-STATE"></a>4.4 READY-STATE</h2><p>READY-STATE is a sub-state of NOT-RUNNING STATE.</p>
<h1 id="5-Event"><a href="#5-Event" class="headerlink" title="5. Event"></a>5. Event</h1><p>Event is also called Interrupt. It is originated by the environment and force the embedded system to take action in response to it.</p>
<h1 id="6-Event-drive-task"><a href="#6-Event-drive-task" class="headerlink" title="6. Event-drive task"></a>6. Event-drive task</h1><p>Event-drive task has work after the event that triggers it, and is not able to enter the RUNNING-STATE before that event has occurred.</p>
<h1 id="7-Semaphore-s"><a href="#7-Semaphore-s" class="headerlink" title="7. Semaphore(s)"></a>7. Semaphore(s)</h1><p>(1) Binary Semaphore<br>(2) Counting Semaphore</p>
<h1 id="8-Queue-s"><a href="#8-Queue-s" class="headerlink" title="8. Queue(s)"></a>8. Queue(s)</h1><p>Queue provides a task-to-task, task-to-interrupt, interrupt-to-task communication mechanism.</p>
<h1 id="9-Event-Group-s"><a href="#9-Event-Group-s" class="headerlink" title="9. Event Group(s)"></a>9. Event Group(s)</h1><p>Event groups are another feature of FreeRTOS that allow events to be communicated to tasks.</p>
<h1 id="10-ISR"><a href="#10-ISR" class="headerlink" title="10. ISR"></a>10. ISR</h1><p>Interrupt Service Routine. It is a software process invoked by an interrupt request from a hardware device. It handles the request and sends it to the CPU, interrupting the active process. When the ISR is complete, the process is resumed.</p>
<h1 id="11-Task-amp-Event-Interrupt"><a href="#11-Task-amp-Event-Interrupt" class="headerlink" title="11. Task &amp; Event(Interrupt)"></a>11. Task &amp; Event(Interrupt)</h1><p>A task is a software feature that is unrelated to the hardware on which FreeRTOS is running. The priority of a task is assigned in software by the application writer, and a software algorithm (the scheduler) decides which task will be in the Running state.</p>
<p>Although written in software, an interrupt service routine is a hardware feature because the hardware controls which interrupt service routine will run, and when it will run. Tasks will only run when there are no ISRs running, so the lowest priority interrupt will interrupt the highest priority task, and there is no way for a task to pre-empt an ISR.</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol>
<li>&lt;<a target="_blank" rel="noopener" href="https://freertos.org/Documentation/RTOS_book.html">FreeRTOS Documentation</a>&gt;</li>
<li>&lt;<a target="_blank" rel="noopener" href="https://freertos.org/a00106.html">API</a>&gt;</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/17/Programing/C++/C++%20-%2010%E8%BF%9B%E5%88%B6%E6%95%B4%E5%9E%8B%E8%BD%AC%E6%8D%A2%E6%88%9016%E8%BF%9B%E5%88%B6%E6%98%BE%E7%A4%BA%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/17/Programing/C++/C++%20-%2010%E8%BF%9B%E5%88%B6%E6%95%B4%E5%9E%8B%E8%BD%AC%E6%8D%A2%E6%88%9016%E8%BF%9B%E5%88%B6%E6%98%BE%E7%A4%BA%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="post-title-link" itemprop="url">10进制整型转换成16进制显示的字符串</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2019-01-17 17:30:00 / Modified: 17:33:56" itemprop="dateCreated datePublished" datetime="2019-01-17T17:30:00+08:00">2019-01-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>原文出处：《<a target="_blank" rel="noopener" href="https://blog.csdn.net/ma2595162349/article/details/74590285">十进制数转为十六进制字符串</a>》</p>
<p>本文修改了以上原文的代码，修正了[0-16]区间的10进制数转换成16进制数时无法正确转换的问题。</p>
<p>代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> Hexadecimal_Code[]=<span class="string">&quot;0123456789ABCDEF&quot;</span>;</span><br><span class="line"><span class="keyword">char</span> str_Temp[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">Decimal_To_Hexadecimal_String</span><span class="params">(<span class="keyword">int</span> Decimal_Data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> High,Low,i=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span>(Decimal_Data &lt;= <span class="number">0</span> || Decimal_Data &gt; <span class="number">255</span>)</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	High=Decimal_Data &gt;&gt; <span class="number">4</span>;</span><br><span class="line">   	Low=Decimal_Data &amp; <span class="number">15</span>;</span><br><span class="line"></span><br><span class="line">  	str_Temp[i++]=Hexadecimal_Code[High];</span><br><span class="line">	str_Temp[i++]=Hexadecimal_Code[Low];</span><br><span class="line">	str_Temp[i]=<span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> str_Temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,Decimal_To_Hexadecimal_String(<span class="number">5</span>));</span><br><span class="line"></span><br><span class="line">   	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/14/Hardware/ESP32/ESP32%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/14/Hardware/ESP32/ESP32%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD%E6%95%B4%E7%90%86/" class="post-title-link" itemprop="url">ESP32相关术语整理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-01-14 15:30:00" itemprop="dateCreated datePublished" datetime="2019-01-14T15:30:00+08:00">2019-01-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2019-01-25 16:42:41" itemprop="dateModified" datetime="2019-01-25T16:42:41+08:00">2019-01-25</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/InternetOfThings/" itemprop="url" rel="index"><span itemprop="name">InternetOfThings</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>以下为本人在学习ESP32开发的途中的一些资料整理。</p>
<h1 id="GPIO"><a href="#GPIO" class="headerlink" title="GPIO"></a>GPIO</h1><p>General-purpose input/output，通用型输入输出。其接脚可以供使用者由程控自由使用，PIN脚依现实考量可作为通用输入（GPI）或通用输出（GPO）或通用输入与输出（GPIO），如当clk generator, chip select等。<br>既然一个引脚可以用于输入、输出或其他特殊功能，那么一定有寄存器用来选择这些功能。对于输入，一定可以通过<strong>读取某个寄存器来确定引脚电位的高低</strong> ；对于输出，一定可以通过写入某个寄存器来让这个引脚输出高电位或者低电位；对于其他特殊功能，则有另外的寄存器来控制它们。</p>
<h1 id="Xtensa"><a href="#Xtensa" class="headerlink" title="Xtensa"></a>Xtensa</h1><p>Xtensa 是Tensilica公司的处理器。</p>
<h1 id="OpenOCD"><a href="#OpenOCD" class="headerlink" title="OpenOCD"></a>OpenOCD</h1><p>OpenOCD（Open On-Chip Debugger）开源片上调试器，是一款开源软件，最初是由Dominic Rath同学还在大学期间发起的（2005年）项目。OpenOCD旨在提供针对嵌入式设备的调试、系统编程和边界扫描功能。</p>
<p>OpenOCD的功能是在仿真器的辅助下完成的，仿真器是能够提供调试目标的电信号的小型硬件单元。仿真器是必须的，因为调试主机（运行OpenOCD的主机）通常不具备这种电信号的直接解析功能。</p>
<p>仿真器支持一个或多个传输协议，每个协议涉及不同的电信号，且使用不同的协议栈进行消息传递。市面上有很多种仿真器，并且这些仿真器的命名没有统一的规律。</p>
<p>仿真器有时候会被封装成独立的加密狗，这种称为硬件接口加密狗。一些开发板上面直接集成了硬件接口加密狗，这样可以使开发板通过USB直接连到主机上进行调试。</p>
<p>例如，JTAG仿真器支持JTAG协议的信号，可以用来进行TAPs和目标板子之间符合JTAG协议（IEEE 1149.1）的通讯。TAP（Test Access Port）是处理特殊指令和数据的单元。TAPs在芯片与板子之间和之内以菊花链的形式进行连接。JTAG支持调试和边界扫描。</p>
<p>还有SWD仿真器，这种仿真器支持使用SWD（Serial Wire Debug）信号与一些比较新的ARM芯片进行通讯，而且还可以作为那些同时支持JTAG和SWD的芯片的仿真器。不过SWD仅支持调试，不支持边检扫描。</p>
<p>对于一些芯片，还有专门的编程下载器，这些下载器仅支持擦写FLASH的功能，不支持调试和边界扫描。对于此类专用下载器，OpenOCD暂时并不支持。</p>
<h3 id="加密狗"><a href="#加密狗" class="headerlink" title="加密狗"></a>加密狗</h3><p>OpenOCD目前支持多种类型的硬件加密狗：基于USB的，基于并行端口的，以及其他在内部运行OpenOCD的独立盒子。 请参见第2章[仿真器硬件]，第5页。</p>
<h3 id="GDB调试"><a href="#GDB调试" class="headerlink" title="GDB调试"></a>GDB调试</h3><p>它允许ARM7（ARM7TDMI和ARM720t），ARM9（ARM920T，ARM922T，ARM926EJ-S，ARM966E-S），XScale（PXA25x，IXP42x），Cortex-M3（Stellaris LM3，ST STM32和Energy Micro EFM32）和基于Intel Quark（x10xx）的内核使用GDB协议进行调试。</p>
<h3 id="Flash编程"><a href="#Flash编程" class="headerlink" title="Flash编程"></a>Flash编程</h3><p>擦写FLASH支持外部CFI兼容NOR闪存（Intel和AMD / Spansion命令集）和几个内部闪存（LPC1700，LPC1800，LPC2000，LPC4300，AT91SAM7，AT91SAM3U，STR7x，STR9x，LM3，STM32x和EFM32）。包括各种NAND闪存控制器（LPC3180，Orion，S3C24xx等）的初步支持。</p>
<h2 id="AT指令"><a href="#AT指令" class="headerlink" title="AT指令"></a>AT指令</h2><p>即Attention，AT指令集是从终端设备(Terminal Equipment，TE)或数据终端设备(Data Terminal Equipment，DTE)向终端适配器(Terminal Adapter， TA)或数据电路终端设备AT(Data Circuit Terminal Equipment，DCE)发送的。通过TA，TE发送AT指令来控制移动台(Mobile Station，MS)的功能，与GSM 网络业务进行交互。用户可以通过AT指令进行呼叫、短信、电话本、数据业务、传真等方面的控制。</p>
<h1 id="Measured-Power"><a href="#Measured-Power" class="headerlink" title="Measured Power"></a>Measured Power</h1><p>之所以所有文档都将Measure_Power变量的值定为C5，是因为此处C5为RSSI 在 1m时强度大小。见（RSSI @ 1m [ RSSI at 1 meter ] ）文档《Active Beacon Packet 170512.pdf》。</p>
<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/14/%E5%9B%BE%E7%89%871.png" alt="iBeacon Format"></p>
<p>Measure Power 是Beacon距离测量设备1m时的信号强度（0xC5,要求反码）。实际过程中，根据接收到的RSSI值与0xC5（-59dbm）做对比得出当前设备距离，算法由厂商提供，iOS自带算法。</p>
<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/14/%E5%9B%BE%E7%89%872.png" alt="Measure Power"></p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><ol>
<li>《<a target="_blank" rel="noopener" href="https://blog.csdn.net/zqixiao_09/article/details/52506452">AT指令介绍及用法,AT 指令集合</a>》</li>
<li>《<a target="_blank" rel="noopener" href="http://www.warski.org/blog/2014/01/how-ibeacons-work/">How do iBeacons work?</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/GPIO">GPIO</a>》</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/14/Others/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%20%E6%9C%AF%E8%AF%AD%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/14/Others/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%20%E6%9C%AF%E8%AF%AD%E6%95%B4%E7%90%86/" class="post-title-link" itemprop="url">版本控制术语整理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-01-14 15:30:00" itemprop="dateCreated datePublished" datetime="2019-01-14T15:30:00+08:00">2019-01-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2019-01-24 16:19:44" itemprop="dateModified" datetime="2019-01-24T16:19:44+08:00">2019-01-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/InternetOfThings/" itemprop="url" rel="index"><span itemprop="name">InternetOfThings</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>以下为本人在学习开发途中的一些关于版本控制的资料整理。</p>
<h1 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h1><p>版本控制（Revision control）是维护工程蓝图的标准作法，能追踪工程蓝图从诞生一直到定案的过程。此外，版本控制也是一种软件工程技巧，借此能在软件开发的过程中，确保由不同人所编辑的同一程序文件都得到同步。</p>
<h2 id="基线（Baseline）"><a href="#基线（Baseline）" class="headerlink" title="基线（Baseline）"></a>基线（Baseline）</h2><p>基线是软件文档或源码（或其它产出物）的一个稳定版本，它是进一步开发的基础。[1]</p>
<h2 id="文件库（Repository）"><a href="#文件库（Repository）" class="headerlink" title="文件库（Repository）"></a>文件库（Repository）</h2><p>存储文件的新版本还有历史数据的地方，通常是在服务器上。有时候也叫Depot（像是在SVK、AccuRev还有Perforce中）</p>
<h2 id="工作复本（Working-copy）"><a href="#工作复本（Working-copy）" class="headerlink" title="工作复本（Working copy）"></a>工作复本（Working copy）</h2><p>从文件库中取出一个本地端（客户端）的复制，针对一个特定的时间或是版本。所有在文件库中的文件更动，都是从一个工作版本中修改而来的，这也是这名称的由来。观念上，这是一个沙盒。</p>
<h2 id="提交（Commit）"><a href="#提交（Commit）" class="headerlink" title="提交（Commit）"></a>提交（Commit）</h2><p>将本地端的修改送回档案库。（由版本控制软件处理“跟上次更动相比，哪个文件又被更动”的事）</p>
<h2 id="变更（Change）"><a href="#变更（Change）" class="headerlink" title="变更（Change）"></a>变更（Change）</h2><p>对一份文件作的特定更动。</p>
<h2 id="变更记录（Change-List）"><a href="#变更记录（Change-List）" class="headerlink" title="变更记录（Change List）"></a>变更记录（Change List）</h2><h2 id="取出（Check-Out）"><a href="#取出（Check-Out）" class="headerlink" title="取出（Check-Out）"></a>取出（Check-Out）</h2><p>从文件库取出文件到本地端（客户端）。</p>
<h2 id="更新（Update）"><a href="#更新（Update）" class="headerlink" title="更新（Update）"></a>更新（Update）</h2><p>将文件库的修改送到本地端（与提交相反）</p>
<h2 id="合并（Merge-Integration）"><a href="#合并（Merge-Integration）" class="headerlink" title="合并（Merge / Integration）"></a>合并（Merge / Integration）</h2><p>合并各个改变。</p>
<h2 id="版次（Revision）"><a href="#版次（Revision）" class="headerlink" title="版次（Revision）"></a>版次（Revision）</h2><p>一个revision或version指的是一系列版本变迁的其中之一。</p>
<h2 id="导入（Import）"><a href="#导入（Import）" class="headerlink" title="导入（Import）"></a>导入（Import）</h2><h2 id="导出（Export）"><a href="#导出（Export）" class="headerlink" title="导出（Export）"></a>导出（Export）</h2><h2 id="冲突（Conflict）"><a href="#冲突（Conflict）" class="headerlink" title="冲突（Conflict）"></a>冲突（Conflict）</h2><p>当两方更动同一份文件会发生冲突。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/13/Linux/Shell/Shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/13/Linux/Shell/Shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/" class="post-title-link" itemprop="url">Shell脚本编程(未完待续)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-01-13 12:00:00" itemprop="dateCreated datePublished" datetime="2019-01-13T12:00:00+08:00">2019-01-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2019-03-05 14:16:20" itemprop="dateModified" datetime="2019-03-05T14:16:20+08:00">2019-03-05</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>原文：《<a target="_blank" rel="noopener" href="https://github.com/qinjx/30min_guides/blob/master/shell.md">Shell脚本编程30分钟入门</a>》</p>
<p>首先要安装一个wget插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget</span><br><span class="line">yum install -y setup</span><br><span class="line">yum install -y perl</span><br></pre></td></tr></table></figure>

<h1 id="一、Shell脚本"><a href="#一、Shell脚本" class="headerlink" title="一、Shell脚本"></a>一、Shell脚本</h1><h2 id="1-脚本示例"><a href="#1-脚本示例" class="headerlink" title="1. 脚本示例"></a>1. 脚本示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;sh</span><br><span class="line">cd ~</span><br><span class="line">mkdir shell_tut</span><br><span class="line">cd shell_tut</span><br><span class="line"></span><br><span class="line">for ((i&#x3D;0; i&lt;10; i++)); do</span><br><span class="line">	touch test_$i.txt</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="2-代码解释"><a href="#2-代码解释" class="headerlink" title="2. 代码解释"></a>2. 代码解释</h2><ul>
<li>第1行：指定脚本解释器，这里是用/bin/sh做解释器的</li>
<li>第2行：切换到当前用户的home目录</li>
<li>第3行：创建一个目录shell_tut</li>
<li>第4行：切换到shell_tut目录</li>
<li>第6行：循环条件，一共循环10次</li>
<li>第7行：创建一个test_0…9.txt文件</li>
<li>第8行：循环体结束</li>
</ul>
<p>mkdir, touch都是系统自带的程序，一般在/bin或者/usr/bin目录下。for, do, done是sh脚本语言的关键字。</p>
<h1 id="二、Shell相关概念"><a href="#二、Shell相关概念" class="headerlink" title="二、Shell相关概念"></a>二、Shell相关概念</h1><h2 id="1-基础概念"><a href="#1-基础概念" class="headerlink" title="1. 基础概念"></a>1. 基础概念</h2><p><strong>shell</strong> 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务，Windows Explorer是一个典型的图形界面Shell。</p>
<p><strong>shell脚本</strong> ，shell script，是一种为shell编写的脚本程序。业界所说的shell通常都是指shell脚本。shell和shell script是两个不同的概念。<em>由于习惯的原因，简洁起见，本文出现的“shell编程”都是指shell脚本编程，不是指开发shell自身（如Windows Explorer扩展开发）。</em></p>
<p><strong>sh命令</strong> 是shell命令语言解释器，执行命令从标准输入读取或从一个文件中读取。通过用户输入命令，和内核进行沟通。</p>
<h2 id="2-Shell类型"><a href="#2-Shell类型" class="headerlink" title="2. Shell类型"></a>2. Shell类型</h2><p>如果要查看某一个用户使用的是什么 shell 可以通过 <code>finger [USERNAME]</code>命令来查看。<br><strong>(kt)sh</strong>，Ken Thompson Shell，历史上第一个Unix shell，1971年由肯·汤普逊写作出第一版并加入UNIX之中。它是一个简单的命令行解释器，但不能被用来运行 <em>指令稿</em>（Shell script）。它的许多特征影响了以后命令行界面的发展。至Version 7 Unix之后，被Bourne shell取代。</p>
<p><strong>sh</strong>，Bourne Shell，是Version 7 Unix默认的Unix shell，替代执行文件同为.sh的Thompson shell。</p>
<p><strong>bash</strong> ，Bourne Again Shell，Unix shell的一种，在1987年由布莱恩·福克斯为了GNU计划而编写，与Bourne Shell兼容，还继承了C Shell、Korn Shell等优点。</p>
<p><strong>zsh</strong>， Z shell是一款可用作交互式登录的shell及脚本编写的命令解释器。Zsh对Bourne shell做出了大量改进，同时加入了Bash、ksh及tcsh的某些功能。</p>
<h2 id="3-Shell模式"><a href="#3-Shell模式" class="headerlink" title="3. Shell模式"></a>3. Shell模式</h2><h3 id="3-1-login-shell-和-no-login-shell"><a href="#3-1-login-shell-和-no-login-shell" class="headerlink" title="3.1 login shell 和 no-login shell"></a>3.1 login shell 和 no-login shell</h3><p><strong>login shell</strong> 代表用户登入, 比如使用 <code>su -</code> 命令, 或者用 ssh 连接到某一个服务器上, 都会使用该用户默认 shell 启动 login shell 模式。</p>
<p>该模式下的 shell 会去自动执行 <code>/etc/profile</code> 和 <code>~/.profile</code> 文件, 但不会执行任何的 <code>bashrc</code> 文件, 所以一般在 <code>/etc/profile</code> 或者 <code>~/.profile</code> 里我们会手动去 <code>source bashrc</code> 文件。</p>
<p><strong>no-login shell</strong> 的情况是我们在终端下直接输入 <code>bash</code> 或者 <code>bash -c “CMD”</code> 来启动的 shell。</p>
<p>该模式下是不会自动去运行任何的 <code>profile</code> 文件。</p>
<h3 id="3-2-interactive-shell-和-non-interactive-shell"><a href="#3-2-interactive-shell-和-non-interactive-shell" class="headerlink" title="3.2 interactive shell 和 non-interactive shell"></a>3.2 interactive shell 和 non-interactive shell</h3><p><strong>interactive shell</strong> 是交互式shell, 顾名思义就是用来和用户交互的, 提供了命令提示符可以输入命令。</p>
<p>该模式下会存在一个叫 <code>PS1</code> 的环境变量, 如果还不是 <strong>login shell</strong> 的则会去 <code>source /etc/bash.bashrc</code> 和 <code>~/.bashrc</code> 文件。</p>
<p><strong>non-interactive shell</strong> 则一般是通过 <code>bash -c “CMD”</code> 来执行的bash。</p>
<p>该模式下不会执行任何的 <code>rc</code> 文件 *(不过还存在一种特殊情况这个我之后详细讲述)*。</p>
<h2 id="4-profile和bashrc"><a href="#4-profile和bashrc" class="headerlink" title="4. profile和bashrc"></a>4. profile和bashrc</h2><p>profile用于交互式login shell，bashrc用于交互式non-login shell。系统中存在许多bashrc和profile文件。<br><code>/etc/profile</code>和<code>~/.profile</code>分别对应 <em>所有用户</em> 和 <em>单个用户</em>(bashrc同理)。</p>
<h3 id="4-1-profile"><a href="#4-1-profile" class="headerlink" title="4.1 profile"></a>4.1 profile</h3><p>profile 是用户唯一的用来设置环境变量的地方, 因为用户可以有多个 shell 比如 bash, sh, zsh 之类的, 但像环境变量这种其实只需要在统一的一个地方初始化就可以了, 而这就是 profile。<code>/etc/profile</code>中设定的变量(全局)的可以作用于任何用户，profile文件是在用户登录的时候进行初始化的。</p>
<h3 id="4-2-bashrc"><a href="#4-2-bashrc" class="headerlink" title="4.2 bashrc"></a>4.2 bashrc</h3><p>bashrc 是专门用来给 bash 做初始化的比如用来初始化 bash 的设置, bash 的代码补全, bash 的别名, bash 的颜色. 以此类推也就还会有 shrc, zshrc 这样的文件存在了, 只是 bash 太常用了而已。<code>~/.bashrc</code>等中设定的变量(局部)只能继承<code>/etc/profile</code>中的变量,他们是”父子”关系。(此句话待考究！！！！)</p>
<h1 id="三、环境"><a href="#三、环境" class="headerlink" title="三、环境"></a>三、环境</h1><p>shell编程跟java、php编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。</p>
<h2 id="1-OS"><a href="#1-OS" class="headerlink" title="1. OS"></a>1. OS</h2><p>当前主流的操作系统都支持shell编程，本文档所述的shell编程是指Linux下的shell，讲的基本都是POSIX标准下的功能，所以，也适用于Unix及BSD（如Mac OS）。</p>
<p>Linux默认安装就带了shell解释器。Mac OS不仅带了sh、bash这两个最基础的解释器，还内置了ksh、csh、zsh等不常用的解释器。windows出厂时没有内置shell解释器，需要自行安装，为了同时能用grep, awk, curl等工具，最好装一个<a target="_blank" rel="noopener" href="http://www.cygwin.com/">cygwin</a>或者<a target="_blank" rel="noopener" href="http://www.mingw.org/">mingw</a>来模拟linux环境。</p>
<h2 id="2-脚本解释器"><a href="#2-脚本解释器" class="headerlink" title="2. 脚本解释器"></a>2. 脚本解释器</h2><h3 id="2-1-sh"><a href="#2-1-sh" class="headerlink" title="2.1 sh"></a>2.1 sh</h3><p>即Bourne shell，POSIX（Portable Operating System Interface）标准的shell解释器，它的二进制文件路径通常是/bin/sh，由Bell Labs开发。</p>
<p>本文讲的是sh，如果你使用其它语言用作shell编程，请自行参考相应语言的文档。</p>
<h3 id="2-2-bash"><a href="#2-2-bash" class="headerlink" title="2.2 bash"></a>2.2 bash</h3><p>Bash是Bourne shell的替代品，属GNU Project，二进制文件路径通常是/bin/bash。<em><strong>业界通常混用bash、sh、和shell</strong></em>，比如你会经常在招聘运维工程师的文案中见到：熟悉Linux Bash编程，精通Shell编程。</p>
<p>在CentOS里，/bin/sh是一个指向/bin/bash的符号链接:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centosraw ~]# ls -l &#x2F;bin&#x2F;*sh</span><br><span class="line">-rwxr-xr-x. 1 root root 903272 Feb 22 05:09 &#x2F;bin&#x2F;bash</span><br><span class="line">-rwxr-xr-x. 1 root root 106216 Oct 17  2012 &#x2F;bin&#x2F;dash</span><br><span class="line">lrwxrwxrwx. 1 root root      4 Mar 22 10:22 &#x2F;bin&#x2F;sh -&gt; bash</span><br></pre></td></tr></table></figure>

<p>但在Mac OS上不是，/bin/sh和/bin/bash是两个不同的文件，尽管它们的大小只相差100字节左右:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">iMac:~ wuxiao$ ls -l &#x2F;bin&#x2F;*sh</span><br><span class="line">-r-xr-xr-x  1 root  wheel  1371648  6 Nov 16:52 &#x2F;bin&#x2F;bash</span><br><span class="line">-rwxr-xr-x  2 root  wheel   772992  6 Nov 16:52 &#x2F;bin&#x2F;csh</span><br><span class="line">-r-xr-xr-x  1 root  wheel  2180736  6 Nov 16:52 &#x2F;bin&#x2F;ksh</span><br><span class="line">-r-xr-xr-x  1 root  wheel  1371712  6 Nov 16:52 &#x2F;bin&#x2F;sh</span><br><span class="line">-rwxr-xr-x  2 root  wheel   772992  6 Nov 16:52 &#x2F;bin&#x2F;tcsh</span><br><span class="line">-rwxr-xr-x  1 root  wheel  1103984  6 Nov 16:52 &#x2F;bin&#x2F;zsh</span><br></pre></td></tr></table></figure>

<h3 id="2-3-高级编程语言"><a href="#2-3-高级编程语言" class="headerlink" title="2.3 高级编程语言"></a>2.3 高级编程语言</h3><p>理论上讲，只要一门语言提供了解释器（而不仅是编译器），这门语言就可以胜任脚本编程，常见的解释型语言都是可以用作脚本编程的，如：Perl、Tcl、Python、PHP、Ruby。Perl是最老牌的脚本编程语言了，Python这些年也成了一些linux发行版的预置解释器。</p>
<p>编译型语言，只要有解释器，也可以用作脚本编程，如C shell是内置的（/bin/csh），Java有第三方解释器Jshell，Ada有收费的解释器AdaScript。</p>
<p>如下是一个PHP Shell Script示例（假设文件名叫test.php）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;php</span><br><span class="line">&lt;?php</span><br><span class="line">for ($i&#x3D;0; $i &lt; 10; $i++)</span><br><span class="line">        echo $i . &quot;\n&quot;;</span><br></pre></td></tr></table></figure>

<p>执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;bin&#x2F;php test.php</span><br></pre></td></tr></table></figure>

<p>或者：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x test.php</span><br><span class="line">.&#x2F;test.php</span><br></pre></td></tr></table></figure>
<p>chmod命令用来变更文件或目录的权限</p>
<h1 id="四、选择Shell编程语言"><a href="#四、选择Shell编程语言" class="headerlink" title="四、选择Shell编程语言"></a>四、选择Shell编程语言</h1><h2 id="1-熟悉-vs-陌生"><a href="#1-熟悉-vs-陌生" class="headerlink" title="1. 熟悉 vs 陌生"></a>1. 熟悉 vs 陌生</h2><p>如果你已经掌握了一门编程语言（如PHP、Python、Java、JavaScript），建议你就直接使用这门语言编写脚本程序，虽然某些地方会有点啰嗦，但你能利用在这门语言领域里的经验（单元测试、单步调试、IDE、第三方类库）。</p>
<p>新增的学习成本很小，只要学会怎么使用shell解释器（Jshell、AdaScript）就可以了。</p>
<h2 id="2-简单-vs-高级"><a href="#2-简单-vs-高级" class="headerlink" title="2. 简单 vs 高级"></a>2. 简单 vs 高级</h2><p>如果你觉得自己熟悉的语言（如Java、C）写shell脚本实在太啰嗦，你只是想做一些备份文件、安装软件、下载数据之类的事情，学着使用sh，bash会是一个好主意。</p>
<p>shell只定义了一个非常简单的编程语言，所以，如果你的脚本程序复杂度较高，或者要操作的数据结构比较复杂，那么还是应该使用Python、Perl这样的脚本语言，或者是你本来就已经很擅长的高级语言。因为sh和bash在这方面很弱，比如说：</p>
<ul>
<li>它的函数只能返回字串，无法返回数组</li>
<li>它不支持面向对象，你无法实现一些优雅的设计模式</li>
<li>它是解释型的，一边解释一边执行，连PHP那种预编译都不是，如果你的脚本包含错误(例如调用了不存在的函数)，只要没执行到这一行，就不会报错</li>
</ul>
<h2 id="3-环境兼容性"><a href="#3-环境兼容性" class="headerlink" title="3. 环境兼容性"></a>3. 环境兼容性</h2><p>如果你的脚本是提供给别的用户使用，使用sh或者bash，你的脚本将具有最好的环境兼容性，perl很早就是linux标配了，python这些年也成了一些linux发行版的标配，至于mac os，它默认安装了perl、python、ruby、php、java等主流编程语言。</p>
<h1 id="五、-第一个Shell脚本"><a href="#五、-第一个Shell脚本" class="headerlink" title="五、 第一个Shell脚本"></a>五、 第一个Shell脚本</h1><h2 id="1-编写"><a href="#1-编写" class="headerlink" title="1. 编写"></a>1. 编写</h2><p>打开文本编辑器，新建一个文件，扩展名为.sh（sh代表shell），扩展名并不影响脚本执行，见名知意就好，如果你用php写shell 脚本，扩展名就用.php好了。</p>
<p>输入一些代码，第一行一般是这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;php</span><br></pre></td></tr></table></figure>
<p>“#!”是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行。</p>
<h2 id="2-运行"><a href="#2-运行" class="headerlink" title="2. 运行"></a>2. 运行</h2><p>运行Shell脚本有两种方法：</p>
<h3 id="2-1-作为可执行程序"><a href="#2-1-作为可执行程序" class="headerlink" title="2.1 作为可执行程序"></a>2.1 作为可执行程序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x test.sh</span><br><span class="line">.&#x2F;test.sh</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong><br>一定要写成<code>./test.sh</code>，而不是<code>test.sh</code>，运行其它 <strong>二进制的程序</strong> 也一样，直接写test.sh，linux系统会去PATH里寻找有没有叫test.sh的，而只有/bin, /sbin, /usr/bin，/usr/sbin等在PATH里，<em>你的当前目录通常不在PATH里，所以写成test.sh是会找不到命令的</em>，要用./test.sh告诉系统说，就在当前目录找。<br><code>./</code>表示当前目录。</p>
<p>通过这种方式运行bash脚本，第一行一定要写对，好让系统查找到正确的解释器。</p>
<p>这里的”系统”，其实就是shell这个应用程序（想象一下Windows Explorer），但我故意写成系统，是方便理解，既然这个系统就是指shell，那么一个使用/bin/sh作为解释器的脚本是不是可以省去第一行呢？是的。</p>
<h3 id="2-2-作为解释器参数"><a href="#2-2-作为解释器参数" class="headerlink" title="2.2 作为解释器参数"></a>2.2 作为解释器参数</h3><p>这种运行方式是，直接运行解释器，其参数就是shell脚本的文件名，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;bin&#x2F;sh test.sh</span><br><span class="line">&#x2F;bin&#x2F;php test.php</span><br></pre></td></tr></table></figure>
<p>这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ol>
<li>《<a target="_blank" rel="noopener" href="http://man.linuxde.net/chmod">chmod命令</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Thompson_shell">Thompson shell</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Bourne_shell">Bourne shell</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Bash">bash</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://wido.me/sunteya/understand-bashrc-and-profile">理解 bashrc 和 profile</a>》</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/10/Hardware/ESP32/ESP32%20SDK%E7%9A%84%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/10/Hardware/ESP32/ESP32%20SDK%E7%9A%84%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">ESP32 SDK的配置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-01-10 09:00:00" itemprop="dateCreated datePublished" datetime="2019-01-10T09:00:00+08:00">2019-01-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2019-01-11 13:43:18" itemprop="dateModified" datetime="2019-01-11T13:43:18+08:00">2019-01-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/InternetOfThings/" itemprop="url" rel="index"><span itemprop="name">InternetOfThings</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文将直接摘抄和引用<a target="_blank" rel="noopener" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/get-started/index.html">ESPRESSIF官网文档</a>对ESP32 SDK配置的描述，并对具体执行步骤加一些自己的备注和注意事项。</p>
<p>本文中以Ubuntu为Linux系统的代表，在所有安装步骤<code>apt-get install</code>及涉及到其他读写<code>cp</code>、<code>mkdir</code>或<code>rm</code>的操作中，如遇到<code>Permission denied</code>等权限不够的问题，请在命令开头添加<code>sudo</code>或直接另起一行输入<code>sudo -s</code>，然后输入密码(有些命令不需要输入密码)获取 <strong>root</strong> 权限。</p>
<p>Eclipse的使用可以在三大平台上进行，但是用<code>.bin</code>文件烧录到开发板的过程目前仅在Windows平台找得到烧录工具，望悉知。</p>
<p>为方便描述，本文定义<code>终端</code>为MSYS2及Terminal的统称，<code>XXXXX</code>为你电脑的用户名，<code>*</code>为你的端口号数字。</p>
<p>本文分为三部分：</p>
<ul>
<li>工具及SDK的下载及配置</li>
<li>使用终端运行工程</li>
<li>使用Eclipse运行工程</li>
</ul>
<h1 id="一、工具及SDK的下载及配置"><a href="#一、工具及SDK的下载及配置" class="headerlink" title="一、工具及SDK的下载及配置"></a>一、工具及SDK的下载及配置</h1><p>本节共有五部分：</p>
<ul>
<li>工具(MSYS2和Git)</li>
<li>ESP-IDF</li>
<li>Xtensa</li>
<li>环境变量设置</li>
<li>python依赖包</li>
</ul>
<h2 id="1-工具"><a href="#1-工具" class="headerlink" title="1. 工具"></a>1. 工具</h2><p>此部分在官方文档里面称为“设置工具链”。</p>
<h3 id="1-1-MSYS2-for-Windows-only"><a href="#1-1-MSYS2-for-Windows-only" class="headerlink" title="1.1 MSYS2(for Windows only)"></a>1.1 MSYS2(for Windows only)</h3><p>跟Git Bash Shell同理，直接从<a target="_blank" rel="noopener" href="http://www.msys2.org/">MSYS2官网</a>下载和安装到C盘根目录<code>C:/</code>下即可。或者直接下载ESPRESSIF提供的<a target="_blank" rel="noopener" href="https://dl.espressif.com/dl/esp32_win32_msys2_environment_and_toolchain-20181001.zip">.zip文件</a>，解压到<code>C:/</code>。</p>
<p>能不能放到其他盘，暂时没有试验过，对于使用MSYS2的开发者而言，最好是到<code>C:\msys32\mingw32.exe</code>文件属性中设置好管理员权限。</p>
<p>本下载仅用于windows平台，对于Mac及Linux平台而言，可以直接调用Terminal进行后续步骤。</p>
<h3 id="1-2-Git-for-Mac-amp-Linux"><a href="#1-2-Git-for-Mac-amp-Linux" class="headerlink" title="1.2 Git(for Mac &amp; Linux)"></a>1.2 Git(for Mac &amp; Linux)</h3><p>此步骤要在Terminal中进行，便于将ESPRESSIF保存在Github的ESP-IDF下载到本地。</p>
<p>运行以下命令安装（Debian/Ubuntu）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install git</span><br></pre></td></tr></table></figure>
<p>以及（Mac）：<a target="_blank" rel="noopener" href="https://git-scm.com/download/mac">Git下载</a></p>
<p><strong>ESP-IDF</strong> 是ESP32设备的SDK，另外，MSYS2自带Git工具。如果已经安装过Git工具了，可以使用<code>git</code>或<code>git version</code>语句进行查看。</p>
<h2 id="2-ESP-IDF"><a href="#2-ESP-IDF" class="headerlink" title="2. ESP-IDF"></a>2. ESP-IDF</h2><p>在创建文件夹<code>esp</code>的过程中，确保自己没有使用到root权限来创建文件夹，查看的方法是打开<code>Files</code>应用，看看<code>esp</code>文件夹上面是否有个锁的图表。因为后续添加的环境变量局限于 <strong>XXXXX</strong> 用户，而执行文件因为在创建的过程中就属于 <strong>root</strong> 用户了，就不能够识别个人用户创建的环境变量<code>IDF_PATH</code>。为ESP-IDF的获取创建好文件夹，运行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;</span><br><span class="line">mkdir -p esp</span><br><span class="line">cd esp</span><br></pre></td></tr></table></figure>
<p>如果使用了 <strong>root</strong> 权限来创建esp文件夹，请使用命令<code>rm -d -f ~/esp</code>来删除 空的esp文件夹 或 使用命令<code>rm -r -f ~/esp</code>非空的esp文件夹。然后重启终端，使用普通用户权限再次创建。</p>
<p><img src="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/_images/msys2-terminal-window.png" alt="msys2-terminal-window"><br>然后运行下面语句，ESP-IDF 将会被下载到 <code>~/esp/esp-idf</code> 目录下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --recursive https:&#x2F;&#x2F;github.com&#x2F;espressif&#x2F;esp-idf.git</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong><br>上面克隆仓库的语句中有个 <code>--recursive</code> 选项。如果你克隆 ESP-IDF 时 <em><strong>没有带这个选项</strong></em> ，你还需要运行额外的命令（如下）来获取子模块：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd esp-idf</span><br><span class="line">git submodule update --init</span><br></pre></td></tr></table></figure>

<h2 id="3-Xtensa-for-MAC-amp-Linux-only"><a href="#3-Xtensa-for-MAC-amp-Linux-only" class="headerlink" title="3. Xtensa(for MAC &amp; Linux only)"></a>3. Xtensa(for MAC &amp; Linux only)</h2><p><strong>Windows平台因为使用MSYS2的原因，自带了Xtensa，因此可以忽略此步骤。</strong></p>
<p><strong>Linux平台</strong><br><a target="_blank" rel="noopener" href="https://dl.espressif.com/dl/xtensa-esp32-elf-linux64-1.22.0-80-g6c4433a-5.2.0.tar.gz">Xtensa-Linux-64bit</a>下载解压。<br>执行如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;esp</span><br><span class="line">tar -xzf ~&#x2F;Downloads&#x2F;xtensa-esp32-elf-linux64-1.22.0-80-g6c4433a-5.2.0.tar.gz</span><br></pre></td></tr></table></figure>

<p><strong>MAC平台</strong><br><a target="_blank" rel="noopener" href="https://dl.espressif.com/dl/xtensa-esp32-elf-osx-1.22.0-80-g6c4433a-5.2.0.tar.gz">Xtensa-MAC</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;esp</span><br><span class="line">tar -xzf ~&#x2F;Downloads&#x2F;xtensa-esp32-elf-osx-1.22.0-80-g6c4433a-5.2.0.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="4-环境变量设置"><a href="#4-环境变量设置" class="headerlink" title="4. 环境变量设置"></a>4. 环境变量设置</h2><p><strong>Windows平台：</strong><br>寻找到路径<code>C:/msys32/etc/profile.d/</code>，然后使用记事本或其他文本工具新建一个名为<code>export_idf_path.sh</code>的文件，然后将你的<code>esp-idf</code>路径写入文件中，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export IDF_PATH&#x3D;&quot;C:&#x2F;msys32&#x2F;home&#x2F;XXXXX&#x2F;esp&#x2F;esp-idf&quot;</span><br></pre></td></tr></table></figure>

<p>安装vim工具或使用其他文本工具，打开<code>~/.profile</code>文件。使用vim工具的话，单击<code>i</code>健进行插入，鼠标点击粘贴以下代码后，按<code>ESC</code>键，然后输入<code>:w</code>进行保存，再次输入<code>:q</code>推出vim工具，ubuntu平台的vim工具安装命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install vim</span><br></pre></td></tr></table></figure>

<p><strong>Linux平台</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PATH&#x3D;&quot;$HOME&#x2F;esp&#x2F;xtensa-esp32-elf&#x2F;bin:$PATH&quot;</span><br><span class="line">export IDF_PATH&#x3D;~&#x2F;esp&#x2F;esp-idf</span><br></pre></td></tr></table></figure>

<p><strong>MAC平台</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PATH&#x3D;$HOME&#x2F;esp&#x2F;xtensa-esp32-elf&#x2F;bin:$PATH</span><br><span class="line">export IDF_PATH&#x3D;~&#x2F;esp&#x2F;esp-idf</span><br></pre></td></tr></table></figure>

<p>完成修改后重启终端，并在终端中输入以下命令可以查看是否设置成功，如果不成功或者后续步骤中出现<code>No such file or directory</code>的错误提示，请尝试重启系统。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">printenv IDF_PATH</span><br><span class="line">printenv PATH</span><br></pre></td></tr></table></figure>

<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/Environment_Setting_PATH.png" alt="Environment_Setting_PATH"></p>
<h2 id="5-python依赖包安装"><a href="#5-python依赖包安装" class="headerlink" title="5. python依赖包安装"></a>5. python依赖包安装</h2><p>直接输入以下命令，安装依赖于Python的软件包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install --user -r $IDF_PATH&#x2F;requirements.txt</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong><br>在终端输入<code>python</code>可查看版本，如果你的电脑安装的是不同版本的Python，则调用不同的语句进行安装，如<code>python2</code> <code>python2.7</code>。<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/Tools_Downloads_Python.png" alt="Tools_Downloads_Python"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python2.7 -m pip install --user -r $IDF_PATH&#x2F;requirements.txt</span><br></pre></td></tr></table></figure>

<p>如果在此步骤出现<code>/usr/bin/python2.7: No module named pip</code>的问题，则输入以下命令进行pip module安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python-pip</span><br></pre></td></tr></table></figure>

<h1 id="二、使用终端运行工程"><a href="#二、使用终端运行工程" class="headerlink" title="二、使用终端运行工程"></a>二、使用终端运行工程</h1><p>本节共有四部分：</p>
<ul>
<li>工程样例复制</li>
<li>开发板连接</li>
<li>工程参数设置</li>
<li>命令行烧录</li>
</ul>
<h2 id="1-工程样例复制"><a href="#1-工程样例复制" class="headerlink" title="1. 工程样例复制"></a>1. 工程样例复制</h2><p>在<code>C:/msys32/home/XXXXX/esp/esp-idf/examples/</code>下面会有很多ESP-IDF自带的工程样例，按照用途分类。本节将使用<code>/get-started/hello_world</code>作为示范。</p>
<p>拷贝样例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;esp</span><br><span class="line">cp -r $IDF_PATH&#x2F;examples&#x2F;get-started&#x2F;hello_world .</span><br></pre></td></tr></table></figure>

<p>要注意的是，拷贝样例的语句中，那个点<code>.</code>必不可少，且和前面的路径中有个空格<code> </code>。</p>
<h2 id="2-开发板连接"><a href="#2-开发板连接" class="headerlink" title="2. 开发板连接"></a>2. 开发板连接</h2><p>将 ESP32 开发板连接到 PC，然后检查串口号，看看它能否正常通信。</p>
<h3 id="2-1-驱动"><a href="#2-1-驱动" class="headerlink" title="2.1 驱动"></a>2.1 驱动</h3><p>以下是乐鑫 ESP32 开发板驱动程序的链接：</p>
<p>ESP32-PICO-KIT 和 ESP32-DevKitC - <a target="_blank" rel="noopener" href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers">CP210x USB to UART Bridge VCP Drivers</a><br>ESP32-WROVER-KIT 和 ESP32 Demo Board - <a target="_blank" rel="noopener" href="https://www.ftdichip.com/Drivers/VCP.htm">FTDI Virtual COM Port Drivers</a></p>
<p>装完驱动之后，Windows平台的设备管理器中是如下显示的：<br><img src="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/_images/esp32-devkitc-in-device-manager1.png" alt="esp32-devkitc-in-device-manager1"></p>
<h3 id="2-2-端口号"><a href="#2-2-端口号" class="headerlink" title="2.2 端口号"></a>2.2 端口号</h3><p><strong>Windows平台：</strong><br>在<code>设备管理器</code>中查看<code>端口</code>并记录下其设备尾部标注的端口号<code>COM*</code>。<br><img src="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/_images/esp32-devkitc-in-device-manager1.png" alt="esp32-devkitc-in-device-manager1"></p>
<p><strong>Linux和Mac的平台：</strong><br>在终端里面，分别运行查看端口命令两次，一次是在插入开发板前，一次是在插入开发板后。<br><strong>Linux:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls &#x2F;dev&#x2F;tty*</span><br></pre></td></tr></table></figure>
<p><strong>Mac:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls &#x2F;dev&#x2F;cu.*</span><br></pre></td></tr></table></figure>
<p>另外，Linux平台还需要为登录用户添加串口读写权限：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G dialout $XXXXX</span><br></pre></td></tr></table></figure>

<p><strong>Putty工具</strong><br>下载和使用<a target="_blank" rel="noopener" href="https://www.putty.org/">Putty工具</a>对开发板进行串口连接确认。</p>
<p>运行终端，设置串口：波特率 = 115200，数据位 = 8，停止位 = 1，奇偶校验 = N。</p>
<p>以下是设置串口和在 Windows 和 Linux 上传输参数（如 115200-8-1-N）的一些截屏示例。注意选择上述步骤中确认的串口进行设置。</p>
<p><img src="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/_images/putty-settings-windows1.png" alt="putty-settings-windows1"><br><img src="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/_images/putty-settings-linux1.png" alt="putty-settings-linux1"></p>
<h2 id="3-工程参数设置"><a href="#3-工程参数设置" class="headerlink" title="3. 工程参数设置"></a>3. 工程参数设置</h2><p>在终端窗口中，输入<code>cd ~/esp/hello_world</code>进入<code>hello_world</code>所在目录，然后启动工程配置工具:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make menuconfig</span><br></pre></td></tr></table></figure>
<p><img src="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/_images/project-configuration1.png" alt="project-configuration1"></p>
<p>在菜单中，进入<code>Serial flasher config</code>&gt;<code>Default serial port</code>输入之前记录下来的串口号(<code>/dev/tty*</code>，<code>/dev/cu.*</code>或<code>/COM*</code>)，工程会加载到该串口上。输入回车确认选择，选择<code>&lt; Save &gt;</code>保存配置，然后选择<code>&lt; Exit &gt;</code>退出应用程序。</p>
<p>以下是<code>menuconfig</code>的使用小技巧：</p>
<ol>
<li>使用 <strong>up &amp; down</strong> 组合键在菜单中上下移动</li>
<li>使用 <strong>Enter</strong> 键进入一个子菜单，<strong>Escape</strong> 键退出子菜单或退出整个菜单</li>
<li>输入 <code>?</code> 查看帮助信息，<strong>Enter</strong> 键退出帮助屏幕</li>
<li>使用空格键或 <code>Y</code> 和 <code>N</code> 键来使能 (Yes) 和禁止 (No) 带有复选框 “<code>[*]</code>” 的配置项</li>
<li>当光标在某个配置项上面高亮时，输入 <code>?</code> 可以直接查看该项的帮助信息</li>
<li>输入 <code>/</code> 搜索配置项</li>
</ol>
<p><strong>注意</strong><br>如果再此步骤出现<code>&lt;command-line&gt;:0:12: fatal error: curses.h: No such file or directory</code>的错误提示，则</p>
<h2 id="4-命令行烧录"><a href="#4-命令行烧录" class="headerlink" title="4. 命令行烧录"></a>4. 命令行烧录</h2><h3 id="4-1-烧录"><a href="#4-1-烧录" class="headerlink" title="4.1 烧录"></a>4.1 烧录</h3><p>这条命令会编译应用程序和所有的 ESP-IDF 组件，生成 bootloader、分区表和应用程序 bin 文件，并将这些 bin 文件烧写到 ESP32 板子上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make flash</span><br></pre></td></tr></table></figure>
<p>烧写成功的话，板子将会复位，应用程序 “hello_world” 开始启动，在终端显示如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">esptool.py v2.0-beta2</span><br><span class="line">Flashing binaries to serial port &#x2F;dev&#x2F;ttyUSB0 (app at offset 0x10000)...</span><br><span class="line">esptool.py v2.0-beta2</span><br><span class="line">Connecting........___</span><br><span class="line">Uploading stub...</span><br><span class="line">Running stub...</span><br><span class="line">Stub running...</span><br><span class="line">Changing baud rate to 921600</span><br><span class="line">Changed.</span><br><span class="line">Attaching SPI flash...</span><br><span class="line">Configuring flash size...</span><br><span class="line">Auto-detected Flash size: 4MB</span><br><span class="line">Flash params set to 0x0220</span><br><span class="line">Compressed 11616 bytes to 6695...</span><br><span class="line">Wrote 11616 bytes (6695 compressed) at 0x00001000 in 0.1 seconds (effective 920.5 kbit&#x2F;s)...</span><br><span class="line">Hash of data verified.</span><br><span class="line">Compressed 408096 bytes to 171625...</span><br><span class="line">Wrote 408096 bytes (171625 compressed) at 0x00010000 in 3.9 seconds (effective 847.3 kbit&#x2F;s)...</span><br><span class="line">Hash of data verified.</span><br><span class="line">Compressed 3072 bytes to 82...</span><br><span class="line">Wrote 3072 bytes (82 compressed) at 0x00008000 in 0.0 seconds (effective 8297.4 kbit&#x2F;s)...</span><br><span class="line">Hash of data verified.</span><br><span class="line"></span><br><span class="line">Leaving...</span><br><span class="line">Hard resetting...</span><br></pre></td></tr></table></figure>

<h3 id="4-2-端口监控"><a href="#4-2-端口监控" class="headerlink" title="4.2 端口监控"></a>4.2 端口监控</h3><p>如果要查看 “hello_world” 程序是否真的在运行，输入命令 make monitor。这个命令会启动 IDF Monitor 程序（ESP-IDF自带工具），也可以使用其他串口助手进行查看。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make monitor</span><br></pre></td></tr></table></figure>
<p>串口启动时，在终端显示如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ make monitor</span><br><span class="line">MONITOR</span><br><span class="line">--- idf_monitor on &#x2F;dev&#x2F;ttyUSB0 115200 ---</span><br><span class="line">--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---</span><br><span class="line">ets Jun  8 2016 00:22:57</span><br><span class="line"></span><br><span class="line">rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)</span><br><span class="line">ets Jun  8 2016 00:22:57</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>开发板输出到串口的信息，在终端显示如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">Hello world!</span><br><span class="line">Restarting in 10 seconds...</span><br><span class="line">I (211) cpu_start: Starting scheduler on APP CPU.</span><br><span class="line">Restarting in 9 seconds...</span><br><span class="line">Restarting in 8 seconds...</span><br><span class="line">Restarting in 7 seconds...</span><br></pre></td></tr></table></figure>

<h1 id="三、-使用Eclipse运行工程"><a href="#三、-使用Eclipse运行工程" class="headerlink" title="三、 使用Eclipse运行工程"></a>三、 使用Eclipse运行工程</h1><p>本节共有四部分：</p>
<ul>
<li>JRE &amp; Eclipse</li>
<li>Eclipse项目运行</li>
<li>Build Project</li>
<li>Flash tools烧录</li>
</ul>
<h2 id="1-JRE-amp-Eclipse"><a href="#1-JRE-amp-Eclipse" class="headerlink" title="1. JRE &amp; Eclipse"></a>1. JRE &amp; Eclipse</h2><h3 id="1-1-JRE安装"><a href="#1-1-JRE安装" class="headerlink" title="1.1 JRE安装"></a>1.1 JRE安装</h3><p><a target="_blank" rel="noopener" href="https://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html">JRE(Java Runtime Environment)</a>要在Eclipse之前安装，并在终端使用如下命令验证是否安装成功并查看版本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>

<h3 id="1-2-Eclipse安装"><a href="#1-2-Eclipse安装" class="headerlink" title="1.2 Eclipse安装"></a>1.2 Eclipse安装</h3><p>Eclipse IDE 是一个可视化的集成开发环境，可用于编写、编译和调试 ESP-IDF 项目。</p>
<p>下载相应的Eclipse并安装到电脑：<a target="_blank" rel="noopener" href="https://www.eclipse.org/">eclipse.org</a>,在安装的过程中记得要选择<code>Eclipse for C/C++ Development</code>(有的版本也可能显示为 CDT)。</p>
<h2 id="2-Eclipse项目运行"><a href="#2-Eclipse项目运行" class="headerlink" title="2. Eclipse项目运行"></a>2. Eclipse项目运行</h2><h3 id="2-1-导入工程样例"><a href="#2-1-导入工程样例" class="headerlink" title="2.1 导入工程样例"></a>2.1 导入工程样例</h3><ol>
<li><p>运行 Eclipse，选择 <strong>File</strong> -&gt; <strong>Import…</strong>。</p>
</li>
<li><p>弹出的对话框中选择 <strong>C/C++</strong> -&gt; <strong>Existing Code as Makefile Project</strong>，然后点击 <strong>Next</strong>。</p>
</li>
<li><p>在下个界面中 <strong>Existing Code Location</strong> 位置输入您的 IDF 项目的路径（如：<strong>C:/msys32/home/XXXXX/esp/hello_world</strong>）。</p>
</li>
</ol>
<p>  <em>注意：这里应输入 ESP-IDF 项目的路径，而非 ESP-IDF 本身的路径。</em></p>
<ol start="4">
<li>在本界面，找到 <strong>Toolchain for Indexer Settings</strong>，选择 <strong>Cross GCC</strong>，最后点击 <strong>Finish</strong>。</li>
</ol>
<h3 id="2-2-设置工程项目属性"><a href="#2-2-设置工程项目属性" class="headerlink" title="2.2 设置工程项目属性"></a>2.2 设置工程项目属性</h3><p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/Eclipse_Project_Properties.png" alt="Eclipse_Project_Properties"></p>
<p>在本小节中，会 <strong>添加或修改三个主要的环境变量</strong> ：<code>BTACH_BUILD</code>、<code>IDF_PATH</code>和<code>PATH</code>。这些变量可以只在 <strong>项目属性</strong> 中修改，也可以直接到 <strong>系统环境变量</strong> 中修改。（添加到系统环境变量中的方法本文无讲解）</p>
<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/Eclipse_Project_Properties_Environment_Value.png" alt="Eclipse_Project_Properties_Environment_Value"></p>
<ol>
<li><p>新项目将出现在Eclipse左侧的 <strong>Project Explorer</strong> 选项卡中。选择导入的项目，在右键菜单中选择 <strong>Properties</strong>。</p>
</li>
<li><p>点击 <strong>C/C++ Build</strong> 下的 <strong>Environment</strong> 属性页，点击 <strong>Add…</strong> 按钮，输入 <code>BATCH_BUILD</code> 和 <code>1</code>。</p>
</li>
<li><p>点击 <strong>Add…</strong>，输入 <strong>IDF_PATH</strong> 中输入 ESP-IDF 所在的完整安装路径 <code>C:/msys32/home/XXXXX/esp/esp-idf</code> 。Linux及MAC平台的安装路径 <code>/home/XXXXX/esp/esp-idf</code> .</p>
</li>
<li><p>选择 <code>PATH</code> 环境变量，不要改变默认值。</p>
</li>
</ol>
<p>  <strong>Windows 用户：</strong><br>  将 <code>C:\msys32\mingw32\bin;C:\msys32\opt\xtensa-esp32-elf\bin;C:\msys32\usr\bi</code> 添加到 <code>PATH</code> 环境变量的靠前位置（如果您将 msys32 安装到了其它目录，则需要更改对应的路径以匹配您的本地环境）。</p>
<ol start="5">
<li>在 macOS 平台上，增加一个 <code>PYTHONPATH</code> 环境变量，并将其设置为 <code>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages</code>， 保证系统中预先安装的 Python （需安装 pyserial 模块）可以覆盖 Eclipse 内置的任何 Python。</li>
</ol>
<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/Eclipse_Project_Properties_Preprocessor_Include.png" alt="Eclipse_Project_Properties_Preprocessor_Include"></p>
<ol start="6">
<li>前往 <strong>C/C++ General</strong> -&gt; <strong>Preprocessor Include Paths</strong> 属性页面，点击 <strong>Providers</strong> 选项卡:</li>
</ol>
<p>  选择 <strong>CDT Cross GCC Built-in Compiler Settings</strong>，将 <strong>Command to get compiler specs</strong> 修改为 <code>xtensa-esp32-elf-gcc $&#123;FLAGS&#125; -std=c++11 -E -P -v -dD &quot;$&#123;INPUTS&#125;&quot;</code>。</p>
<p>  选择 <strong>“CDT GCC Build Output Parser</strong>，将 <strong>Compiler command pattern</strong> 修改为 <code>xtensa-esp32-elf-(gcc|g\+\+|c\+\+|cc|cpp|clang)</code>。</p>
<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/Eclipse_Project_Properties_Indexer.png" alt="Eclipse_Project_Properties_Indexer"></p>
<ol start="7">
<li>前往 <strong>C/C++ General</strong> -&gt; <strong>Indexer</strong> 属性页面，选择 <strong>Enable project specific settings</strong> 以启用本页上的其他设置。然后去除  <strong>Allow heuristic resolution of includes</strong> 勾选，因为启用此选项时，Eclipse 有时无法找到正确的头文件目录。</li>
</ol>
<p><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/Eclipse_Project_Properties_Build_Behavior.png" alt="Eclipse_Project_Properties_Build_Behavior"></p>
<ol start="8">
<li><p>点击 <strong>C/C++ Build</strong> -&gt; <strong>Behavior</strong> 属性页，选中 <strong>Enable parallel build</strong> 以启用多任务并行构建。</p>
</li>
<li><p>保存项目属性并退出属性设置界面。</p>
</li>
</ol>
<h2 id="3-Build-Project"><a href="#3-Build-Project" class="headerlink" title="3. Build Project"></a>3. Build Project</h2><p>选择菜单栏中的 <strong>Project</strong> -&gt; <strong>Build Project</strong>。在此步骤中，将会调用ESP-IDF生成三个文件：<code>bootloader.bin</code>、<code>partition_singleapp.bin</code>和<code>hello_world.bin</code>。分别对应的是启动程序、分区程序和应用主程序。</p>
<p>成功构建工程项目之后，Eclipse下方的 <strong>Console</strong> 选项卡将会显示如下：<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/build_successfully.png" alt="build_successfully"></p>
<h2 id="4-Flash-tools烧录"><a href="#4-Flash-tools烧录" class="headerlink" title="4. Flash tools烧录"></a>4. Flash tools烧录</h2><p><a target="_blank" rel="noopener" href="https://www.espressif.com/sites/default/files/tools/flash_download_tools_v3.6.5.zip">Flash tools</a>（仅在<a target="_blank" rel="noopener" href="https://www.espressif.com/zh-hans/products/hardware/esp32/resources">ESPRESSIF官网</a>上找到Windows版本）下载并解压到相应位置，打开后进行如下配置。<br>正确配置后便可成功烧录，要注意的是，<code>bootloader.bin</code>对应放在地址<code>0x1000</code>的位置,<code>partition_singleapp.bin</code>对应放在地址<code>0x8000</code>的位置,<code>helloworld.bin</code>对应放在地址<code>0x10000</code>的位置。<br><img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/10/ESP32_SDK%E7%9A%84%E9%85%8D%E7%BD%AE/flash_download.png" alt="flash_download"></p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ol>
<li>《<a target="_blank" rel="noopener" href="https://blog.csdn.net/sergeycao/article/details/8210849">ubuntu下文件拷贝命令cp命令</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://blog.csdn.net/hotmocha/article/details/7354630">ubuntu rm命令</a>》</li>
<li>《<a target="_blank" rel="noopener" href="http://www.cnblogs.com/peida/archive/2012/10/25/2738271.html">mkdir命令</a>》</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/09/Hardware/Bluetooth/%E8%93%9D%E7%89%99%20-%20%E4%BA%86%E8%A7%A3%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84BLE_Beacon/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/09/Hardware/Bluetooth/%E8%93%9D%E7%89%99%20-%20%E4%BA%86%E8%A7%A3%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84BLE_Beacon/" class="post-title-link" itemprop="url">【转/改】了解不同类型的BLE Beacon</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2019-01-09 15:00:00 / Modified: 17:13:22" itemprop="dateCreated datePublished" datetime="2019-01-09T15:00:00+08:00">2019-01-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://os.mbed.com/blog/entry/BLE-Beacons-URIBeacon-AltBeacons-iBeacon/">原文</a>中的URIBeacon已被Google Eddystone替代，因此本文并非完全由原文转载，有小幅度更改。</p>
<h1 id="蓝牙低功耗（BLE）信标"><a href="#蓝牙低功耗（BLE）信标" class="headerlink" title="蓝牙低功耗（BLE）信标"></a>蓝牙低功耗（BLE）信标</h1><p>有几种类型（Eddystone，AltBeacon，iBeacon），每种类型都有自己的标准和优势。有些是开放和免费的，有些是封闭的，需要花钱。本文将介绍可用信标的三种主要类型，它们的优点，缺点，衍生物以及有关信标如何工作的一些低级实现细节。确保查看所有可用作BLE信标的已启用mbed的BLE平台。</p>
<h1 id="概观"><a href="#概观" class="headerlink" title="概观"></a>概观</h1><p>蓝牙低功耗（BLE）能够以两种状态之一交换数据：连接和广告模式。连接模式使用通用属性（GATT）层以一对一的方式传输数据。广告模式使用通用访问配置文件（GAP）层向正在收听的任何人广播数据。广告模式是一对多转移，无法保证数据的一致性。</p>
<p>BLE Beacons利用GAP广告模式以定期的，特殊格式的广告包广播数据。每种类型的信标都使用自定义规范来对广告数据进行分区，从而赋予其意义。我将看看三种现有类型的信标，URI Beacons，iBeacons和AltBeacons。mbed BLE团队页面支持所有信标类型，如果您想尝试它们，请提供包含文档的示例项目。</p>
<h1 id="iBeacon"><a href="#iBeacon" class="headerlink" title="iBeacon"></a>iBeacon</h1><p>Apple的iBeacon是第一款出现的BLE Beacon技术，因此大多数信标都从iBeacon数据格式中获取灵感。iBeacons在几个Apple SDK中启用，可以从任何支持BLE的iDevice读取和广播。iBeacon是一种专有的封闭式标准。iBeacons有一个庞大的生态系统，并为开发人员提供了大量资源，但您必须成为Apple开发人员社区的一员。</p>
<h2 id="数据规格"><a href="#数据规格" class="headerlink" title="数据规格"></a>数据规格</h2><p>iBeacons播放了四条信息：</p>
<ol>
<li>标识信标的UUID。</li>
<li>标识大组中信标子集的主要编号。</li>
<li>标识特定信标的次要编号。</li>
<li>TX功率电平为2的补码，表示距设备一米的信号强度。必须由用户或制造商为每个设备校准此编号。</li>
</ol>
<p>扫描应用程序读取UUID，主要编号和次要编号，并针对数据库引用它们以获取有关信标的信息; 信标本身不包含描述性信息 - 它要求此外部数据库有用。TX功率字段与测量的信号强度一起使用以确定信标距智能电话的距离。请注意，用户必须在信标的基础上校准TxPower才能准确。</p>
<p>  <img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/09/%E4%BA%86%E8%A7%A3%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84BLE_Beacon/diagramredo.png" alt="iBeacon-Diagramredo"></p>
<p>iBeacon前缀包含十六进制数据：0x02 01 06 1A FF 00 4C 02 15。这分解如下：</p>
<ul>
<li>0x020106将广告包定义为BLE General Discoverable和BR / EDR高速不兼容。实际上它说它只是广播，而不是连接。</li>
<li>0x1AFF表示以下数据长度为26个字节，并且是制造商特定数据。</li>
<li>0x004C是Apple的蓝牙Sig ID，是该规范的一部分，使其依赖于Apple。</li>
<li>0x02是表示邻近信标的辅助ID，由所有iBeacons使用。</li>
<li>0x15将剩余长度定义为21个字节（16 + 2 + 2 + 1）。</li>
</ul>
<p>其余的字段相当自我解释。邻近UUID是标准的16byte / 128bit BLE UUID，通常是公司独有的。主要和次要数字用于表示UUID内的资产; 常见用途是主要数字是商店（因此可能有65,536个商店），其中次要数字是商店内的单个标签（每个商店还有65,536个可能的标签）。</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><ol>
<li>一家咖啡店在一个咖啡架和一个寄存器上放置了iBeacons。当顾客走进咖啡店足够近时，智能手机应用程序会看到iBeacon，搜索咖啡店的iBeacon数据库，将iBeacon识别为属于coffeeShop X，然后看到咖啡有效的优惠券，并通知优惠券的用户。</li>
<li>iDevices可以广播iBeacon。这可用于在活动中自动登记并跟踪整个场地的移动。</li>
<li>请参阅mbed iBeacon设备页面上的嵌入式设备代码。</li>
</ol>
<p>这是如何设置iBeacon设备以使用mbed BLE_API广播具有主要和次要号码的UUID的示例。请注意，tx功率水平应根据设备的1米测量用户校准。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;mbed.h&quot;</span><br><span class="line">#include &quot;iBeaconService.h&quot;</span><br><span class="line">...</span><br><span class="line">BLEDevice ble;</span><br><span class="line">const uint8_t uuid[] &#x3D; &#123;0xE2, 0x0A, 0x39, 0xF4, 0x73, 0xF5, 0x4B, 0xC4,     &#x2F;&#x2F; 16Byte UUID</span><br><span class="line">                        0xA1, 0x2F, 0x17, 0xD1, 0xAD, 0x07, 0xA9, 0x61</span><br><span class="line">                       &#125;;</span><br><span class="line">uint16_t majorNumber &#x3D; 1122;  &#x2F;&#x2F; 2 byte major number</span><br><span class="line">uint16_t minorNumber &#x3D; 3344;  &#x2F;&#x2F; 2 byte minor number</span><br><span class="line">uint16_t txPower &#x3D; 0xC8;      &#x2F;&#x2F; 1 byte tx power level</span><br><span class="line">...</span><br><span class="line">int main(void)&#123;</span><br><span class="line">    ...</span><br><span class="line">    iBeaconService ibeacon(ble, uuid, majorNumber, minorNumber, txPower);</span><br><span class="line">    ....</span><br><span class="line">    while(1)&#123;</span><br><span class="line">        ble.waitForEvent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>iBeacons非常酷，得到广泛支持，因为它们是Apple产品，所以每个人都在与它们合作，生态系统尽可能健壮。唯一的限制是需要数据库来为iBeacon数据赋予意义。没有数据库，UUID就毫无意义。你可以在这里找到mbed iBeacon的例子。</p>
<h2 id="衍生品"><a href="#衍生品" class="headerlink" title="衍生品"></a>衍生品</h2><p>一个流行的衍生产品是用不同的公司代码替换0x004C代码，例如分配给Nordic Semiconductor的0x0059。该NRF烽火台应用和nrf51822蓝牙智能灯塔套件就是这样的例子。<br>一些公司提供的示例未明确使用iBeacon规范。</p>
<h1 id="AltBeacon"><a href="#AltBeacon" class="headerlink" title="AltBeacon"></a>AltBeacon</h1><p>AltBeacons是Radius Networks提供的开放式免费信标设计。它似乎正在获得一些动力。AltBeacon规范似乎是对Apple正在使用的闭源iBeacon规范的直接反应; 它涵盖了与iBeacon相同的功能，但不是公司特定的。也就是说，它尚未获得广泛支持。</p>
<p>值得注意的是，虽然iBeacons有20个27字节可用于用户数据（UUID + Major + Minor），但AltBeacons有28个28字节可用（MFG ID，BeaconCode，BeaconID，MFG RSVD）。这意味着每条消息可以传送更多数据。</p>
<h2 id="数据规格-1"><a href="#数据规格-1" class="headerlink" title="数据规格"></a>数据规格</h2><p>所述AltBeacon规格是28bytes（26B是用户可修改的）。AltBeacon的前两个字节不是用户可修改的，而是由BLE堆栈设置的。ADV长度为0x1B，ADV类型为0xFF; 这些将分别指定广告数据包的长度和类型作为制造数据。之后，一切都由用户决定，可以推送到广告制造商数据字段。请注意，在大多数情况下，MFG ID将与Bluetooth Sig分配的号码文档相关联。</p>
<p>  <img src="http://uk-liewzheng-blog-pic.oss-eu-west-1.aliyuncs.com/2019/01/09/%E4%BA%86%E8%A7%A3%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84BLE_Beacon/altbeacon-spec-exploded-view.png" alt="altbeacon-spec-exploded-view"></p>
<h2 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h2><p>用于iBeacons的相同示例适用于AltBeacons，具有以下修改：</p>
<ol>
<li>具有不同制造商ID的能力。</li>
<li>具有不同信标码的能力。</li>
<li>最后保留数据的一个字节，用于保存特定的制造商信息。</li>
</ol>
<p>使用AltBeacon，可以使用特定于应用程序的UUID而不是特定于公司的UUID，从而可以更改公司ID。虽然目前没有任何东西正在利用这一点，但我可以想象信标广播UUID用于信标服务，比如温度服务，然后提供制造公司的信息和温度，这样提供任何人的温度值。步行可以查看。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;mbed.h&quot;</span><br><span class="line">#include &quot;AltBeaconService.h&quot;</span><br><span class="line">...</span><br><span class="line">BLEDevice ble;</span><br><span class="line">uint8_t beaconID[] &#x3D; &#123;  0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,     &#x2F;&#x2F; 16B of UUID + 4B subdivided as needed.</span><br><span class="line">                        0x10,0x11,0x12,0x13,0x14,0x15,0x00,0x01,0x00,0x02 &#125;;</span><br><span class="line">uint16_t manufacturerID &#x3D; 0x5900; &#x2F;&#x2F;Nordic SIG ID</span><br><span class="line">int8_t rssi &#x3D; -122;</span><br><span class="line">...</span><br><span class="line">int main(void)&#123;</span><br><span class="line">    ...</span><br><span class="line">    AltBeaconService altbeacon(ble, manufacturerID, beaconID, rssi); &#x2F;&#x2F; Add AltBeacon service to BLE object</span><br><span class="line">    ...</span><br><span class="line">    while(1)&#123;</span><br><span class="line">        ble.waitForEvent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="思考-1"><a href="#思考-1" class="headerlink" title="思考"></a>思考</h2><p>AltBeacons有很大的可能性。它们充分利用了它们所拥有的空间，或多或少地向后兼容iBeacons，并且是开源的。这说它是一个非常新的规范，几乎没有人使用它，并且它与iBeacons的市场渗透作斗争是一场艰苦的战斗。我认为，越来越多的人会使用AltBeacons，因为他们可以携带更多的数据并拥有更广泛的用例 - 这是开放式蛋糕上的一个樱桃。您可以在此处找到mbed AltBeacon示例代码。</p>
<h1 id="Eddystone"><a href="#Eddystone" class="headerlink" title="Eddystone"></a>Eddystone</h1><p><a target="_blank" rel="noopener" href="https://github.com/google/eddystone">Eddystone</a>前身为<a target="_blank" rel="noopener" href="https://github.com/google/uribeacon">URIBeacon</a>（发音为YUR-ee-BEE-kun）</p>
<p>Eddystone是由Google开发的开放式信标格式，其设计考虑了透明度和稳健性。Android和iOS设备都可以检测到Eddystone。Eddystone格式建立在现有部署中与行业合作伙伴合作的经验教训的基础上，以及更广泛的灯塔社区。帧格式中可以包含几种不同类型的有效载荷，包括：</p>
<ul>
<li>Eddystone-UID：一个唯一的静态ID，带有一个10字节的命名空间组件和一个6字节的实例组件。</li>
<li>Eddystone-URL：经过解析和解压缩后，可由客户端直接使用的压缩URL。</li>
<li>Eddystone-TLM：信标状态数据，可用于信标队维护，并为Google Proximity Beacon API的诊断端点提供支持。-TLM应与识别帧交错，例如Eddystone-UID或Eddystone-EID（加密的eTLM版本保留安全性）。</li>
<li>Eddystone-EID：时变信标帧，可通过链接解析器（例如Proximity Beacon API）解析为稳定标识符。</li>
</ul>
<p>此外，Eddystone还包括配置服务和品牌材料。为确保您的部署完全支持Google信标平台，您应该使用Eddystone-UID或-EID设置信标，并可选择添加-URL和-TLM。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/09/Hardware/Bluetooth/%E8%93%9D%E7%89%99%20-%20iBeacon%E4%B8%93%E6%9C%89%E5%90%8D%E8%AF%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/09/Hardware/Bluetooth/%E8%93%9D%E7%89%99%20-%20iBeacon%E4%B8%93%E6%9C%89%E5%90%8D%E8%AF%8D/" class="post-title-link" itemprop="url">iBeacon专有名词</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2019-01-09 14:00:00 / Modified: 17:13:30" itemprop="dateCreated datePublished" datetime="2019-01-09T14:00:00+08:00">2019-01-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ADV-PDU-Type"><a href="#ADV-PDU-Type" class="headerlink" title="ADV_PDU Type"></a>ADV_PDU Type</h1><h2 id="PDU"><a href="#PDU" class="headerlink" title="PDU"></a>PDU</h2><p>Protocol Data Unit, 协议数据单元。</p>
<h1 id="ADV-IND"><a href="#ADV-IND" class="headerlink" title="ADV_IND"></a>ADV_IND</h1><p>可连接的无向广告</p>
<h1 id="ADV-NONCONN-IND"><a href="#ADV-NONCONN-IND" class="headerlink" title="ADV_NONCONN_IND"></a>ADV_NONCONN_IND</h1><p>不可连接的无向广告</p>
<h1 id="ADV-DIR-IND"><a href="#ADV-DIR-IND" class="headerlink" title="ADV_DIR_IND"></a>ADV_DIR_IND</h1><h1 id="ADV-DISC"><a href="#ADV-DISC" class="headerlink" title="ADV_DISC"></a>ADV_DISC</h1><h1 id="ADV-CONNREQ"><a href="#ADV-CONNREQ" class="headerlink" title="ADV_CONNREQ"></a>ADV_CONNREQ</h1><h1 id="ADV-SCANREQ"><a href="#ADV-SCANREQ" class="headerlink" title="ADV_SCANREQ"></a>ADV_SCANREQ</h1><h1 id="ADV-SCANRSP"><a href="#ADV-SCANRSP" class="headerlink" title="ADV_SCANRSP"></a>ADV_SCANRSP</h1><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ol>
<li>《<a target="_blank" rel="noopener" href="https://support.kontakt.io/hc/en-gb/articles/201492492-iBeacon-advertising-packet-structure">iBeacon advertising packet structure</a>》</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2019/01/07/Networking/%E7%BD%91%E7%BB%9C%20-%20TCP-IP%E4%B8%93%E6%9C%89%E5%90%8D%E8%AF%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/07/Networking/%E7%BD%91%E7%BB%9C%20-%20TCP-IP%E4%B8%93%E6%9C%89%E5%90%8D%E8%AF%8D/" class="post-title-link" itemprop="url">TCP/IP专有名词</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-01-07 19:38:13" itemprop="dateCreated datePublished" datetime="2019-01-07T19:38:13+08:00">2019-01-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2019-01-09 16:12:38" itemprop="dateModified" datetime="2019-01-09T16:12:38+08:00">2019-01-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h1><p>  Dynamic Host Configuration Protocol, 动态主机设置协议, 是一个局域网的网络协议，使用UDP协议工作，主要有两个用途：</p>
<ol>
<li>用于内部网或网络服务供应商自动分配IP地址给用户</li>
<li>用于内部网管理员作为对所有计算机作中央管理的手段</li>
</ol>
<h1 id="TCP-IP-Stack-Library-LwIP"><a href="#TCP-IP-Stack-Library-LwIP" class="headerlink" title="TCP/IP Stack Library (LwIP)"></a>TCP/IP Stack Library (LwIP)</h1><p>  LwIP是瑞典计算机科学院的一个开源的TCP/IP协议栈实现。</p>
<p>  LwIP协议栈主要关注的是怎么样减少内存的使用和代码的大小，这样就可以让lwIP适用于资源有限的小型平台例如嵌入式系统。为了简化处理过程和内存要求，lwIP对API进行了裁减，可以不需要复制一些数据。</p>
<p>  lwIP是TCP / IP协议套件的一个小型独立实现，最初由Adam Dunkels开发，现在继续在这里。</p>
<p>  lwIP TCP / IP实现的重点是减少资源使用，同时仍然具有全面的TCP。这使得lwIP适用于具有数十千字节空闲RAM的嵌入式系统，并且可以容纳大约40千字节的代码ROM。</p>
<h2 id="lwIP主要功能"><a href="#lwIP主要功能" class="headerlink" title="lwIP主要功能"></a>lwIP主要功能</h2><h3 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h3><p>  IP，IPv6，ICMP，ND，MLD，UDP，TCP，IGMP，ARP，PPPoS，PPPoE</p>
<h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><p>DHCP客户端 DNS客户端（包括mDNS主机名解析器），AutoIP / APIPA（Zeroconf），SNMP agent（v1，v2c，v3，私有MIB支持和MIB编译器）</p>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>  用于增强性能的专用API，可选的Berkeley-socket套接字API</p>
<h3 id="扩展功能"><a href="#扩展功能" class="headerlink" title="扩展功能"></a>扩展功能</h3><p>  通过多个网络接口进行IP转发，TCP拥塞控制，RTT估计和快速恢复/ fast retransmit</p>
<h3 id="Addon应用程序"><a href="#Addon应用程序" class="headerlink" title="Addon应用程序"></a>Addon应用程序</h3><p>  HTTP(S)服务器，SNTP客户端，SMTP(S)客户端，ping，NetBIOS名称服务器，mDNS响应器，MQTT客户端，TFTP服务器</p>
<p>  lwIP根据BSD风格许可证授权：<a target="_blank" rel="noopener" href="http://lwip.wikia.com/wiki/License">http://lwip.wikia.com/wiki/License</a></p>
<h1 id="TTL"><a href="#TTL" class="headerlink" title="TTL"></a>TTL</h1><p>  TTL(Time- To-Live)，简单的说它表示一条域名解析记录在DNS服务器上缓存时间.当各地的DNS服务器接受到解析请求时，就会向域名指定的DNS服务器发出解析请求从而获得解析记录；在获得这个记录之后，记录会在DNS服务器中保存一段时间，这段时间内如果再接到这个域名的解析请求，DNS服务器将不再向DNS服务器发出请求，而是直接返回刚才获得的记录；而这个记录在DNS服务器上保留的时间，就是TTL值。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p>1.《<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/LwIP">lwIP</a>》<br>2.《<a target="_blank" rel="noopener" href="https://savannah.nongnu.org/projects/lwip/">lwIP - A Lightweight TCP/IP stack - Summary</a>》<br>3.《<a target="_blank" rel="noopener" href="https://blog.csdn.net/ysdaniel/article/details/6922097">TTL值的含义以及与域名DNS TTL值的区别</a>》</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>
<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
