<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://code.islet.space/font//css?family=/CascadiaCode/CascadiaCode:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"islet.space","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/db.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>
<meta name="description" content="笔记分享的旮旯孤岛而已">
<meta property="og:type" content="website">
<meta property="og:title" content="Coder的孤岛">
<meta property="og:url" content="http://islet.space/page/5/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="笔记分享的旮旯孤岛而已">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liewzheng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://islet.space/page/5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Coder的孤岛</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
        <li class="menu-item menu-item-目录"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-简历"><a href="/resume/" rel="section"><i class="fa fa-address-card fa-fw"></i>简历</a></li>
        <li class="menu-item menu-item-友链"><a href="/friends/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>友链</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">124</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">230</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@foxmail.com" title="E-Mail → mailto:liewzheng@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/21/Hardware/Circuit/2021-08-21-NTC%E7%83%AD%E6%95%8F%E7%94%B5%E9%98%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/21/Hardware/Circuit/2021-08-21-NTC%E7%83%AD%E6%95%8F%E7%94%B5%E9%98%BB/" class="post-title-link" itemprop="url">NTC热敏电阻</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-21 08:40:00" itemprop="dateCreated datePublished" datetime="2021-08-21T08:40:00+08:00">2021-08-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-23 01:17:40" itemprop="dateModified" datetime="2021-08-23T01:17:40+08:00">2021-08-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ntc及热敏电阻">NTC及热敏电阻</h1>
<p><strong>NTC</strong>（<em>Negative Temperature Coefficient</em>）是指
<mark>随温度上升电阻呈指数关系减小、具有负温度系数的热敏电阻现象和材料</mark>。</p>
<p>该类材料是利用锰、铜、硅、钴、铁、镍、锌等两种或两种以上的金属氧化物进行充分混合、成型、烧结等工艺而成的半导体陶瓷，可制成具有负温度系数（NTC）的热敏电阻。其
<strong>电阻率</strong> 和 <strong>材料常数</strong>
随材料成分比例、烧结气氛、烧结温度和结构状态不同而变化。现在还出现了以碳化硅、硒化锡、氮化钽等为代表的非氧化物系NTC热敏电阻材料。</p>
<blockquote>
<p>1834年，科学家首次发现了硫化银有 <strong>负温度系数</strong>
的特性。</p>
<p>1930年，科学家发现氧化亚铜-氧化铜也具有负温度系数的性能，并将之成功地运用在航空仪器的温度补偿电路中。随后，由于晶体管技术的不断发展，热敏电阻器的研究取得重大进展。</p>
<p>1960年研制出了NTC热敏电阻器。NTC热敏电阻器广泛用于测温、控温、温度补偿等方面。</p>
</blockquote>
<p><strong>热敏电阻</strong>
（<em>Thermistor</em>）也可作为电子线路元件用于仪表线路温度补偿和温差电偶冷端温度补偿等。利用NTC热敏电阻的自热特性可实现自动增益控制，构成RC振荡器稳幅电路，延迟电路和保护电路。在自热温度远大于环境温度时阻值还与环境的散热条件有关，因此在流速计、流量计、气体分析仪、热导分析中常利用热敏电阻这一特性，制成专用的检测元件。</p>
<p><strong>功率型NTC热敏电阻</strong>
多用于电源抑制浪涌。抑制浪涌用NTC热敏电阻器，是一种大功率的圆片式热敏电阻器，常用于有电容器、加热器和马达启动的电子电路中。
在电路电源接通瞬间，电路中会产生比正常工作时高出许多倍的浪涌电流，而NTC热敏电阻器的初始阻值较大，可以抑制电路中过大的电流，从而保护其电源电路及负载。当电路进入正常工作状态时，热敏电阻器由于通过电流而引起阻体温度上升，电阻值下降至很小，不会影响电路的正常工作。</p>
<h1 id="b值特性">B值特性</h1>
<p>热敏电阻的 <strong>B值</strong>（B-value）
是NTC的属性之一，B值简单的说就是 <strong>材料系数</strong>（<em>Material
Coefficient</em>）。</p>
<p><strong>相同温度区间不同的B值</strong>，说明材料可能不一样，因为NTC热敏电阻是负温度系数温度升高阻值成规律下降，B值代表曲线的弯曲程度或者说温度的敏感指数，单位温度变化的时候阻值增幅程度就代表B值。</p>
<p>通俗的说，即当温度降低，阻值曲线发生变化时会陡一点还是平一点。一般来说B值越大曲线越陡，当曲线越陡说明电阻值的变化就越大，相对来说就灵敏些；B值越小曲线越平，当曲线越平说明电阻值的变化就没那么大，相对来说阻值温度系数也就越小。</p>
<p><strong>注意</strong>：B值是 <u>经由人为计算出来的</u>
逼近某款热敏电阻 <u>在某个温度区间内的</u> 温度阻值特性曲线的
常数/系数。</p>
<p>因为B值反映的是 <strong>两个温度点之间</strong>
的阻值变化规律，可以用以下公式来计算，以每摄氏度的百分比
<code>％/°C​​</code> 为单位。 <span class="math display">\[
B = {ln(R_{T1}) - ln(R_{T2})\over {1 \over {T_1}} -{ 1 \over T_2}}
\]</span></p>
<blockquote>
<p>$ R1 $ 或 $ RT1 $：温度T1的时候零功率电阻值</p>
<p>$ R2 $​ 或 $ RT2 $​​：温度T2的时候零功率电阻值</p>
<p>T1 = 273.15 k + (T1℃)</p>
<p>T2 = 273.15 k + (T2℃)</p>
</blockquote>
<p>除非特别指出，B值通常是在[25, 50]这个温度范围中进行测量，由
<code>T1 = 25℃（298.15K）</code> 和 <code>T2 = 50℃（323.15K）</code>
时的零功率电阻值计算而得。</p>
<p>根据式1，若已知B值的情况下，可以得出目标温度对应的阻值，如下式2：
<span class="math display">\[
R_{T2} = R_{T1} * e^{B * ({1 \over T_2} - {1 \over T_1})}
\]</span></p>
<blockquote>
<p>e = 2.718281828459045</p>
</blockquote>
<h1 id="温度系数">温度系数</h1>
<p>NTC热敏电阻的 <strong>温度系数</strong> 定义为
<mark>相对于温度变化的阻值的相对变化</mark>。计算NTC
<strong>热敏电阻温度系数</strong> 的最简单转换公式如下： <span
class="math display">\[
α = {-β \over T^2}
\]</span></p>
<blockquote>
<p><strong>β</strong>：B常数</p>
<p><strong>T</strong>：25摄氏度时的电阻值</p>
</blockquote>
<p>最终结果之所以带上负号，因为是“负温度系数”啊，不带的话就是“正温度系数”。</p>
<h1 id="阻值特性表">阻值特性表</h1>
<p>厂家在提供热敏电阻电气特性时都会给出B值，但并不是是就不需要阻值特性表了。</p>
<p>使用B值并能够推算出全部想要的温度阻值，因为B值所描述的是某个温度区间内的温度和阻值关系，而热敏电阻所呈现的是温度与阻值的非线性关系，也就是说这种关系没法通过B值和公式准确描述全部温度区间的阻值关系。否则一旦不同厂家的热敏电阻其B值相同，用公式来推导那岂不是阻值全是一样。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210821102248552.png"
alt="image-20210821102248552" />
<figcaption aria-hidden="true">image-20210821102248552</figcaption>
</figure>
<div style="font-size: 0.8rem; font-weight: 900; text-align: center;">
某温度-阻值特性表示例
</div>
<p>例如，[-25℃ ~
50℃]内的B值已给出，意思就是说在25~50度这个区间用公式是完全没有问题的，超出这个范围，那么B值是不同的，所以不在这个范围用公式得出的阻值也是不对的。</p>
<p>如下图所示，为三款B值相同的热敏电阻，然而其阻值却不同。由此可知，B值只是一个针对每款热敏电阻的某区间参数，它只反应此热敏电阻的部分特性，并不是一个严谨的参数，在实际应用中，需要提供检测温度范围内的阻值表才是正确的做法。</p>
<figure>
<img
src="https://pic.islet.space/2021/08/pIYBAF4On2WAc2XpAAC6ucLpfUY488.png"
alt="热敏电阻应用详解" />
<figcaption aria-hidden="true">热敏电阻应用详解</figcaption>
</figure>
<p>B值的范围一般在1800K ~ 5800k，其测温点范围通常为 [25, 50]、[25, 85]、
[0, 100] 或 [0, 50]，部分厂家可以提供特殊NTC热敏电阻
<u>B值的定制</u>。</p>
<h1 id="案例">案例</h1>
<p>假设客户订购10,000
W热敏电阻，其热敏电阻的精度为±0.5°C。部件号为MF52A-103，B值为3950
K.25°C（298.15 K）。</p>
<p>根据 式3 求其 <strong>热敏电阻温度系数</strong> α ： <span
class="math display">\[
α = -{3950K \over (298.15K)^2}
= - 4.44 \%/℃
\]</span> 根据热敏电阻温度系数 α 和 其器件精度求得 25℃时的温度容差为：
<span class="math display">\[
Resistance \ Tolerance\ @25℃ = α *（±0.5℃） = -4.44\%/℃ * （±0.5℃） = ±
2.22\% \ @25℃
\]</span></p>
<h2 id="电气特性">电气特性</h2>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210821095249164.png"
alt="image-20210821095249164" />
<figcaption aria-hidden="true">image-20210821095249164</figcaption>
</figure>
<ul>
<li><strong>电阻值</strong>：R25 = 50kΩ ± 2%
。即在25摄氏度下，其阻值为50k欧姆，阻值允差为百分之二。</li>
<li><strong>B常数</strong>： B25/50 = 3950K ± 2%
。即该NTC热敏电阻的材料系数B值，在25摄氏度至50摄氏度之间的B常数为3950K，允差为百分之二。</li>
</ul>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="http://www.elecfans.com/yuanqijian/ptc/202001031148953.htm">热敏电阻应用与参数详解</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/NTC/16035">NTC</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/18/Communication/2021-08-18-SPI%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/18/Communication/2021-08-18-SPI%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">SPI通信</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-18 07:50:00" itemprop="dateCreated datePublished" datetime="2021-08-18T07:50:00+08:00">2021-08-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-16 00:29:44" itemprop="dateModified" datetime="2021-09-16T00:29:44+08:00">2021-09-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="串行外设接口">串行外设接口</h1>
<p><strong>串行外设接口</strong>（Serial Peripheral
Interface，SPI）是微控制器和外围IC（如传感器、ADC、DAC、移位寄存器、SRAM等）之间使用最广泛的接口之一。</p>
<p>SPI是一种同步、全双工、主从式接口。来自主机或从机的数据在时钟<mark>上升沿或下降沿同步</mark>。主机和从机可以同时传输数据。SPI接口可以是
<strong>3线式</strong> 或
<strong>4线式</strong>。后述中重点介绍常用的4线SPI接口。</p>
<p>与I2C的 <strong>多主多从</strong> 模式不同，SPI协议为
<strong>一主多从</strong> 模式。SPI所消耗的接口数也大大提升。</p>
<h2 id="接口介绍">接口介绍</h2>
<p><img src="https://pic.islet.space/2021/08/image-20210819075248043.png" alt="image-20210819075248043" style="zoom: 33%;" /></p>
<div style="font-weight: 900; text-align: center;">
图1. 含主机和从机的SPI配置
</div>
<p>4线SPI器件有四个信号：</p>
<ul>
<li>时钟(SPI CLK, SCLK)</li>
<li>片选(CS)</li>
<li>主机输出、从机输入(MOSI)</li>
<li>主机输入、从机输出(MISO)</li>
</ul>
<p>产生时钟信号的器件称为主机。主机和从机之间传输的数据与主机产生的时钟同步。同I2C接口相比，SPI器件支持更高的时钟频率。查阅相关产品数据手册以了解SPI接口的时钟频率规格。</p>
<p><mark style="font-weight: 900;">SPI接口只能有一个主机，但可以有一个或多个从机。</mark>图1显示了主机和从机之间的SPI连接。</p>
<p>来自主机的片选信号用于选择从机。这
<mark style="font-weight: 900;">通常是一个低电平有效信号，拉高时从机与SPI总线断开连接</mark>。当使用多个从机时，主机需要为每个从机提供单独的片选信号。<u>本文中</u>
的片选信号始终是低电平有效信号。</p>
<p>MOSI和MISO是数据线。MOSI将数据从主机发送到从机，MISO将数据从从机发送到主机。</p>
<h2 id="数据传输">数据传输</h2>
<p>要开始SPI通信，主机必须发送时钟信号，并通过使能CS信号选择从机。片选通常是低电平有效信号。因此，主机必须在该信号上发送逻辑0以选择从机。SPI是全双工接口，主机和从机可以分别通过MOSI和MISO线路同时发送数据。在SPI通信期间，数据的发送（串行移出到MOSI/SDO总线上）和接收（采样或读入总线(MISO/SDI)上的数据）同时进行。串行时钟沿同步数据的移位和采样。SPI接口允许用户灵活选择时钟的上升沿或下降沿来采样和/或移位数据。</p>
<p><strong>需要注意</strong>：SPI接口传输的 <strong>数据位数</strong>
仍需查阅器件数据手册。</p>
<h2 id="时钟极性和时钟相位">时钟极性和时钟相位</h2>
<p>在SPI中，主机可以选择 <strong>时钟极性</strong>（Clock
Polarity，<strong>CPOL</strong>）和 <strong>时钟相位</strong>（Clock
Phase，<strong>CPHA</strong>）。</p>
<p>在空闲状态期间，CPOL 控制
时钟极性。空闲状态是指传输开始时CS为高电平且在向低电平转变的期间，以及传输结束时CS为低电平且在向高电平转变的期间。</p>
<p>CPHA 控制
时钟相位。<mark>根据CPHA位的状态，使用时钟上升沿或下降沿来采样和/或移位数据</mark>。主机必须
<mark>根据从机的要求选择时钟极性和时钟相位</mark>。根据CPOL和CPHA位的选择，有四种SPI模式可用，如下表：</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 29%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>SPI 模式</th>
<th>CPOL</th>
<th>CPHA</th>
<th>空闲状态下的时钟极性</th>
<th>用于采样和/或移位数据的时钟相应</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
<td>逻辑低电平</td>
<td>数据在上升沿采样，在下降沿移出</td>
</tr>
<tr class="even">
<td>1</td>
<td>0</td>
<td>1</td>
<td>逻辑低电平</td>
<td>数据在下降沿采样，在上升沿移出</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>1</td>
<td>逻辑低电平</td>
<td>数据在下降沿采样，在上升沿移出</td>
</tr>
<tr class="even">
<td>3</td>
<td>1</td>
<td>0</td>
<td>逻辑低电平</td>
<td>数据在上升沿采样，在下降沿移出</td>
</tr>
</tbody>
</table>
<p>下图为TI公司F280049芯片的SPI时钟模式：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819084200284.png"
alt="image-20210819084200284" />
<figcaption aria-hidden="true">image-20210819084200284</figcaption>
</figure>
<p>下图为ADI公司ADSP21479芯片的SPI时钟模式：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819084447672.png"
alt="image-20210819084447672" />
<figcaption aria-hidden="true">image-20210819084447672</figcaption>
</figure>
<p>后述 图2 至 图5 显示了四种SPI模式下的通信示例。</p>
<p>在这些示例中，数据显示在MOSI和MISO线上。传输的开始和结束用绿色虚线表示，采样边沿用橙色虚线表示，移位边沿用蓝色虚线表示。请注意，这些图形仅供参考。要成功进行SPI通信，用户须参阅产品数据手册并确保满足器件的时序规格。</p>
<p><img src="https://pic.islet.space/2021/08/205973_fig_02.png" alt="图2. SPI模式0，CPOL = 0，CPHA = 0：CLK空闲状态 = 低电平，数据在上升沿采样，并在下降沿移出" style="zoom: 60%;" /></p>
<div style="font-weight: 900; text-align: center;">
图2. SPI模式0，CPOL = 0，CPHA = 0：CLK空闲状态 =
低电平，数据在上升沿采样，并在下降沿移出
</div>
<p>图3给出了SPI模式1的时序图。在此模式下，时钟极性为0，表示时钟信号的空闲状态为低电平。此模式下的时钟相位为1，表示数据在下降沿采样（由橙色虚线显示），并且数据在时钟信号的上升沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_03.png?la=en&vs=1" alt="图3. SPI模式1，CPOL = 0，CPHA = 1：CLK空闲状态 = 低电平，数据在下降沿采样，并在上升沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图3. SPI模式1，CPOL = 0，CPHA = 1：CLK空闲状态 =
低电平，数据在下降沿采样，并在上升沿移出
</div>
<p>图4给出了SPI模式2的时序图。在此模式下，时钟极性为1，表示时钟信号的空闲状态为高电平。此模式下的时钟相位为1，表示数据在下降沿采样（由橙色虚线显示），并且数据在时钟信号的上升沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_04.png?la=en&vs=1" alt="图4. SPI模式2，CPOL = 1，CPHA = 1：CLK空闲状态 = 高电平，数据在下降沿采样，并在上升沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图4. SPI模式2，CPOL = 1，CPHA = 1：CLK空闲状态 =
高电平，数据在下降沿采样，并在上升沿移出。
</div>
<p>图5给出了SPI模式3的时序图。在此模式下，时钟极性为1，表示时钟信号的空闲状态为高电平。此模式下的时钟相位为0，表示数据在上升沿采样（由橙色虚线显示），并且数据在时钟信号的下降沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_05.png?la=en&vs=1" alt="图5. SPI模式3，CPOL = 1，CPHA = 0：CLK空闲状态 = 高电平，数据在上升沿采样，并在下降沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图5. SPI模式3，CPOL = 1，CPHA = 0：CLK空闲状态 =
高电平，数据在上升沿采样，并在下降沿移出
</div>
<h2 id="多从机配置">多从机配置</h2>
<p>多个从机可与单个SPI主机一起使用。从机可以采用常规模式连接，或采用菊花链模式连接。</p>
<h3 id="常规spi模式">常规SPI模式</h3>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819075431419.png"
alt="image-20210819075431419" />
<figcaption aria-hidden="true">image-20210819075431419</figcaption>
</figure>
<div style="font-weight: 900; text-align: center;">
图6. 多从机SPI配置
</div>
<p>在常规模式下，主机需要为每个从机提供单独的片选信号。一旦主机使能（拉低）片选信号，MOSI/MISO线上的时钟和数据便可用于所选的从机。如果使能多个片选信号，则MISO线上的数据会被破坏，因为主机无法识别哪个从机正在传输数据。</p>
<p>从图6可以看出，随着从机数量的增加，来自主机的片选线的数量也增加。这会快速增加主机需要提供的输入和输出数量，并限制可以使用的从机数量。可以使用其他技术来增加常规模式下的从机数量，例如使用多路复用器产生片选信号。</p>
<h3 id="菊花链模式">菊花链模式</h3>
<p><img src="https://pic.islet.space/2021/08/image-20210819075542602.png" alt="image-20210819075542602" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图7. 多从机SPI菊花链配置
</div>
<p>在菊花链模式下，所有从机的片选信号连接在一起，数据从一个从机传播到下一个从机。在此配置中，所有从机同时接收同一SPI时钟。来自主机的数据直接送到第一个从机，该从机将数据提供给下一个从机，依此类推。</p>
<p><mark style="font-weight: 900;">使用该方法时，由于数据是从一个从机传播到下一个从机，所以传输数据所需的时钟周期数与菊花链中的从机位置成比例（成比例倍增）。</mark></p>
<p>例如在图7所示的8位系统中，<mark>为使第3个从机能够获得数据，需要24个时钟脉冲，而常规SPI模式下只需8个时钟脉冲</mark>。图8显示了时钟周期和通过菊花链的数据传播。并非所有SPI器件都支持菊花链模式。请参阅产品数据手册以确认菊花链是否可用。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_08.png?la=en&vs=1" alt="图8. 菊花链配置：数据传播" style="zoom: 50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图8. 菊花链配置：数据传播
</div>
<h1
id="adi公司支持spi的模拟开关与多路转换器">ADI公司支持SPI的模拟开关与多路转换器</h1>
<p>ADI公司最新一代支持SPI的开关可在不影响精密开关性能的情况下显著节省空间。本文的这一部分将讨论一个案例研究，说明支持SPI的开关或多路复用器如何能够大大简化系统级设计并减少所需的GPIO数量。</p>
<p><a target="_blank" rel="noopener" href="https://www.analog.com/cn/products/adg1412.html">ADG1412</a>
是一款四通道、单刀单掷(SPST)开关，需要四个GPIO连接到每个开关的控制输入。图9显示了微控制器和一个ADG1412之间的连接。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819075642098.png" alt="image-20210819075642098" style="zoom: 80%;" /></p>
<div style="font-weight: 900; text-align: center;">
图9. 微控制器GPIO用作开关的控制信号
</div>
<p>随着电路板上开关数量的增加，所需GPIO的数量也会显著增加。例如，当设计一个测试仪器系统时，会使用大量开关来增加系统中的通道数。在4×4交叉点矩阵配置中，使用四个ADG1412。此系统需要16个GPIO，限制了标准微控制器中的可用GPIO。图10显示了使用微控制器的16个GPIO连接四个ADG1412。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_10.png?la=en&vs=1" alt="图10. 在多从机配置中，所需GPIO的数量大幅增加" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图10. 在多从机配置中，所需GPIO的数量大幅增加
</div>
<p>为了减少GPIO数量，一种方法是使用串行转并行转换器，如图11所示。该器件输出的并行信号可连接到开关控制输入，器件可通过串行接口SPI配置。此方法的缺点是外加器件会导致物料清单增加。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819075735043.png" alt="image-20210819075735043" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图11. 使用串行转并行转换器的多从机开关
</div>
<p>另一种方法是使用SPI控制的开关。此方法的优点是可减少所需GPIO的数量，并且还能消除外加串行转并行转换器的开销。如图12所示，不需要16个微控制器GPIO，只需要7个微控制器GPIO就可以向4个ADGS1412提供SPI信号。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819080000988.png" alt="image-20210819080000988" style="zoom: 67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图12. 支持SPI的开关节省微控制器GPIO
</div>
<p>开关可采用菊花链配置，以进一步优化GPIO数量。在菊花链配置中，无论系统使用多少开关，都只使用主机（微控制器）的四个GPIO。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819080021307.png" alt="image-20210819080021307" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图13. 菊花链配置的SPI开关可进一步优化GPIO
</div>
<p>图13用于说明目的。ADGS1412数据手册建议在SDO引脚上使用一个上拉电阻。有关菊花链模式的更多信息，请参阅ADGS1412数据手册。为简单起见，此示例使用了四个开关。随着系统中开关数量的增加，电路板简单和节省空间的优点很重要。在6层电路板上放置8个四通道SPST开关，采用4×8交叉点配置时，ADI公司支持SPI的开关可节省20%的总电路板空间。文章《<a
target="_blank" rel="noopener" href="https://www.analog.com/cn/analog-dialogue/articles/precision-spi-switch-configuration-increases-channel-density.html">精密SPI开关配置提高通道密度</a>》详细说明了精密SPI开关配置如何提高通道密度。</p>
<h1 id="术语">术语</h1>
<p><strong>MISO</strong> / <strong>SOMI</strong> /
<strong>SDO</strong>： Master Input and Slaver Output / Slaver Output
and Master Input / Slaver Data Output</p>
<p><strong>MOSI</strong> / <strong>SIMO</strong> /
<strong>SDI</strong>： Master Output and Slaver Input / Salver Input and
Master Output / Slaver Data Input</p>
<p><strong>SCLK</strong>： Serial Clock</p>
<p><strong>CS</strong> / <strong>STE</strong>： Chip Select / Slaver
Transmit Enable</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://www.analog.com/cn/analog-dialogue/articles/introduction-to-spi-interface.html">SPI接口简介</a></li>
<li><a
target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/150121520">SPI通信协议详解（spi总线）</a></li>
<li><a
target="_blank" rel="noopener" href="http://www.microchip.com.cn/community/Uploads/Download/Library/39699a_cn.pdf">第23
章 串行外设接口(SPI)</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/06/Blog/2021-08-06-%E8%A7%A3%E5%86%B3%E6%96%B0%E7%89%88hexo%E6%B2%A1%E6%9C%89%E7%9B%AE%E5%BD%95%E5%92%8C%E6%A0%87%E7%AD%BE%E9%A1%B5%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/06/Blog/2021-08-06-%E8%A7%A3%E5%86%B3%E6%96%B0%E7%89%88hexo%E6%B2%A1%E6%9C%89%E7%9B%AE%E5%BD%95%E5%92%8C%E6%A0%87%E7%AD%BE%E9%A1%B5%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">解决新版hexo没有目录和标签页的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-06 23:40:00" itemprop="dateCreated datePublished" datetime="2021-08-06T23:40:00+08:00">2021-08-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-08 14:26:07" itemprop="dateModified" datetime="2021-08-08T14:26:07+08:00">2021-08-08</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>新版hexo安装之后没有标签页，解决方法大致三步：</p>
<ol type="1">
<li><p>需要自行在 <code>/source/</code> 文件夹下添加一个
<code>categories</code> 和 <code>tags</code>
文件夹，然后往文件夹中分别写入一个 <code>index.md</code> 文件。</p></li>
<li><p>然后在对应的 <code>index.md</code> 中写入 <em>YAML</em>
信息。</p></li>
<li><p>在对应的主题配置文件，例如 <code>_config.yml</code>
中填写好配置。</p></li>
</ol>
<h1 id="新建目录和页面">新建目录和页面</h1>
<p>可以通过两句语句来运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure>
<h1 id="添加type属性">添加type属性</h1>
<p>编辑 <code>index.md</code>，修改信息如下，日期随意：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 目录</span><br><span class="line"><span class="built_in">type</span>: categories</span><br><span class="line">date: 2020-08-06 23:32:00</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>注意上面写的一个属性 <code>type</code>，千万不能写错。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line"><span class="built_in">type</span>: tags</span><br><span class="line">date: 2020-08-06 23:32:00</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h1 id="设置配置文件">设置配置文件</h1>
<p>如下图所示修改即可：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210806235851123.png"
alt="image-20210806235851123" />
<figcaption aria-hidden="true">image-20210806235851123</figcaption>
</figure>
<p>最后重新清空、运行和预览即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo site</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/03/Programming/2021-08-03-Debug%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/03/Programming/2021-08-03-Debug%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/" class="post-title-link" itemprop="url">Debug问题排查思路</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-03 11:35:00" itemprop="dateCreated datePublished" datetime="2021-08-03T11:35:00+08:00">2021-08-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-14 23:59:13" itemprop="dateModified" datetime="2021-10-14T23:59:13+08:00">2021-10-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>以下内容适用于嵌入式开发工程师。</p>
<h1 id="裸机debug">裸机Debug</h1>
<figure>
<img src="https://pic.islet.space/2021/09/20210915214751.png"
alt="image-20210804172539069" />
<figcaption aria-hidden="true">image-20210804172539069</figcaption>
</figure>
<p>裸机调试过程中出现问题时，可以从以下几个角度进行考虑，分别是
<strong>电气特性</strong>、<strong>软件设置</strong> 、
<strong>代码设置</strong> 和 <strong>项目设置</strong>。</p>
<h2 id="电气特性">电气特性</h2>
<p>排查电气特性的方法，主要是使用
<strong>万用表</strong>、<strong>逻辑分析仪</strong>、<strong>示波器</strong>
等可以捕捉电信号的设备进行直接的观察。</p>
<p>例如使用万用表、示波器来检查电信号的电压、电流是否在正常工作范围。</p>
<h2 id="软件设置">软件设置</h2>
<p>虽然软件设置和代码设置的命名方式相近，但是这里的软件设置更多强调的是系统级、寄存器级、驱动级的基础设置，而非算法级、代码级、逻辑级的更高一级设置。</p>
<p>软件设置中，直观可见的是所有可能需要检查的问题点，都是可以通过查阅技术参考手册中的相关寄存器设置来检查是否设置正确的，包括中断、内存、时钟、外设等各项涉及到寄存器级别的内容。</p>
<h2 id="代码设置">代码设置</h2>
<p>代码设置，强调的是算法级、代码级 或 逻辑级 的软件编写或设置。</p>
<p>需要检查的更多是对应 芯片 及其 板载环境 、工作系统
之间的关系，例如代码里面有没有导致死循环、或者多线程之间的资源锁死、内存溢出等情况。</p>
<h2 id="项目设置">项目设置</h2>
<h3 id="调试文件">调试文件</h3>
<h4 id="调试协议">调试协议</h4>
<h4 id="寻址文件">寻址文件</h4>
<p>但看调试文件，同样是f28004x系列芯片，通用的寻址文件就多达十几种。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210804172803808.png"
alt="image-20210804172803808" />
<figcaption aria-hidden="true">image-20210804172803808</figcaption>
</figure>
<p>一般最高型号的芯片还有额外的 <code>.cmd</code> 文件，如：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210804172915025.png"
alt="image-20210804172915025" />
<figcaption aria-hidden="true">image-20210804172915025</figcaption>
</figure>
<p>此时就需要仔细挑选对应的寻址文件，避免多个寻址文件载入导致寻址空间重名冲突。</p>
<h2 id="案例">案例</h2>
<h3 id="adc中断未进入bug">ADC中断未进入BUG</h3>
<h4 id="情况1组中断未打开">情况1——组中断未打开</h4>
<p>ADC模块有检测到信号（下图<code>ADCRESULT0</code>）
，转换电容将电压转换成数值，但是没有触发中断，进而中断函数没有被执行。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210810093022182.png"
alt="image-20210810093022182" />
<figcaption aria-hidden="true">image-20210810093022182</figcaption>
</figure>
<p>仔细检查对应的ADC中断标志寄存器，整理思路：SOC可以正常收到EPWM6的触发源进而正常地对电压进行转换，然后将数值存到对应寄存器中。也就是说，EOC也有正常工作，能够生成脉冲中断。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818100405137.png"
alt="image-20210818100405137" />
<figcaption aria-hidden="true">image-20210818100405137</figcaption>
</figure>
<p>对照着《TRM》中的说明文档再阅读一遍：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818100624266.png"
alt="image-20210818100624266" />
<figcaption aria-hidden="true">image-20210818100624266</figcaption>
</figure>
<p>接着再对应检查一下与中断相关的溢出标志寄存器，发现的确有中断溢出了。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818100710508.png"
alt="image-20210818100710508" />
<figcaption aria-hidden="true">image-20210818100710508</figcaption>
</figure>
<p>在ISR中断服务程序中写入一个全局调试变量，用于观察是否进入中断服务程序，可以知道其并未进入中断服务程序。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818101346665.png"
alt="image-20210818101346665" />
<figcaption aria-hidden="true">image-20210818101346665</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818101314520.png"
alt="image-20210818101314520" />
<figcaption aria-hidden="true">image-20210818101314520</figcaption>
</figure>
<p>最后对比检查样例代码中的main函数对ePIE寄存器的控制，发现少了一行对PIE控制寄存器的操作，补上~</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818101749256.png"
alt="image-20210818101749256" />
<figcaption aria-hidden="true">image-20210818101749256</figcaption>
</figure>
<p>成功进入中断：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818101822146.png"
alt="image-20210818101822146" />
<figcaption aria-hidden="true">image-20210818101822146</figcaption>
</figure>
<p><strong>总结</strong></p>
<ul>
<li>此处很重要的是要仔细研读《TRM》文件，将文档内的中断流程进行一一对照校验检查</li>
<li>理解玩系统框图后，按照信号进入的顺序对涉及到的寄存器依次进行检查，逐个排查之后，再对其他可能会出现问题的地方进行DEBUG代码编写。</li>
<li>如果没有参照手册，就得参照样例文件逐行检查代码</li>
</ul>
<h3 id="开启adc-c模块之后idle函数就不再执行">开启ADC
C模块之后IDLE函数就不再执行</h3>
<h4
id="情况1中断函数不要处理大量数据计算">情况1——中断函数不要处理大量数据计算</h4>
<p>IDLE函数是写在 <code>main()</code> 函数中，最后面的位置的，以
<code>while(1)</code> 语句进行包裹着的永远循环的语句。</p>
<p>在 <code>main()</code>
函数中，一般会对整个系统、外设、内存、中断等进行初始化和配置，一旦所有工作部件跑起来之后，需要CPU进行数据处理时，就会暂停进入IDLE函数，转而去处理更为紧急的事情，例如进行浮点数计算（如果没有开启对应的FPU的话），此时IDLE函数就会过很长一段时间（时间不定，依据实时处理情况而定）才执行一次。</p>
<p>例如下方所示，一旦开启了对应的中断处理函数中的电压、温度、阻值计算，需要处理器实时且大量的计算的话，就会造成CPU短时/长时荷载较高，无法进入IDLE函数，原本在IDLE函数中设置为1秒闪烁一次的LED灯，过了十几二十秒才关闭/打开。</p>
<p>一旦将其注释，LED灯的闪烁速度又得到了恢复。</p>
<p>也可以在中断向量表和处理程序处进行注释以关闭中断处理，也可以看到LED等闪烁正常。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210824190557672.png"
alt="image-20210824190557672" />
<figcaption aria-hidden="true">image-20210824190557672</figcaption>
</figure>
<h3 id="adc读值转换失败">ADC读值/转换失败</h3>
<h4 id="情况1adc触发源更改">情况1——ADC触发源更改</h4>
<p><strong>新增了功能</strong>：由主循环检测GPIO3上的引脚是否导通，导通则开启ePWM的时钟，否则不开启，开关检测代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sw1WrapFunc</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(GpioDataRegs.GPADAT.bit.GPIO3 == HIGH_LEVEL)&#123;  <span class="comment">//是否为高电平</span></span><br><span class="line">        <span class="keyword">if</span>(CpuSysRegs.PCLKCR2.bit.EPWM1 == ON) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            EALLOW;</span><br><span class="line">            CpuSysRegs.PCLKCR2.bit.EPWM1 = ON;  <span class="comment">//高电平且未开启则开启</span></span><br><span class="line">            EDIS;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(GpioDataRegs.GPADAT.bit.GPIO3 == LOW_LEVEL)&#123;  <span class="comment">//是否为低电平</span></span><br><span class="line">        <span class="keyword">if</span>(CpuSysRegs.PCLKCR2.bit.EPWM1 == OFF) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            EALLOW;</span><br><span class="line">            CpuSysRegs.PCLKCR2.bit.EPWM1 = OFF;  <span class="comment">//低电平且已开启则关闭</span></span><br><span class="line">            EDIS;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在增加了新功能之后，发现ADC突然不工作了，每次ePWM一关闭，ADC也跟着不工作，一打开ePWM，ADC又开始工作了。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907134639238.png"
alt="image-20210907134639238" />
<figcaption aria-hidden="true">image-20210907134639238</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907134734391.png"
alt="image-20210907134734391" />
<figcaption aria-hidden="true">image-20210907134734391</figcaption>
</figure>
<p>重新整理思路，想起来ADC工作的配置中，唯一一项跟PWM相关的就是其触发源。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907135154333.png"
alt="image-20210907135154333" />
<figcaption aria-hidden="true">image-20210907135154333</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907135359661.png"
alt="image-20210907135359661" />
<figcaption aria-hidden="true">image-20210907135359661</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907135436244.png"
alt="image-20210907135436244" />
<figcaption aria-hidden="true">image-20210907135436244</figcaption>
</figure>
<p>修改其触发源为CPU1 Timer0，正常工作：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907135823329.png"
alt="image-20210907135823329" />
<figcaption aria-hidden="true">image-20210907135823329</figcaption>
</figure>
<h4
id="情况2主函数被测试用的死循环卡住">情况2——主函数被测试用的死循环卡住</h4>
<p>主循环中一定不能再套一个等待状态（或死循环）的语句，否则整个主循环将有可能永远被卡死。</p>
<p>写完SCI部分函数后，发现ADC温度转换的不工作了，但ADC的中断程序（中断程序对全局变量的写入成功）和中断溢出标志是可以正常处理的，同时写了一个Debug变量放在主循环下的ADC包装函数中，发现数据并未被处理，因此可以判断主程序被卡死。</p>
<p>解决方法是，将SCI通信发送和接收的功能写到中断程序中，让中断程序来处理。</p>
<h3 id="ecap外设没有正常工作">ECAP外设没有正常工作</h3>
<p>首先是注意到该外设对应的GPIO没有正常工作，查看
<code>GpioDataRegs</code> 下的 <code>GPADAT</code>
寄存器，发现GPIO10在其他外设都能正常工作的情况下，该引脚无法动弹（表现为：使用3.3V电源连接GPIO10，没有反映）。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210906172346311.png"
alt="image-20210906172346311" />
<figcaption aria-hidden="true">image-20210906172346311</figcaption>
</figure>
<p>然后查看eCAP引脚源代码，初步推断可能是引脚方向设置出错，更改以下源代码中的最后一句以更改引脚信号导通方向。</p>
<p>源代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init_eCAP_GPIO</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">//配置输入XBAR10</span></span><br><span class="line">    InputXbarRegs.INPUT10SELECT = <span class="number">0xA</span>; <span class="comment">// 将GPIO10(0xA)与输入XBAR 10进行连接</span></span><br><span class="line"></span><br><span class="line">    GpioCtrlRegs.GPAGMUX1.bit.GPIO10 = <span class="number">0</span>;  <span class="comment">//外设组多路配置</span></span><br><span class="line">    GpioCtrlRegs.GPAMUX1.bit.GPIO10 = <span class="number">3</span>;  <span class="comment">//外设多路配置</span></span><br><span class="line">    GpioCtrlRegs.GPADIR.bit.GPIO10 = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再次测试发现结果正常。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907094432301.png"
alt="image-20210907094432301" />
<figcaption aria-hidden="true">image-20210907094432301</figcaption>
</figure>
<p>修改后代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init_eCAP_GPIO</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">//配置输入XBAR10</span></span><br><span class="line">    EALLOW;</span><br><span class="line">    InputXbarRegs.INPUT10SELECT = <span class="number">0xA</span>; <span class="comment">// 将GPIO10(0xA)与输入XBAR 10进行连接</span></span><br><span class="line"></span><br><span class="line">    GpioCtrlRegs.GPAGMUX1.bit.GPIO10 = <span class="number">0</span>;  <span class="comment">//外设组多路配置</span></span><br><span class="line">    GpioCtrlRegs.GPAMUX1.bit.GPIO10 = <span class="number">3</span>;  <span class="comment">//外设多路配置</span></span><br><span class="line">    GpioCtrlRegs.GPADIR.bit.GPIO10 = GPIO_SIGNAL_INPUT;  <span class="comment">// INPUT 输入</span></span><br><span class="line">    GpioCtrlRegs.GPAPUD.bit.GPIO10 = GPIO_PULLUP_DISABLE;</span><br><span class="line">    GpioCtrlRegs.GPAQSEL1.bit.GPIO10 = GPIO_SYNCHRONIZE;</span><br><span class="line">    EDIS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：因为GPIO9和GPIO10临近，默认情况下GPIO10还是会受到附近（结构上）其他GPIO电平的影响而拉高，此时即使设置了
<code>GPIO_PULLUP_DISABLE</code>
都没办法置低。同时，GPIO9也会因为GPIO10的电平拉低而拉低。</p>
<h3 id="ecap引脚配置">ECAP引脚配置</h3>
<p>从GPIO部分的图8-1、 引脚部分的 表4-6 、X-BAR部分的 图9-1 和
eCAP部分的表19-1 四份内容可以看出，GPIO10 没办法被通过INPUT X-BAR
复用到ECAP上。</p>
<p>因为表4-6决定了，GPIO10不能复用到INPUT X-BAR 或
OUT-BAR，但可以复用为自己（GPIO10），只需要设置
<code>GPAGMUX.bit.GPIO10 = 0x0; GPAMUX.bit.GPIO10 = 0x0;</code>
即可。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210913105909558.png"
alt="image-20210913105909558" />
<figcaption aria-hidden="true">image-20210913105909558</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210913110038846.png"
alt="image-20210913110038846" />
<figcaption aria-hidden="true">image-20210913110038846</figcaption>
</figure>
<p><img src="https://pic.islet.space/2021/09/image-20210913110545272.png" alt="image-20210913110545272" style="zoom:67%;" /></p>
<p><img src="https://pic.islet.space/2021/09/image-20210913110506997.png" alt="image-20210913110506997" style="zoom: 67%;" /></p>
<h3 id="sci引脚导致复位">SCI引脚导致复位</h3>
<p>SCI配置完毕后，与对应的GPIO引脚无法通信（即无高低电平变化），将逻辑分析仪插入对应的引脚，会导致芯片复位重启。</p>
<p>原GPIO引脚配置为：一个GPIO为拉高和异步，另一个为拉高和同步。</p>
<p>将两个GPIO修改为异步配置之后，并未出现复位情况。</p>
<h3 id="sci-rx数据错误">SCI RX数据错误</h3>
<p>使用RS485进行发送时，不仅接收会存在错误，发送也会存在错误。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210914155055154.png"
alt="image-20210914155055154" />
<figcaption aria-hidden="true">image-20210914155055154</figcaption>
</figure>
<div style="font-weight: 900; font-size: 0.8rem; text-align: center;">
图 使用XCOM串口助手和GREE DATACONVERTER进行发送和CCS中数组值有异
</div>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210914155215669.png"
alt="image-20210914155215669" />
<figcaption aria-hidden="true">image-20210914155215669</figcaption>
</figure>
<div style="font-weight: 900; font-size: 0.8rem; text-align: center;">
图 使用GREE DATACONVERTER接收数据时也存在错误-1
</div>
<p>在数据量较低且手动点击鼠标进行发送时，仍然会有数据处理错误：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210914170117568.png"
alt="image-20210914170117568" />
<figcaption aria-hidden="true">image-20210914170117568</figcaption>
</figure>
<div style="font-weight: 900; font-size: 0.8rem; text-align: center;">
图 使用GREE DATACONVERTER接收数据时也存在错误-2
</div>
<p>同样的代码（中途未复位重启芯片）对比使用CH340芯片进行发送和接收：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210914155521881.png"
alt="image-20210914155521881" />
<figcaption aria-hidden="true">image-20210914155521881</figcaption>
</figure>
<div style="font-weight: 900; font-size: 0.8rem; text-align: center;">
图 使用CH340进行发送和接收时数据无误
</div>
<p>SCI未触发中断</p>
<h1 id="系统debug">系统Debug</h1>
<h1 id="windowslinuxmac">Windows/Linux/Mac</h1>
<h2 id="分离式代码的联合编译">分离式代码的联合编译</h2>
<figure>
<img src="https://pic.islet.space/2021/10/20211009172229.png"
alt="image-20211009172014699" />
<figcaption aria-hidden="true">image-20211009172014699</figcaption>
</figure>
<p>上图为使用VS Code进行项目编译时报错的情况，在使用 MinGW 的g++
作为编译器时，一开始使用 <code>main.cpp</code>
作为被编译的文件进行编译运行，成功可用。</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211011173023.png"
alt="image-20211011150027217" />
<figcaption aria-hidden="true">image-20211011150027217</figcaption>
</figure>
<p>后期新增了 <code>SerialPort.h</code> 和 <code>SerialPort.cpp</code>
，再次点击编译发现失败。说是查找不到 <code>SerialPort</code>
类下的函数定义相关的报错，并不是因为没有给
<code>SerialPort::SerialPort()</code>
等这些类里的函数进行定义，只是因为定义和声明并不在同一个 <code>.h</code>
文件里面。因为将类定义写在了 <code>.h</code> 文件中，而定义写在了另一个
<code>.cpp</code> 文件中，因此该编程方式称为
<strong>分离式代码</strong>。如果将其书写到同一个 <code>.hpp</code>
文件里，就称为 <strong>非分离式代码</strong>。</p>
<p>采用的 <strong>分离式</strong> 的代码书写方法，造成了
<code>g++</code> 编译器在只编译 <code>main.cpp</code> 的情况下会报错
<strong>函数未定义</strong> 。</p>
<h3 id="解决办法">解决办法</h3>
<p>对分离式的 C++ 代码，需要联合多个 <code>.cpp</code>
文件进行编译，在Linux系统上使用命令行进行编译即可提现 如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ main.cpp SerialPort.cpp -o main --std=c++17</span><br></pre></td></tr></table></figure>
<p>上面就把 <code>main.cpp</code> 和 <code>SerialPort.cpp</code>
两个代码文件联合在一起进行编译，只生成一个 <code>main</code>
二进制可运行文件。</p>
<p>类似，只要在Windows上能用同一句编译命令实现多个 <code>.cpp</code>
文件的编译即可，但自己没有找到如何在 VS
Code中进行该操作方法。另辟蹊径找到了用Terminal进行搞定，方法如下：</p>
<ol type="1">
<li>将 <code>D:\mingw64\bin</code> 加入到 <strong>系统环境变量</strong>
的 <code>Path</code> 变量下：</li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/10/20211011173019.png"
alt="image-20211011150836483" />
<figcaption aria-hidden="true">image-20211011150836483</figcaption>
</figure>
<ol start="2" type="1">
<li>打开 Terminal 进行跳转到工作目录，或者在工作目录按
<code>shift</code> 同时点击右键菜单里的 <code>在Windows终端中打开</code>
即可。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/10/20211011173017.png"
alt="image-20211011150800473" />
<figcaption aria-hidden="true">image-20211011150800473</figcaption>
</figure>
<ol start="3" type="1">
<li>尝试进行编译，发现就不报这个 <code>undefined reference</code>
的错了。</li>
</ol>
<h3 id="总结">总结</h3>
<p>分离式代码就需要联合多个 <code>.cpp</code>
文件进行编译，不能只编译一个 <code>main.cpp</code>，Windows Terminal
也可以直接操作 <code>g++</code> （只要加了系统变量）进行多文件编译。</p>
<h2 id="cannot-convert">CANNOT CONVERT</h2>
<p>以下为 VS Code中的报错：</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211009172849.png"
alt="image-20211009172830768" />
<figcaption aria-hidden="true">image-20211009172830768</figcaption>
</figure>
<p>以下为 Terminal g++ 中的报错：</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211011173012.png"
alt="image-20211011151525322" />
<figcaption aria-hidden="true">image-20211011151525322</figcaption>
</figure>
<p>cannot convert <code>const wchar_t*</code> to <code>LPCSTR</code>
，即是说，无法将<code>const wchar_t*</code> 类型转换为
<code>LPCSTR</code> 类型。</p>
<p>LPCSTR，即 <em>long pointer const string</em> ,
是Win32和VC++所使用的一种字符串数据类型。定义如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> _Null_terminated_ CONST CHAR *LPCSTR, *PCSTR; </span><br></pre></td></tr></table></figure>
<p><code>LPCSTR</code> 代表了 <code>const char *</code>
类型，它是一个指向以 <code>\0</code> 结尾的 8
bit（单字节）<strong>ANSI字符数组</strong> 的常量指针。</p>
<p>而 <code>const wchar_t *</code> 类型是一个指向 <code>\0</code> 结尾的
16 bit（双字节）<strong>Unicode字符数组</strong> 的常量指针。</p>
<p>在VS2013编译器中直接输入的字符串常量（如 <code>“abc”</code>
）默认是以 <code>const char *</code>
的格式（即ANSI编码）储存的，因此会导致类型不匹配的编译错误。</p>
<h3 id="解决办法-1">解决办法</h3>
<p>以下办法查询自网络，未实践：</p>
<ol type="1">
<li>Visual Studio:
右击“解决方案资源管理器”中的项目，“属性→配置属性→常规→项目默认值→字符集”，默认的选项是“使用多字节字符集”，将它改为“使用Unicode字符集”即可。这样，输入的字符串会默认以
<code>const wchar_t *</code> 格式储存。</li>
<li>使用 <code>_T</code> 宏，它在 &lt;tchar.h&gt;
中定义，它能够自动识别当前编译器字符串的储存格式并做出相应转换，避免这种类型的编译错误。具体使用方法为：将
<code>“abc”</code> 改为 <code>_T("abc")</code> 。</li>
</ol>
<p>以下办法亲自实验可用：</p>
<ol type="1">
<li>删除该实参 <code>L"xxxxxx"</code> 前的 <code>L</code>
字符即可，在使用 MinGW 编译器的情况下，如果有该 <code>L</code>
字符，就会一直报错，就算将文本字符集改成 <code>UTF-16 LE/BE</code>
，虽然不会报该 <code>L</code>
字符的错了，但仍会出现其他问题，也是因为字符集搞的鬼。在Linux或Mac下就不会报该错误。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/07/17/Hardware/Circuit/2021-07-17-%E7%94%B5%E9%9A%94%E7%A6%BB%E5%92%8C%E9%9D%9E%E7%94%B5%E9%9A%94%E7%A6%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/17/Hardware/Circuit/2021-07-17-%E7%94%B5%E9%9A%94%E7%A6%BB%E5%92%8C%E9%9D%9E%E7%94%B5%E9%9A%94%E7%A6%BB/" class="post-title-link" itemprop="url">电隔离和非电隔离</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-07-17 10:40:00 / Modified: 11:42:40" itemprop="dateCreated datePublished" datetime="2021-07-17T10:40:00+08:00">2021-07-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在产品设计时，倘若没有考虑应用环境对电源隔离的要求，产品到了应用时就会出现因设计方案的不当导致的系统不稳定，甚至出现高压损坏后级负载的情况，以及出现危害人身财产安全的情况。因此产品设计是否需要隔离至关重要。</p>
<h1 id="定义">定义</h1>
<p><strong>隔离电源</strong>：电源的输入回路和输出回路之间没有直接的电气连接，输入和输出之间是绝缘的高阻态，没有电流回路。</p>
<p><img src="https://pic.islet.space/2021/07/60935d50373e5-thumb.png" alt="img" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图1 采用变压器的隔离电源
</div>
<p><strong>非隔离电源</strong>：输入和输出之间有直接的电流回路，例如，输入和输出之间是共地的。以隔离的反激电路和非隔离的BUCK电路为例。</p>
<p><img src="https://pic.islet.space/2021/07/60935d4fef66f-thumb.png" alt="img" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图2 非隔离电源
</div>
<p><img src="https://pic.islet.space/2021/07/60935d5048313-thumb.png" alt="img" style="zoom:50%;" /></p>
<h1 id="优缺点对比">优缺点对比</h1>
<p>由上述概念可知，对于常用的电源拓扑而言，非隔离电源主要有：<strong><em>Buck</em></strong>、<strong><em>Boost</em></strong>、<strong><em>Buck-Boost</em></strong>等。而隔离电源主要有各种带隔离变压器的
<strong><em>反激</em></strong>、<strong><em>正激</em></strong>、<strong><em>半桥</em></strong>、<strong><em>LLC</em></strong>
等拓扑。</p>
<p>结合常用的隔离与非隔离电源，我们从直观上就可得出它们的一些优缺点，两者的优缺点几乎是相反的。使用隔离或非隔离的电源，需了解实际项目对电源的需求是怎样的。</p>
<p>隔离和非隔离电源的主要差别在于
隔离模块的可靠性高，但成本高，效率差点。非隔离模块的结构很简单，成本低，效率高，安全性能差。因此，在如下几个场合，建议用隔离电源：</p>
<ol type="1">
<li></li>
</ol>
<p>总结的表如表1所示，两者的优缺点几乎是相反的。</p>
<div style="text-align: center; font-weight: 900;">
表1 隔离电源和非隔离电源的优缺点
</div>
<p><img src="https://pic.islet.space/2021/07/60935d504e874-thumb.png" alt="img" style="zoom:80%;" /></p>
<h1 id="适用场景">适用场景</h1>
<p>一般场合使用对模块电源隔离电压要求不是很高，但是 <mark>
更高的隔离电压可以保证模块电源具有更小的漏电流，更高的安全性和可靠性，并且
<strong><em>EMC特性</em></strong>
也更好一些</mark>，因此目前业界普遍的隔离电压水平为1500VDC以上。</p>
<p>了解了隔离与非隔离电源的优缺点，对于一些常用的嵌入式供电，其对应的场景及推荐隔离方案如下：</p>
<ol type="1">
<li>系统前级的电源，为提高抗干扰性能，保证可靠性，一般用隔离电源。</li>
<li>对安全有要求的场合，如需接市电的AC-DC，或医疗用的电源和白色家电，为保证人身的安全，必须用隔离电源，有些场合还必须用加强隔离的电源。</li>
<li>对于远程工业通信的供电，为有效降低地电势差和导线耦合干扰的影响，为每个通信节点单独供电一般都用隔离电源。</li>
<li>内部IC或部分电路供电，从性价比和体积出发，优先选用非隔离电源。</li>
<li>对于采用电池供电，<mark>对续航力要求严苛的场合，采用非隔离供电</mark>。</li>
</ol>
<h3 id="隔离电源">隔离电源</h3>
<ol type="1">
<li><p>涉及可能触电的场合，如从电网取电，转成低压直流的场合，需用隔离的AC-DC电源；</p></li>
<li><p>串行通信总线通过RS-232、RS-485和控制器局域网(CAN)等物理网络传送数据，这些相互连接的系统每个都配备有自己的电源，而且各系统之间往往间隔较远，因此，我们通常需要隔离电源进行电气隔离来确保系统的物理安全，且通过隔离
<mark style="font-style: Italic; font-weight: 900;">切断接地回路</mark>，来保护系统免受瞬态高电压冲击，同时减少信号失真；</p></li>
<li><p>对外的I/O端口，为保证系统的可靠运行，也建议对I/O端口做电源隔离。</p></li>
</ol>
<h3 id="非隔离电源">非隔离电源</h3>
<p>电路板内的IC或部分电路供电，从性价比和体积出发，优先选用非隔离的方案；如MPS的MP150/157/MP174系列buck型非隔离AC-DC，适合于1~5W应用；</p>
<p>对于工作电压低于36V，采用电池供电，对续航力要求严苛的场合，优先采用非隔离供电，如MPS的MP2451/MPQ2451。</p>
<h1 id="隔离电源模块选型的注意事项">隔离电源模块选型的注意事项</h1>
<p>电源的隔离耐压在GB-4943国标中又叫抗电强度，这个GB-4943标准就是我们常说的信息类设备的安全标准，就是为了防止人员受到物理和电气伤害的国家标准，其中包括避免人受到电击伤害、物理伤害、爆炸等伤害。如下图为隔离电源结构图。</p>
<p><img src="https://pic.islet.space/2021/07/60935d4fe8f0d-thumb.png" alt="img" style="zoom:120%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 隔离电源结构
</div>
<p>作为模块电源的重要指标，标准中也规定了隔离耐压相关测试方法，简单的测试时一般采用等电位连接测试，连接示意图如下：</p>
<figure>
<img src="https://pic.islet.space/2021/07/60935d4fc9c96-thumb.png"
alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<div style="text-align: center; font-weight: 900;">
图 隔离耐压测试示意
</div>
<h2 id="测试方法">测试方法</h2>
<ol type="1">
<li><p>将耐压计的电压设为规定的耐压值，电流设为规定的漏电流值，时间设为规定的测试时间值；</p></li>
<li><p>操作耐压计开始测试，开始加压，在规定的测试时间内，模块应无击穿，无飞弧现象。</p></li>
<li><p>注意在测试时焊接电源模块要选取合适的温度，避免反复焊接，损坏电源模块。</p></li>
<li><p>除此之外还要注意：</p>
<ol type="1">
<li>要注意是AC-DC还是DC-DC。</li>
<li>隔离电源模块的隔离耐压。例如隔离1000V DC 是否满足绝缘要求。</li>
<li>隔离电源模块是否有进行全面的可靠性测试。电源模块要经过性能测试、容差测试、瞬态条件测试、可靠性测试、EMC电磁兼容测试、高低温测试、极限测试、寿命测试、安规测试等。</li>
<li>隔离电源模块的生产工厂产线是否规范。电源模块生产线需要通过ISO9001,
ISO14001，OHSAS18001等多项国际认证，如下图3所示。</li>
<li>隔离电源模块是否有应用在工业、汽车等恶劣环境。电源模块不仅仅大量应用与恶劣的工业环境，同时在新能源汽车的BMS管理系统中也游刃有余。</li>
</ol></li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/07/60935d503580c-thumb.png"
alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<div style="text-align: center; font-weight: 900;">
图 ISO认证
</div>
<h1 id="总结">总结</h1>
<p>很多人认为非隔离电源不如隔离电源好，因为隔离电源贵，所以肯定贵的就好。前几年非隔离的稳定性确实没有隔离稳定，但随着研发技术的更新，现如今非隔离已经非常成熟，日渐稳定。说到安全性，其实现在非隔离电源也是很安全的，只要在结构稍微做下改动，对人体还是很安全的，同样的道理，非隔离电源也是可以过很多安规标准，例如:ULTUVSAACE等。</p>
<p>实际上非隔离电源损坏的根源就是电源AC线两端的浪涌电压所致，也可以这么说，雷击浪涌吧，这种电压是加在电压AC线两端的瞬间高压，有时高达三千伏，但时间很短，能量却极强，在打雷时会发生，或是在同一条AC线上，当一个大的负载断开瞬间，因为电流惯性的原因也会发生，这个电压进入电源，对于非隔离BUCK电路，会瞬间传达到输出，击坏恒流检测环，或是进一步击坏芯片，造成300v直通，而烧掉整条灯管。对于隔离反激电源，会击坏MOS,现象就是保管，芯片，MOS管全烧坏。现在LED驱动电源，在使用过程中坏的，80%以上都是这两种类似现象。而且，小型开关电源，就算是电源适配器，也经常损坏的是这个现象，均是浪涌电压所致，而在LED电源里，表现的更加普遍，这是因为LED的负载特性是特别的怕浪涌电压的。</p>
<p>如果按照一般的理论来讲，电子电路里，元器件越少，可靠性越高，相应越多的元件的电路板可靠性则越低。实际上非隔离电路的元件是比隔离电路要少的，为什么隔离电路可靠性高。其实说白了，不是什么可靠性，而是
<mark>非隔离电路对于浪涌太敏感，抑制能力差</mark>，隔离电路，因为能量是先进入变压器，然后从变压器再输送到LED负载的。BUCK电路是输入电源一部分直接加在了LED负载上，故前者对浪涌抑制和衰减能力强，所以浪涌来时损坏的机率小而已。实际上，非隔离电源的问题主要是在于浪涌问题，目前这个问题，因为只有LED灯具在大批量应用时，从概率上才能看出其解决的程度，所以很多人没有提出好的防治办法，更多的人则是不知道浪涌电压为何物。LED灯具坏了，很多人也找不到原因，最后只能一句，什么此电源不稳定就了结了，具体哪里不稳定，他不知道。</p>
<p>非隔离电源的优势一是效率，二是成本。</p>
<p>非隔离电源适合的场合：首先，是室内的灯具，这种室内用电环境较好，浪涌影响小。第二，使用的场合是高压小电流，低压大电流用非隔离没有意义，因为低压大电流非隔离的效率并不比隔离的高，成本也低不到多少去。第三，电压相对较稳定的环境中使用非隔离电源。当然，如果有办法解决掉抑制浪涌的问题，那么非隔离电源的应用范围将大大拓宽！</p>
<p>隔离电源因为浪涌的问题，损坏率也不可小觑，一般那种返修回来，击坏保险，芯片，MOS的第一个应该想到是浪涌问题。为了减少损坏率，在设计时就行要考虑到浪涌的因素进去，或是在使用时要告戒用户，尽量避免浪涌发生。（如室内灯具，打雷时暂时先关掉）</p>
<p>综合所述，使用隔离与非隔离很多时候都是因为浪涌这个问题，而浪涌问题和用电环境是息息相关的，所以很多时候使用隔离电源和非隔离电源不能一刀切，非隔离电源在节能，成本上都是很有优势的，所以要科学的选用非隔离还是隔离作为LED驱动电源。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/07/15/Hardware/Circuit/2021-07-15-IGBT%E5%8F%8A%E5%85%B6%E9%A9%B1%E5%8A%A8%E8%8A%AF%E7%89%87%E8%A7%84%E6%A0%BC%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/15/Hardware/Circuit/2021-07-15-IGBT%E5%8F%8A%E5%85%B6%E9%A9%B1%E5%8A%A8%E8%8A%AF%E7%89%87%E8%A7%84%E6%A0%BC%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">IGBT及其驱动芯片规格学习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-15 08:50:00" itemprop="dateCreated datePublished" datetime="2021-07-15T08:50:00+08:00">2021-07-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-17 14:13:02" itemprop="dateModified" datetime="2021-07-17T14:13:02+08:00">2021-07-17</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<p>IGBT和其驱动芯片的电气特性、引脚等参数的开发记录。</p>
<h1 id="igbt">IGBT</h1>
<p>IGBT芯片选型为 IKW50N65WR5。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715090401339.png"
alt="image-20210715090401339" />
<figcaption aria-hidden="true">image-20210715090401339</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715093221500.png"
alt="image-20210715093221500" />
<figcaption aria-hidden="true">image-20210715093221500</figcaption>
</figure>
<p>IGBT有三个极，发射极、集电极 和 栅极。</p>
<p>从其电气性能表格中，可以看出：</p>
<ul>
<li>集电极到发射极的击穿电压 <em>最小</em> 为650V</li>
<li>在 V<span style="font-size: 0.8rem; font-weight: 500;">GE</span>
完全导通（最高15V）时，集电极到发射极的饱和电压为1.8V以下，此时 IGBT
处于截止状态</li>
<li>在 V<span style="font-size: 0.8rem; font-weight: 500;">GE</span>
完全截止（0V）时，二极管的正向电压为1.9V以下。<mark> 此时，V<span
style="font-size: 0.8rem; font-weight: 500;">CE</span>
处于导通状态。</mark></li>
</ul>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715094151439.png"
alt="image-20210715094151439" />
<figcaption aria-hidden="true">image-20210715094151439</figcaption>
</figure>
<p>从上方表中可以看出，在官方的《开关特性测试情况》下，V<span
style="font-size: 0.8rem; font-weight: 500;">GE</span> 的通电情况是 0V
或者 15V，故此推断给此IGBT的栅极电源输入信号应该是0V ~ 15V的方波。</p>
<p>因此，下图中IGBT器件的电路连接方式为：G 接0/15V方波信号，C
接最高650V电源，E 接地。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715095656309.png"
alt="image-20210715095656309" />
<figcaption aria-hidden="true">image-20210715095656309</figcaption>
</figure>
<h1 id="driver-ic">DRIVER IC</h1>
<p>选用芯片型号为 2EDL05I06PF。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715102359830.png"
alt="image-20210715102359830" />
<figcaption aria-hidden="true">image-20210715102359830</figcaption>
</figure>
<p>根据表1索引可得，芯片封装类型为DSO-8，目标驱动芯片是 IGBT，而非
MOSFET。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715102251417.png"
alt="image-20210715102251417" />
<figcaption aria-hidden="true">image-20210715102251417</figcaption>
</figure>
<p>再根据图3可得芯片引脚分布，根据表2可得所有引脚描述。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715095931941.png"
alt="image-20210715095931941" />
<figcaption aria-hidden="true">image-20210715095931941</figcaption>
</figure>
<p>结合表2和图3，再根据图1的典型应用电路，可以大致知道芯片的连接方法。</p>
<table>
<thead>
<tr class="header">
<th>针脚</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>VDD</td>
<td>芯片供电接口</td>
</tr>
<tr class="even">
<td>GND</td>
<td>芯片接地接口</td>
</tr>
<tr class="odd">
<td>HIN</td>
<td>调制波形输入接口——高位</td>
</tr>
<tr class="even">
<td>LIN</td>
<td>调制波形输入接口——低位</td>
</tr>
<tr class="odd">
<td>VB</td>
<td>高位正电</td>
</tr>
<tr class="even">
<td>HO</td>
<td>控制高位IGBT栅极的信号输出接口</td>
</tr>
<tr class="odd">
<td>VS</td>
<td>高位负电</td>
</tr>
<tr class="even">
<td>LO</td>
<td>控制低位IGBT栅极的信号输出接口</td>
</tr>
</tbody>
</table>
<blockquote>
<p>还是不太明白VB和VS的作用</p>
</blockquote>
<p>表4给出了 V<span
style="font-size: 0.8rem; font-weight: 500;">DD</span> 和 V<span
style="font-size: 0.8rem; font-weight: 500;">B</span> 的供电范围：</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715105358524.png"
alt="image-20210715105358524" />
<figcaption aria-hidden="true">image-20210715105358524</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715105816397.png"
alt="image-20210715105816397" />
<figcaption aria-hidden="true">image-20210715105816397</figcaption>
</figure>
<p>表6 给出了输入 V<span
style="font-size: 0.8rem; font-weight: 500;">IN</span>
的逻辑电平高低的电压范围，高电平为1.7 ~ 2.4 V， 低电平为0.7 ~ 1.1V。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210715103507327.png"
alt="image-20210715103507327" />
<figcaption aria-hidden="true">image-20210715103507327</figcaption>
</figure>
<p>图2 提供了驱动芯片内部结构示意图</p>
<p>概括地说，IGBT栅极驱动器是一个放大器，其通过提高电压和电流来放大控制信号。</p>
<p>栅极驱动器的主要作用是对
<mark>IGBT的输入和反向输出电容放电</mark>。因此栅极驱动器（初其他影响因素外）与IGBT的开关性能密切相关，也与通态损耗与开关损耗有关。</p>
<p>绝大多数IGBT驱动器都是基于电压源的，与电流源驱动器相比，电压源的优势是其功率损耗在栅极电阻上，而非驱动中的电流源内。通过栅极电阻，可以调整最大的栅极电流。另一优势是，电压源相对简单的电路和控制方法。</p>
<h2 id="驱动功能">驱动功能</h2>
<p>IGBT驱动电路为系统提供的功能：</p>
<ol type="1">
<li>在IGBT开通过程中，栅极处的电容充电直到IGBT的开通阈值电压，反向传输电容（密勒电容）也如此。</li>
<li>在IGBT关断过程中，输入电容放电直到栅极电压达到关断阈值电压以下，反向传输电容（密勒电容）也如此。</li>
<li>IGBT驱动可以具有保护IGBT免受损坏的功能，如
<strong>避免IGBT短路</strong> 和 <strong>过电压保护</strong>。</li>
</ol>
<h2 id="驱动供电">驱动供电</h2>
<p>大部分情况下，IGBT驱动需要用隔离的供电电源。隔离电源可以看做是IGBT驱动的一部分。这些电源一般由
<strong>DC-DC变换器</strong> 或 <strong>自举电路</strong> 构成。</p>
<p>同时，驱动会影响IGBT和续流二极管的动态特性，此外仍须确保IGBT输入电路电压（低压侧）和输出电路（高压侧）的电压隔离。<mark>低压侧与控制电路连接，高压侧与IGBT电路连接。</mark></p>
<h2 id="信号传输">信号传输</h2>
<p>阿博说的电路PCB布局要点：强弱隔离，数模隔离，信号沿地。</p>
<p>IGBT需要隔离的控制信号 包括：
<strong>开通信号</strong>、<strong>关断信号</strong>、<strong>反馈信号</strong>。</p>
<p>这些控制信号的传输路径的隔离是通过 <strong>电隔离</strong> 或
<strong>非电隔离</strong>
的方式形成的，这种电隔离被进一步划分为基于磁感应的、光学的隔离，极少情况下是电容性的隔离。需要通过
<strong><em>IGBT阻断电压</em></strong> 或
<strong><em>应用电压的高低</em></strong> 来判断组个方式，在 高压应用 或
IGBT阻隔电压 U<span style="font-size: 0.6rem;">CES</span> 高至
<code>1.2kV</code> 时，采用磁感应式 或 光学式信号传送器；在 低压 或 中压
应用中 或 低于 <code>1.2kV</code> 时，采用光电耦合驱动芯片。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210717130119184.png" alt="image-20210717130119184" style="zoom:50%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 Infineon对电气隔离的定义
</div>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210717115141036.png"
alt="image-20210717115141036" />
<figcaption aria-hidden="true">image-20210717115141036</figcaption>
</figure>
<h3 id="光电耦合器">光电耦合器</h3>
<p>光电耦合器就是一种可以实现IGBT驱动的同时实现强弱电隔离的器件。由于光电耦合器的结构设计，集成光电耦合器的IGBT只能实现信息传递，不能为任何设备提供充足的能量支撑，需要一个隔离电源为驱动核心和光电耦合器的二次侧（高压侧）提供电能。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210717113118307.png" alt="image-20210717113118307" style="zoom:80%;" /></p>
<p>另外有个相当重要的参数需要考虑——<strong><em>传输延迟时间</em></strong>，即
信号从光电耦合器IGBT输入到控制电流输出的时间。常规而言，传播延迟时间
<em>t</em><span style="font-size: 0.6rem;">PLH</span> 和 <em>t</em><span
style="font-size: 0.6rem;">PHL</span>
在几百个纳秒时间，但通常大于200ns。这种延时本身不会构成真正的问题，因为微控制器的控制算法可以考虑这一点，最大的问题在于
延时的公差（传输延迟时间不匹配），即最小和最大延时的不一致性。一旦该公差越大，上下桥臂的IGBT死区时间
<em>t</em><span style="font-size: 0.6rem;">DT</span>
就越大，加重了逆变器输出电流的失真影响。光电耦合器里信号延迟的误差因为操作使用会发生巨大变化，最终可导致高达1us的偏差。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210717114405335.png"
alt="image-20210717114405335" />
<figcaption aria-hidden="true">image-20210717114405335</figcaption>
</figure>
<h3 id="脉冲变压器">脉冲变压器</h3>
<p>利用脉冲变压器为信号传输的IGBT，可以达到较低的延时水平，但与光电耦合器一样，只能传输信号，提供所需能量仍需由隔离电源提供。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210717115333071.png"
alt="image-20210717115333071" />
<figcaption aria-hidden="true">image-20210717115333071</figcaption>
</figure>
<h3 id="单片电平转换器">单片电平转换器</h3>
<p><strong>单片电平转换器</strong>，即 仅通过一个集成电路来实现 输入信号
和 输出信号
之间的隔离。需要注意的是，并不想光耦、变压器、脉冲等技术的完全绝缘的电气隔离，如果出现差错（如输出侧寄生电感产生的负电压瞬变），电路高压侧和地压侧将会直接连在一起（导致内部集成芯片的损坏）。将
<strong><em>SOI（绝缘硅）技术</em></strong>
应用于电平转换器可以解决这一缺陷，Infineon的产品大多都应用这项技术。这样的SOI装置不是由PN结反向偏置来提供内部电路隔离的，而是通过一层绝缘层（通常是二氧化硅
SiO2）来为不同的内部电路提供隔离，其反向电压耐压高达较高（因产品而不同）。</p>
<p>单片电平转换器主要应用于 U<span style="font-size: 0.6rem;">CES</span>
低于 600V 的IGBT，通常一个驱动器有六路输出。但是在驱动 1.2kV
以上时，其驱动芯片和其他驱动方式相比成本劣势较少采用。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210717122123709.png"
alt="image-20210717122123709" />
<figcaption aria-hidden="true">image-20210717122123709</figcaption>
</figure>
<div style="text-align: center; font-weight: 900;">
图 带电平转换器的IGBT工作原理
</div>
<h1 id="产品概念">产品概念</h1>
<p>栅极驱动芯片 又可以称作 门极驱动芯片。按照门极驱动结构类型可以分为
<strong>单通道</strong>、<strong>双通道</strong>、<strong>四通道</strong>
和 <strong>六通道</strong>，又进一步划分
<strong>高边</strong>、<strong>地边</strong>、<strong>高低边</strong>、<strong>半桥</strong>、<strong>全桥</strong>、<strong>三相</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210717125203004.png"
alt="image-20210717125203004" />
<figcaption aria-hidden="true">image-20210717125203004</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210717125219691.png"
alt="image-20210717125219691" />
<figcaption aria-hidden="true">image-20210717125219691</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210717125337142.png"
alt="image-20210717125337142" />
<figcaption aria-hidden="true">image-20210717125337142</figcaption>
</figure>
<h2 id="eicedriver">EiceDriver</h2>
<p>下图为Infineon提供的栅极驱动芯片品类示意：</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210717120650887.png"
alt="image-20210717120650887" />
<figcaption aria-hidden="true">image-20210717120650887</figcaption>
</figure>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://storage.islet.space/01_Learning/12_Hardwares/03_Semiconductor/IGBT%E6%A8%A1%E5%9D%97%EF%BC%9A%E6%8A%80%E6%9C%AF%E9%A9%B1%E5%8A%A8%E5%92%8C%E5%BA%94%E7%94%A8.pdf">《IGBT模块：技术驱动和应用》</a></li>
<li><a
target="_blank" rel="noopener" href="https://toshiba.semicon-storage.com/content/dam/toshiba-ss/shared/docs/design-support/document/Reference-design/application-note/MOSFET-Gate-Drive-Circuit-Application-Notes_EN_36267-CN.pdf">《MOSFET
栅极驱动电路》</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.infineon.com/dgdl/Infineon-Power_and_Sensing-ProductSelectionGuide-v00_01-EN.pdf?fileId=5546d4625607bd13015621522aa012cb&amp;da=t">《Infineon-Power_and_Sensing-ProductSelectionGuide-v00_01-EN》</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.infineon.com/dgdl/Infineon-EiceDRIVER_Gate_Driver_ICs-ProductSelectionGuide-v01_01-CN.pdf?fileId=5546d46269e1c019016ab0ec653015cc">《Infineon-EiceDRIVER_Gate_Driver_ICs-ProductSelectionGuide-v01_01-CN》</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/07/14/Hardware/2021-07-14-Semiconductor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/14/Hardware/2021-07-14-Semiconductor/" class="post-title-link" itemprop="url">Semiconductor</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-14 20:30:00" itemprop="dateCreated datePublished" datetime="2021-07-14T20:30:00+08:00">2021-07-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-17 12:13:36" itemprop="dateModified" datetime="2021-07-17T12:13:36+08:00">2021-07-17</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Semiconductor/" itemprop="url" rel="index"><span itemprop="name">Semiconductor</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文章用于记录半导体（晶体管的工作原理等blablabla的知识）。</p>
<h1 id="半导体的定义">半导体的定义</h1>
<p><strong>半导体</strong>
是指常温下导电性能介于导体与绝缘体之间的材料。
按照国际通行的半导体产品标准方式进行分类，半导体可以分为四类：<strong>集成电路</strong>（Integer
Circuit），<strong>分立器件</strong>（Discrete
Device），<strong>传感器</strong>（Sensor） 和
<strong>光电子器件</strong>（Optoelectronic Devices）
，统称为半导体元件。</p>
<p>分立器件按照功率转换进行分类，可以分为 <strong>功率器件</strong> 和
<strong>非功率器件</strong>，其中，<strong>传感器</strong> 和
<strong>光电器件</strong> 属于 分立器件下的
<strong>非功率器件</strong>，剩下的均是
<strong>功率器件</strong>，包含大部分晶体管，如 Zener
Diode、BJT、IGFET、IGBT、Thyristor等。</p>
<p><strong>注意</strong>：功率器件的概念很大，不仅在分立器件中存在功率半导体，在IC中也存在功率半导体的产品。</p>
<h2 id="本征半导体">本征半导体</h2>
<p><mark>导电性介于导体与绝缘体之间的物质</mark>称为
<strong>半导体</strong>。</p>
<p><strong>导体</strong>：如铁、铝、铜等金属元素等低价元素，其最外层电子在外电场作用下很容易产生定向移动，形成电流。</p>
<p><strong>绝缘体</strong>：如惰性气体、橡胶等，其原子的最外层电子受原子核的束缚力很强，只有在外电场强到一定程度时才可能导电。</p>
<p><strong>半导体</strong>：如硅（Si）、锗（Ge），均为四价元素，它们原子的最外层电子受原子核的束缚力介于导体与绝缘体之间。</p>
<p><strong>本征半导体</strong>：intrinsic semiconductor， 是
<strong>纯净</strong>（Purity）的 <strong>晶体结构</strong>（Crystal
Texture）的 半导体；intrinsic 具有 “本质，固有”
之意。<strong>纯净</strong>，即无杂质之意；<strong>晶体结构</strong>，即稳定的结构。</p>
<h2 id="pn型半导体">P/N型半导体</h2>
<p>纯净的硅晶体不带电荷，不显示出任何导电特性。</p>
<p><strong>自由电子</strong>（Electron）：由于热运动，具有足够能量的价电子挣脱共价键的束缚而成为自由电子</p>
<p><strong>空穴</strong>（Hole）：自由电子的产生使共价键中留有一个空位置</p>
<p><strong>复合</strong>：自由电子与空穴相碰同时消失</p>
<p><strong>电荷</strong>：电子和空穴都是电荷，电子呈现负电荷，空穴呈现正电荷</p>
<p><strong>载流子</strong>（Carrier）：运载电荷的粒子称为载流子</p>
<p><strong>导电性</strong>：物体呈现出的传导电流的能力</p>
<p><strong>多数载流子</strong>：在纯净硅晶体中掺杂数量较多的电荷称为多数载流子。</p>
<p><strong>少数载流子</strong>：在纯净硅晶体中掺杂数量较少的电荷称为少数载流子。</p>
<p>外加电场时，带负电的自由电子和带正电的空穴均参与导电，且运动方向相反。由于载流子数目很少，故导电性很差。温度升高，热运动加剧，载流子浓度增大，导电性增强。热力学温度0K时不导电。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210714204623205.png" alt="image-20210714204623205" style="zoom: 33%;" /></p>
<div style="text-align: center; font-weight:900;">
图 N型半导体结构
</div>
<p><img src="https://pic.islet.space/2021/07/image-20210714204653816.png" alt="image-20210714204653816" style="zoom: 33%;" /></p>
<div style="text-align: center; font-weight:900;">
图 P型半导体结构
</div>
<p>往纯净的硅晶体中掺杂一定浓度的 <strong>磷</strong>（P）或
<strong>硼</strong>（B）即可获得 使得硅晶半导体带上电子或空穴，即获得了
<strong>N型半导体</strong> 和 <strong>P型半导体</strong>。</p>
<p><strong>杂质半导体</strong>：在本征的基础上掺杂其他元素。</p>
<p><strong>P型半导体</strong>：掺杂了硼元素的硅晶体，空穴为多数载流子。</p>
<p><strong>N型半导体</strong>：掺杂了磷元素的硅晶体。自由电子为多数载流子。</p>
<h2 id="pn结">PN结</h2>
<p><strong>结</strong>：即
Junction，在纯净硅晶体中掺杂两种不同电荷所形成的杂质接触截面。</p>
<p><strong>扩散运动</strong>：物质 <mark>因浓度差而产生</mark>
的运动。气体、液体、固体均有之。扩散运动使靠近接触面P区的空穴浓度降低、靠近接触面N区的自由电子浓度降低，产生内电场。</p>
<p><strong>漂移运动</strong>：因 <mark>电场作用</mark>
所产生的运动。</p>
<p><strong>动态平衡</strong>：结处因空穴和电子一刻不停地复合和分离（官方：参与扩散运动和漂移运动的载流子数目相同）而形成
“无多数载流子” 的状态。</p>
<blockquote>
<p><strong>注意</strong>：扩散运动和漂移运动是相反的，</p>
</blockquote>
<p><img src="https://pic.islet.space/2021/07/image-20210714210922380.png" alt="image-20210714210922380" style="zoom:50%;" /></p>
<div style="text-align: center; font-weight:900;">
图 扩散运动
</div>
<p><img src="https://pic.islet.space/2021/07/image-20210714210942004.png" alt="image-20210714210942004" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight:900;">
图 漂移运动
</div>
<p><strong>耗尽层</strong>：PN结处，因动态平衡而达到的“无多数载流子”的状态，该结的大小称为耗尽层。</p>
<p>如果此时让P区的多数载流子，即空穴尽量往N区移动，让N区的多数载流子，即自由电子尽量往P区移动，则两种电荷进行复合，形成更宽的耗尽层，此时因为耗尽层因为没有多数载流子而呈现不导电特性。</p>
<p>反之，让P区的多数载流子尽量往P区靠拢，让N区的多数载流子尽量往N区靠拢（注意，这里用的是“靠拢”，因为中间已经有耗尽层的形成，此时的“靠拢”是让耗尽层中已经复合消失的电子和空穴重新拆开，分别往各自原来的反向回归。），耗尽层的宽度会逐渐缩小，显现出导电特性。</p>
<p><strong>正向</strong>：电源的正、负极分别对准半导体的P、N极进行连接。</p>
<p><strong>反向</strong>：电源的正、负极分别对准半导体的N、P极进行连接。</p>
<p><strong>正向导通</strong>：耗尽层变窄，扩散运动加剧，由于外电源的作用，形成扩散电流，PN结处于导通状态。</p>
<p><strong>反向截止</strong>：耗尽层变宽，阻止扩散运动，有利于漂移运动，形成漂移电流。由于电流很小，故可近似认为其截止。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210714212136379.png" alt="image-20210714212136379" style="zoom:33%;" /></p>
<div style="text-align: center; font-weight:900;">
图 正向导通
</div>
<p><img src="https://pic.islet.space/2021/07/image-20210714212143706.png" alt="image-20210714212143706" style="zoom:33%;" /></p>
<div style="text-align: center; font-weight:900;">
图 反向截止
</div>
<h3 id="电容效应">电容效应</h3>
<p><strong>势垒电容</strong>：PN结外加电压变化时，空间电荷区的宽度将发生变化，有电荷的积累和释放的过程，与电容的充放电相同，其等效电容称为势垒电容Cb。</p>
<p><strong>扩散电容</strong>：PN结外加的正向电压变化时，在扩散路程中载流子的浓度及其梯度均有变化，也有电荷的积累和释放的过程，其等效电容称为扩散电容Cd。</p>
<p><strong>结电容</strong>：等于 势垒电容 与 扩散电容 之和。但
<mark>结电容不是常量！</mark>
若PN结外加电压频率高到一定程度，则失去单向导电性！</p>
<h1 id="二极管">二极管</h1>
<p>The diode is the most used semiconductor device in electronics
circuits. <strong><em>It is a two-terminal electrical check valve that
allows the flow of current in one direction.</em></strong> They are
mostly made up of <strong><em>silicon</em></strong> but
<strong><em>germanium</em></strong> is also used. Usually, they are used
for <strong><em>rectification</em></strong>. But there are different
properties &amp; characteristics of diodes which can be used for
different application. These characteristics are modified to form
different types of diodes.</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210713102126884.png"
alt="image-20210713102126884" />
<figcaption aria-hidden="true">image-20210713102126884</figcaption>
</figure>
<p><img src="https://pic.islet.space/2021/07/Types-of-Diodes-and-Their-Applications.jpg" alt="Types of Diodes and Their Applications" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 二极管的几种外形
</div>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210713102141393.png"
alt="image-20210713102141393" />
<figcaption aria-hidden="true">image-20210713102141393</figcaption>
</figure>
<div style="text-align: center; font-weight: 900;">
图 二极管的几种常见结构和符号
</div>
<h2 id="主要特征参数">主要特征参数</h2>
<ol type="1">
<li>最大整流电流（Maximum Rectification Current）</li>
<li>最高反向工作电压（Maximum Reverse Voltage）</li>
<li>反向电流（Reverse Current）</li>
<li>最高工作频率（Maximum Frequency）</li>
</ol>
<h2 id="自举二极管">自举二极管</h2>
<h1 id="晶体管">晶体管</h1>
<p>晶体管主要分为两种类型，BJT 和 FET。</p>
<p><strong>工作区域</strong>：晶体管的导通状态，分为三种，分别是饱和、截止和放大，分别是指</p>
<h2 id="bjt">BJT</h2>
<p>BJT，即 Bioplar Junction Transistor，双极性结型晶体管。</p>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210714213248733.png"
alt="image-20210714213248733" />
<figcaption aria-hidden="true">image-20210714213248733</figcaption>
</figure>
<div style="text-align: center; font-weight:900;">
图 晶体管内部结构和符号示意
</div>
<p><strong>注意</strong>：晶体管的符号示意中，箭头的方向永远是从P指向N的，此时先不用管c、b、e是怎么接，确定好。</p>
<blockquote>
<p>BJT结构特点：三极三区两PN结，发射区多子浓度高，基区多子浓度低且薄，集电区
面积大。</p>
</blockquote>
<p><strong>发射区</strong>：多数载流子较高的区域，自由电子流出的方向。</p>
<p><strong>基区</strong>：多数载流子浓度较低且薄的区域。</p>
<p><strong>集电区</strong>：面积大的区域，空穴流出的反向。</p>
<blockquote>
<p>某极 是根导线，与BJT中的物理区不同。</p>
</blockquote>
<p><strong>发射结</strong>：发射区和基区之间的PN结。</p>
<p><strong>集电结</strong>：集电区和基区之间的PN结。</p>
<blockquote>
<p><strong>注意</strong>：以上多数载流子可以是 空穴 或 自由电子，因此
BJT 可以有 NPN 和 PNP 两种类型的BJT。</p>
</blockquote>
<p>联系到实际电路连接中，一般情况下，<strong>集电区</strong> 都是接
<strong>供电电源</strong> ， <strong>基区</strong> 都是接
<strong>控制电源</strong>， <strong>发射区</strong> 都是接
<strong>负端/地</strong>。控制电源的电压会低于供电电源的电压，但会大于发射区的电压。</p>
<p>基区所连接的控制电源 为BJT提供 高电平或低电平
予以控制半导体的导通或截止，<mark>半导体所控制的负载的最大电压取决于发射极的供电电源电压
和 基区的控制电源电压</mark>。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210713104805683.png" alt="image-20210713104805683" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 BJT的几种常见外形
</div>
<p><img src="https://pic.islet.space/2021/07/image-20210713105054978.png" alt="image-20210713105054978" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 BJT的结构和符号
</div>
<h3 id="工作原理">工作原理</h3>
<p>从下图可以看出，下图 BJT 为 NPN
型半导体，集电区接正电，发射区接地，基区接地。集电区与基区为反向截止状态，集电结的耗尽层增大，进一步阻止集电区和发射区之间的电流导通。</p>
<p>若此时向基区施加正向电流，基区电压高于发射区电压，发射结正偏导通，发射区多子（电子）往基区流动，。发射区的电子能够顺利往集电区流动，集电区的电流往发射区流动，从而导通
该BJT。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210714215347959.png" alt="image-20210714215347959" style="zoom:33%;" /></p>
<div style="text-align: center; font-weight:900;">
图 BJT导通时的内部电荷流向示意
</div>
<p>集电极电流是漂移形成的，发射极电流是扩散形成的。</p>
<p><strong>发射区电流</strong> I<span
style="font-size: 0.8rem;">E</span> 是由 扩散运动形成的。</p>
<p><strong>基区电流</strong> I<span style="font-size: 0.8rem;">B</span>
是由 复合运动形成的。</p>
<p><strong>集电区电流</strong> I<span
style="font-size: 0.8rem;">C</span> 是由 漂移运动形成的。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210714222731446.png" alt="image-20210714222731446" style="zoom:33%;" /></p>
<div style="text-align: center; font-weight:900;">
图 BJT输入特性曲线
</div>
<p><img src="https://pic.islet.space/2021/07/image-20210714222645318.png" alt="image-20210714222645318" style="zoom: 33%;" /></p>
<div style="text-align: center; font-weight:900;">
图 BJT输出特性曲线
</div>
<h3 id="工作区域">工作区域</h3>
<p><img src="https://pic.islet.space/2021/07/image-20210714223024773.png" alt="image-20210714223024773" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight:900;">
图 BJT工作区域
</div>
<h2 id="fet">FET</h2>
<p><strong>场效应晶体管</strong> 简称 <strong>场效应管</strong>。主要有
<strong>结型场效应管</strong>（JFET）和
<strong>金属氧化物半导体场效应管</strong>（MOSFET）两种类型。</p>
<h3 id="jfet">JFET</h3>
<p><img src="https://pic.islet.space/2021/07/image-20210713105852012.png" alt="image-20210713105852012" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 JFET的结构和符号
</div>
<h3 id="mosfet">MOSFET</h3>
<p>在MOS管工作原理图上可以看到，漏极和源极之间有一个寄生二极管。这个叫体二极管，在驱动感性负载(如马达)，这个二极管很重要。顺便说一句，体二极管只在单个的MOS管中存在，在集成电路芯片内部通常是没有的。</p>
<p>下图a中，为增强型P衬底N沟道MOS，其栅极接 <u>高电平</u> 即导通。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210713110023509.png" alt="image-20210713110023509" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 N沟道增强型MOS管结构示意图 及 增强型MOS管的符号
</div>
<p><img src="https://pic.islet.space/2021/07/image-20210713110146838.png" alt="image-20210713110146838" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 N沟道耗尽型MOS管结构示意图 及 耗尽型MOS管的符号
</div>
<h4 id="nmos工作原理">NMOS工作原理</h4>
<iframe src="//player.bilibili.com/player.html?aid=931455726&amp;bvid=BV1DM4y1T7Yx&amp;cid=363622918&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe>
<p>MOS管有4个端子，其符号也是四个端子组成的，以下用NMOS举例：</p>
<p>NMOS底部端子连接到基板/主体（Substrate/Body），称为基板、衬底端子 或
<strong><em>主体端子</em></strong>。上方各有两个N沟道，各自连接
<strong><em>源极端子</em></strong> 和
<strong><em>漏极端子</em></strong>。两个端子中间添加了一层
薄绝缘体或电介质，在此层绝缘体上加了一个
<strong><em>栅极端子</em></strong>。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210716001316182.png" alt="image-20210716001316182" style="zoom:50%;" /></p>
<p>在NMOS内部构造中，源极端子 和 衬底端子
在内部连接，因此外露出来的端子只有三个。此时因 源极 和 衬底
的电位相同，阻止了任何电流从衬底流向源极。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210716001716986.png" alt="image-20210716001716986" style="zoom:50%;" /></p>
<p>在MOS中，希望电子从漏极流向源极，在两个极连接一个电源，其电压称为
V<span style="font-size: 0.6rem;">DS</span>
，此时加大电压，电流却不会增大，因为漏极沟道附近的耗尽层不断增大。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210716002453710.png" alt="image-20210716002453710" style="zoom:50%;" /></p>
<p>栅极端子 和 主体端子 都有绝缘材料，当给栅极端子接电压较小的电压
V<span style="font-size: 0.6rem;">GS</span>
时，两个绝缘材料形成电容效应，栅极处的多子不断吸引自由电子往栅极移动，暂时形成带自由电子较多的N区，从而导通了
源极 和 漏极，暂时形成了回路。因为 栅极处的N区是暂时连接
源极和漏极的通道，因此也被称为
N沟道。随着电压的增大或减小，沟道的大小也会随着变化。足以形成沟道的最低栅极电压被称为
<strong>阈值电压</strong>。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210716002900372.png" alt="image-20210716002900372" style="zoom:50%;" /></p>
<p>当不断增加栅极电压，漏极 和 衬底之间的耗尽层将因为 反向偏置
而不断增加。靠近漏极一侧的N沟道宽度将不断减小，直到某个电压点时，称为夹断效应。夹断下映实际上是说，沟道并未完全关闭，许多电子将保留通道，并不是停止了电流流动，而是出现了恒定的饱和电流，其电压被称为
饱和电压。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210716004255087.png" alt="image-20210716004255087" style="zoom:50%;" /></p>
<div style="text-align: center; font-weight: 900;">
表 FET的符号和特性
</div>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210713105437061.png"
alt="image-20210713105437061" />
<figcaption aria-hidden="true">image-20210713105437061</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/07/image-20210713105533255.png"
alt="image-20210713105533255" />
<figcaption aria-hidden="true">image-20210713105533255</figcaption>
</figure>
<h2 id="fet-and-bjt">FET and BJT</h2>
<p>FET 的 <strong>栅极</strong>、<strong>源极</strong> 和
<strong>漏极</strong> 对应 BJT的
<strong>基极</strong>、<strong>发射极</strong> 和
<strong>集电极</strong>，其作用类似。</p>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 46%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>FET</th>
<th>BJT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>电流索取</td>
<td>用“栅-源”电压控制漏极电流，栅极基本不取电流<br>【输入电阻高的电路选用】</td>
<td>工作时基极总要索取一定的电流<br>【信号源若提供电流的选用】</td>
</tr>
<tr class="even">
<td>导电情况</td>
<td>仅多子参与导电</td>
<td>多子少子均参与导电</td>
</tr>
<tr class="odd">
<td>稳定性</td>
<td>较好</td>
<td>较差<br>【因少子数目受温度、辐射等因素影响较大，温度稳定性和抗辐射的能力较差些。】</td>
</tr>
<tr class="even">
<td>噪声系数</td>
<td>小<br>【低噪声放大器的输入级和信噪比要求高的电路选用】</td>
<td>大</td>
</tr>
<tr class="odd">
<td>源-漏互换</td>
<td>可以互换，互换后特性变化不大</td>
<td>互换后特性差异很大，特殊需求时互换</td>
</tr>
<tr class="even">
<td>电压范围</td>
<td>宽</td>
<td>窄</td>
</tr>
<tr class="odd">
<td>工艺</td>
<td>简单</td>
<td>复杂</td>
</tr>
<tr class="even">
<td>耗电</td>
<td>低</td>
<td>高</td>
</tr>
</tbody>
</table>
<blockquote>
<p>IGFET / MOS / MOSFET 是同一个东西，还有个词叫
MISFET（Metal-Insulated-Semiconductor Field Effect
Transistor，金属绝缘半导体场效应管）</p>
</blockquote>
<h1 id="功率半导体">功率半导体</h1>
<p><strong>功率半导体</strong> 器件大致分为两类：
<strong>可控功率半导体</strong> 和
<strong>不可控功率半导体</strong>。<strong>可控功率半导体</strong> 如
Thyristor（晶闸管）、BJT（双极型晶体管）、功率MOSFET 和 IGBT
。不可控功率半导体 包括各种类型的功率二极管。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210713112224602.png" alt="image-20210713112224602" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 常见功率半导体器件及其典型的功率范围、阻断电压和开关频率
</div>
<h1 id="igbt">IGBT</h1>
<p><strong>绝缘栅型双极晶体管</strong>，即
<strong>IGBT</strong>（Insulated Gate Bipolar Transistor），是由
<strong><em>BJT</em></strong>（双极型三极管)）和
<strong><em>MOS</em></strong>（绝缘栅型场效应管）组成的
<strong>复合全控型电压驱动式功率半导体</strong> 器件, 兼有
<strong>MOSFET</strong>的 <u>高输入阻抗</u> 和 <strong>GTR</strong>的
<u>低导通压降</u>
两方面的优点。IGBT综合了以上两种器件的优点，驱动功率小而饱和压降低。非常适合应用于直流电压为600V及以上的变流系统如交流电机、变频器、开关电源、照明电路、牵引传动等领域。</p>
<blockquote>
<p>GTR 具有饱和压降低，载流密度大，但驱动电流较大的优点；</p>
<p>MOSFET
具有驱动功率很小，开关速度快，但导通压降大，载流密度小的优点。</p>
</blockquote>
<p><strong>IGBT模块</strong> 是由
IGBT（绝缘栅双极型晶体管芯片）与FWD（续流二极管芯片）通过特定的电路桥接封装而成的模块化半导体产品；封装后的IGBT模块直接应用于变频器、UPS不间断电源等设备上；IGBT模块
具有节能、安装维修方便、散热稳定等特点；当前市场上销售的多为此类模块化产品，一般所说的IGBT也指IGBT模块；随着节能环保等理念的推进，此类产品在市场上将越来越多见；</p>
<p><img src="https://pic.islet.space/2021/07/image-20210713142410853.png" alt="image-20210713142410853" style="zoom: 80%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 IGBT内部结构和等效电路
</div>
<p>因为IGBT的构造所致，最好还是不要让IGBT长期工作在放大区，会让其降低使用寿命，因开关开断时而进入放大区无可避免，仅工作在
饱和区 和 截止区 即可。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210715221251088.png" alt="image-20210715221251088" style="zoom:80%;" /></p>
<p>三个英文符号分别表示为
<strong>栅极</strong>（Gate）、<strong>集电极</strong>（Collector）、<strong>发射极</strong>（Emitter）。</p>
<p>在漏极侧增加了高掺杂的P+层，称之为 <strong>集电极</strong>。</p>
<ul>
<li><p>当栅极接近 <u>负电压</u> 或 <u>零电压</u> 时，PN结 J2
阻断，发射极电压远低于集电极电压，IGBT 关断 （正向阻断）；但是此刻 结J1
和 结J3 <strong>正偏导通</strong>。</p></li>
<li><p>当栅极接到 <u>正电压</u>（通常是15V）时，氧化层下方的 P区 建立
<strong>反型导电沟道</strong>，为 N-区 提供导电通路，电子从发射极到 N-区
降低了 N-区 的电位，PN结 J1导通，IGBT导通。</p></li>
</ul>
<p>如果栅极电压不够大，形成的反型层较弱，流入漂移区的电子数相对较少，IGBT压降增大，即进入特性曲线的
<strong>线性放大区</strong>。工作在线性放大区会加剧损耗或损坏
IGBT，因而除了开关瞬间，应避免进入线性放大区。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210713144038325.png" alt="image-20210713144038325" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 IGBT的输出特性
</div>
<p>IGBT 的关断电流分为 <strong>MOSFET关断阶段</strong> 和
<strong>BJT关断阶段</strong>。第一个阶段时，关断反型沟道，电流迅速下降；第二个阶段时，会产生持续时间较长的拖尾电流。</p>
<p>拖尾电流使得 IGBT 的关断损耗 高于 MOSFET 的关断损耗。</p>
<p><img src="https://pic.islet.space/2021/07/image-20210713144838981.png" alt="image-20210713144838981" style="zoom: 67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 MOSFET和IGBT的主要开通和关断特性比较
</div>
<p>截止电压：</p>
<p>饱和电压：</p>
<p>击穿电压：</p>
<p><strong>阈值电压</strong>：描述的是 <strong>栅极</strong> 和
<strong>发射极</strong> 之间刚好足以打开导流通道的电压。</p>
<p><strong>漏电流</strong>：泄露电流，leakage
current。主要是指栅极和发射极的在反向偏置状态的泄露电流，此处特性与二极管相近。</p>
<h2 id="分类">分类</h2>
<p>IGBT可以分为
<strong>穿通型</strong>（PT）IGBT、<strong>非穿通型</strong>（NPT）IGBT、<strong>场终止型</strong>（FS）IGBT、<strong>沟槽栅</strong>（Trench）IGBT、<strong>载流子存储沟槽栅双极晶体管</strong>（CSTBT）、<strong>注入增强晶体管</strong>（IEGT）、<strong>沟槽栅终止</strong>（Trench-FS）IGBT、<strong>逆导型</strong>（RC）IGBT。</p>
<p><strong>平面栅极结构</strong>
的IGBT设计，形成了JFET结构，以及发射极区软弱的电导调制效应，载流子的浓度从集电极到发射极之间逐步降低。</p>
<p><strong>沟槽型栅极结构</strong>
的IGBT设计，在平面型的基础上保持载流子浓度平均分布或逐步增加载流子浓度，进一步降低通态损耗，而不影响拖尾电流和关断损耗。</p>
<p>载流子越少越有助于降低关断损耗。</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 30%" />
<col style="width: 12%" />
<col style="width: 11%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="header">
<th>TYPE</th>
<th>内部构造（原理）</th>
<th>温度系数</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>PT-IGBT<BR>穿通型IGBT</td>
<td><img src="https://pic.islet.space/2021/07/image-20210713112637086.png" alt="image-20210713112637086" style="zoom:67%;" /></td>
<td>正温度系数<br>负温度系数</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>NPT-IGBT<BR>非穿通型IGBT</td>
<td><img src="https://pic.islet.space/2021/07/image-20210713112654444.png" alt="image-20210713112654444" style="zoom:67%;" /></td>
<td>正温度系数</td>
<td>1. 有利于IGBT并联</td>
<td>1. 随着温度上升，损耗增大</td>
</tr>
<tr class="odd">
<td>FS-IGBT<BR>场终止型IGBT</td>
<td><img src="https://pic.islet.space/2021/07/image-20210713112712678.png" alt="image-20210713112712678" style="zoom:67%;" /></td>
<td>正温度系数</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Trench-IGBT<br>沟槽栅IGBT</td>
<td><img src="https://pic.islet.space/2021/07/image-20210713112728045.png" alt="image-20210713112728045" style="zoom:67%;" /></td>
<td></td>
<td></td>
<td>1. 更宽的导电沟道会增加IGBT短路时的电流</td>
</tr>
<tr class="odd">
<td>CSTBT<br>载流子存储沟槽双极晶体管</td>
<td><img src="https://pic.islet.space/2021/07/image-20210713122039519.png" alt="image-20210713122039519" style="zoom:67%;" /></td>
<td></td>
<td>1. 降低了IGBT的饱和压降</td>
<td></td>
</tr>
<tr class="even">
<td>IEGT<BR>注入增强栅晶体管</td>
<td><img src="https://pic.islet.space/2021/07/image-20210713112841613.png" alt="image-20210713112841613" style="zoom:67%;" /></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Trench-FS IGBT<br>沟槽栅终止IGBT</td>
<td><img src="https://pic.islet.space/2021/07/image-20210713112933604.png" alt="image-20210713112933604" style="zoom:67%;" /></td>
<td></td>
<td></td>
<td>1. 保持鲁棒性，通态损耗和开关损耗降低<br>2.
功率密度提升，即电流密度增大<br>3. 单位IGBT所需硅材料降低</td>
</tr>
<tr class="even">
<td>RC-IGBT<BR>逆导型IGBT</td>
<td><img src="https://pic.islet.space/2021/07/image-20210713122011473.png" alt="image-20210713122011473" style="zoom:67%;" /></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="术语总结">术语总结</h1>
<p><strong>FET</strong>： Filed Effect Transistor，即
<strong>场效应管</strong>，是
<mark>利用输入回路的电场效应来控制输出回路电流</mark>
的一种半导体器件，故此得名。由于其仅靠半导体中的多数载流子导电，因此也称为
<strong>单极型晶体管</strong>。</p>
<p><strong>JFET</strong>： Junction Filed Effect Transistor，即
<strong>结型场效应管</strong>，有 P沟道 和 N沟道 两种类型。</p>
<p><strong>IGFET</strong>： Insulated Gate Field Effect Transistor，即
<strong>绝缘栅型场效应管</strong>。因栅极与源极、栅极与漏极之间均采用二氧化硅绝缘层进行阻隔而得名如此。又因栅极为金属铝，故又称为MOS管。具有
高输入阻抗、高开关频率 和 低驱动功率 的优点。</p>
<p><strong>MOS</strong>： Metal-Oxide-Semiconductor，即
<strong>金属氧化物半导体</strong>。同上。</p>
<p><strong>MOSFET</strong>： Metal-Oxide-Semiconductor Field Effect
Transistor，即 <strong>金属氧化物半导体场效应管</strong>。同上。</p>
<p><strong>BJT</strong>： Bipolar Junction Transistor， 即
<strong>双极结型晶体管</strong>。因带有两种不同极性电荷的载流子参与导电，故得名如此，或称
<strong>半导体三极管</strong>，简称 <strong>双极晶体管</strong> 或
<strong>晶体管</strong>。</p>
<p><strong>UJT</strong>： Unijunction Transistor，即
<strong>单结晶体管</strong>。因有两个基极，也称为
<strong>双基极晶体管</strong>。</p>
<p><strong>GTR</strong>： Giant Transistor，即
<strong>巨型晶体管</strong>。BJT的一种，亦称为 Power
BJT（<strong>电力晶体管</strong>）。具有自关断、无须辅助关断电路、
高电流密度、低保和电压 和 耐高压 的优点。</p>
<p><strong>IGBT</strong>： Insulated Gate Bipolar Transistor，即
<strong>绝缘栅双极型晶体管</strong>。</p>
<p><strong>Thyristor</strong>：即 <strong>半导体闸流管</strong>
、<strong>晶闸管</strong>，又称为 <strong>硅可控元件</strong>（Silicon
Controlled Rectifier），
由按顺序排列的PNPN四层半导体组成。最外层的P区和N区构成了正负极，中间的P区构成了控制极（栅极），可以控制导通。具有耐压高、电流大、耐浪涌能力强
且 价格便宜 等优点。</p>
<p><strong>GTO</strong>： Gate Turn-Off Thyristor，即
<strong>可关断晶闸管</strong>。是一种通过门极来控制器件导通和关断的电力半导体器件。具有
普通晶闸管 和
GTR的优点，是应用于高压大容量场合中的一种大功率开关器件。</p>
<p><strong>PT</strong>： Power Transistor， 即
<strong>功率晶体管</strong> / <strong>功率管</strong>。</p>
<p><strong>IPM</strong>： Intelligent Power Module，即
<strong>智能功率模块</strong>。具有GTR 和 MOSFET
的优点。而且IPM内部集成了逻辑、控制、检测和保护电路，使用起来方便,不仅减小了系统的体积以及开发时间，也大大增强了系统的可靠性。</p>
<p><img src="https://pic.islet.space/2021/07/d4628535e5dde711c5d042b5a7efce1b9d166176" alt="img" style="zoom: 25%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 IPM器件示意
</div>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《模拟电子技术基础》高等教育出版社，童师白</li>
<li>《IGBT模块：技术、驱动和应用》机械工业出版社，Andreas Volke and
Michael Hornkamp</li>
<li><a
target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/366981878">逆变器的分类方式有哪些</a></li>
<li><a
target="_blank" rel="noopener" href="https://baike.baidu.com/item/IGBT/2078902?fromtitle=%E7%BB%9D%E7%BC%98%E6%A0%85%E5%8F%8C%E6%9E%81%E5%9E%8B%E6%99%B6%E4%BD%93%E7%AE%A1&amp;fromid=12731336">IGBT</a></li>
<li><a
target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%9C%BA%E6%95%88%E5%BA%94%E7%AE%A1">场效应管</a></li>
<li><a
target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%99%B6%E4%BD%93%E4%BA%8C%E6%9E%81%E7%AE%A1">晶体二极管</a></li>
<li><a
target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%99%B6%E4%BD%93%E7%AE%A1/569042#:~:text=%E6%99%B6%E4%BD%93%E7%AE%A1%E6%9C%89%E6%97%B6%E5%A4%9A%E6%8C%87%E6%99%B6%E4%BD%93%E4%B8%89%E6%9E%81%E7%AE%A1%E3%80%82%20%E4%B8%89%E7%AB%AF%E5%AD%90%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%BB%E8%A6%81%E5%88%86%E4%B8%BA%E4%B8%A4%E5%A4%A7%E7%B1%BB%EF%BC%9A%20%E5%8F%8C%E6%9E%81%E6%80%A7%E6%99%B6%E4%BD%93%E7%AE%A1,%EF%BC%88BJT%EF%BC%89%E5%92%8C%20%E5%9C%BA%E6%95%88%E5%BA%94%E6%99%B6%E4%BD%93%E7%AE%A1%20%EF%BC%88FET%EF%BC%8C%E5%8D%95%E6%9E%81%E6%80%A7%EF%BC%89%E3%80%82">晶体管</a></li>
<li><a
target="_blank" rel="noopener" href="https://circuitglobe.com/difference-between-diode-and-transistor.html">Difference
Between Diode &amp; Transistor</a></li>
<li><a
target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/150177944">半导体分类知识大全</a></li>
<li><a
target="_blank" rel="noopener" href="https://xueqiu.com/3593206238/153075165">IGBT—功率半导体皇冠上的明珠</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.electricaltechnology.org/2018/12/types-of-diodes-their-applications.html">Types
of Diodes and Their Applications - 24 Types of Diodes</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/07/11/Hardware/DSP/2021-07-11-%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%8A%AF%E7%89%87%E5%A4%96%E8%AE%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/11/Hardware/DSP/2021-07-11-%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%8A%AF%E7%89%87%E5%A4%96%E8%AE%BE/" class="post-title-link" itemprop="url">嵌入式芯片外设</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-11 13:50:00" itemprop="dateCreated datePublished" datetime="2021-07-11T13:50:00+08:00">2021-07-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-15 21:11:03" itemprop="dateModified" datetime="2021-07-15T21:11:03+08:00">2021-07-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>嵌入式芯片（如MCU、DSP等）内部包含众多的模块化外设，如
串口控制模块，SPI模块，I2C模块，A/D模块，PWM模块，CAN模块，EEPROM，比较器模块，等等，它们都集成在芯片内部，有相对应的内部控制寄存器，可通过指令直接控制。</p>
<p>按照控制信号类别对外设进行分类，可以分为
<strong>模拟外设</strong>（Analog
Peripherals）、<strong>控制外设</strong>（Control Peripherals） 和
<strong>通信外设</strong>（Communication Peripherals）。</p>
<p><strong>模拟外设</strong> 的常见外设如
<strong>模数转换器</strong>（Analog-to-Digital Convertor,
ADC）、<strong>可编程增益放大器</strong>（Programmable Gain Amplifier,
PGA）、<strong>温度传感器</strong>（Temperature
Sensor）、<strong>缓冲数模转换器</strong>（Buffered Digital-to-Analog
Convertor, DAC）和 <strong>比较器</strong>（Comparator Subsystem）。</p>
<p><strong>控制外设</strong> 的常见设备如
<strong>捕获器</strong>（Capture,
CAP）、<strong>脉冲幅频调制器</strong>（Pulse Width Modulator,
PWM）、<strong>正交编码器脉冲</strong>（ Quadrature Encoder Pulse,
QEP）和 <strong>西格玛-德尔塔滤波器模块 </strong>（Sigma-Delta Filter
Module, SDFM）。</p>
<p><strong>通信外设</strong> 的常见设备如 （Controller Area Network,
CAN）、<strong>双线通信</strong>（Inter-Integrated Circuit,
I2C）、<strong>电源管理总线接口</strong>（Power Management Bus
Interface, PMBus）、<strong>串行通信接口</strong>（Serial Communications
Interface, SCI）、<strong>串行外设接口</strong>（Serial Peripheral
Interface, SPI）、<strong>局域互联网络</strong>（Local Interconnect
Network, LIN） 和 <strong>高速串行接口</strong>（Fast Serial Interface,
FSI）。</p>
<h1 id="cla">CLA</h1>
<p>为了解决DSP在对实时控制要求比较高的场合中CPU计算速度不足以及计算负担过重，TI很早之前就已经推出了具有CLA功能的DSP。</p>
<p>CLA，即Control Law
Accelerator，是一个32位浮点数计算加速器，可以理解为一个专门为浮点数运算而优化的CPU。其可以
<strong>独立</strong> 于CPU进行运算操作，并 <mark>可以同时访问</mark>
到ePWM，eCAP，eQEP，ADC result以及Comparator
<mark>寄存器</mark>。相当于两个CPU并行工作，从而减少了主CPU的运算负担。</p>
<p>也就是说 CLA可以同时访问所有模拟外设的寄存器。</p>
<p>可以将CLA看作是辅助CPU进行计算的浮点运算协处理器（co-processor）。</p>
<p>一个典型的应用场景如下：</p>
<p><img
src="https://pic.islet.space/2021/07/v2-9fdd0b85b26f7ff8074a8c58b1aba945_720w.jpg"
alt="img" />闭环控制电路</p>
<p>CPU通过ADC采集主电路的电压、电流信息，计算得到控制逻辑（包括频率以及占空比等），从而控制电路工作。因此如果CPU的计算负担很大，比如说需要计算傅里叶分解，比如说需要计算反三角函数等，那么就造成了极大的控制时延。而CLA应运而生，专门为计算浮点数进行优化，且不会造成CPU阻塞于计算而对异常情况无法响应的情况。</p>
<figure>
<img
src="https://pic.islet.space/2021/07/v2-2d0d2214e132b1a9982d3ab50db429ff_720w.jpg"
alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<div style="text-align: center; font-weight: 900;">
图 28069和28027对比
</div>
<p>上图则对比了具有CLA功能的28069和不具有CLA功能的28027的控制延时。对于没有CLA功能的28027，其CPU在ADC采样结束之后触发SOC中断，随后进行闭环计算，最后再结束一个周期的控制，开始下一个周期。而具有<mark>CLA</mark>功能的28069则<mark>可以在采样结束之后立即自主触发CLA计算</mark>（由于没有菊花链，所以触发迅速），并且由于<mark>CLA针对浮点数计算进行优化，因此计算时间更短</mark>。更重要的是，<mark>CPU不需要进行任何操作，因此CPU可以有空闲完成其他任务，比如异常检测，比如故障上报等等</mark>。</p>
<p>简单来说，采用CLA的系统具有<strong>更小的计算时延</strong>，<strong>CPU负担更小，</strong>因此其系统更加迅速稳定。</p>
<h1 id="clb">CLB</h1>
<p>The C2000 configurable logic block (CLB) is a collection of
configurable blocks that interconnect through software to implement
custom digital logic functions.</p>
<p>The CLB subsystem contains a number of identical tiles.</p>
<h1 id="gpio">GPIO</h1>
<p>GPIO，即General-purpose
input/output，通用型之输入输出（接口）。功能类似8051的P0—P3，其接脚可以供使用者由程控自由使用，PIN脚依现实考量可作为通用输入（GPI）或通用输出（GPO）或通用输入与输出（GPIO），如当clk
generator, chip select等。
既然一个引脚可以用于输入、输出或其他特殊功能，那么一定有寄存器用来选择这些功能。对于输入，一定可以通过读取某个寄存器来确定引脚电位的高低；对于输出，一定可以通过写入某个寄存器来让这个引脚输出高电位或者低电位；对于其他特殊功能，则有另外的寄存器来控制它们。</p>
<h1 id="cmpss">CMPSS</h1>
<p>CMPSS，即Comparator
Subsystem，比较器子系统。由模拟比较器和支持电路组成，可用于峰值电流模式控制、开关电源、功率因数校正、电压跳闸监测等应用。</p>
<p>每个CMPSS包含两个比较器、两个12位DAC参考、两个数字滤波器和一个斜坡发生器。比较器在每个模块中表示为“H”或“L”，其中“H”和“L”分别表示高和低。每个比较器产生一个数字输出，指示正输入端的电压是否大于负输入端的电压。比较器的正输入由外部引脚或PGA驱动，负输入可由外部引脚或可编程参考12位DAC驱动。每个比较器输出通过一个可编程的数字滤波器，可以消除假跳闸信号。如果不需要滤波，也可以使用未滤波的输出。一个可选的斜坡发生器电路可用于控制高比较器的12位参考DAC值。</p>
<p><img
src="https://pic.islet.space/2021/07/20200416154658460.png" /></p>
<h1 id="can">CAN</h1>
<p>A controller area network(CAN) is ideally suited to the many
high-level industrial protocols embracing CAN and
<strong><em>ISO-11898:2003</em></strong> as their physical layer.</p>
<h2 id="introduction">Introduction</h2>
<ul>
<li><p>The CAN bus was developed by BOSCH as a
<strong><em>multi-master</em></strong>, <strong><em>message
broadcast</em></strong> system that specifies a maximum signaling rate
of <strong><em>1 megabit per second</em></strong>(bps).</p></li>
<li><p>CAN is an International Standardization Organization (ISO)
defined serial communications bus originally developed for the
automotive industry to replace the complex wiring harness with a
two-wire bus.</p></li>
<li><p>CAN <em>does not</em> send large blocks of data point-to-point
from node A to Node B under the supervision of the central bus
master.</p></li>
<li><p>In a CAN network, <mark>many short messages</mark> like
temperature or RPM <mark>are broadcast to the entire network</mark>,
which provides for <mark>data consistency in every node of the
system</mark>. 保证系统中各节点的数据一致性。</p></li>
<li><p>CAN's specification calls for high immunity to electrical
interface and the ability to self-diagnose and repair data
errors.</p></li>
</ul>
<p>以下为ISO 11898 对 CAN 标准架构层级解释框图：</p>
<figure>
<img
src="C:\Users\431240.IT2004\AppData\Roaming\Typora\typora-user-images\image-20210711162150611.png"
alt="image-20210711162150611" />
<figcaption aria-hidden="true">image-20210711162150611</figcaption>
</figure>
<p>The CAN communication protocol is a
<strong><em>carrier-sense</em></strong>,
<strong><em>multiple-access</em></strong> protocol with
<strong><em>collision detection</em></strong> and
<strong><em>arbitration on message priority</em></strong>
(<strong><em>CSMA</em></strong> / <strong><em>CD+AMP</em></strong>).
<strong><em>CSMA</em></strong> means that each node on a bus must wait
for a prescribed period of inactivity before attempting to send a
message. <strong><em>CD+AMP</em></strong> means that collisions are
resolved through a bit-wise arbitration, based on a preprogrammed
priority of each message in the identifier field of a message. The
higher priority identifier always wins bus access.</p>
<p>CAN 包含 standard CAN 和 Extended CAN。</p>
<figure>
<img
src="C:\Users\431240.IT2004\AppData\Roaming\Typora\typora-user-images\image-20210711163535822.png"
alt="image-20210711163535822" />
<figcaption aria-hidden="true">image-20210711163535822</figcaption>
</figure>
<figure>
<img
src="C:\Users\431240.IT2004\AppData\Roaming\Typora\typora-user-images\image-20210711163548817.png"
alt="image-20210711163548817" />
<figcaption aria-hidden="true">image-20210711163548817</figcaption>
</figure>
<h1 id="术语">术语</h1>
<p><strong>菊花链</strong>：在电子电气工程中菊花链代表一种配线方案，例如设备A和设备B用电缆相连，设备B再用电缆和设备C相连，设备C用电缆和设备D相连，在这种连接方法中不会形成网状的拓扑结构，只有相邻的设备之间才能直接通信，例如在上例中设备A是不能和设备C直接通信的，它们必须通过设备B来中转，这种方法同样不会形成环路。因为最后一个设备不会连向第一个设备。这种连线方法能够用来传输电力，数字信号和模拟信号。</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/72232829">CLA介绍及使用指南</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/gpio">GPIO</a></li>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/whyorwhnt/article/details/105547472">TMS320F280049C
学习笔记16 比较器子系统(CMPSS)</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.ti.com/lit/an/sloa101b/sloa101b.pdf">《Introduction to
the Controller Area Network(CAN)》</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/07/10/Communication/2021-07-10-JTAG%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/10/Communication/2021-07-10-JTAG%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">JTAG通信</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-07-10 21:00:00 / Modified: 21:28:00" itemprop="dateCreated datePublished" datetime="2021-07-10T21:00:00+08:00">2021-07-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="入门">入门</h1>
<p>以下为 B站up主——“蛋饼的爹地” 制作上传的JTAG科普视频。</p>
<iframe src="//player.bilibili.com/player.html?aid=503270942&amp;bvid=BV1iN411Z7jk&amp;cid=346887915&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://xploreqa.ieee.org/stampPDF/getPDF.jsp?tp=&amp;arnumber=6515989&amp;ref=aHR0cHM6Ly94cGxvcmVxYS5pZWVlLm9yZy9kb2N1bWVudC82NTE1OTg5">《IEEE
1149.1-2013 Test Access Port and Boundary Scan Architecture》</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/07/10/Hardware/Circuit/2021-07-10-VCC%E3%80%81VDD%E3%80%81VEE%E3%80%81VSS%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/10/Hardware/Circuit/2021-07-10-VCC%E3%80%81VDD%E3%80%81VEE%E3%80%81VSS%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">VCC、VDD、VEE、VSS的区别</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-10 15:00:00" itemprop="dateCreated datePublished" datetime="2021-07-10T15:00:00+08:00">2021-07-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-15 21:10:58" itemprop="dateModified" datetime="2021-07-15T21:10:58+08:00">2021-07-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="对于晶体管">对于晶体管</h2>
<p><strong><em>Vcc</em></strong>：来源于集电极电源电压， <em>Collector
Voltage</em>， 一般用于双极型晶体管， PNP 管时为负电源电压， 有时也标成
-Vcc， NPN 管时为正电压</p>
<p><strong><em>Vdd</em></strong>：来源于漏极电源电压， <em>Drain
Voltage</em>， 用于 MOS 晶体管电路， 一般指正电源。 因为很少单独用 PMOS
晶体管， 所以在 CMOS 电路中 Vdd 经常接在 PMOS 管的源极上。</p>
<p><strong><em>Vss</em></strong>：源极电源电压， 在 CMOS
电路中指负电源， 在单电源时指零伏或接地。</p>
<p><strong><em>Vee</em></strong>：发射极电源电压， <em>Emitter
Voltage</em>， 一般用于 ECL 电路的负电源电压。</p>
<p><strong><em>Vbb</em></strong>：基极电源电压，
用于双极晶体管的共基电路。</p>
<h2 id="对于电路及芯片">对于电路及芯片</h2>
<p><strong><em>VDD</em></strong>：电源电压(单极器件)；芯片电源电压。（Device）</p>
<p><strong><em>VCC</em></strong>：电源电压(双极器件)；电路电源电压。（Circuit）</p>
<p><strong><em>VSS</em></strong>：接地端、负极。（Series）</p>
<p><strong><em>VEE</em></strong>：负电压供电；</p>
<p><strong><em>VPP</em></strong>：编程/擦除电压。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.12.0/dist/mermaid.min.js","integrity":"sha256-0dD7vUjUCTGJjeLnPotQQJIcSzug5fO6WDMYYyNIX4c="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"enable","tags":"all","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
