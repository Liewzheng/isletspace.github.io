<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://code.islet.space/font//css?family=/CascadiaCode/CascadiaCode:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"islet.space","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/db.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>
<meta name="description" content="笔记分享的旮旯孤岛而已">
<meta property="og:type" content="website">
<meta property="og:title" content="Coder的孤岛">
<meta property="og:url" content="http://islet.space/page/3/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="笔记分享的旮旯孤岛而已">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liewzheng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://islet.space/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Coder的孤岛</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
        <li class="menu-item menu-item-目录"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-简历"><a href="/resume/" rel="section"><i class="fa fa-address-card fa-fw"></i>简历</a></li>
        <li class="menu-item menu-item-友链"><a href="/friends/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>友链</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">111</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">208</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@foxmail.com" title="E-Mail → mailto:liewzheng@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/10/05/Programming/C++/2021-10-05-C++-Templates/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/10/05/Programming/C++/2021-10-05-C++-Templates/" class="post-title-link" itemprop="url">C++ Templates</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-10-05 15:00:00" itemprop="dateCreated datePublished" datetime="2021-10-05T15:00:00+08:00">2021-10-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-11-21 16:38:34" itemprop="dateModified" datetime="2021-11-21T16:38:34+08:00">2021-11-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="part-1-the-basics">PART 1 THE BASICS</h1>
<div style="background-color: #555; color: #eeeeee; font-weight: 900;">
WHY TEMPLATES?
</div>
<p>C++ 要求我们使用指定的类型来声明变量、函数 和 大部分其他实体。然而，很多代码对于不同的类型看起来都是一样的。比如，对于不同的数据结构，如 <code>int</code> 数组或 <code>string</code> 字符串向量，只要包含的类型可以相互比较，快速排序算法的实现在结构上看起来是一样的。</p>
<p>如果使用的编程语言不支持 <strong>通用性</strong>（genericity）的 <strong>特殊语言功能</strong>（special language feature），将不得不面临如下选择，坏的选择（bad alternatives）：</p>
<ul>
<li>你可以为不同的数据类型一遍又一遍地进行着相同的行为声明；</li>
<li>你可以为常见的基本类型（common base type）编写一段代码，例如 <code>object</code> 或 <code>void*</code> ；</li>
<li>你可以使用特殊的预处理器。</li>
</ul>
<p>如果使用其他语言，可能以前就做过一些或者所有上方所述的内容了。然而，这些方法的每一种都有其缺点：</p>
<ul>
<li>如果你一遍又一遍地实现着这些行为，毫无疑问是叠矩重规（reinvent the wheel）。你犯了相同的错误，并且你试图寻找避免复杂但能更好的算法，因为它们会制造出更多的错误。</li>
<li>如果你为常见基本类编写代码，你会失去类型检查的好处。另外，类可能要求继承于（be derived from）能够使代码更加难以维护的特殊基础类。</li>
<li>如果你使用特殊的预处理器，代码会被一些没有 <strong>作用范围</strong>（scope）和类型且能够造成 <strong>奇怪语义错误</strong>（strange semantic errors）的 ”愚蠢的文本替换机制“ 替代掉。</li>
</ul>
<p>模板是能够解决重复代码编写问题且不会造成上述这些短板的方案。模板是为一种或更多尚未声明类型的函数或者类。当使用模板时，可以隐式或显式地将类型当做参数传递过去。因为模板是语言的特点，可以拥有全部的类型检查和作用范围的支持（full support of type checking and scope）。</p>
<p>在C++标准库中，几乎所有的代码都是模板代码。该库提供排序算法以对 对象、指定类型的值、数据结构（也叫做 <strong>容器类</strong>（Container Classes）） 进行排序，以管理指定类型的元素 和 字符串（被参数化的字符串类型）等等。</p>
<p>然而，以上仅是模板的使用入门，模板还允许 <strong>参数化行为</strong>（parameterize behavior） 以 <strong>优化代码</strong>（optimize code） 和 <strong>参数化信息</strong>（parameterize infomation）。</p>
<h2 id="function-templates">FUNCTION TEMPLATES</h2>
<p><strong>函数模板</strong>（function templates），即 <strong>参数化的函数</strong>（functions that are parameterized），因此代表了 <strong>一个函数系列</strong>（a family of functions）。</p>
<p>函数模板为不同的数据类型提供了相同的功能行为调用，或换句话说，代表了一个函数系列。该函数系列看起来就像个普通函数，除了函数的某些元素未被确定，因为这些元素被参数化了。</p>
<h3 id="templates-delaration-and-definition">TEMPLATES DELARATION AND DEFINITION</h3>
<div style="background-color: #555; color: #eeeeee; font-size: 1.25rem; font-weight: 900;">
EXAMPLE
</div>
<p>以下样例 <strong>声明</strong> 了一个函数系列，且下面参数的类型被空置（is left open），如参数 <code>T</code> ，</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">max</span><span class="params">(T a, T b)</span></span>&#123;</span><br><span class="line">  <span class="comment">// if b &lt; a then yield a else yield b</span></span><br><span class="line">  <span class="keyword">return</span> b &lt; a ? a : b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上述样例中，模板参数必须使用 <code>template &lt;comma-separated-list-of-parameters&gt;</code> 的格式进行声明。</p>
<p>此处的关键字 <code>typename</code> 代表着类型参数，这是迄今为止C++程序中最常见的一种模板参数，当然其他参数也可以，后续介绍。此处的类型参数是 <code>T</code> ，可以使用任意标识符当做参数名称，但使用 <code>T</code> 就是惯例而已。类型参数代表着 <strong>任意类型</strong>（arbitrary type），当函数调用时，由调用的函数决定具体数据类型。开发者可以调用任何类型，只要其提供模板使用的操作。</p>
<p>在上述样例中，类型 <code>T</code> 必须支持 <strong>操作符</strong>（operator） <code>&lt;</code> ，因为 <code>a</code> 和 <code>b</code> 使用该操作符进行比较，也许在 <code>max()</code> 的定义中很难发现，但要说明的是，<code>T</code> 类型必须是可复制的才能够被返回（T must be copyable in order to be returned）。</p>
<p>由于历史遗留原因，仍可以使用关键词 <code>class</code> 来定义类型参数。<code>typename</code> 关键字是在 C++98 标准之后才出现的，在那之前，<code>class</code> 是引入类型参数的唯一方法，至今仍可以使用。因此，上述模板也可以用下面的代码平替（在语义上没有区别）。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">temelate&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line">  <span class="function">T <span class="title">max</span><span class="params">(T a, T b)</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> b&lt;a?a:b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但因为 <code>class</code> 也是 <strong>类</strong> 的关键字，可能导致二义性，最好在声明模板时使用关键字 <code>typename</code> 。需要注意的是，与类声明不同，当声明类型参数时，关键字 <code>struct</code> 不能用来代替 <code>typename</code> 。</p>
<p>在C++17之前，类型 <code>T</code> 也必须是可复制的，以确保能够传递参数。但C++17之后，可以传递临时数（temporary），即使没有一个备份或者一个构造器可用（even if neither a copy nor a move constructor is valid）。</p>
<div style="background-color: #555; color: #eeeeee; font-weight: 900;">
如何编写多个函数模板，需要注意什么？
</div>
<p>同一个文件内可以编写多个不同的模板函数，如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">Max</span><span class="params">(T a, T b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> b&lt;a?a:b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t2&gt;</span><br><span class="line"><span class="function">t2 <span class="title">foo</span><span class="params">(t2*)</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面两个模板函数就在同一个文件下，<code>typename</code> 关键字后面的 <code>T</code> 或者 <code>t2</code> 需要具有唯一性。</p>
<h3 id="using-templates">USING TEMPLATES</h3>
<p>需要注意的是，在使用该函数模板时，要在该函数前加上双冒号 <code>::</code> ，以确保函数模板能够在全局命名空间中被查找到。如果出现下方的 <code>call to ’sth.’ is ambiguous</code> 错误， 即是说需要调用的函数模糊不清，因为标准库中也有一个 <code>std::max()</code>，编译器查找不到该函数具体是在哪个函数文件中。</p>
<figure>
<img src="https://pic.islet.space/2021/10/image-20211005171952999.png" alt="image-20211005171952999" /><figcaption aria-hidden="true">image-20211005171952999</figcaption>
</figure>
<p>当然，以上错误也可以通过写不同的函数名称来避免。</p>
<p><mark style="font-weight: 900;">模板并不是被编译成一个可以处理所有数据类型的实体，而是被编译成了所有不同数据类型的实体。</mark> 即，<code>int max()</code>、 <code>short max()</code> 、<code>string max()</code> 等等。单实体多适应 的模板虽然好像可行，但是实际上并不存在。所有的语言规则都遵循 ” <strong>不同的模板参数生成不同的实体</strong>“ 的原则。</p>
<p>上面这种用具体类型取代模板参数的过程被称为 <strong>实体化</strong>（instantiation）。需要注意的是，仅仅是对函数模板的使用就可以触发该实体化过程，因此开发者就没有必要要求实体化过程单独进行（request the instantiation separately）。</p>
<p>另外，只要产生的代码是有效的，<code>void</code> 型也是可用的模板参数，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">foo</span><span class="params">(T*)</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span>* vp = <span class="literal">nullptr</span>;  <span class="comment">// 引出 void foo(void*)</span></span><br><span class="line"><span class="built_in"><span class="keyword">void</span></span>(vp);</span><br></pre></td></tr></table></figure>
<h3 id="two-phase-translation">TWO-PHASE TRANSLATION</h3>
<p><strong>两段式编译</strong>，即Two-phase translation。</p>
<p>如果试图为一个不支持所有操作的模板进行实例化，将会导致编译时错误。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::complex&lt;<span class="keyword">float</span>&gt; c1, c2;  <span class="comment">//doesn&#x27;t provide operator &lt;</span></span><br><span class="line"></span><br><span class="line">::<span class="built_in">max</span>(c1, c2);  <span class="comment">//ERROR at compile time</span></span><br></pre></td></tr></table></figure>
<p>因此，模板在被编译时会经过如下两个阶段：</p>
<ol type="1">
<li>在定义且没有实例化时，忽略模板参数来检查自身代码的正确性：
<ul>
<li>标点符号错误被发现，例如缺少分号 <code>;</code> ；</li>
<li>使用不依赖已知模板参数的未知命名（类型名，函数名等）；</li>
<li>不依赖于已检查模板参数的 <strong>静态断言</strong>（static assertions）</li>
</ul></li>
<li>在实例化时，模板代码会被再次检查以确保可用，特别是依赖于模板参数的都会被二次检查（double-checked），例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">  <span class="built_in">undeclared</span>();</span><br><span class="line">  <span class="built_in">undeclared</span>(t);</span><br><span class="line">  <span class="built_in"><span class="keyword">static_assert</span></span>(<span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">int</span>&gt;<span class="number">10</span>, <span class="string">&quot;int too small&quot;</span>);</span><br><span class="line">  <span class="built_in"><span class="keyword">static_assert</span></span>(<span class="built_in"><span class="keyword">sizeof</span></span>(T&gt;<span class="number">10</span>, <span class="string">&quot;T too small&quot;</span>);         </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意到某些编译器在第一阶段没有进行全面检查（don’t perform the full checks），所以直到在最后一阶段的模板代码实例化之前都没办法看到问题。</p>
<div style="background-color: #555; color: #eeeeee; font-weight: 900;">
COMPILE AND LINK
</div>
<p>在实际处理模板时，两段式编译会导致很多重要的问题：当函数模板被用于触发其实例化时，编译器（在某些点）需要查看模板定义。当一个函数的声明足以编译它时，就打破了普通函数通常的编译和连接的区别。</p>
<h3 id="template-argument-deduction">TEMPLATE ARGUMENT DEDUCTION</h3>
<p><strong>模板实参推断</strong>，即 Template argument deduction。</p>
<p>当给函数模板传递实参时，模板参数由我们传递过去的实参决定。如果传递的是两个 <code>int</code> 型实参给 参数类型 <code>T</code> ，则C++编译器就能推断出此时的 <code>T</code> 一定是 <code>int</code> 。</p>
<p>然而 <code>T</code> 可能只是该参数类型的一部分。例如，声明 <code>max()</code> 可以使用 <strong>常参</strong>（constant references）。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">max</span><span class="params">(T <span class="keyword">const</span>&amp; a, T <span class="keyword">const</span>&amp; b)</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> b&lt;a?a:b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如上方代码所示，传递 整型 <code>int</code> 参数，<code>T</code> 又会被推断为 <code>int</code> ，因为函数参数和 <code>int const&amp;</code> 匹配。</p>
<h4 id="类型推导过程中的类型转换">类型推导过程中的类型转换</h4>
<p>注意，自动类型转换被限制在类型推导期间：</p>
<ul>
<li><strong>引用传递</strong>：当通过引用声明来调用参数（declaring call parameters by reference）时，即使是 微不足道的转换（trivial conersion） 也不适用于类型推导。用同一个模板参数 <code>T</code> 声明的两个参数类型必须完全匹配。</li>
<li><strong>按值传递</strong>：当按数值声明调用参数时，只支持 <code>decay</code> 的琐碎转换。带有const或volatile的限定被忽略，引用转换为被引用的类型，而原始数组或函数转换为相应的指针类型。对于用同一模板参数T声明的两个参数，<code>decayed</code> 的类型必须匹配。</li>
</ul>
<p><strong>错误提示</strong>：对int类型的非恒定值引用不能与int类型的临时值绑定</p>
<figure>
<img src="https://pic.islet.space/2021/11/image-20211007035818560.png" alt="image-20211007035818560" /><figcaption aria-hidden="true">image-20211007035818560</figcaption>
</figure>
<p>前方已经说了，类型的自动转换相关注意事项，同一模板参数的两个参数类型必须完全匹配。如果在同一个 <code>.cpp</code> 文件中书写下面下面代码，则会出现下方报错提示 “<strong>推导类型冲突</strong>（deduced conflicting types for parameter ’T’）”。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Max</span>(<span class="number">4</span>, <span class="number">7.2</span>);</span><br><span class="line"><span class="built_in">Max</span>(<span class="string">&quot;Hello&quot;</span>,s);</span><br></pre></td></tr></table></figure>
<p>错误提示如下：</p>
<figure>
<img src="https://pic.islet.space/2021/10/image-20211007040416472.png" alt="image-20211007040416472" /><figcaption aria-hidden="true">image-20211007040416472</figcaption>
</figure>
<p>但是如果非要使用不一样的数据类型的两个参数来套用同一模板，以下有三种解决方法：</p>
<ol type="1">
<li>在 <code>.cpp</code> 文件中进行参数传递时，使用参数类型强制转换。如 <code>Max(static_cast&lt;double&gt;(4), 7.2);</code> 。</li>
<li>在</li>
</ol>
<h1 id="terminology">TERMINOLOGY</h1>
<ol type="1">
<li>按值传递 passing by value</li>
<li>引用传递 passing by reference</li>
</ol>
<h1 id="reference">REFERENCE</h1>
<ol type="1">
<li>&lt;C++ Templates&gt; David Vandecoorde</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/10/02/Communication/2021-10-02-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%8E%E7%8E%B0%E5%9C%BA%E6%80%BB%E7%BA%BF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/10/02/Communication/2021-10-02-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%8E%E7%8E%B0%E5%9C%BA%E6%80%BB%E7%BA%BF/" class="post-title-link" itemprop="url">计算机网络体系结构与现场总线</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-10-02 13:20:00" itemprop="dateCreated datePublished" datetime="2021-10-02T13:20:00+08:00">2021-10-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-05 14:33:52" itemprop="dateModified" datetime="2021-10-05T14:33:52+08:00">2021-10-05</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="计算机网络体系结构">计算机网络体系结构</h1>
<p>计算机网络是计算机技术和通信技术相结合的技术领域。由若干计算机用通信信道连接至一起，互相交换信息共享资源，形成计算机网络。</p>
<h2 id="osi-五层模型">OSI 五层模型</h2>
<p>在国际标准化组织（ISO）提出 <strong>开放系统互联</strong>（OSI，Open System Interconnection）参考模型中，网络系统结构划分为7层。</p>
<p>该OSI模型由上至下分别是 <strong>应用层</strong>、<strong>表示层</strong>、<strong>会话层</strong>、<strong>传输层</strong>、<strong>网络层</strong>、<strong>数据链路层</strong> 和 <strong>物理层</strong>。</p>
<p><img src="https://pic.islet.space/2021/10/17849411-6cad6d1b0aafdd22.png" alt="img" style="zoom:67%;" /></p>
<p>在本模型中，<strong>物理层</strong>、<strong>数据链路层</strong> 和 <strong>网络层</strong> 是 <strong>面向网络通信</strong> 的层级；<strong>会话层</strong>、<strong>表示层</strong> 和 <strong>应用层</strong> 是 <strong>面向信息处理</strong> 的层级。</p>
<h3 id="应用层">应用层</h3>
<p><strong>应用层</strong>，即Application Layer。OSI参考模型中最靠近用户的一层，是为计算机用户提供应用接口，也为用户直接提供各种网络服务。我们常见应用层的网络服务协议有：HTTP，HTTPS，FTP，POP3、SMTP等。</p>
<blockquote>
<p>实际公司A的老板就是我们所述的用户，而他要发送的商业报价单，就是应用层提供的一种网络服务，当然，老板也可以选择其他服务，比如说，发一份商业合同，发一份询价单，等等。</p>
</blockquote>
<p>OSI七层模型中，除了应用层以外，其他功能层级都与用户实际应用没有什么直接联系，能够直接为用户提供各种应用服务的是应用层。应用层可以包含各种应用程序，有些由于使用普遍而实行了标准化，进而形成了应用层上的各种应用协议，诸如SMTP、POP3、WWW、TELNET、FTP、HTTP、HTTPS等。</p>
<h3 id="表示层">表示层</h3>
<p><strong>表示层</strong>，即 Presentation Layer。其提供各种用于应用层数据的编码和转换功能，确保一个系统的应用层发送的数据能被另一个系统的应用层识别。如果必要，该层可提供一种标准表示形式，用于将计算机内部的多种数据格式转换成通信中采用的标准表示形式。数据压缩和加密也是表示层可提供的转换功能之一。</p>
<blockquote>
<p>由于公司A和公司B是不同国家的公司，他们之间的商定统一用英语作为交流的语言，所以此时表示层（公司的文秘），就是将应用层的传递信息转翻译成英语。同时为了防止别的公司看到，公司A的人也会对这份报价单做一些加密的处理。这就是表示的作用，将应用层的数据转换翻译等。</p>
</blockquote>
<h3 id="会话层">会话层</h3>
<p><strong>会话层</strong>，即 Section Layer。负责建立、管理和终止表示层实体之间的通信会话。该层的通信由不同设备中的应用程序之间的服务请求和响应组成。</p>
<blockquote>
<p>会话层的同事拿到表示层的同事转换后资料，（会话层的同事类似公司的外联部），会话层的同事那里可能会掌握本公司与其他好多公司的联系方式，这里公司就是实际传递过程中的实体。他们要管理本公司与外界好多公司的联系会话。当接收到表示层的数据后，会话层将会建立并记录本次会话，他首先要找到公司B的地址信息，然后将整份资料放进信封，并写上地址和联系方式。准备将资料寄出。等到确定公司B接收到此份报价单后，此次会话就算结束了，外联部的同事就会终止此次会话。</p>
</blockquote>
<h3 id="传输层">传输层</h3>
<p><strong>传输层</strong>，即 Transport Layer。负责建立了主机端到端的链接，传输层的作用是为上层协议提供端到端的可靠和透明的数据传输服务，包括 <strong>处理差错控制</strong> 和 <strong>流量控制</strong> 等问题。该层向高层屏蔽了下层数据通信的细节，使高层用户看到的只是在两个传输实体间的一条主机到主机的、可由用户控制和设定的、可靠的数据通路。我们通常说的，TCP/UDP就是在这一层。端口号既是这里的“端”。</p>
<blockquote>
<p>传输层就相当于公司中的负责快递邮件收发的人，公司自己的投递员，他们负责将上一层的要寄出的资料投递到快递公司或邮局。</p>
</blockquote>
<p>传输层位于第三层和高三层之间，也是 <strong>面向网路通信</strong> 和 <strong>面向信息处理</strong> 之间的重要层级，是整个协议层次的核心。</p>
<p>传输层的任务是为高层从源端机到目的机提供可靠、经济的数据传输服务，而与具体网络无关。</p>
<p>为了向用户提供经济有效的服务，传输层还提供多路复用和分流的功能。</p>
<h3 id="网络层">网络层</h3>
<p><strong>网络层</strong>，即 Network Layer。负责通过IP寻址来建立两个节点之间的连接，为源端的运输层送来的分组，选择合适的路由和交换节点，正确无误地按照地址传送给目的端的运输层。就是通常说的IP层。这一层就是我们经常说的IP协议层。IP协议是Internet的基础。</p>
<blockquote>
<p>网络层就相当于快递公司庞大的快递网络，全国不同的集散中心，比如说，从深圳发往北京的顺丰快递（陆运为例啊，空运好像直接就飞到北京了），首先要到顺丰的深圳集散中心，从深圳集散中心再送到武汉集散中心，从武汉集散中心再寄到北京顺义集散中心。这个每个集散中心，就相当于网络中的一个IP节点。</p>
</blockquote>
<h3 id="数据链路层">数据链路层</h3>
<p><strong>数据链路层</strong>，即 Data Linker Layer。负责将比特组合成字节,再将字节组合成帧,使用链路层地址 (以太网使用MAC地址)来访问介质,并进行差错检测。数据链路层又分为2个子层：逻辑链路控制子层（LLC）和媒体访问控制子层（MAC）。MAC子层处理CSMA/CD算法、数据出错校验、成帧等；LLC子层定义了一些字段使上次协议能共享数据链路层。 在实际使用中，LLC子层并非必需的。</p>
<p>这个没找到合适的例子</p>
<p>在物理线路上，由于噪声干扰、信号衰减畸变等原因，传输过程中常常出现差错，物理层只负责透明传输无结构的原始比特流，不能进行任何差错控制。</p>
<p>因此，在一条线路上传输数据时，除了必须有一条物理线路外，还需要必要规程来控制数据传输。把这些规程的软件/硬件加到链路上，就构成了数据链路层（Data Linker Layer）。</p>
<p><strong>作用</strong>：通过一系列数据链路层协议，在不可靠的物理链路上实现可靠的数据传输。</p>
<p>为此，通常将原始数据分割成一定长度的数据单元（帧），一帧内包含 <strong>同步信号</strong>、<strong>差错控制</strong>、<strong>流量控制</strong>、<strong>控制信息</strong>、<strong>数据信息</strong>、<strong>寻址</strong> 等。</p>
<h4 id="差错控制">差错控制</h4>
<p>差错控制涉及两方面的问题，即 <strong>如何检测错误</strong> 和 <strong>如何纠正错误</strong>。</p>
<p><strong>检查错误</strong>：要判断一个数据块是否存在错误，发送端必须在数据块中加入冗余信息，使得数据块和冗余信息间存在某种关联，接收端通过验证其关联性来判断数据是否出错。<mark>在数据块中加入冗余信息的过程称为 <strong>差错编码</strong>。</mark></p>
<p>差错编码有两种策略，即 <strong>仅带有检错能力的检错码</strong> 和 <strong>带有纠错能力的检错码/纠错码</strong>。但任何一种检/纠错码的能力都是有限的，即 <strong>不能检/纠出所有的错误</strong>。一般检错码的能力越强，所需的冗余信息就会越多，编码效率会随之降低。</p>
<p>常见的差错编码有：</p>
<ol type="1">
<li><strong>海明码</strong>，即 Hamming Code。由 Richard Hamming 于1950年提出，可纠正一个 bit 错误的编码。</li>
<li><strong>循环冗余码</strong>，即 Cyclic Redundancy Code，又名 多项式码。最广泛使用的编码，但 <strong>漏检率很低</strong>，只需要简单电路即可实现。</li>
<li><strong>奇偶校验码</strong>，即 Parity Check Code。 最常见也最简单的编码，只需要一个比特，但只能检出奇数个错误，<strong>漏检率达50%</strong>。</li>
<li><strong>校验和码</strong>，即 Checksum Code。也是最常见的检错方式，是传输的数据块中 <strong>各字节累加</strong> 后得到的 一个字节 或 按字“异或”运算 的结果。</li>
</ol>
<h3 id="物理层">物理层</h3>
<p><strong>物理层</strong>，即 Physical Layer。实际最终信号的传输是通过物理层实现的。通过物理介质传输比特流。规定了电平、速度和电缆针脚。常用设备有（各种物理设备）集线器、中继器、调制解调器、网线、双绞线、同轴电缆。这些都是物理层的传输介质。</p>
<blockquote>
<p>快递寄送过程中的交通工具，就相当于我们的物理层，例如汽车，火车，飞机，船。</p>
</blockquote>
<p>其中物理层有几个概念需要了解和区分，包括 <strong>传输速率</strong>、<strong>信道容量</strong>、<strong>传输媒体</strong>、<strong>调制解调</strong>、<strong>交换技术</strong>、<strong>网络拓扑</strong> 和 <strong>多路复用</strong>。</p>
<h4 id="传输速率">传输速率</h4>
<p><strong>比特率</strong>：每秒传输的二进制位数。</p>
<p><strong>波特率</strong>：每秒传输的码元率。</p>
<p><strong>码元</strong>：单位携带的比特信息量。</p>
<blockquote>
<p>如果码元率为1比特，则波特率和比特率数值上相等。</p>
</blockquote>
<h4 id="信道容量">信道容量</h4>
<p>信道容量，即信道能支持的最大数据传输速率，由信道带宽和信噪比决定。</p>
<h4 id="传输媒体">传输媒体</h4>
<p>传输媒体，即传输电信号的物理介质。可以是有线、无线、双绞线、同轴电缆 或 光纤 等。</p>
<h4 id="调制解调">调制解调</h4>
<p>调制解调，即一种数据转换成适合在信道上传输的某种电信号形式。</p>
<p>数字信号转换为模拟信号有 <strong>调幅</strong>、<strong>调频</strong>、<strong>调相</strong> 等方式。</p>
<p>数字信号的信道编码方式有 <strong>单极型脉冲</strong> 和 <strong>双极性脉冲编码</strong> （有归零码 和 不归零码 之分）及 <strong>曼彻斯特编码</strong> 等（信道编码）。</p>
<h4 id="交换技术">交换技术</h4>
<p>物理层的交换技术有三种：<strong>电路交换</strong>、<strong>报文交换</strong> 和 <strong>分组交换</strong>。</p>
<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 32%" />
<col style="width: 32%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="header">
<th>TYPE</th>
<th>PRINCIPLE</th>
<th>ADVANTAGES</th>
<th>DISADVANTAGES</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>电路交换</td>
<td>要求通信双方之间建立一条实际的物理通道，并在整个通信过程中 <strong>通路独占</strong>。</td>
<td>数据在中间环节无停留，传输可靠，实时效应好；</td>
<td>电路不共享，资源浪费大，同时电路的建立和撤出的时间较长。</td>
</tr>
<tr class="even">
<td>报文交换</td>
<td>一个 <strong>大报文</strong>（长度无限制的数据块）在通过从源站到目的站之间的中间站时采用 <strong>存储-转发</strong> 方式（有缓冲区）。</td>
<td>提高线路利用率</td>
<td>大报文延迟时间长，出错率高。</td>
</tr>
<tr class="odd">
<td>分组交换</td>
<td>将一个大报文分割成一定长度的信息单元（分组），各单元以此编号，以分组为单位进行 <strong>存储-转发</strong>。</td>
<td>除了线路共享外，要求中间环节的缓存区减少，也减少了分组在网络中的延迟时间。<br/>由于各分组在网络中可以走不同路径，该并行传输降低了报文的传输时间。分组长度变短同时降低了出错率（发现出错时重发数据所需时间也缩短）。</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="网络拓扑">网络拓扑</h4>
<p><strong>网络拓扑</strong>（Network Topology）即网络中节点的互联结构形式，主要分为 <strong>星型结构</strong>、<strong>总线型结构</strong>、<strong>树型结构</strong>、<strong>环型结构</strong> 和 <strong>网型结构</strong>。（网络上很多文章都有 <strong>混合型结构</strong> 这一拓扑类型）</p>
<p><img src="https://pic.islet.space/2021/10/1002_1.jpg" alt="1002_1" style="zoom: 25%;" /></p>
<table style="width:100%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 30%" />
<col style="width: 4%" />
<col style="width: 30%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="header">
<th>TYPE</th>
<th>PRINCIPLE</th>
<th>SWITCHING</th>
<th>ADVANTAGES</th>
<th>DISADVANTAGES</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>星型结构</td>
<td>通过点对点连接至中央节点，任意两点的通信都依赖中央节点。</td>
<td>电路交换</td>
<td>任意节点故障都只会影响本站，而不影响全网。</td>
<td>极大以来中央节点，对中央节点的可靠性和容量要求很高，同时因为需要中央节点连接，耗费大量电缆。</td>
</tr>
<tr class="even">
<td>总线型结构</td>
<td>采用单一信道作为传输介质，所有站点通过相应硬件结构接到公共信道（总线）上，任意站点发送的信息，所有其他站都能收到。</td>
<td>分组交换</td>
<td>所需电缆长度短，布线容易。<br>且总线仅仅是传输信道，无任何处理功能，属于无源器件，可靠性高，增加或减少站点都相对方便。</td>
<td>由于所有节点共享一条公共信道，当多点同时发送信号时，信号会因相互碰撞而造成传输失败，称之为 <strong>冲突</strong>。<br>系统范围受到限制（传输速率和传输距离相互制约）。<mark>一个站点的故障可能影响整个网络，故障检测需要在各站点上进行。（待考究）</mark></td>
</tr>
<tr class="odd">
<td>树形结构</td>
<td>由总线型结构演化而来，从树根开始，每一个节点向下都可以由许多分支。</td>
<td></td>
<td>故障比较容易隔离和检查。</td>
<td></td>
</tr>
<tr class="even">
<td>环型结构</td>
<td>站点和连接站点的点-点链路组成一个闭合环路，每个站点从一条链路上接受数据，然后以相同的速率从另一条链路上发送出去。<br>链路大多数是单方向的，即数据沿一个方向在网上环行。</td>
<td></td>
<td>所需介质长度较短，由于链路单方向性，可以用光纤作为传输介质；</td>
<td>与总线型结构一样存在冲突问题，一个站点故障会引起全网故障。</td>
</tr>
<tr class="odd">
<td>网型结构</td>
<td>每个站点都有一条或几条链路同其他站点连接。</td>
<td></td>
<td>由于站点间存在多条路径，数据传输时可以选择空闲站点或绕开故障点，因而 <strong>网络资源利用较为充分</strong>；<br>但站点或线路故障对网络整体影响较小，<strong>可靠性较高</strong>。</td>
<td>结构较为复杂，成本较高。</td>
</tr>
</tbody>
</table>
<h4 id="多路复用技术">多路复用技术</h4>
<p>传输媒体的能力（频带宽）往往很强，对传输资源能力的应用（复用）是指将多路信号组合在一条物理信道上进行传输，然后接收端再将各路信号分离开。常见的多路复用技术如 <strong>频分多路复用</strong>（FDM）、<strong>时分多路复用</strong>（TDM） 和 <strong>码分多址</strong>（CDMA）等。</p>
<table>
<thead>
<tr class="header">
<th>TYPE</th>
<th>PRINCIPLE</th>
<th>ADVANTAGES</th>
<th>DISADVANTAGES</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>频分多路复用</td>
<td>将信道带宽按频率分割为若干子信道，每个子信道用来传输一路信号。</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>时分多路复用</td>
<td>将使用信道的时间分成一个个时间片，按一定规律将时间片分配给各路信号，每路信号只能在自己的时间片内独占信道进行传输。</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>码分多址</td>
<td>允许所有站点在同一时间使用整个信道进行数据传输。</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>以上三类多路复用技术可以形象地比喻为多个人要发言讨论不同问题时，如何使用同一个会议厅（信道）。</p>
<ul>
<li><p>可以把会议厅分成几个小厅（好比频分多路复用），各小厅同时进行各自不同的发言，互不干扰；</p></li>
<li><p>可以在一个厅内让各议题在固定的时间片内轮流发言（好比时分多路复用）；</p></li>
<li><p>可以在一个厅内让各自议题同时发言，但是要用不同的语言（好比码分多址），对某个议题的人来说只能听懂自己的语言，而其他语言被视为随机噪音，可以排除。</p></li>
</ul>
</blockquote>
<h2 id="tcpip-五层模型">TCP/IP 五层模型</h2>
<p>实际TCP/IP使用的是5层模型，其中OSI模型中的 应用层、表示层 和 会话层 都用一层 应用层 进行表示，如下图。在每一层都工作着不同的设备，比如我们常用的交换机就工作在数据链路层的，一般的路由器是工作在网络层的。</p>
<p><img src="https://pic.islet.space/2021/10/202110021438076.webp" alt="img" style="zoom:67%;" /></p>
<p>在每一层实现的协议也各不同，即每一层的服务也不同，下图列出了每层主要的协议。</p>
<p><img src="https://pic.islet.space/2021/10/202110021438379.webp" alt="img" style="zoom:67%;" /></p>
<h1 id="现场总线">现场总线</h1>
<p>在工业数据通信领域，<strong>总线</strong> 是指由导线组成的传输线束，连接多个传感器和执行器，实现各部件之间传送信息的公共通信干线。</p>
<p>然后再来看国际电工技术委员会（IEC）在IEC 61158中对现场总线的标准定义：<mark><strong>现场总线</strong> 是安装在制造或过程区域的现场装置与控制室内的自动控制装置之间的数字式、串行、多点通信的数据总线。</mark></p>
<p>从定义中可以看到，现场总线是一种数据总线技术，是一种通信协议，且该通信是数字式、串行、多节点的。</p>
<p>目前，在工控领域，车间现场应用最广泛的是 <strong>工业以太网</strong> 技术和 <strong>工业现场总线</strong> 技术，为工厂实现自动化带来有力推动。</p>
<p>现场总线应当是应用在生产最底层的一种总线型拓扑网络，即该总线是用于现场控制系统，直接与所有受控（设备）节点串行相连的通信网络。</p>
<p>工业自动化控制的现场一般可以从一台家电设备到一个车间、一个工厂。控制设备和网络所处的环境以及报文结构都有其特殊性，对信号的干扰往往是多方面的，而要求控制必须实时性很强。</p>
<h2 id="现场总线技术">现场总线技术</h2>
<p><strong>现场总线</strong>（Fieldbus）是电气工程及其自动化领域发展起来的一种工业数据总线，它主要解决工业现场的智能化仪器仪表、控制器、执行机构等现场设备间的数字通信以及这些现场控制设备和高级控制系统之间的信息传递问题。由于现场总线简单、可靠、经济实用等一系列突出的优点，因而受到了许多标准团体和计算机厂商的高度重视</p>
<p>传统控制系统难以实现设备之间 以及 系统与外界之间的信息交换，是一个“信息孤岛”。要满足自动化控制技术现代化的要求，同时实现整个企业的信息集成，实施综合自动化，就必须设计出一种能在工业设备之间的多点数字通信，实现底层现场设备之间以及生产现场与外界的信息交换。</p>
<p>现场总线控制系统（Field Control System，FCS）既是一个开放通信网络，又是一种全分布控制系统。作为智能设备的联系纽带，把挂接在总线上、作为网络节点的智能设备连接为网络系统，并进一步构成合成系统，实现基本控制、补偿计算、参数修改、报警、显示、监控、优化 及 管控一体化的综合自动化功能。</p>
<p><mark style="font-weight: 900;">现场总线技术是一项集嵌入式系统、控制、计算机、数字通信、网络为一体的综合技术。</mark></p>
<h3 id="局限性">局限性</h3>
<p>也可以说现场总线是工业控制和计算机网络两者的边缘产物。从纯理论的角度看，它应属于网络范畴。但是现有的网络技术不能完全适应工业现场控制系统的要求，无论是从网络的结构、协议、实时性，还是从适应性、灵活性、可靠性 乃至 成本 上进行考虑，工业控制的底层都有它的特殊性。</p>
<p>现场总线其规模应属于局域网、总线型结构，简单但能满足现场使用需求，所传输信息短小且实时性很强、可靠性高（网络结构层次少，信息帧短小有利于提高实时性和降低受干扰的概率）。然而现场的环境干扰因数众多，有些很强烈且带突发性。</p>
<h2 id="现场总线发展">现场总线发展</h2>
<p>一般把50年代前的气动信号控制系统PCS称作 <strong>第一代</strong>，把4～20mA等电动模拟信号控制系统称为 <strong>第二代</strong>，把数字计算机集中式控制系统称为 <strong>第三代</strong>，而把70年代中期以来的集散式分布控制系统DCS称作 <strong>第四代</strong>。</p>
<p>现场总线控制系统FCS作为新一代控制系统，一方面，突破了DCS系统采用通信专用网络的局限，采用了基于公开化、标准化的解决方案，克服了封闭系统所造成的缺陷；另一方面把DCS的集中与分散相结合的集散系统结构，变成了新型全分布式结构，把控制功能彻底下放到现场。可以说，开放性、分散性与数字通讯是现场总线系统最显著的特征。</p>
<ul>
<li>1984年美国Intel公司提出一种 <strong>计算机分布式控制系统-位总线</strong>（BITBUS），它主要是将低速的面向过程的 <strong>输入输出通道与高速的计算机多总线</strong>（MULTIBUS）分离，形成了现场总线的最初概念。</li>
<li>80年代中期，美国Rosemount 公司开发了一种可寻址的远程传感器（HART）通信协议。采用在4～20mA模拟量叠加了一种频率信号，用双绞线实现数字信号传输。HART协议已是现场总线的雏形。</li>
<li>1985年由Honeywell和Bailey等大公司发起，成立了World FIP制定了FIP协议。</li>
<li>1987年，以Siemens，Rosemount，横河等几家著名公司为首也成立了一个专门委员会互操作系统协议（ISP）并制定了PROFIBUS协议。后来美国仪器仪表学会也制定了现场总线标准IEC/ISA SP50。</li>
<li>随着时间的推移，世界逐渐形成了两个针锋相对的互相竞争的现场总线集团：一个是以Siemens、Rosemount，横河为首的ISP集团；另一个是由Honeywell、Bailey等公司牵头的WorldFIP集团。1994年，两大集团宣布合并，融合成现场总线基金会（Fieldbus Foundation）简称FF。对于现场总线的技术发展和制定标准，基金委员会取得以下共识：共同制定遵循IEC/ISA SP50协议标准；商定现场总线技术发展阶段时间表。</li>
</ul>
<h2 id="现场总线能力">现场总线能力</h2>
<p>部分应用场景或产品开发时，会对现场总线的能力提出如下要求：</p>
<p><strong>本质安全防爆</strong>：<strong>本质安全</strong> 是指通过设计等手段使生产设备或生产系统本身具有安全性，即使在误操作或发生故障的情况下也不会造成事故的功能。具体包括 <strong>失误—安全</strong>（误操作不会导致事故发生或自动阻止误操作）和 <strong>故障—安全</strong> 功能（设备、工艺发生故障时还能暂时正常工作或自动转变安全状态）。</p>
<blockquote>
<p>本质安全型电气设备的防爆原理：通过限制电气设备电路的各种参数，或采取保护措施来限制电路的火花放电能量和热能，使其在正常工作和规定的故障状态下产生的电火花和热效应均不能点燃周围环境的爆炸性混合物，从而实现了电气防爆，这种电气设备的电路本身就具有防爆性能，也就是从“本质”上就是安全的。</p>
</blockquote>
<h2 id="现场总线分类">现场总线分类</h2>
<p>国际上有40多种现场总线，但没有任何一种现场总线能覆盖所有的应用面，按其传输数据的大小可分为3类：</p>
<ol type="1">
<li><strong>传感器总线</strong>（sensor bus），属于位传输；</li>
<li><strong>设备总线</strong>（device bus），属于字节传输；</li>
<li><strong>现场总线</strong>，属于数据流传输。</li>
</ol>
<h3 id="ff">FF</h3>
<p>FF，即 Foundation Field bus，基金会现场总线。</p>
<p>是以美国Fisher-Rouse mount公司为首的联合了横河、ABB、西门子、英维斯等80家公司制定的ISP协议和以Honeywell公司为首的联合欧洲等地150余家公司制定的World FIP协议于1994年9月合并的。该总线在过程自动化领域得到了广泛的应用，具有良好的发展前景。</p>
<p>FF 总线采用国际标准化组织ISO的开放化系统互联OSI的简化模型(1，2，7层)，即物理层、数据链路层、应用层，另外增加了用户层。</p>
<p>FF 分低速H1和高速H2两种通信速率，前者传输速率为31.25Kbit/秒，通信距离可达1900m，可支持总线供电和本质安全防爆环境。后者传输速率为1Mbit/秒和2.5Mbit/秒，通信距离为750m和500m，支持双绞线、光缆和无线发射，协议符号IEC1158-2标准。</p>
<p>FF 的物理媒介的传输信号采用曼切斯特编码。</p>
<h3 id="can">CAN</h3>
<p>CAN，即Controller Area Network，控制器局域网络。</p>
<p>最早由德国BOSCH公司推出，它广泛用于离散控制领域，其总线规范已被ISO国际标准组织制定为国际标准，得到了Intel、Motorola、NEC等公司的支持。CAN协议分为二层：物理层和数据链路层。CAN的信号传输采用短帧结构，传输时间短，具有自动关闭功能，具有较强的抗干扰能力。CAN支持多主工作方式，并采用了非破坏性总线仲裁技术，通过设置优先级来避免冲突，通讯距离最远可达10KM/5Kbps/s，通讯速率最高可达40M/1Mbp/s，网络节点数实际可达110个。目前已有多家公司开发了符合CAN协议的通信芯片。</p>
<h3 id="lonworks">LonWorks</h3>
<p>由美国Echelon公司推出，并由Motorola、Toshiba公司共同倡导。它采用ISO/OSI模型的全部7层通讯协议，采用面向对象的设计方法，通过网络变量把网络通信设计简化为参数设置。支持双绞线、同轴电缆、光缆和红外线等多种通信介质，通讯速率从300bit/s至1.5M/s不等，直接通信距离可达2700m(78Kbit/s)，被誉为通用控制网络。Lonworks技术采用的Lon Talk协议被封装到Neuron(神经元)的芯片中，并得以实现。采用LonWorks技术和神经元芯片的产品，被广泛应用在楼宇自动化、家庭自动化、保安系统、办公设备、交通运输、工业过程控制等行业。</p>
<h3 id="device-net">Device Net</h3>
<p>Device Net是一种低成本的通信连接也是一种简单的网络解决方案，有着开放的网络标准。Device Net具有的直接互联性不仅改善了设备间的通信而且提供了相当重要的设备级阵地功能。Device Net基于CAN技术，传输率为125Kbit/s至500Kbit/s，每个网络的最大节点为64个，其通信模式为：生产者/客户(Producer/Consumer)，采用多信道广播信息发送方式。位于Device Net网络上的设备可以自由连接或断开，不影响网上的其他设备，而且其设备的安装布线成本也较低。Device Net总线的组织结构是Open Device Net Vendor Association(开放式设备网络供应商协会，简称“ODVA”)。</p>
<h3 id="profibus">PROFIBUS</h3>
<p>PROFIBUS是德国标准(DIN19245)和欧洲标准(EN50170)的现场总线标准。由PROFIBUS--DP、PROFIBUS-FMS、PROFIBUS-PA系列组成。DP用于分散外设间高速数据传输，适用于加工自动化领域。FMS适用于纺织、楼宇自动化、可编程控制器、低压开关等。PA用于过程自动化的总线类型，服从IEC1158-2标准。PROFIBUS支持主-从系统、纯主站系统、多主多从混合系统等几种传输方式。PROFIBUS的传输速率为9.6Kbit/s至12Mbit/s，最大传输距离在9.6Kbit/s下为1200m，在12Mbit/s小为200m，可采用中继器延长至10km，传输介质为双绞线或者光缆，最多可挂接127个站点。</p>
<h3 id="hart">HART</h3>
<p>HART，即 Highway Addressable Remote Transducer，高速可寻址远程传感器。</p>
<p>最早由Rosemount公司开发。其特点是在现有模拟信号传输线上实现数字信号通信，属于模拟系统向数字系统转变的过渡产品。其通信模型采用物理层、数据链路层和应用层三层，支持点对点主从应答方式和多点广播方式。由于它采用模拟数字信号混和，难以开发通用的通信接口芯片。</p>
<p>HART能利用总线供电，可满足本质安全防爆的要求，并可用于由手持编程器与管理系统主机作为主设备的双主设备系统。</p>
<h3 id="cc-link">CC-Link</h3>
<p>CC-Link是Control&amp;Communication Link(控制与通信链路系统)的缩写，在1996年11月，由三菱电机为主导的多家公司推出，其增长势头迅猛，在亚洲占有较大份额。在其系统中，可以将控制和信息数据同是以10Mbit/s高速传送至现场网络，具有性能卓越、使用简单、应用广泛、节省成本等优点。其不仅解决了工业现场配线复杂的问题，同时具有优异的抗噪性能和兼容性。CC-Link是一个以设备层为主的网络，同时也可覆盖较高层次的控制层和较低层次的传感层。2005年7月CC-Link被中国国家标准委员会批准为中国国家标准指导性技术文件。</p>
<h3 id="world-fip">World FIP</h3>
<p>World FIP的北美部分与ISP合并为FF以后，World FIP的欧洲部分仍保持独立，总部设在法国。其在欧洲市场占有重要地位，特别是在法国占有率大约为60%。World FIP的特点是具有单一的总线结构来适用不同的应用领域的需求，而且没有任何网关或网桥，用软件的办法来解决高速和低速的衔接。World FIP与FFHSE可以实现“透明联接”，并对FF的H1进行了技术拓展，如速率等。在与IEC61158第一类型的连接方面，World FIP做得最好，走在世界前列。</p>
<p>此外较有影响的现场总线还有丹麦公司Process-Data A/S提出的P-Net，该总线主要应用于农业、林业、水利、食品等行业；Swift Net现场总线主要使用在航空航天等领域，还有一些其他的现场总线这里就不再赘述了。</p>
<h3 id="interbus">INTERBUS</h3>
<p>INTERBUS是德国Phoenix公司推出的较早的现场总线，2000年2月成为国际标准IEC61158。INTERBUS采用国际标准化组织ISO的开放化系统互联OSI的简化模型(1，2，7层)，即物理层、数据链路层、应用层，具有强大的可靠性、可诊断性和易维护性。其采用集总帧型的数据环通信，具有低速度、高效率的特点，并严格保证了数据传输的同步性和周期性;该总线的实时性、抗干扰性和可维护性也非常出色。INTERBUS广泛地应用到汽车、烟草、仓储、造纸、包装、食品等工业，成为国际现场总线的领先者。</p>
<h2 id="其他">其他</h2>
<p>RS-485和现场总线同属于总线；ModBus和现场总线同属于通信协议；</p>
<p>严格来讲，RS-485≠现场总线，ModBus≠现场总线，RS-485+ModBus（还有其他什么的）才构成现场总线，其中RS-485工作在现场总线的物理层，ModBus工作在现场总线的应用层；</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《现场总线CAN原理与技术应用》第二版，北京航空航天大学出版社，饶运涛、邹继军、王进宏、郑勇芸 编著</li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/现场总线/304020">现场总线</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f32cfd6c208b">OSI网络模型</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/本质安全/1078274">本质安全</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/87868499">本质安全型电气设备防爆原理</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/09/20/Communication/2021-09-20-%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E7%BD%91%E7%BB%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/Communication/2021-09-20-%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E7%BD%91%E7%BB%9C/" class="post-title-link" itemprop="url">无线通信网络</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-20 14:45:00" itemprop="dateCreated datePublished" datetime="2021-09-20T14:45:00+08:00">2021-09-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-24 07:23:21" itemprop="dateModified" datetime="2021-09-24T07:23:21+08:00">2021-09-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前置知识">前置知识</h1>
<ul>
<li>带宽及传输速率转换</li>
<li>TCP/IP网络协议</li>
<li>硬件功耗计算和测量</li>
</ul>
<h1 id="概述">概述</h1>
<p>将从通信速率、通信距离、通信功耗、组网能力/网路容量、 应用场景 及 安全性 等各方面来区分无线通信各种技术。</p>
<h2 id="通信距离和通信速率">通信距离和通信速率</h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>超近距离<br>10公分以内</th>
<th>近距离<br>1米以内</th>
<th>近距离<br>20米以内</th>
<th>中距离<br>20至100米</th>
<th>远距离<br>1公里以内</th>
<th>超远距离<br>1公里以上</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>超高速率</strong><br>&gt; 100Mbps</td>
<td></td>
<td>RFID</td>
<td>WiFi</td>
<td></td>
<td>5G</td>
<td></td>
</tr>
<tr class="even">
<td><strong>高速率</strong><br>&lt; 100Mbps</td>
<td></td>
<td>RFID</td>
<td>WiFi</td>
<td></td>
<td>3G/4G</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>中速率</strong><br>&lt; 10Mbps</td>
<td></td>
<td></td>
<td>WiFi<br>Bluethooth</td>
<td>Bluethooth</td>
<td>CMDA2K1X<br>2G</td>
<td></td>
</tr>
<tr class="even">
<td><strong>低速率</strong><br>&lt; 1Mbps</td>
<td>NFC</td>
<td></td>
<td></td>
<td>ZigBee<br>Z-Ware</td>
<td>《IEEE 802.11 ah》</td>
<td>Lora<br>NB-IOT（基于MTC）<br>GPRS</td>
</tr>
<tr class="odd">
<td><strong>超低速率</strong><br>&lt; 1Kbps</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Sigfox</td>
</tr>
</tbody>
</table>
<p>还有很多躺在历史垃圾堆角落里，没有得到使用和普及的通信协议，如 WiMax（IEEE 802.16），</p>
<h2 id="通信功耗">通信功耗</h2>
<p><strong>超高功耗</strong>：&gt; 100mA</p>
<p><strong>高功耗</strong>：30~100mA</p>
<p><strong>中功耗</strong>：&lt; 30mA</p>
<p><strong>低功耗</strong>：&lt; 20mA</p>
<p><strong>超低功耗</strong>：&lt; 10mA</p>
<table>
<thead>
<tr class="header">
<th>超低功耗</th>
<th>低功耗</th>
<th>中功耗</th>
<th>高功耗</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="组网能力网路容量">组网能力/网路容量</h2>
<h2 id="应用场景">应用场景</h2>
<h2 id="lpwanlpwa">LPWAN/LPWA</h2>
<p><strong>LPWAN</strong>， Low Power Wide Area Network，低功耗广域网络，也可以缩写为LPWA。</p>
<p>LPWAN 不是指任何一种特定技术，而是作为任何网络的通用术语，这些网络旨在以比其他网络（如蜂窝、卫星或 WiFi）更低的功率进行无线通信。此外，与其他使用蓝牙或 NFC 的低功耗网络相比，LPWAN 的通信距离更远。</p>
<p>LPWA 网络非常有限的带宽不适合大多数消费者和商业应用，例如语音、视频、音频甚至文本消息。因此，LPWA 网络几乎完全由物联网 (IoT) 和 M2M（机器对机器）通信中的设备使用。</p>
<p>虽然冰箱、灯泡或 Nest 温度计等家用或商用设备都可以轻松搭载家庭或办公室 WiFi 连接，但某些设备不能依赖这种连接。</p>
<p>LoRa、SigFox、NB-IoT 都属于 LPWA 的范畴，LoRa 不需要 SIM 卡，NB-IoT 需要 SIM 卡。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210920171429124.png" alt="image-20210920171429124" /><figcaption aria-hidden="true">image-20210920171429124</figcaption>
</figure>
<h1 id="lora">LoRa</h1>
<p>LoRa是美国Semtech公司的专有技术，实际是一种采用扩频方案的无线调制解调技术。Semtech在2012年通过并购法国Cycleo公司获得LoRa的IP产权，以此设计制造射频芯片并进行市场销售，是一家纯半导体公司，垄断LoRa芯片的供货。目前Semtech虽然也进行少量LoRa的IP授权，如国内的阿里，但IP是Semtech专有，没有授权任何公司无法设计制造LoRa芯片，所以客户的选择余地很小。</p>
<p>LoRa使用的也是公共频段进行射频信号传输，上层协议及规范由LoRaWan定义，LoRa联盟负责发布和维护。任何人可以购买LoRa芯片或者模块来设计LoRa终端和网关设备，也可以设计或者购买设备来搭建LoRa网络，所以目前多数的LoRa网络都是小区域和私有的，很少有全国性的通用物联网络，而设备和网络间的兼容也是一个很大的挑战。</p>
<p>LoRa通过扩频技术实现高灵敏度，从而能够进行远距离传输，但是网络容量有限，无法高效实现大批量设备信息的并行接收和处理，这对于大面积或全国性的部署是个巨大挑战。</p>
<h1 id="术语">术语</h1>
<h2 id="link-budget">Link Budget</h2>
<p>A link budget is used to compute cell coverage by accounting for all the factors that determine the cell coverage to balance the system cost against the required cell capacity. Link budget factors controlled by the RF engineer include transmitter-radiated power, antenna gain, noise figures, and co-channel interference (i.e., reuse factor <em>N</em>). Factors that cannot be controlled directly, but must be considered in the link budget, include propagation path loss and system bandwidth.</p>
<p>链路预算是用来计算小区覆盖率的，它考虑了决定小区覆盖率的所有因素，以平衡系统成本和所需小区容量。由射频工程师控制的链路预算因素包括发射器辐射功率、天线增益、噪声数字和同信道干扰（即重用系数N）。不能直接控制，但必须在链路预算中考虑的因素包括传播路径损耗和系统带宽。</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《无线传感网络》杨博雄/倪玉华</li>
<li><a target="_blank" rel="noopener" href="http://www.elecfans.com/iot/631444_a.html">物联网通信标准分类 谁最有优势？</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19687054/answer/632679689">为什么WIMAX没有普及？</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/79948173">什么是LPWA</a></li>
<li><a target="_blank" rel="noopener" href="https://www.hisilicon.com/cn/techtalk/nb-iot">NB-IoT 通往智能世界的基础联接技术</a></li>
<li><a target="_blank" rel="noopener" href="https://www.sciencedirect.com/topics/engineering/link-budget">Link Budget - an overview | ScienceDirect Topics</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/lpwa">LPWA 物联网络</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/09/10/Communication/2021-09-10-UART%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/10/Communication/2021-09-10-UART%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">UART通信</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-10 09:30:00" itemprop="dateCreated datePublished" datetime="2021-09-10T09:30:00+08:00">2021-09-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-16 00:30:01" itemprop="dateModified" datetime="2021-09-16T00:30:01+08:00">2021-09-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="rs-serial-port">RS Serial Port</h1>
<p>RS系列（RS-232/RS-422/RS-485）标准（RS，即Recommend Standard，<strong>推荐标准</strong> 之意 ）是常用的（异步）串行通信接口标准，该系列标准由美国电子工业协会（EIA）牵头开发。</p>
<p>RS系列标准只对 <strong>接口</strong> 的 <strong>电气特性</strong>（Electric Specification of Interface）进行规定，并不涉及插件、电缆或协议，再次基础上，用户可以建立自己的接头、插座形状 以及 高层通信协议 。</p>
<h2 id="rs-232">RS-232</h2>
<p>RS-232标准接口（又称EIA RS-232）是由美国电子工业协会(EIA)联合贝尔系统公司、调制解调器厂家及计算机终端生产厂家于1970年共同制定，其全名是“数据终端设备( DTE)和数据通信设备(DCE)之间串行二进制数据交换接口技术标准”。</p>
<p>RS232协议 和 TTL协议更多是电气特性（如电平标准和电压），二者在软件协议层面是一样的，如对于同样传输 <code>0b01010101</code> 来说，RS232 和 TTL的时序对比如下图所示：</p>
<p><img src="https://pic.islet.space/2021/09/20210915110402.png" alt="img" style="zoom:67%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 RS232标准和TTL标准的时序对比
</div>
<p>当然，RS232和TTL/CMOS之间的转换，不仅仅是简单的电平转换，还要考虑到其他一些因素，比如 <strong>调节</strong> 和 <strong>矫正</strong> 一些电平（提高或降低对应的电平），确保可能的有害的RS232电压不会破坏微控制器的串口针脚。较为成熟的方案是通过MAX3232之类的芯片，把TTL电平转为RS232电平，或者在淘宝购买TTL转RS232电缆即可。</p>
<p>由于RS-232采取 <strong>不平衡传输</strong> 方式，即所谓 <strong>单端通讯</strong>。收（RX）、发（TX） 端的数据信号是相对于信号地（GND）。典型的RS-232信号在正负电平之间摆动，</p>
<ul>
<li>在发送数据时，发送端驱动器输出正电平在+5<sub>+15V，负电平在-5</sub>-15V电平。</li>
<li>当无数据传输时，线上为TTL，从开始传送数据到结束，线上电平从TTL电平到RS-232电平再返回TTL电平。</li>
</ul>
<p>接收器典型的工作电平在 <code>+3~+12V</code> 与 <code>-3~-12V</code> 。<mark>由于发送电平与接收电平的差仅为2V至3V左右，所以其共模抑制能力差</mark>，再加上双绞线上的分布电容，其传送距离最大为约15米，最高速率为20Kbps。RS-232是为 <strong>单节点通讯</strong>（即点对点，用一对收、发设备）而设计的，其驱动器负载为3kΩ~7kΩ。所以RS-232适合本地设备之间的通信。</p>
<h2 id="rs-422">RS-422</h2>
<p>RS-422、RS-485与RS-232不一样，数据信号采用差分传输方式，也称作 <strong>平衡传输</strong>，它使用一对双绞线，将其中一线定义为A，另一线定义为B。通常情况下，发送驱动器A、B之间的正电平在+2<sub>+6V，是一个逻辑状态，负电平在-2V</sub>6V，是另一个逻辑状态。另有一个信号地C，在RS-485中还有一“使能”端，而在RS-422中这是可用可不用的。“使能”端是用于控制发送驱动器与传输线的切断与连接。当“使能”端起作用时，发送驱动器处于高阻状态，称作“第三态”，即它是有别于逻辑“1”与“0”的第三态。</p>
<p>由于接收器采用高输入阻抗和发送驱动器比RS232更强的驱动能力，故允许在相同传输线上连接多个接收节点，<strong>最多可接10个节点</strong>。即一个主设备（Master），其余为从设备（Salve），从设备之间不能通信，所以RS-422支持点对多的双向通信。RS-422四线接口由于采用单独的发送和接收通道，因此不必控制数据方向，各装置之间任何必须的信号交换均可以按软件方式（XON/XOFF握手）或硬件方式（一对单独的双绞线）实现。RS-422的最大传输距离为4000英尺（约1219米），最大传输速率为10Mbps。其平衡双绞线的长度与传输速率成反比，在100Kbps速率以下，才可能达到最大传输距离。只有在很短的距离下才能获得最高速率传输。一般100米长的双绞线上所能获得的最大传输速率仅为1Mbps。RS-422需要一终接电阻，要求其阻值约等于传输电缆的特性阻抗。在矩距离传输时可不需终接电阻，即一般在300米以下不需终接电阻。终接电阻接在传输电缆的最远端。</p>
<h2 id="rs-485">RS-485</h2>
<p>RS-485 标准只对 <strong>接口</strong> 的 <strong>电气特性</strong>（Electric Specification of Interface）进行规定，并不涉及插件、电缆或协议，再次基础上，用户可以建立自己的接头、插座形状 以及 高层通信协议 。</p>
<p>RS-485 的 <strong>通信距离</strong> 和 <strong>通信速率</strong> 是负相关的，</p>
<p>RS485有 <strong>两线制</strong> 和 <strong>四线制</strong>，四线制只能实现点对点的通信方式，现很少采用。</p>
<h2 id="接口标准对比">接口（标准）对比</h2>
<p>以下仅从RS的硬件要求进行横向对比：</p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
表 RS系列标准对比
</div>
<table>
<thead>
<tr class="header">
<th></th>
<th>RS-232</th>
<th>RS-422</th>
<th>RS-485</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>半双工/全双工</td>
<td>全双工</td>
<td>全双工</td>
<td>半双工</td>
</tr>
<tr class="even">
<td>波特率</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>传输速率范围</td>
<td>300bps~100Kbps</td>
<td>10Mbps</td>
<td>10Mbps</td>
</tr>
<tr class="even">
<td>联网支持（多设备连接）</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr class="odd">
<td>电压范围</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>差模/共模</td>
<td>共模</td>
<td>差模</td>
<td>差模</td>
</tr>
<tr class="odd">
<td>最少信号线数量</td>
<td>3根</td>
<td>5根</td>
<td>2根</td>
</tr>
<tr class="even">
<td>最大传输距离</td>
<td>15m（波特率=9600时）</td>
<td></td>
<td>3900m</td>
</tr>
<tr class="odd">
<td>控制信号（DE，Drive Enable）</td>
<td>无</td>
<td>可选</td>
<td>有</td>
</tr>
<tr class="even">
<td>输入阻抗</td>
<td>3～7kΩ</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>使用RS422协议的设备间的引脚互相连接示意图：</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915110408.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<h1 id="uart-protocol">UART Protocol</h1>
<p><strong>UART</strong>，即Universal Asynchronous Receiver/Transmitter，<strong>通用异步收发</strong>。</p>
<p>在通信和计算机科学中，Serial communication是一个通用概念，泛指所有的串行的通信协议，如RS232、USB、I2C、SPI、1-Wire、Ethernet等。这里的串行（serial），是相对并行通信（parallel communication）来说的，如下图：</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915110411.jpeg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>广义上讲，UART是指 支持RS系列（物理接口）标准和TLL电平 的 <strong>通信协议</strong>。</p>
<p>因为UART更多关注规定编码格式的标准，如 <strong>波特率</strong>（baud rate）、<strong>帧格式</strong> 和 <strong>波特率误差</strong> 等等，所以了解UART时，不可避免需要先在电气特性上区分几个常用的概念，如 <strong>TLL电平</strong> 和 <strong>CMOS电平</strong>。</p>
<blockquote>
<p>TTL集成电路的主要型式为晶体管-晶体管逻辑门(transistor-transistor logic gate)，TTL大部分都采用5V电源。</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>TTL电平（参考值）</th>
<th>CMOS电平（参考值）</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>输入高电平</td>
<td>≥ 2.4V</td>
<td>≈ 0.7*VCC</td>
</tr>
<tr class="even">
<td>输入低电平</td>
<td>≤ 0.4V</td>
<td>≈ 0.3*VCC</td>
</tr>
<tr class="odd">
<td>输出高电平</td>
<td>≥ 2.0V</td>
<td>≈ VCC 或 ＜0.9*VCC</td>
</tr>
<tr class="even">
<td>输出低电平</td>
<td>≤ 0.8V</td>
<td>≈ GND 或 &lt; 0.1*VCC</td>
</tr>
</tbody>
</table>
<p><strong>注</strong>：VCC的概念可以参考文章《<a href="https://islet.space/2021/07/10/Hardware/Circuit/2021-07-10-VCC%E3%80%81VDD%E3%80%81VEE%E3%80%81VSS%E7%9A%84%E5%8C%BA%E5%88%AB/">VCC、VDD、VEE、VSS的区别</a>》，具体输入输出的高低电平范围需要参考芯片及电路的手册。</p>
</blockquote>
<h1 id="接口">接口</h1>
<p>以下介绍均为UART常用的物理接口。</p>
<p><strong>D型数据接口连接器</strong>，用于连接电子设备（比如：计算机与外设）的接口标准。因形状类似于英文字母D，故得名D型接口。</p>
<p>按照接口数量细分为A型（15针），B型（25针），C型（37针），D型（50针），E型（9针）。因此常见的计算机并口即为DB25针的连接器。而串口则应为DE9针连接器。</p>
<p>由于早期的计算机的串口与并口都是使用DB25针连接器，而人们则习惯把字母B与D合在一起记了下来，当作D型接口的共同名字，以至于后来计算机串口改用9针接口以后，人们更多的使用DB9而不是DE9来称呼9针的接口。这一习惯进一步推广的结果就是如今人们使用DBxx来代表D型接口，数字xx则为接口的针数。</p>
<h2 id="db9">DB9</h2>
<p>COM口是指针对串行通信协议的一种端口，是PC上异步串行通信口的简写，大部分为9针孔D型。</p>
<p>因此 <strong>DB9</strong> 就和 <strong>COM口</strong> 混用了，但是COM口里又进一步区分RS232，RS422和RS485，传输功能依次递增。</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915110415.png" alt="image-20210915103057209" /><figcaption aria-hidden="true">image-20210915103057209</figcaption>
</figure>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 DB9/COM口在各RS标准下的引脚使用和定义
</div>
<p>但由于历史原因，IBM的PC外部接口配置为RS232，成为实际上的PC界默认标准。所以，<strong>现在PC机的COM口的物理标准均为RS232</strong>。DB9/COM口的公头和母头实际外观如下：</p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210915093214837.png" alt="image-20210915093214837" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210915104612002.png" alt="image-20210915104612002" style="zoom:70%;" />
</div>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 DB9/COM口的公头（左）和母头（右）外观
</div>
<h2 id="端子">端子</h2>
<p>端子，Terminal，也称为 <strong>接线终端</strong> / <strong>接线端子</strong>。</p>
<p>种类分单孔，双孔，插口，挂钩等，从材料分，铜镀银，铜镀锌，铜，铝，铁等。它们的作用主要传递电信号或导电用。</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915212912.jpeg" alt="端子排型号" /><figcaption aria-hidden="true">端子排型号</figcaption>
</figure>
<h1 id="转换器">转换器</h1>
<h2 id="usb转ttl">USB转TTL</h2>
<p>常见的USB转TTL的芯片，如CP2101 / CP2102 / CH340 / CH341 / FT232BM / FT232RL / PL2303 / PV8651等，尤其CH340和CP2102 的转换器最为常见。</p>
<p><img src="https://pic.islet.space/2021/09/20210915113927.png" alt="image-20210915113729086" style="zoom:50%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 USB转TTL（CH340G芯片）转换器
</div>
<p><img src="https://pic.islet.space/2021/09/20210915210459.png" alt="image-20210915114016213" style="zoom:67%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 USB转TTL（FT232芯片）转换器
</div>
<h2 id="usb转db9rs232">USB转DB9(RS232)</h2>
<p><img src="https://pic.islet.space/2021/09/20210915110421.png" alt="image-20210915095451523" style="zoom:67%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 USB转DB9数据线
</div>
<h2 id="rj45和db9">RJ45和DB9</h2>
<p>这种转换器通常用在交换器和路由器的调试工作上，</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915110424.png" alt="image-20210915105657103" /><figcaption aria-hidden="true">image-20210915105657103</figcaption>
</figure>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 RJ45母 转 DB9公
</div>
<p><img src="https://pic.islet.space/2021/09/20210915110427.png" alt="image-20210915105821577" style="zoom:67%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 RJ45公 转 DB9母
</div>
<h2 id="rj45转端子">RJ45转端子</h2>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/20210915112733.jpeg" alt="img" style="zoom:100%;" /><img src="https://pic.islet.space/2021/09/20210915112736.jpeg" alt="img" style="zoom:100%;" /><img src="https://pic.islet.space/2021/09/20210915112738.jpeg" alt="img" style="zoom:100%;" />
</div>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 RJ45公 转 2/3/4引脚端子
</div>
<h2 id="rs-232转rs-485">RS-232转RS-485</h2>
<p>目前主流的家用台式机上已经逐渐取消DB9接口，在某些旧台式电脑主机或者商用台式电脑主机上可能仍有DB9端口可以适配 RS-232（DB9公/母）/RS-485（端子） 转换器，然后再利用一根双绞线（可以用网线制作）连接转换器的 <code>A+</code> / <code>B-</code> 端子 和 通信设备。如下图所示：</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915210514.png" alt="image-20210915091142748" /><figcaption aria-hidden="true">image-20210915091142748</figcaption>
</figure>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 DB9公（RS232）转3引脚端子(RS485)
</div>
<p>由于该转换器为电气隔离设计，<mark>需要使用独立的VCC/GND/T/R来进行供电，因此不能只连接两根信号线。</mark></p>
<p>该类转换器同样按照DB9接口的公/母来区分引脚/信号定义，下表为深圳市宇泰科技出品的UT-2201转换器说明书中的内容：</p>
<p><img src="https://pic.islet.space/2021/09/20210915210523.png" alt="image-20210915142023932" style="zoom:67%;" /></p>
<p>下图为RS485和转换器之间的连接示意，转换器和单点之间的连接：</p>
<p><img src="https://pic.islet.space/2021/09/20210915210526.png" alt="image-20210915141402305" style="zoom:50%;" /></p>
<p>转换器和多点的连接：</p>
<p><img src="https://pic.islet.space/2021/09/20210915210528.png" alt="image-20210915141728889" style="zoom:50%;" /></p>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《串行通信技术 面向嵌入式系统开发》 周云波 著 中国工信出版集团 电子工业出版社</li>
<li><a target="_blank" rel="noopener" href="http://www.farnell.com/datasheets/2254540.pdf">《ANALOG DEVICE-5 V Low PowerEIA RS-485 Transceiver》</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ti.com/lit/an/slla036d/slla036d.pdf">《InterfaceCircuitsforTIA/EIA-485(RS-485)》</a></li>
<li><a target="_blank" rel="noopener" href="https://item.taobao.com/item.htm?id=546418892634">聚英JY-CON503 RS232转RS485/RS422 宽压DC7-30V供电 全隔离设计</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yeshenmeng/p/10729070.html">DB9针和DB25针串口的引脚定义</a></li>
<li><a target="_blank" rel="noopener" href="http://www.360doc.com/content/20/0803/20/44130189_928354146.shtml">为什么越来越多人使用RS232接口，却还分不清DB9、DB25的引脚定义？</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/RS-232/2022036?fromtitle=rs232&amp;fromid=3555506&amp;fr=aladdin">RS-232</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/DB9/1360191?fr=aladdin">DB9</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/89240672">串口、COM口、UART口, TTL、RS-232、RS-485区别详解</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25893717">UART、RS232、TTL关系浅析</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/shuziluoji1988/article/details/22413497">RS232、RS422、RS485、TTL电平</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/66241216">一文搞懂Modbus与RS485通信协议</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/09/02/Programming/2021-09-02-%E4%BD%BF%E7%94%A8VS-Code%E5%90%8C%E6%AD%A5Gitee%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/02/Programming/2021-09-02-%E4%BD%BF%E7%94%A8VS-Code%E5%90%8C%E6%AD%A5Gitee%E9%A1%B9%E7%9B%AE/" class="post-title-link" itemprop="url">使用VS Code同步Gitee项目</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-02 21:50:00" itemprop="dateCreated datePublished" datetime="2021-09-02T21:50:00+08:00">2021-09-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-16 00:33:06" itemprop="dateModified" datetime="2021-09-16T00:33:06+08:00">2021-09-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>自从Github被微软收购，除了Copilot这个AI代码写作助手，大家开源贡献的代码都被拿来用了之后，就不想在Github上贡献代码了。</p>
<p>转而使用Gitee，感觉也挺好。</p>
<h1 id="生成并绑定公钥">生成并绑定公钥</h1>
<p>使用terminal生成公钥：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure>
<p>遇到选择就按回车，不用管就好。然后使用以下命令进行查看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>
<p>公钥样例（千万不要复制下面的模板）如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-rsa BBBBA3NzaC1yc2EBBBBDAQBABBBABQCoLmvwKsFETfy0Lj8VN0QwDj/fu2J1msoM+kWCLTj64zXXXXXXXXXSKQxj30zjVO4tZ9PsO/jaItdev1uV7a9lk9MiemLLAxc1LSYsBdki81tx+7941rl9y/XXXXXXXXXXDjNpPCMq6xH8ZSRoRLcgCz+gRaDfnQALWBcavEO0uVqYGn4I4KRFPup7gm+3j5gRpdm1uKtkrqHxqykErCwXXXXXXXXXX6+okRt/TN5jjq6zV44D6tRYAK6oCOFpwO/RTqTIUU//w/XXXXXXXXXXXXXXXXXXXXdPCqs8Zax9cH/31FJqltQzsRbGDLTFFXqyICK7QKVgFXGhrzM3AVvD xxxx@xxxx.local</span><br></pre></td></tr></table></figure>
<h1 id="绑定到gitee配置">绑定到Gitee配置</h1>
<p>这里就不延时注册Gitee账户了。</p>
<p>在Gitee头像下点击 <strong>设置</strong> ，然后在左侧选择 <strong>SSH公钥</strong>，将生成的公钥粘贴进去，标题会自动识别和生成，使用默认标题即可，最后点击 <strong>确定</strong> 进行保存。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902220637986.png" alt="image-20210902220637986" /><figcaption aria-hidden="true">image-20210902220637986</figcaption>
</figure>
<h1 id="在gitee上生成项目">在Gitee上生成项目</h1>
<p>在gitee页面右上角选择那个 <code>+</code> 号，选择里面的 <strong>新建仓库</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222312335.png" alt="image-20210902222312335" /><figcaption aria-hidden="true">image-20210902222312335</figcaption>
</figure>
<p>跳转到 <strong>新建仓库</strong> 仓库页面，填写相关信息即可。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222413221.png" alt="image-20210902222413221" /><figcaption aria-hidden="true">image-20210902222413221</figcaption>
</figure>
<p>然后在仓库页面的 <strong>克隆/下载</strong> 处选择 <strong>HTTPS</strong> 源 并 <strong>复制</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222531450.png" alt="image-20210902222531450" /><figcaption aria-hidden="true">image-20210902222531450</figcaption>
</figure>
<h1 id="绑定vscode">绑定VSCode</h1>
<p>在本地新建文件夹，命名和存储路径随意。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222116108.png" alt="image-20210902222116108" /><figcaption aria-hidden="true">image-20210902222116108</figcaption>
</figure>
<p>然后使用VSCode打开该文件夹，如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222631177.png" alt="image-20210902222631177" /><figcaption aria-hidden="true">image-20210902222631177</figcaption>
</figure>
<p>点选左侧树杈型图标，选择 <strong>初始化存储库</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222655162.png" alt="image-20210902222655162" /><figcaption aria-hidden="true">image-20210902222655162</figcaption>
</figure>
<p>在上方 <code>...</code> 处选择 <strong>远程</strong>，<strong>添加远程仓库</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223026835.png" alt="image-20210902223026835" /><figcaption aria-hidden="true">image-20210902223026835</figcaption>
</figure>
<p>粘贴刚刚复制过来的仓库地址。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223107646.png" alt="image-20210902223107646" /><figcaption aria-hidden="true">image-20210902223107646</figcaption>
</figure>
<p>填写远程存储库名称，就是仓库名称。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223222009.png" alt="image-20210902223222009" /><figcaption aria-hidden="true">image-20210902223222009</figcaption>
</figure>
<p>VSCode右下角会出现如下提示，选择 <strong>是</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223253826.png" alt="image-20210902223253826" /><figcaption aria-hidden="true">image-20210902223253826</figcaption>
</figure>
<p>正常来说点选 <strong>拉取</strong> 也是直接可以拉取到远程数据的，但是也可能因为配置错误导致拉取失败，出现如下提示。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223319460.png" alt="image-20210902223319460" /><figcaption aria-hidden="true">image-20210902223319460</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902224720818.png" alt="image-20210902224720818" /><figcaption aria-hidden="true">image-20210902224720818</figcaption>
</figure>
<h1 id="配置本地git参数">配置本地git参数</h1>
<p>如果拉取不成功，仍需要配置以下信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;xxxx&quot;</span></span><br><span class="line">git config --global user.email xxxx@xxx.com</span><br></pre></td></tr></table></figure>
<p>其中xxxx需要替换成个人在gitee网站的用户名和对应的邮箱，如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902224904264.png" alt="image-20210902224904264" /><figcaption aria-hidden="true">image-20210902224904264</figcaption>
</figure>
<h1 id="拉取仓库文件">拉取仓库文件</h1>
<p>如果仍然无法拉取仓库文件，可以在VSCode下按 <code>CTRL</code> + <code>J</code> 或 <code>COMMAND</code> + <code>J</code> 来打开，然后输入如下命令进行 拉取，命令中对应的源需要替换。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull https://gitee.com/xxxx/xxxx.git master</span><br></pre></td></tr></table></figure>
<p>拉取完后如下所示：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902225228260.png" alt="image-20210902225228260" /><figcaption aria-hidden="true">image-20210902225228260</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902225338842.png" alt="image-20210902225338842" /><figcaption aria-hidden="true">image-20210902225338842</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/31/Others/2021-08-31-%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/31/Others/2021-08-31-%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">可靠性工程师笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-31 08:40:00" itemprop="dateCreated datePublished" datetime="2021-08-31T08:40:00+08:00">2021-08-31</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-15 00:00:27" itemprop="dateModified" datetime="2021-10-15T00:00:27+08:00">2021-10-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Others/" itemprop="url" rel="index"><span itemprop="name">Others</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="可靠性概论">可靠性概论</h1>
<p>只有在图纸设计阶段就考虑到使用场景时遇到的问题，再按图生产，才能制造出合格的产品。</p>
<blockquote>
<ul>
<li>1950年12月7日，美国电子设备可靠性专门委员会成立。</li>
<li>1952年8月21日，电子设备可靠性咨询组（AGREE）成立。</li>
<li>1953年，美国兰德公司给出衡量武器系统优劣的七项参数：性能、可靠性、精度、易损性、可操作性、维修性和可用性。</li>
<li>1957年6月，AGREE发表《军用电子设备可靠性》研究报告。</li>
</ul>
</blockquote>
<p>可靠性工程这门学科被认为是自1957年问世的。</p>
<p>1957年6月，AGREE发表的《军用电子设备可靠性》研究报告中，提出一套可靠性设计、试验及管理方法，形成了一套完善的可靠性设计、试验和管理标准。并在新一代产品的研制中，逐渐制定了较为完善的可靠性大纲，规定了定量的可靠性要求，进行了可靠性分配及预计、故障模式及影响分析（FMEA）和故障树分析（FTA），采用了冗余设计，开展了可靠性鉴定试验、验收试验和老炼试验，进行了可靠性评审等。</p>
<blockquote>
<ul>
<li>1970年代，可靠性发展步入成熟阶段。</li>
<li>1980年，美国国防部颁布《（D0DD 5000.40）可靠性及维修性》。</li>
<li>1985年，美国空军推行“可靠性及维修性2000年行动计划”（R&amp;M2000），提出了“可靠性翻一番，维修性减半”的目标。</li>
</ul>
</blockquote>
<h2 id="可靠性定义">可靠性定义</h2>
<p><strong>可靠性</strong> 是指产品在 <strong>规定条件下</strong> 和 <strong>规定时间内</strong>，<mark>完成规定功能</mark> 的能力。</p>
<p><strong>维修性</strong> 是指产品在 <strong>规定条件下</strong> 和 <strong>规定时间内</strong>，按规定的程序和方法维修时，<mark>保持或恢复到规定功能</mark> 的能力。</p>
<h3 id="三个时间点">三个时间点</h3>
<p>如果将产品比作人，那么产品从被研发、生产、出厂、使用到寿命终结的阶段，就好比人受精、怀胎、分娩、成长到死亡的阶段。将整个过程看做一个时间轴 $ t $ ， 那么其中的产品出厂（人的分娩）的时间就为 $ t=0 $，产品被研发和生产（人的受精、怀胎）的阶段，其时间被视为 <span class="math inline">\(t&lt;0\)</span>​， 产品被使用到寿命终结（人的成长到死亡）的阶段，其时间被视为 <span class="math inline">\(t&gt;0\)</span>​ 。这种方法是将产品简单划为三个时间点，例如在 <span class="math inline">\(t&lt;0\)</span>​ 时，研发和预制是两个不同的工作内容或阶段。</p>
<h3 id="三个阶段">三个阶段</h3>
<p>实际上，<span class="math inline">\(t=0\)</span>​ 仅仅是个时间点，在可靠性研究过程中，产品寿命周期通常是按以下三个阶段进行研究：<strong>研发阶段</strong>（<span class="math inline">\(t&lt;0\)</span>​）、<strong>生产制造阶段</strong>（<span class="math inline">\(t&lt;0\)</span>​）和 <strong>使用至报废阶段</strong> （<span class="math inline">\(t&gt;0\)</span>​）。</p>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图1-1 质量与可靠性关系示意图
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
表 质量、可靠性与时间三者的关系
</div>
<table>
<thead>
<tr class="header">
<th></th>
<th>质量的度量</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>t = 0<br>出厂时间</td>
<td>使用产品合格率进行度量</td>
</tr>
<tr class="even">
<td>t &lt; 0<br>研制阶段</td>
<td>提高 <strong>制造过程</strong> 中的一致性和稳定性，以降低不合格率</td>
</tr>
<tr class="odd">
<td>t &gt; 0<br>使用阶段</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="可靠性数学基础">可靠性数学基础</h1>
<p>所有可观测的现象包括 <strong>自然现象</strong> 和 <strong>社会现象</strong>，按照结果的确定性对此类现象进行分类可以分为：<strong>确定现象</strong> 和 <strong>不确定现象</strong>。</p>
<pre class="mermaid">graph LR
现象 --结果确定--> 确定现象
现象 --结果不确定--> 不确定现象 --具有统计规律--> 随机现象
不确定现象 --不具有统计规律--> 未知</pre>
<h2 id="随机">随机</h2>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 38%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="header">
<th>概念</th>
<th>定义</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>随机现象</strong></td>
<td>具有统计规律性的 <strong>不确定现象</strong>。</td>
<td>- 描述 <strong>过程/现象可能性</strong></td>
</tr>
<tr class="even">
<td><strong>随机事件</strong></td>
<td>随机现象的某种 <strong>可能结果</strong>。</td>
<td>- 描述 <strong>结果可能性</strong><br>- 具有不可确定性，即事件真正发生之前不能确定其是否出现。</td>
</tr>
<tr class="odd">
<td><strong>随机试验</strong></td>
<td>研究随机现象中各种 <strong>可能发生的结果的过程</strong>。</td>
<td>- 描述 <strong>研究结果可能性的过程</strong><br>- 试验全部可能结果的集合可确定<br>- 试验条件不变的情况下，试验可以无限重复<br>- 试验的结果以随机的形式发生（实验条件相同，结果可能不同）</td>
</tr>
</tbody>
</table>
<p>随机现象之所以称之为随机现象，是因为现象发生后具有1个以上的可能结果，如果仅有1种结果，则可以称之现象和事件为 <strong>确定现象</strong> 和 <strong>确定事件</strong>。</p>
<p>例如：</p>
<blockquote>
<p>小球会落入某个洞口，小球的总数为2，小球落入洞口的现象是可观察可统计的，但小球确实地落在哪个洞口中具有不确定性，称之为现象。</p>
<p>但小球落入到洞口A或者洞口B，是可以预测到的结果，落入洞口A则称之为事件A，落入洞口B则称之为事件B，总称之为事件。</p>
</blockquote>
<h2 id="频率概率">频率/概率</h2>
<p>每一种随机现象的试验结果用 <strong>事件</strong> 一词来描述，则随机事件有可能在一次试验中可能发生，也可能不发生，其事件的发生可能性使用 <strong>频率</strong> 或 <strong>概率</strong> 来度量。</p>
<p>在相同试验条件下，进行 <span class="math inline">\(n\)</span> 次试验，事件A的出现次数 <span class="math inline">\(m\)</span> 称之为 <strong>频数</strong> ，使用 <strong>试验总次数</strong> <span class="math inline">\(n\)</span> 和 <strong>事件A的频数</strong> <span class="math inline">\(m\)</span>​ 来表示 事件A在所有试验下的 <strong>频率</strong> <span class="math inline">\(P^*(A)\)</span> ： <span class="math display">\[
P^*(A)={m\over n} \tag{频率公式}
\]</span></p>
<p><strong>频率</strong>、<strong>频数</strong>、<strong>频次</strong> 等术语在描述或者度量事件发生的可能性大小时，会因试验总次数太低 或 某个随机事件出现的次数具有波动性而导致不合理，就连以上三个词汇本身在描述时含有一定的随机性。</p>
<p>但在 <strong>大量重复</strong> 某一试验时，频率趋于稳定，此时该稳定值可以称之为随机事件的 <strong>概率</strong> 或 <strong>统计概率</strong>，使用 <span class="math inline">\(P(A)\)</span> 表示。</p>
<p>即，<strong>概率</strong> 和 <strong>频率</strong> 两个词汇在描述随机试验中的事件时，<mark>最大的区别在于该事件频率值是否趋于 <strong>稳定</strong>，或者试验本身的总次数是否已经 <strong>足够大</strong></mark>。</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>频率</th>
<th>概率</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>数学符号</strong></td>
<td><span class="math inline">\(P^*(A)\)</span></td>
<td><span class="math inline">\(P(A)\)</span></td>
</tr>
<tr class="even">
<td><strong>特点</strong></td>
<td>- <strong>试验值</strong>，具有波动性<br>- <strong>近似反映</strong> 事件发生的可能性大小</td>
<td>- <strong>理论值</strong>，由事件的本质属性决定<br>- <strong>精确反映</strong> 事件的可能性大小</td>
</tr>
</tbody>
</table>
<h2 id="概率分布">概率分布</h2>
<p>常用的分布函数由：两点分布、<strong>二项分布</strong>、<strong>泊松分布</strong>、均匀分布、<strong>正态分布</strong>、<strong>对数正态分布</strong>、<strong>指数分布</strong> 和 <strong>威布尔分布</strong> 等。</p>
<p>随机变量按照试验结果的值是否有限或连续可以分为：<strong>离散型随机变量</strong> 和 <strong>连续型随机变量</strong>，其中离散型随机变量在可靠性工程中常见的统计分布类型有 <strong>二项分布</strong> 和 <strong>泊松分布</strong>；连续型随机变量在可靠性工程中常见的统计分布类型有： <strong>指数分布</strong>、<strong>正态分布</strong>、<strong>对数正态分布</strong> 和 <strong>威布尔分布</strong>。</p>
<pre class="mermaid">graph LR
id1[随机变量] --试验结果的值有限--> id2[离散型随机变量]
id1 --试验结果的值连续--> id3[连续型随机变量]
id2 --> 二项分布
id2 --> 泊松分布
id3 --> 正态分布
id3 --> 对数正态分布
id3 --> 指数分布
id3 --> 威布尔分布γ=0</pre>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 39%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">离散型随机变量</th>
<th style="text-align: left;">连续型随机变量</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>可能取值范围</strong></td>
<td style="text-align: left;">可能取值有限</td>
<td style="text-align: left;">给定区间（或无限区间）内可取得任意数值</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>可能取值符号</strong></td>
<td style="text-align: left;"><span class="math inline">\(x_1, x_2,x_3...x_n\)</span></td>
<td style="text-align: left;">[0,∞)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>概率函数</strong>/<strong>分布律</strong><br><em>某点的概率</em></td>
<td style="text-align: left;"><span class="math inline">\(P(X=x_i)=p_i,(i=1,2,3 ... n)\)</span>​</td>
<td style="text-align: left;">/</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>概率密度函数</strong><br><em>概率在点的变化率</em></td>
<td style="text-align: left;">/</td>
<td style="text-align: left;"><span class="math inline">\(f(x)=F&#39;(x)={dF(x)\over dx}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>概率分布函数</strong>/<strong>累积概率函数</strong><br><em>区间内的概率之和</em></td>
<td style="text-align: left;"><span class="math inline">\(F(x)=P(X≤x)=\sum_{x_k≤x}p_k\)</span>​​​</td>
<td style="text-align: left;"><span class="math inline">\(F(x)=P(X≤x)\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>性质</strong></td>
<td style="text-align: left;">- 任意取值变量的概率都在 <code>[0,1)</code> 之间：<span class="math inline">\(0≤P(X=x_i)=p_i＜1\)</span>​​<br>- 所有事件概率总和为 <code>1</code> ：<span class="math inline">\(\sum^n_{i=1}p_i=1\)</span>​</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p><strong>概率密度函数</strong> 或 <strong>概率分布</strong> <mark>反映了随机变量的统计规律</mark>。概率密度函数值反映了概率在该点的变化率，而非该点的概率。</p>
<p>以下需要区分几个概念，什么是 <strong>故障概率函数</strong>、<strong>故障率函数</strong>、<strong>故障概率密度函数</strong>、<strong>故障密度函数</strong>、<strong>可靠度函数</strong>？</p>
<p><strong>故障概率函数</strong>，也称为 <strong>故障率函数</strong>，即 <strong>失败概率函数</strong>，用事件的失败概率进行求解。</p>
<p><strong>故障概率密度函数</strong>，即适用于 连续型随机变量的故障概率函数。</p>
<p>在连续型统计分布中，<code>故障密度函数 = 可靠度函数 * 故障率函数</code>。</p>
<h3 id="离散型随机变量分布">离散型随机变量分布</h3>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 31%" />
<col style="width: 35%" />
<col style="width: 16%" />
<col style="width: 8%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>（故障）概率函数</th>
<th>（故障）（累积）概率分布函数</th>
<th>均值 <span class="math inline">\(\mu\)</span></th>
<th>方差 <span class="math inline">\(\sigma^2\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>二项分布</strong></td>
<td><span class="math inline">\(P(x)=C^x_np^xq^{n-x}\)</span>​​<br><span class="math inline">\(C^x_n = {n!\over x!(n-x)!}\)</span>​</td>
<td><span class="math inline">\(F(x)=\sum ^r_{x=0} C^x_n p^x q^{n-x}\)</span>​<br><span class="math inline">\(C^x_n = {n!\over x!(n-x)!}\)</span></td>
<td><span class="math inline">\(np\)</span></td>
<td><span class="math inline">\(npq\)</span></td>
</tr>
<tr class="even">
<td><strong>泊松分布</strong></td>
<td><span class="math inline">\(P(x)={(np)^x \over x!}e^{-np}\)</span></td>
<td><span class="math inline">\(F(x) = \sum ^r_{x=0} {(np)^x \over x!}e^{-np}\)</span></td>
<td><span class="math inline">\(\lambda\)</span> <br><span class="math inline">\(\lambda = np\)</span></td>
<td><span class="math inline">\(\lambda\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><span class="math inline">\(n\)</span>​ 为 样本量，即抽取样本总数</li>
<li><span class="math inline">\(x\)</span> 或 <span class="math inline">\(r\)</span> ​均为失败数，即抽取样本总数下失败的数量</li>
<li><span class="math inline">\(p\)</span> 为 失败概率</li>
<li><span class="math inline">\(q\)</span> 为 成功概率</li>
</ul>
</blockquote>
<p><strong>需要注意</strong>： <span class="math inline">\(C^x_n = {n!\over x!(n-x)!}\)</span>​​​ ，是为 <strong>总试验次数的累乘</strong>（阶乘）与 （<strong>成功次数的累乘</strong> 和 <strong>失败次数的累乘</strong> 之积） 的商。</p>
<h4 id="二项分布">二项分布</h4>
<p><strong>贝努力试验</strong>：随机变量的基本结果只有两种（成功/失败）的试验。</p>
<p><strong>N重贝努力试验</strong>：随机现象是由N次相同的贝努力试验组成，每次试验结果 <strong>只有两种</strong> 且 <strong>互不影响</strong>。</p>
<p><strong>例题 2-1</strong></p>
<blockquote>
<p>某新产品在规定的生产条件下废品率为 <code>0.2</code> ，从批量较大的产品中随机抽取出 <code>20</code> 个，有 <span class="math inline">\(r\)</span>（<span class="math inline">\(r=0,1,2...,10\)</span>）个废品的概率是多少？</p>
</blockquote>
<p><strong>解</strong>：已知某新产品的的废品与否，可以分为两种独立事件：<strong>成功</strong> 或 <strong>失败</strong>（废品）。且单个产品是否成功或失败不影响下一个产品，即符合N重贝努力试验的要求。使用二项分布概率公式 <span class="math inline">\(P(x)=C^x_np^xq^{n-x}\)</span>​ 代入，随机抽取的20个产品即为 <span class="math inline">\(n\)</span> ，<span class="math inline">\(p\)</span> 为失败的概率，即题目中的 <code>0.2</code> 或 <code>20%</code>，<span class="math inline">\(x\)</span> 则为抽取总数 <code>20</code> 下的失败产品数量，代入可得： <span class="math display">\[
P(X=r)=C^r_{20}0.2^r(1-0.2)^{20-r},r=0,1,2,3...10 \tag{例2-1}
\]</span></p>
<h4 id="泊松分布">泊松分布</h4>
<p>二项分布和泊松分布是不一样的。虽然都是离散型随机变量的分布类型，但是 <mark>二项分布适用于抽样总数小于 <code>20</code> 且 失败概率大于 <code>0.05</code> 的情况</mark>，当抽样数无限大时，使用二项分布公式进行求解计算不了，代码中会出现 <code>-nan</code> 关键字，此时泊松分布可以轻松计算，因此，<mark style="font-weight: 900;">泊松分布被认为是二项分布在大抽样数下的扩展</mark>。</p>
<p>反之，如果将适用于二项分布的数据代入泊松分布公式，虽然能够计算，但是可能会获得异常数据。</p>
<p>即，虽然人为泊松分布是二项分布的在大抽样数下的扩展，但是毕竟公式和理念都不一样，不能够用来互相验证。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902105513439.png" alt="image-20210902105513439" /><figcaption aria-hidden="true">image-20210902105513439</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902105540683.png" alt="image-20210902105540683" /><figcaption aria-hidden="true">image-20210902105540683</figcaption>
</figure>
<p><strong>例题 2-2</strong></p>
<blockquote>
<p>控制台指示灯平均失效率为每小时 <code>0.001</code> 次。如果指示灯的失效数不能超过 <code>2</code> 个，该控制台指示灯工作 <code>500</code> 小时的可靠度是多少？</p>
</blockquote>
<p><strong>解</strong>：结合上方题目和泊松分布的概率公式 <span class="math inline">\(P(x)={(np)^x \over x!}e^{-np}\)</span> 可知，每小时平均失效率即为 失败概率 <span class="math inline">\(p\)</span> ，工作时长500个小时即为抽样总数 <span class="math inline">\(n\)</span> ，而失效灯数不能超过 <code>2</code> 个即为失败数 <code>x</code> ，代入公式可得： <span class="math display">\[
P(x) = {(500·0.001)^x \over x!} ·e^{-500*0.001} = {0.5^x \over x!} ·e^{-0.5} \tag{例2-2 概率函数}
\]</span> 然后求的其 <span class="math inline">\(P(0) + P(1) +P(2)\)</span> 之和： <span class="math display">\[
F(2) = \sum^2_{0}P(x) = {0.5^0 \over 0!} ·e^{-0.5} + {0.5^1 \over 1!} ·e^{-0.5} +{0.5^2 \over 2!} ·e^{-0.5} = 1.625*0.606530 = 0.9856 \tag{例2-2 累积概率分布函数}
\]</span></p>
<h3 id="连续型随机变量分布">连续型随机变量分布</h3>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 30%" />
<col style="width: 31%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="header">
<th>分布形式</th>
<th>故障密度函数 <span class="math inline">\(f(x)\)</span>​</th>
<th>可靠度函数 <span class="math inline">\(R(x)\)</span>​</th>
<th>故障率函数 <span class="math inline">\(\lambda(x)\)</span>​​</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>正态分布</td>
<td><span class="math inline">\(\frac{1}{\sigma\sqrt{2\pi}}e^{-{(x-\mu)^2}/{2\sigma^2}}\)</span>​​</td>
<td><span class="math inline">\(\frac{1}{\sigma\sqrt{2\pi}}\int_x^\infin e^{-{(x-\mu)^2}/{2\sigma^2}} dt\)</span>​</td>
<td><span class="math inline">\(e^{-(x-\mu)^2/(2\sigma)^2} / \int ^\infin _x e^{-(x-\mu)^2/(2\sigma)^2} dt\)</span>​</td>
</tr>
<tr class="even">
<td>对数正态分布</td>
<td><span class="math inline">\(\frac{1}{x\sigma\sqrt{2\pi}}e^{-(lnx-\mu)^2/2\sigma^2}\)</span></td>
<td><span class="math inline">\(\frac{1}{\sigma\sqrt{2\pi}}\int_x^\infin \frac{1}{t}e^{-(lnt-\mu)^2/2\sigma^2} dt\)</span>​​</td>
<td><span class="math inline">\(\frac{1}{x}e^{-(lnt-\mu)^2/(2\sigma)^2}/ \int_x^\infin \frac{1}{t}e^{-(lnt-\mu)^2/(2\sigma)^2} dt\)</span>​​</td>
</tr>
<tr class="odd">
<td>指数分布</td>
<td><span class="math inline">\(λe^{-λx}\)</span></td>
<td><span class="math inline">\(e^{-λx}\)</span></td>
<td><span class="math inline">\(λ\)</span></td>
</tr>
<tr class="even">
<td>威布尔分布</td>
<td>$()<sup>{m-1}e</sup>{-(x/)^m} $​​</td>
<td><span class="math inline">\(e^{-(x/\eta)^m}\)</span></td>
<td><span class="math inline">\(\frac{m}{\eta}(\frac{x}{\eta})^{m-1}\)</span></td>
</tr>
</tbody>
</table>
<h4 id="正态分布">正态分布</h4>
<p>在数学上，<strong>正态分布</strong>（Normal Distribution）利用 <strong>均值</strong> <span class="math inline">\(\mu\)</span>​ 和 <strong>方差</strong> <span class="math inline">\(\sigma^2\)</span>​ 记为 <span class="math inline">\(\Nu(\mu, \sigma^2)\)</span>​​ 。</p>
<p><strong>标准正态分布</strong>：正态分布曲线的 <strong>均值</strong> 为0，<strong>标准差</strong> 为1的正态分布，即 <span class="math inline">\(\mu = 0, \sigma = 1\)</span>​。</p>
<p><strong>一般正态分布</strong>：除标准正态分布以外的正态分布。任何正态分布都可以使用标准正态分布来计算。</p>
<h5 id="一般正态分布">一般正态分布</h5>
<p>正态分布的密度函数 <span class="math inline">\(f(x)\)</span> 为： <span class="math display">\[
\varphi(x) = \frac{1}{\sigma\sqrt{2\pi}}e^{-{(x-\mu)^2}/{2\sigma^2}} \tag{正态密度函数}
\]</span> 正态分布的可靠度函数 <span class="math inline">\(R(x)\)</span> 为： <span class="math display">\[
R(x) = \frac{1}{\sigma\sqrt{2\pi}}\int_x^\infin e^{-{(x-\mu)^2}/{2\sigma^2}} dt \tag{正态可靠度函数}
\]</span></p>
<h5 id="标准正态分布">标准正态分布</h5>
<p>标准正态分布以下简称标正，由于标正的均值为0，标准差为1，即 <span class="math inline">\(\mu = 0, \sigma = 1\)</span> ，代入对应公式可得 <strong>标正密度函数</strong> 记为 <span class="math inline">\(\varphi(z)\)</span> ，<strong>标正累积分布函数</strong> 记为 <span class="math inline">\(\Phi(z)\)</span>​ ，分别如下： <span class="math display">\[
\varphi(z) = \frac{1}{\sqrt{2\pi}} e^{-z^2/2} \tag{标正密度函数}
\]</span></p>
<p><span class="math display">\[
\Phi(z) = \int^z_{-\infin} \varphi(z) \ dz = \frac{1}{\sqrt{2\pi}} \int^z_{-\infin} e^{-z^2/2} \ dz \tag{标正累积分布函数}
\]</span></p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903143312170.png" alt="image-20210903143312170" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903144047691.png" alt="image-20210903144047691" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 标准正态分布密度函数曲线 及 累积曲线
</div>
<p>正态分布的 <strong>可靠度函数</strong> 为： <span class="math display">\[
R(t) = 1-\Phi(\frac{t-\mu}{\sigma}) \tag{正态可靠度函数}
\]</span></p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210903145950111.png" alt="image-20210903145950111" /><figcaption aria-hidden="true">image-20210903145950111</figcaption>
</figure>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 标准正态分布可靠度函数曲线
</div>
<p>总结成下表：</p>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 31%" />
<col style="width: 31%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>密度函数</th>
<th>累积分布函数</th>
<th>可靠度函数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>一般正态</strong></td>
<td><span class="math inline">\(\varphi(x) = \frac{1}{\sigma\sqrt{2\pi}}e^{-{(x-\mu)^2}/{2\sigma^2}}\)</span></td>
<td><span class="math inline">\(\Phi(x) = \frac{1}{\sigma\sqrt{2\pi}} \int^x_{-\infin} e^{-{(x-\mu)^2}/{2\sigma^2}} \ dx\)</span>​​</td>
<td><span class="math inline">\(R(x) = \frac{1}{\sigma\sqrt{2\pi}}\int_x^\infin e^{-{(x-\mu)^2}/{2\sigma^2}}\)</span></td>
</tr>
<tr class="even">
<td><strong>标准正态</strong></td>
<td><span class="math inline">\(\varphi(z) = \frac{1}{\sqrt{2\pi}} e^{-z^2/2}\)</span></td>
<td><span class="math inline">\(\Phi(z) = \int^z_{-\infin} \varphi(z) \ dz = \frac{1}{\sqrt{2\pi}} \int^z_{-\infin} e^{-z^2/2} \  dz\)</span>​</td>
<td><span class="math inline">\(R(t) = 1-\Phi(\frac{t-\mu}{\sigma})\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<p>正态分布的重要参数有以下几个：</p>
<ol type="1">
<li>工作时长 <span class="math inline">\(x\)</span></li>
<li>均值 <span class="math inline">\(\mu\)</span></li>
<li>标准差 <span class="math inline">\(\sigma\)</span></li>
</ol>
</blockquote>
<p><strong>需要注意的是</strong>：</p>
<ul>
<li><strong>一般正态密度函数</strong> 的符号记为 <span class="math inline">\(f(x)\)</span>​ ，<strong>标准正态密度函数</strong> 的符号记为小写的希腊字母 <span class="math inline">\(\varphi(z)\)</span>​。</li>
<li>一般其他分布的 <strong>累积分布函数</strong> 为 大写的 <span class="math inline">\(F(x)\)</span> 。</li>
<li><strong>标正累积分布函数</strong> 的符号记为大写的希腊字母 <span class="math inline">\(\Phi(z)\)</span>​​​​ ，与 <strong>标正密度函数</strong> 的符号发音一致，<mark style="font-weight: 900;">标正累积分布函数的值计算较为麻烦，可以通过查表获得</mark>。</li>
<li><mark>就标正比较特殊，需要全部用希腊字母</mark>。</li>
<li>因为 <strong>标正累积分布函数</strong> 和 <strong>标正可靠度函数</strong> 的曲线互为水平翻转。</li>
</ul>
<p><strong>例题 2-3</strong></p>
<blockquote>
<p>假设发电机的寿命服从正态分布，其均值为300小时，标准差为40小时。试求当工作时间为250小时时，发电机的可靠度是多少？</p>
</blockquote>
<p><strong>解</strong>：已知均值 <span class="math inline">\(u = 300\)</span> ，标准差 <span class="math inline">\(\sigma = 40\)</span> 且 工作时长为 <code>250</code> 小时，可代入正态可靠度函数进行求解，如下： <span class="math display">\[
R(t) = 1- \Phi(\frac{t-\mu}{\sigma}) = 1-\Phi(\frac{250-300}{40}) = 1 - \Phi(-1.25) \tag{例2-3 正态分布可靠度函数}
\]</span> 其中，<span class="math inline">\(\Phi(-1.25)\)</span>​​ 和 <span class="math inline">\(\Phi(1.25)\)</span>​​ 互补（和为 <code>1</code>），可以通过查询标准正态累积分布表 或使用 自行编写的函数进行计算，可得 <span class="math inline">\(\Phi(1.25) = 0.89\)</span>​​ ，则发电机的可靠度为: <span class="math display">\[
R(250) = 1-(1-\Phi(1.25)) = 1 - (1-0.89) = 0.89 \tag{例2-3 可靠度计算}
\]</span></p>
<h5 id="正态分布的特性">正态分布的特性</h5>
<ol type="1">
<li><span class="math inline">\(\Phi(x)\)</span> 和 <span class="math inline">\(\Phi(-x)\)</span> 为 <strong>互补关系</strong>，即 <span class="math inline">\(\Phi(x) + \Phi(-x) =1\)</span>​</li>
<li>在 <strong>标准正态分布</strong> 下，<strong>可靠度</strong> 和 <strong>累积分布值</strong> 互补为1， <span class="math inline">\(R(t) = 1-\Phi(t)\)</span>​，在 <strong>一般正态分布</strong> 下，需要注意加入 <strong>均值</strong> <span class="math inline">\(\mu\)</span> 和 <strong>标准差</strong>​ <span class="math inline">\(\sigma\)</span>​​ 。</li>
</ol>
<h5 id="正态分布的用途">正态分布的用途</h5>
<p>在可靠性工程中，正态分布具有以下三种用途：</p>
<ol type="1">
<li>分析由于磨损发生故障的产品，如机械装置。</li>
<li>对制造的产品及其性能是否符合规范进行分析。</li>
<li>用于机械可靠性概率设计。</li>
</ol>
<h4 id="对数正态分布">对数正态分布</h4>
<p><strong>对数正态分布</strong>（Logarithmic Normal Distribution） 是 正态分布随机变量的 <strong>自然对数</strong> <span class="math inline">\(y = ln(x)\)</span>​​​​ ，记为 <span class="math inline">\(LN(\mu, \sigma^2)\)</span>​​​​​​。</p>
<p><strong>特点</strong>：使用 对数正态分布 的对数变换 可以使得较大的数缩小为较小的数，且越大的数缩小的越明显。好处是使得较为分散的数据通过对数变换后，可以相对地集中起来，所以常把 <mark style="font-weight: 900;">跨几个数量级的数据用对数正态分布区拟合</mark>（如下方例题2-4）。</p>
<p><strong>适用产品/场景</strong>：<strong>半导体器件</strong> 的可靠性分析、<strong>机械零件</strong> 的疲劳寿命分析 或 在 <strong>维修性分析</strong> 中对维修时间数据的分析。</p>
<p>对数正态分布的密度函数如下，需要注意，该函数的取值范围为 <span class="math inline">\([0,\infin)\)</span>​ <span class="math display">\[
f(x)=\frac{1}{x\sigma\sqrt{2\pi}}e^{-(lnx-\mu)^2/2\sigma^2}\tag{对数正态分布密度函数}
\]</span></p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903171208666.png" alt="image-20210903171208666" style="zoom: 80%;" /><img src="https://pic.islet.space/2021/09/image-20210903170823326.png" alt="image-20210903170823326" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 标准对数正态分布密度函数曲线 及 累积曲线
</div>
<blockquote>
<p><strong>注意</strong>：应该是没有标准对数正态分布的吧，就代入 <span class="math inline">\(\mu = 0, \sigma = 1\)</span>​ 进行计算求得图像</p>
</blockquote>
<p>对数正态累积分布函数如下： <span class="math display">\[
F(x) = \frac{1}{\sigma \sqrt{2\pi}} \int^x_0 \frac{1}{t} e^{-{(lnt-\mu)^2}/{2\sigma^2}} \ dt \tag{对数正态累积分布函数}
\]</span> 其可靠度函数如下： <span class="math display">\[
R(x) = 1 - \Phi(\frac{ln(x)-\mu}{\sigma}) \tag{对数正态分布可靠度函数}
\]</span> 其中，<span class="math inline">\(ln(x)\)</span>​​ 和 <span class="math inline">\(x\)</span>​​ 的均值和方差如下：</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 39%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>均值</th>
<th>方差</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(ln(x)\)</span></td>
<td><span class="math inline">\(\mu\)</span></td>
<td><span class="math inline">\(\sigma^2\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(x\)</span></td>
<td><span class="math inline">\(E(x)=exp(\mu + \frac{\sigma^2}{2})\)</span>​</td>
<td><span class="math inline">\(Var(x)=exp(2\mu + \sigma^2) · [exp(\sigma^2)-1]\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<p>对数正态分布的重要参数有以下几个：</p>
<ol type="1">
<li>工作时长 <span class="math inline">\(x\)</span></li>
<li>均值 <span class="math inline">\(\mu\)</span></li>
<li>标准差 <span class="math inline">\(\sigma\)</span></li>
</ol>
</blockquote>
<p><strong>例题 2-4</strong></p>
<blockquote>
<p>假设人们观察到炮管寿命服从对数正态分布，<span class="math inline">\(\mu = 9,\sigma = 2\)</span>。（注意，<span class="math inline">\(\mu\)</span> 和 <span class="math inline">\(\sigma\)</span> 是 <span class="math inline">\(ln(x)\)</span> 的均值和标准差）求发射1000发炮弹时的可靠度。</p>
</blockquote>
<p><strong>解</strong>：</p>
<p><strong>情况一</strong>：已知对数正态分布可靠度表格</p>
<p>在已知表格时，直接代入公式，然后查表计算即可。 <span class="math display">\[
R(1000)=1-\Phi(\frac{ln1000-9}{2}) = 1-\Phi(-1.046) = 1-0.15 = 0.85 \tag{例2-4 可靠度计算}
\]</span> <strong>情况二</strong>：未知对数正态分布可靠度表格</p>
<p>在没有对数正态分布可靠度值表格可查询的情况下，是没有办法直接得出答案的。正常的思路如下：</p>
<ol type="1">
<li>将 <span class="math inline">\(\mu=9, \sigma=2\)</span> 代入密度公式 <span class="math inline">\(f(x)\)</span></li>
<li>然后在区间 <span class="math inline">\((0,1000]\)</span>​ 内进行积分，通过累计分布函数 <span class="math inline">\(\Phi(1000)\)</span> ，可以得到其特定区间内的累积分布值。</li>
<li>然后使用 <code>1</code> 减去该累积分布值即可获得该可靠度值 <span class="math inline">\(R(1000)\)</span>。</li>
</ol>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903165737856.png" alt="image-20210903165737856" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903165632407.png" alt="image-20210903165632407" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 例题的对数正态累积分布曲线和可靠度曲线
</div>
<p>上面两个图片是经由C++函数计算并使用gnuplot进行绘制的，实际计算得到本例题的 <span class="math inline">\(\Phi(1000) = 0.14781, R(1000)= 0.85219\)</span>​</p>
<p>无聊着又稍微拟合了该产品在工作到 <code>100,000</code> 小时时的 <strong>可靠度曲线</strong> 和 工作到 <code>10,000</code> 小时时的 <strong>密度曲线</strong>。</p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903172937541.png" alt="image-20210903172937541" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903195121209.png" alt="image-20210903195121209" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 工作到10万小时的炮管的可靠度曲线 和 工作到1万小时的炮管的密度曲线
</div>
<h4 id="指数分布">指数分布</h4>
<p><strong>指数分布</strong>（Exponential Distribution） 是可靠性工程中最重要的一种分布。</p>
<p>当产品工作进入浴盆曲线的偶然故障期后，产品的故障率基本接近常数，其对应的故障分布函数就是指数分布。</p>
<p><strong>优点</strong>：</p>
<ul>
<li>参数估计简单容易，只有一个变量；</li>
<li>在数学上非常容易处理；</li>
<li>适用范围非常广；</li>
<li>大量指数分布的独立变量之和还是指数分布，具有可加性。</li>
</ul>
<p><strong>性质</strong>：</p>
<ul>
<li>指数分布的失效率 <span class="math inline">\(\lambda\)</span> 等于 <strong>常数</strong>；</li>
<li>指数分布的 <strong>平均寿命</strong> <span class="math inline">\(\theta\)</span> 和 <strong>失效率</strong> <span class="math inline">\(\lambda\)</span> 互为倒数，即 <span class="math inline">\(\theta = 1/\lambda\)</span> ；</li>
<li>指数分布“无记忆性”。（<strong>无记忆性</strong> 是指故障分布为指数分布的系统的失效率，在任何时刻都与系统已工作过的时间长短没有关系。）</li>
</ul>
<p>指数分布的密度函数如下： <span class="math display">\[
f(x) = \left\{ 
\displaylines{\lambda e^{-\lambda x}, x ≥ 0\\ 0,x &lt; 0} 
\right. \tag{指数分布密度函数}
\]</span> 其累积失效分布函数为： <span class="math display">\[
F(x) = 1 - e^{-\lambda x} \tag{指数累积分布函数}
\]</span> 其可靠度函数为： <span class="math display">\[
R(x)=e^{-\lambda x} \tag{指数分布可靠度函数}
\]</span></p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903190717009.png" alt="image-20210903190717009" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903191446082.png" alt="image-20210903191446082" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 故障率为100 和 故障率为0.01的指数分布密度函数曲线
</div>
<blockquote>
<p>上图为错误例子啊，因为故障率 <span class="math inline">\(\lambda = 100\)</span>​​​ 时已经高得离谱，且故障率和平均工作时长是呈反比的，故障率为 <code>100</code> 的话，就是说大概只能工作 <code>0.01</code> 小时（大概 <code>36</code> s），所以会看到该 <strong>密度曲线</strong> 在x轴没到0.1就飞降。把故障率修改为 <code>0.01</code>，即大概能工作100个小时，就可以看到较为 <strong><em>正常</em></strong> 的密度曲线了。</p>
</blockquote>
<p>如果要求其可靠度曲线，则用 <strong>密度值</strong> <span class="math inline">\(F(x)\)</span> 除以 <strong>故障率</strong> <span class="math inline">\(\lambda\)</span>​ 即可，曲线如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210903193144464.png" alt="image-20210903193144464" /><figcaption aria-hidden="true">image-20210903193144464</figcaption>
</figure>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 故障率为0.01的指数分布可靠度函数曲线
</div>
<p><strong>例题 2-5</strong></p>
<blockquote>
<p>机载火控系统的平均故障间隔时间是 <code>100</code> 小时，即 <span class="math inline">\(\theta = 100\)</span>​ 小时，工作5小时不发生故障的概率是多少？</p>
</blockquote>
<p><strong>解</strong>：由题目已知 <span class="math inline">\(\theta = 100\)</span> ， 即 <span class="math inline">\(\lambda = 0.01\)</span> ，要求的是工作5小时不发生故障的概率，即求可靠度。</p>
<p>代入指数分布可靠度公式 <span class="math inline">\(R(x)=e^{-\lambda x}\)</span> 即可求得 <code>0.951229</code>，即 <code>95.12%</code> 。</p>
<h4 id="威布尔分布">威布尔分布</h4>
<p><strong>威布尔分布</strong>（Weibull Distribution）是由 <strong>最弱环节模型</strong> 导出的，如链条的寿命就服从威布尔分布。</p>
<p>威布尔分布 是 <strong>通用分布</strong> ，通过调整分布参数可以构成各种不同的分布，可以为各种不同类型的产品的寿命特性建立模型。</p>
<p>威布尔分布既包括 故障率 为常数的模型，也包括故障率随时间变化的 <strong>递减</strong>（早期故障）和 <strong>递增</strong>（损耗故障）模型，因而可以描述更为复杂的失效过程。许多产品的故障率是单调递增的，威布尔分布可以很好地描述产品疲劳、磨损等损耗故障。</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 45%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>两参数公式</th>
<th>三参数公式</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>概率密度函数</td>
<td><span class="math inline">\(f(t)=\frac{m}{\eta}(\frac{t}{\eta})^{m-1}exp[-(\frac{t}{\eta})^m]\)</span></td>
<td><span class="math inline">\(f(t)=\frac{m}{\eta}(\frac{t-\gamma}{\eta})^{m-1}exp[-(\frac{t-\gamma}{\eta})^m]\)</span></td>
</tr>
<tr class="even">
<td>累积分布函数</td>
<td><span class="math inline">\(F(t)=1-exp[-(\frac{t}{\eta})^m]\)</span>​</td>
<td><span class="math inline">\(F(t)=1-exp[-(\frac{t-\gamma}{\eta})^m]\)</span></td>
</tr>
<tr class="odd">
<td>可靠度函数</td>
<td><span class="math inline">\(R(t)=exp[-(\frac{t}{\eta})^m]\)</span></td>
<td><span class="math inline">\(R(t)=exp[-(\frac{t-\gamma}{\eta})^m]\)</span></td>
</tr>
<tr class="even">
<td>故障率函数</td>
<td><span class="math inline">\(\lambda(t)=\frac{m}{\eta}(\frac{t}{\eta})^{m-1}\)</span></td>
<td><span class="math inline">\(\lambda(t)=\frac{m}{\eta}(\frac{t-\gamma}{\eta})^{m-1}\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<p>威布尔分布的重要参数有以下几个：</p>
<ol type="1">
<li>随机变量 <span class="math inline">\(t\)</span> ，<span class="math inline">\(t≥0\)</span>（两参数），<span class="math inline">\(t≥\gamma\)</span>​（三参数）</li>
<li>无量纲 形状参数 <span class="math inline">\(m,\ m&gt;0\)</span>​​</li>
<li>尺度参数 <span class="math inline">\(\eta,\ \eta&gt;0\)</span>​​</li>
<li>位置参数 <span class="math inline">\(\gamma, \ \gamma&gt;0\)</span></li>
</ol>
<p>除形状参数 <span class="math inline">\(m\)</span> 以外，其他参数单位相同。</p>
</blockquote>
<p><strong>例题 2-6</strong></p>
<blockquote>
<p>人们发现某种特定的发射管的失效时间服从威布尔分布，其中 <span class="math inline">\(m=2, \eta = 1000\)</span> 小时，试确定当任务时间为100小时时这种发射管的可靠度。</p>
</blockquote>
<p><strong>解</strong>：</p>
<p>威布尔分布除了时间 <span class="math inline">\(t\)</span> 以外，就只剩下三个参数，而题目中并无使用位置参数 <span class="math inline">\(\gamma\)</span> ，因此直接代入可靠度公式进行求解即可： <span class="math display">\[
R(x) =exp[-(\frac{t-\gamma}{\eta})^m] = e^{-(t/\eta)^m}  \tag{例2-6 可靠度求解}
\]</span> 得到该产品在工作时长为100小时时的可靠度为： <span class="math display">\[
R(100) = e^{-(100/1000)^2} = e^{-0.01} = 0.990049 ≈ 99\%
\]</span></p>
<p>使用C++驱动GNUPLOT拟合该曲线至 <span class="math inline">\(t=3000\)</span>​​ 时的 <strong>可靠度曲线</strong> 和 <strong>累积曲线</strong> 如下：</p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903201848206.png" alt="image-20210903201848206" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903203111178.png" alt="image-20210903203111178" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 例题2-6 威布尔分布的 可靠度曲线 和 累积曲线
</div>
<h2 id="参数估计">参数估计</h2>
<p>可靠性工程中，<strong>数理统计</strong> 是进行数据整理和分析的基础，<mark>其基本内容是统计推断</mark>。</p>
<p><mark>随机变量的概率分布虽然能很好地描述随机分布，但是通常不能对研究对象的总体都进行观测和试验</mark>，只能从中随机地抽取一部分子样进行观察和试验，获得必要的数据，对齐进行分析处理，然后对总体的 <strong>分布类型</strong> 和 <strong>参数</strong> 进行推断。</p>
<h3 id="抽样相关概念">抽样相关概念</h3>
<p><strong>总体</strong>：也称为 <strong>母体</strong>，研究对象的全体。</p>
<p><strong>个体</strong>：组成总体的每个基本单元。</p>
<p><strong>样本</strong>：也称为 <strong>子样</strong>，在总体中随机抽取的部分个体。</p>
<p><strong>样本值</strong>：在每次抽样后测得的具体数值（记为 <span class="math inline">\(x_1, x_2, x_3 ... x_n\)</span>）。</p>
<p><strong>样本容量</strong>：样本所包含的个体数目（记为 <span class="math inline">\(n\)</span>）。</p>
<p><strong>随机抽样</strong>：不掺入人为主观因素而具有随机性的抽样，即具有 <strong>代表性</strong> 和 <strong>独立性</strong> 的抽样。</p>
<p><strong>样本统计量</strong>：是指子样 <span class="math inline">\(x_1, x_2, ..., x_n\)</span> 是从母体 <span class="math inline">\(X\)</span> 中随机抽取出来后，进一步提炼和加工后的统计量，如 <strong>均值</strong> <span class="math inline">\(\overline x\)</span> 、<strong>方差</strong> <span class="math inline">\(S^2\)</span>、<strong>极差</strong> <span class="math inline">\(R\)</span>​​</p>
<p>子样之所以很宝贵，是因为包含了母体的各种信息，尚未对子样进一步提炼和加工处理前，母体的各种信息仍分散在子样中，子样经过加工成一些统计量之后可以反映出一些信息，如：<strong>均值</strong> 反映了母体数学期望信息，<strong>方差</strong> 反映了母体方差信息，<strong>极差</strong> 粗略地反映了母体分散程度，但不能直接用于估计母体的方差。下方为统计量的一些概念。</p>
<h3 id="统计量相关概念">统计量相关概念</h3>
<p><strong>均值</strong>：反映了母体数学期望的信息，表示为 <span class="math inline">\(\overline x =\frac{1}{n} \sum^n_{i=1}x_i\)</span>​​</p>
<p><strong>平均差</strong>：平均差是表示各个变量值之间差异程度的数值之一。指各个变量值同平均数的离差绝对值的算术平均数。</p>
<p><strong>方差</strong>：方差是在概率论和统计方差衡量随机变量或一组数据时离散程度的度量。概率论中方差用来度量随机变量和其数学期望（即均值）之间的偏离程度。统计中的方差（样本方差）是每个样本值与全体样本值的平均数之差的平方值的平均数，表示为 <span class="math inline">\(S^2=\frac{1}{n-1}\sum ^n_{i=1}(x_i-\overline x)^2\)</span>​ 。</p>
<p><strong>标准差</strong>：是离均差平方的算术平均数的平方根，是方差的算术平方根，表示为 <span class="math inline">\(\sigma=\sqrt{S^2}\)</span> 。</p>
<p><strong>极差</strong>：极差又称范围误差或全距(Range)，以 <span class="math inline">\(R\)</span>​ 表示，是用来表示统计资料中的变异量数(measures of variation)，其最大值与最小值之间的差距，即最大值减最小值后所得之数据。是指一组数据内的最大值和最小值之间的差异，表示为 <span class="math inline">\(R=max(x_1,x_2, ..., x_n)-min(x1, x2, ..., xn)\)</span> 。</p>
<h4 id="分布参数的点估计">分布参数的点估计</h4>
<p>如果 <span class="math inline">\(X\)</span> 是一个具有概率分布 <span class="math inline">\(f(x)\)</span> 的随机变量，样本容量为 <span class="math inline">\(n\)</span>，样本值为 <span class="math inline">\(x_1, x_2, ..., x_n\)</span> ，则与其位置参数 <span class="math inline">\(\theta\)</span> 相应的统计量 <span class="math inline">\(\hat{\theta }\)</span> 的估计值。</p>
<p>此处，<span class="math inline">\(\hat{\theta}\)</span> 是一个随机变量，因为它是样本数据的函数。在样本已经选好之后，就能得到一个确定的 <span class="math inline">\(\hat{\theta}\)</span> 值，就是 <span class="math inline">\(\theta\)</span> 的点估计。</p>
<h5 id="点估计的解析法">点估计的解析法</h5>
<p>在点估计的解析法中，有很多方法可以选择，如 矩法、最小二乘法、极大似然法、最好线性无偏估计、最好线性不变估计、简单线性无偏估计 和 不变估计。以上方法的特点如下：</p>
<ul>
<li>矩法只适用于完全样本；</li>
<li>最好线性无偏估计 和 不变估计 已有国家标准《GB 2689.4-1981 寿命试验和加速寿命试验的最好线性无偏估计法（用于威布尔分布）》，但只适用于定数截尾情况，在一定样本量下有专用表格；</li>
<li>极大似然法和最小二乘法适用于所有情况，极大似然法是精度最好的方法。</li>
</ul>
<h5 id="极大似然法">极大似然法</h5>
<p>极大似然估计（Maximum Likelihood Estimate, MLE）是一种重要的估计方法，利用总体分布函数表达式及样本数据两种信息来建立似然函数。</p>
<p><strong>特点</strong>：具有一致性、有效性 和 渐近无偏性 等优良性质。</p>
<p><strong>缺点</strong>：求解方法最为复杂，需要用迭代法并借助计算机求解。</p>
<h4 id="分布参数的区间估计">分布参数的区间估计</h4>
<p><strong>区间估计</strong>：在实际问题中，对于未知参数 <span class="math inline">\(\theta\)</span> ，并不一定求出其点估计值 <span class="math inline">\(\hat{\theta}\)</span> 为满足，仍希望求出其范围，并希望知道该范围包含未制参数 <span class="math inline">\(\theta\)</span> 真值的置信概率的估计。</p>
<p><strong>置信区间</strong>：表示计算估计的精确程度</p>
<p><strong>置信度</strong>：是样品的试验结果在母体的概率分布参数（如均值或标准差）的某个区间内出现的概率，表示结果的可信性。</p>
<p>与置信度不同，可靠度 是指 样品在规定条件下和规定时间内正常工作的概率，反映的是产品本身的质量状况。</p>
<h1 id="可靠性设计与分析">可靠性设计与分析</h1>
<h1 id="gitee项目分享">Gitee项目分享</h1>
<p>适用于《可靠性工程师手册》的数学函数已经开源共享至Gitee，依托于 GNUPLOT 的图形绘制能力，可以轻松查看各种函数的曲线形状，十分方便。</p>
<h1 id="math-for-reliability">Math-For-Reliability</h1>
<p>在Gitee上的开源项目，开放给所有学习可靠性的人使用。</p>
<p>Gitee项目地址：https://gitee.com/tonyliew/math-for-reliability</p>
<h1 id="debug_records">DEBUG_RECORDS</h1>
<h2 id="section">20210902-01</h2>
<p>在Linux上运行标准正态累积分布计算函数，其计算结果与标准正态分布表方向相反了。<span class="math inline">\(x = 0\)</span>​​ 时的 <span class="math inline">\(\Phi(x)\)</span>​​ 值本应为0.5，结果和 <span class="math inline">\(x = 5\)</span>​​ 时的 <span class="math inline">\(\Phi(x)\)</span>​​​​ 值相反。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902193634846.png" alt="image-20210902193634846" /><figcaption aria-hidden="true">image-20210902193634846</figcaption>
</figure>
<p>一番检查发现积分函数可能不适用</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902194119411.png" alt="image-20210902194119411" /><figcaption aria-hidden="true">image-20210902194119411</figcaption>
</figure>
<p>经过“校准”一番，终于修改好了，不知道还会不会卡Bug。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902194157770.png" alt="image-20210902194157770" /><figcaption aria-hidden="true">image-20210902194157770</figcaption>
</figure>
<p>目前可以计算x值为正时的累积分布值，结果与标准正态分布表一致。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902194241093.png" alt="image-20210902194241093" /><figcaption aria-hidden="true">image-20210902194241093</figcaption>
</figure>
<p>重新解答完 2-3例题，发现知道了修改bug的方法，也只是补上了而已，哈哈哈哈。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902200537224.png" alt="image-20210902200537224" /><figcaption aria-hidden="true">image-20210902200537224</figcaption>
</figure>
<p>经过验证，结果正确。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902200910935.png" alt="image-20210902200910935" /><figcaption aria-hidden="true">image-20210902200910935</figcaption>
</figure>
<p>9月3日订正，为了生成标准正态累积分布的图形，发现带负号的 <code>integral()</code> 函数生成曲线时是 <strong>水平翻转</strong> 的。</p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903144047691.png" alt="image-20210903144047691" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903145950111.png" alt="image-20210903145950111" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 标准正态分布的 累积（故障）函数曲线 和 可靠度函数曲线 互为水平翻转
</div>
<p>仔细思考后发现，标准正态函数下，<strong>可靠度曲线值</strong> 是和 <strong>累积分布函数曲线</strong> 值各点互补为 <code>1</code> 的，很容易将累积分布函数和可靠度函数互相搞混，因此其图像才会互为 <strong>水平翻转</strong>，修改后的标正累积分布函数代码如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210903144813581.png" alt="image-20210903144813581" /><figcaption aria-hidden="true">image-20210903144813581</figcaption>
</figure>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《可靠性工程师手册（第二版）》中国人名大学出版社 李良巧主编</li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/266435689">概率分布函数、概率密度函数</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/21/Others/2021-08-21-LaTex%E5%85%AC%E5%BC%8F%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/21/Others/2021-08-21-LaTex%E5%85%AC%E5%BC%8F%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">LaTex公式入门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-21 09:50:00" itemprop="dateCreated datePublished" datetime="2021-08-21T09:50:00+08:00">2021-08-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-05 14:36:56" itemprop="dateModified" datetime="2021-10-05T14:36:56+08:00">2021-10-05</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Others/" itemprop="url" rel="index"><span itemprop="name">Others</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<h1 id="公式书写">公式书写</h1>
<p>Typora虽然是支持Markdown出名，但是也支持LaTex公式，需要在Typora的设置中打开相关选项</p>
<h2 id="typora设置">Typora设置</h2>
<ol type="1">
<li><p>在Typora的偏好设置 下，选择 Markdown 选项，勾选 <code>內联公式（例：$\LaTeX$）</code> 选项和 <code>自动添加序号</code> 选项（此项可不选）</p></li>
<li><p>在 “<strong>当复制或导出为无格式的HTML时</strong>” 选择 “<strong>使用LaTeX代码</strong>”</p></li>
</ol>
<p><img src="https://pic.islet.space/2021/09/image-20210904111919668.png" alt="image-20210904111919668" style="zoom:80%;" /></p>
<h2 id="书写方法">书写方法</h2>
<p>设置完毕后，即可进入公式书写。</p>
<p>在使用Typora的Markdown语法来编辑LaTex公式，本身LaTex就与Markdown语法存在一定的冲突，但在Pandoc（Typora使用的效果渲染器）的加持下，显示效果较好，但公式写得多了或者书写过程中可能仍会存在一定的显示延迟（解决办法是：暂时没有）。</p>
<p>以下全程默认使用Typora编辑器。</p>
<p>使用LaTex支持两种书写方式，<strong>行模式</strong> 和 <strong>块模式</strong> ，对应的通用叫法是 <strong>内联公式</strong>（行内公式，inline） 和 <strong>块公式</strong>（block）。这里需要一点HTML5的知识，就是该公式是可以被存放在文字中间的，还是独占一行的，存放在文字中间的叫 <strong>内联</strong>，如 <span class="math inline">\(f(x)=x^2\)</span> ，独占一行的叫 <strong>块</strong>，如： <span class="math display">\[
f(x)= \lambda e^{-\lambda x} \tag{样例公式}
\]</span></p>
<h3 id="内联公式">内联公式</h3>
<p>书写内联公式时，只需要在同一行文字内书写两个美元符号 <code>$$</code> ，然后再两个美元符号中间书写内容即可。</p>
<p>尝试复制粘贴右侧文字到typora吧： <code>$f(x)= x^2$</code>​</p>
<h3 id="块公式">块公式</h3>
<p>块公式需要在独占一行时书写 <code>$$</code>，然后按回车键，即可进入块编辑模式，编辑框如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210904113516554.png" alt="image-20210904113516554" /><figcaption aria-hidden="true">image-20210904113516554</figcaption>
</figure>
<p>不管是内联公式还是快公式都是支持实时编辑和实时显示的。</p>
<h1 id="基础符号">基础符号</h1>
<table>
<thead>
<tr class="header">
<th>中文</th>
<th>样式</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>上标</td>
<td><span class="math inline">\(X^2\)</span><br><span class="math inline">\(X^{log(10)}\)</span></td>
<td>X<sup>2<br>X</sup>{log(10)}</td>
</tr>
<tr class="even">
<td>下标</td>
<td><span class="math inline">\(X_i\)</span><br><span class="math inline">\(X_{a-b}\)</span></td>
<td><code>X_i</code> 和 <code>X_&#123;a-b&#125;</code></td>
</tr>
<tr class="odd">
<td>积分符号</td>
<td><span class="math inline">\(\int\)</span></td>
<td><code>\int</code></td>
</tr>
<tr class="even">
<td>无限</td>
<td><span class="math inline">\(\infin\)</span></td>
<td><code>\infin</code></td>
</tr>
<tr class="odd">
<td>平均值符号</td>
<td><span class="math inline">\(\overline x\)</span></td>
<td><code>\overline x</code></td>
</tr>
<tr class="even">
<td>帽子符号</td>
<td><span class="math inline">\(\hat{a}\)</span></td>
<td><code>\hat&#123;a&#125;</code></td>
</tr>
<tr class="odd">
<td></td>
<td><span class="math inline">\(\widehat{a}\)</span></td>
<td><code>\widehat&#123;a&#125;</code></td>
</tr>
<tr class="even">
<td></td>
<td><span class="math inline">\(\acute{a}\)</span></td>
<td><code>\acute&#123;a&#125;</code></td>
</tr>
<tr class="odd">
<td></td>
<td><span class="math inline">\(\grave{a}\)</span></td>
<td><code>\grave&#123;a&#125;</code></td>
</tr>
<tr class="even">
<td></td>
<td><span class="math inline">\(\bar{a}\)</span></td>
<td><code>\bar&#123;a&#125;</code></td>
</tr>
<tr class="odd">
<td></td>
<td><span class="math inline">\(\dot{a}\)</span></td>
<td><code>\dot&#123;a&#125;</code></td>
</tr>
<tr class="even">
<td></td>
<td><span class="math inline">\(\ddot{a}\)</span></td>
<td><code>\ddot&#123;a&#125;</code></td>
</tr>
<tr class="odd">
<td>短波浪号</td>
<td><span class="math inline">\(\tilde{A_2}\)</span></td>
<td><code>\tilde&#123;A_2&#125;</code></td>
</tr>
<tr class="even">
<td>长波浪号</td>
<td><span class="math inline">\(\widetilde{A_2}\)</span></td>
<td><code>\widetilde&#123;A_2&#125;</code></td>
</tr>
<tr class="odd">
<td>上左箭头</td>
<td><span class="math inline">\(\overleftarrow{N}\)</span></td>
<td><code>\overleftarrow&#123;N&#125;</code></td>
</tr>
<tr class="even">
<td>上右箭头</td>
<td><span class="math inline">\(\overrightarrow{N}\)</span></td>
<td><code>\overrightarrow&#123;N&#125;</code></td>
</tr>
<tr class="odd">
<td>下左箭头</td>
<td><span class="math inline">\(\underleftarrow{N}\)</span>​</td>
<td><code>\underleftarrow&#123;N&#125;</code></td>
</tr>
<tr class="even">
<td>下右箭头</td>
<td><span class="math inline">\(\underrightarrow{N}\)</span>​</td>
<td><code>\underrightarrow&#123;N&#125;</code></td>
</tr>
<tr class="odd">
<td>限制下标</td>
<td><span class="math inline">\(\mathop{a}\limits_{i=1}\)</span></td>
<td><code>\mathop&#123;a&#125;\limits_&#123;i=1&#125;</code></td>
</tr>
<tr class="even">
<td>分子式</td>
<td><span class="math inline">\(\frac{1}{2}\)</span></td>
<td><code>\frac&#123;1&#125;&#123;2&#125;</code></td>
</tr>
<tr class="odd">
<td>根号</td>
<td><span class="math inline">\(\sqrt{2\pi}\)</span></td>
<td><code>\sqrt&#123;2\pi&#125;</code></td>
</tr>
<tr class="even">
<td>求和符号</td>
<td><span class="math inline">\(\sum\)</span></td>
<td><code>\sum</code></td>
</tr>
<tr class="odd">
<td>三角符号</td>
<td><span class="math inline">\(\triangle\)</span></td>
<td><code>\triangle</code></td>
</tr>
</tbody>
</table>
<h1 id="块公式样例">块公式样例</h1>
<p>直接复制代码框中的内容到typora即可。</p>
<h2 id="样例1">样例1</h2>
<p><span class="math display">\[
f(x) = \left\{ 
\displaylines{\lambda e^{-\lambda x}, x ≥ 0\\ 0,x &lt; 0} 
\right. \tag{指数分布密度函数}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line">f(x) = <span class="keyword">\left</span><span class="keyword">\&#123;</span> </span><br><span class="line"><span class="keyword">\displaylines</span>&#123;<span class="keyword">\lambda</span> e<span class="built_in">^</span>&#123;-<span class="keyword">\lambda</span> x&#125;, x ≥ 0<span class="keyword">\\</span> 0,x &lt; 0&#125; </span><br><span class="line"><span class="keyword">\right</span>. <span class="keyword">\tag</span>&#123;指数分布密度函数&#125;</span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<h2 id="样例2">样例2</h2>
<p><span class="math display">\[
F(x) = \frac{1}{\sigma \sqrt{2\pi}} \int^x_0 \frac{1}{t} e^{-{(lnt-\mu)^2}/{2\sigma^2}} \ dt \tag{对数正态累积分布函数}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line">F(x) = <span class="keyword">\frac</span>&#123;1&#125;&#123;<span class="keyword">\sigma</span> <span class="keyword">\sqrt</span>&#123;2<span class="keyword">\pi</span>&#125;&#125; <span class="keyword">\int</span><span class="built_in">^</span>x<span class="built_in">_</span>0 <span class="keyword">\frac</span>&#123;1&#125;&#123;t&#125; e<span class="built_in">^</span>&#123;-&#123;(lnt-<span class="keyword">\mu</span>)<span class="built_in">^</span>2&#125;/&#123;2<span class="keyword">\sigma</span><span class="built_in">^</span>2&#125;&#125; <span class="keyword">\ </span>dt <span class="keyword">\tag</span>&#123;对数正态累积分布函数&#125;</span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<h2 id="样例3">样例3</h2>
<p><span class="math display">\[
\varphi(x) = \frac{1}{\sigma\sqrt{2\pi}}e^{-{(x-\mu)^2}/{2\sigma^2}} \tag{正态密度函数}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="keyword">\varphi</span>(x) = <span class="keyword">\frac</span>&#123;1&#125;&#123;<span class="keyword">\sigma</span><span class="keyword">\sqrt</span>&#123;2<span class="keyword">\pi</span>&#125;&#125;e<span class="built_in">^</span>&#123;-&#123;(x-<span class="keyword">\mu</span>)<span class="built_in">^</span>2&#125;/&#123;2<span class="keyword">\sigma</span><span class="built_in">^</span>2&#125;&#125; <span class="keyword">\tag</span>&#123;正态密度函数&#125;</span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<h1 id="希腊字母">希腊字母</h1>
<p>整理了常用的希腊字母及其Latex书写方式。</p>
<p>LaTex书写希腊字母时都是使用 <strong>转义字符</strong> 进行的，即 <code>\</code> + <code>对应的英文</code> 。</p>
<p>如果需要表现大写希腊字母，则对应英文的首字母大写，否则就用小写。</p>
<p>需要注意的是，<em>epsilon</em> 和 <em>phi</em> 有额外的符号，所以会有额外的写法，如下方表格所示。</p>
<table>
<thead>
<tr class="header">
<th>序号</th>
<th>大写</th>
<th>LATEX</th>
<th>小写</th>
<th>LATEX</th>
<th>英文</th>
<th>国际音标[推荐]</th>
<th>汉字注音</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Α</td>
<td><code>$Alpha$</code></td>
<td>α</td>
<td><code>$alpha$</code></td>
<td>alpha</td>
<td>/'ælfə/</td>
<td>阿尔法</td>
</tr>
<tr class="even">
<td>2</td>
<td>Β</td>
<td><code>$Beta$</code></td>
<td>β</td>
<td><code>$beta$</code></td>
<td>beta</td>
<td>/'bi:tə/或/'beɪtə/</td>
<td>贝塔/毕塔</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Γ</td>
<td><code>$Gamma$</code></td>
<td>γ</td>
<td><code>$gamma$</code></td>
<td>gamma</td>
<td>/'gæmə/</td>
<td>伽玛/甘玛</td>
</tr>
<tr class="even">
<td>4</td>
<td>Δ</td>
<td><code>$Delta$</code></td>
<td>δ</td>
<td><code>$delta$</code></td>
<td>delta</td>
<td>/'deltə/</td>
<td>德尔塔/岱欧塔</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Ε</td>
<td><code>$Epsilon$</code></td>
<td>ε</td>
<td><code>$epsilon$</code></td>
<td>epsilon</td>
<td>/'epsɪlɒn/</td>
<td>艾普西龙</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td><code>$varepsilon$</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>6</td>
<td>Ζ</td>
<td><code>$Zeta$</code></td>
<td>ζ</td>
<td><code>$zeta$</code></td>
<td>zeta</td>
<td>/'zi:tə/</td>
<td>泽塔</td>
</tr>
<tr class="even">
<td>7</td>
<td>Η</td>
<td><code>$Eta$</code></td>
<td>η</td>
<td><code>$eta$</code></td>
<td>eta</td>
<td>/'i:tə/</td>
<td>伊塔/诶塔</td>
</tr>
<tr class="odd">
<td>8</td>
<td>Θ</td>
<td><code>$Theta$</code></td>
<td>θ</td>
<td><code>$theta$</code></td>
<td>theta</td>
<td>/'θi:tə/</td>
<td>西塔</td>
</tr>
<tr class="even">
<td>9</td>
<td>Ι</td>
<td><code>$Iota$</code></td>
<td>ι</td>
<td><code>$iota$</code></td>
<td>iota</td>
<td>/aɪ'əʊtə/</td>
<td>埃欧塔</td>
</tr>
<tr class="odd">
<td>10</td>
<td>Κ</td>
<td><code>$Kappa$</code></td>
<td>κ</td>
<td><code>$kappa$</code></td>
<td>kappa</td>
<td>/'kæpə/</td>
<td>堪帕</td>
</tr>
<tr class="even">
<td>11</td>
<td>∧</td>
<td><code>$Lambda$</code></td>
<td>λ</td>
<td><code>$lambda$</code></td>
<td>lambda</td>
<td>/'læmdə/</td>
<td>兰姆达</td>
</tr>
<tr class="odd">
<td>12</td>
<td>Μ</td>
<td><code>$Mu$</code></td>
<td>μ</td>
<td><code>$mu$</code></td>
<td>mu</td>
<td>/mju:/</td>
<td>谬/穆</td>
</tr>
<tr class="even">
<td>13</td>
<td>Ν</td>
<td><code>$Nu$</code></td>
<td>ν</td>
<td><code>$nu$</code></td>
<td>nu</td>
<td>/nju:/</td>
<td>拗/奴</td>
</tr>
<tr class="odd">
<td>14</td>
<td>Ξ</td>
<td><code>$Xi$</code></td>
<td>ξ</td>
<td><code>$xi$</code></td>
<td>xi</td>
<td>希腊:/ksi/英美:/ˈzaɪ/或/ˈksaɪ/</td>
<td>可西/赛</td>
</tr>
<tr class="even">
<td>15</td>
<td>Ο</td>
<td><code>$Omicron$</code></td>
<td>ο</td>
<td><code>$omicron$</code></td>
<td>omicron</td>
<td>/əuˈmaikrən/或/ˈɑmɪˌkrɑn/</td>
<td>欧(阿~)米可荣</td>
</tr>
<tr class="odd">
<td>16</td>
<td>∏</td>
<td><code>$Pi$</code></td>
<td>π</td>
<td><code>$pi$</code></td>
<td>pi</td>
<td>/paɪ/</td>
<td>派</td>
</tr>
<tr class="even">
<td>17</td>
<td>Ρ</td>
<td><code>$Rho$</code></td>
<td>ρ</td>
<td><code>$rho$</code></td>
<td>rho</td>
<td>/rəʊ/</td>
<td>柔/若</td>
</tr>
<tr class="odd">
<td>18</td>
<td>∑</td>
<td><code>$Sigma$</code></td>
<td>σ</td>
<td><code>$sigma$</code></td>
<td>sigma</td>
<td>/'sɪɡmə/</td>
<td>西格玛</td>
</tr>
<tr class="even">
<td>19</td>
<td>Τ</td>
<td><code>$Tau$</code></td>
<td>τ</td>
<td><code>$tau$</code></td>
<td>tau</td>
<td>/tɔ:/或/taʊ/</td>
<td>套/驼</td>
</tr>
<tr class="odd">
<td>20</td>
<td>Υ</td>
<td><code>$Upsilon$</code></td>
<td>υ</td>
<td><code>$upsilon$</code></td>
<td>upsilon</td>
<td>/ˈipsilon/或/ˈʌpsɨlɒn/</td>
<td>宇(阿~)普西龙</td>
</tr>
<tr class="even">
<td>21</td>
<td>Φ</td>
<td><code>$Phi$</code></td>
<td>φ</td>
<td><code>$varphi$</code></td>
<td>phi</td>
<td>/faɪ/</td>
<td>弗爱/弗忆</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td><code>$phi$</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>22</td>
<td>Χ</td>
<td><code>$chi$</code></td>
<td>χ</td>
<td><code>$chi$</code></td>
<td>chi</td>
<td>/kaɪ/</td>
<td>凯/柯义</td>
</tr>
<tr class="odd">
<td>23</td>
<td>Ψ</td>
<td><code>$Psi$</code></td>
<td>ψ</td>
<td><code>$psi$</code></td>
<td>psi</td>
<td>/psaɪ/</td>
<td>赛/普赛/普西</td>
</tr>
<tr class="even">
<td>24</td>
<td>Ω</td>
<td><code>$Omega$</code></td>
<td>ω</td>
<td><code>$omega$</code></td>
<td>omega</td>
<td>/'əʊmɪɡə/或/oʊ'meɡə/</td>
<td>欧米伽/欧枚嘎</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/21/Hardware/Circuit/2021-08-21-NTC%E7%83%AD%E6%95%8F%E7%94%B5%E9%98%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/21/Hardware/Circuit/2021-08-21-NTC%E7%83%AD%E6%95%8F%E7%94%B5%E9%98%BB/" class="post-title-link" itemprop="url">NTC热敏电阻</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-21 08:40:00" itemprop="dateCreated datePublished" datetime="2021-08-21T08:40:00+08:00">2021-08-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-23 01:17:40" itemprop="dateModified" datetime="2021-08-23T01:17:40+08:00">2021-08-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ntc及热敏电阻">NTC及热敏电阻</h1>
<p><strong>NTC</strong>（<em>Negative Temperature Coefficient</em>）是指 <mark>随温度上升电阻呈指数关系减小、具有负温度系数的热敏电阻现象和材料</mark>。</p>
<p>该类材料是利用锰、铜、硅、钴、铁、镍、锌等两种或两种以上的金属氧化物进行充分混合、成型、烧结等工艺而成的半导体陶瓷，可制成具有负温度系数（NTC）的热敏电阻。其 <strong>电阻率</strong> 和 <strong>材料常数</strong> 随材料成分比例、烧结气氛、烧结温度和结构状态不同而变化。现在还出现了以碳化硅、硒化锡、氮化钽等为代表的非氧化物系NTC热敏电阻材料。</p>
<blockquote>
<p>1834年，科学家首次发现了硫化银有 <strong>负温度系数</strong> 的特性。</p>
<p>1930年，科学家发现氧化亚铜-氧化铜也具有负温度系数的性能，并将之成功地运用在航空仪器的温度补偿电路中。随后，由于晶体管技术的不断发展，热敏电阻器的研究取得重大进展。</p>
<p>1960年研制出了NTC热敏电阻器。NTC热敏电阻器广泛用于测温、控温、温度补偿等方面。</p>
</blockquote>
<p><strong>热敏电阻</strong> （<em>Thermistor</em>）也可作为电子线路元件用于仪表线路温度补偿和温差电偶冷端温度补偿等。利用NTC热敏电阻的自热特性可实现自动增益控制，构成RC振荡器稳幅电路，延迟电路和保护电路。在自热温度远大于环境温度时阻值还与环境的散热条件有关，因此在流速计、流量计、气体分析仪、热导分析中常利用热敏电阻这一特性，制成专用的检测元件。</p>
<p><strong>功率型NTC热敏电阻</strong> 多用于电源抑制浪涌。抑制浪涌用NTC热敏电阻器，是一种大功率的圆片式热敏电阻器，常用于有电容器、加热器和马达启动的电子电路中。 在电路电源接通瞬间，电路中会产生比正常工作时高出许多倍的浪涌电流，而NTC热敏电阻器的初始阻值较大，可以抑制电路中过大的电流，从而保护其电源电路及负载。当电路进入正常工作状态时，热敏电阻器由于通过电流而引起阻体温度上升，电阻值下降至很小，不会影响电路的正常工作。</p>
<h1 id="b值特性">B值特性</h1>
<p>热敏电阻的 <strong>B值</strong>（B-value） 是NTC的属性之一，B值简单的说就是 <strong>材料系数</strong>（<em>Material Coefficient</em>）。</p>
<p><strong>相同温度区间不同的B值</strong>，说明材料可能不一样，因为NTC热敏电阻是负温度系数温度升高阻值成规律下降，B值代表曲线的弯曲程度或者说温度的敏感指数，单位温度变化的时候阻值增幅程度就代表B值。</p>
<p>通俗的说，即当温度降低，阻值曲线发生变化时会陡一点还是平一点。一般来说B值越大曲线越陡，当曲线越陡说明电阻值的变化就越大，相对来说就灵敏些；B值越小曲线越平，当曲线越平说明电阻值的变化就没那么大，相对来说阻值温度系数也就越小。</p>
<p><strong>注意</strong>：B值是 <u>经由人为计算出来的</u> 逼近某款热敏电阻 <u>在某个温度区间内的</u> 温度阻值特性曲线的 常数/系数。</p>
<p>因为B值反映的是 <strong>两个温度点之间</strong> 的阻值变化规律，可以用以下公式来计算，以每摄氏度的百分比 <code>％/°C​​</code> 为单位。 <span class="math display">\[
B = {ln(R_{T1}) - ln(R_{T2})\over {1 \over {T_1}} -{ 1 \over T_2}}
\]</span></p>
<blockquote>
<p>$ R1 $ 或 $ RT1 $：温度T1的时候零功率电阻值</p>
<p>$ R2 $​ 或 $ RT2 $​​：温度T2的时候零功率电阻值</p>
<p>T1 = 273.15 k + (T1℃)</p>
<p>T2 = 273.15 k + (T2℃)</p>
</blockquote>
<p>除非特别指出，B值通常是在[25, 50]这个温度范围中进行测量，由 <code>T1 = 25℃（298.15K）</code> 和 <code>T2 = 50℃（323.15K）</code> 时的零功率电阻值计算而得。</p>
<p>根据式1，若已知B值的情况下，可以得出目标温度对应的阻值，如下式2： <span class="math display">\[
R_{T2} = R_{T1} * e^{B * ({1 \over T_2} - {1 \over T_1})}
\]</span></p>
<blockquote>
<p>e = 2.718281828459045</p>
</blockquote>
<h1 id="温度系数">温度系数</h1>
<p>NTC热敏电阻的 <strong>温度系数</strong> 定义为 <mark>相对于温度变化的阻值的相对变化</mark>。计算NTC <strong>热敏电阻温度系数</strong> 的最简单转换公式如下： <span class="math display">\[
α = {-β \over T^2}
\]</span></p>
<blockquote>
<p><strong>β</strong>：B常数</p>
<p><strong>T</strong>：25摄氏度时的电阻值</p>
</blockquote>
<p>最终结果之所以带上负号，因为是“负温度系数”啊，不带的话就是“正温度系数”。</p>
<h1 id="阻值特性表">阻值特性表</h1>
<p>厂家在提供热敏电阻电气特性时都会给出B值，但并不是是就不需要阻值特性表了。</p>
<p>使用B值并能够推算出全部想要的温度阻值，因为B值所描述的是某个温度区间内的温度和阻值关系，而热敏电阻所呈现的是温度与阻值的非线性关系，也就是说这种关系没法通过B值和公式准确描述全部温度区间的阻值关系。否则一旦不同厂家的热敏电阻其B值相同，用公式来推导那岂不是阻值全是一样。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210821102248552.png" alt="image-20210821102248552" /><figcaption aria-hidden="true">image-20210821102248552</figcaption>
</figure>
<div style="font-size: 0.8rem; font-weight: 900; text-align: center;">
某温度-阻值特性表示例
</div>
<p>例如，[-25℃ ~ 50℃]内的B值已给出，意思就是说在25~50度这个区间用公式是完全没有问题的，超出这个范围，那么B值是不同的，所以不在这个范围用公式得出的阻值也是不对的。</p>
<p>如下图所示，为三款B值相同的热敏电阻，然而其阻值却不同。由此可知，B值只是一个针对每款热敏电阻的某区间参数，它只反应此热敏电阻的部分特性，并不是一个严谨的参数，在实际应用中，需要提供检测温度范围内的阻值表才是正确的做法。</p>
<figure>
<img src="https://pic.islet.space/2021/08/pIYBAF4On2WAc2XpAAC6ucLpfUY488.png" alt="热敏电阻应用详解" /><figcaption aria-hidden="true">热敏电阻应用详解</figcaption>
</figure>
<p>B值的范围一般在1800K ~ 5800k，其测温点范围通常为 [25, 50]、[25, 85]、 [0, 100] 或 [0, 50]，部分厂家可以提供特殊NTC热敏电阻 <u>B值的定制</u>。</p>
<h1 id="案例">案例</h1>
<p>假设客户订购10,000 W热敏电阻，其热敏电阻的精度为±0.5°C。部件号为MF52A-103，B值为3950 K.25°C（298.15 K）。</p>
<p>根据 式3 求其 <strong>热敏电阻温度系数</strong> α ： <span class="math display">\[
α = -{3950K \over (298.15K)^2} 
 = - 4.44 \%/℃
\]</span> 根据热敏电阻温度系数 α 和 其器件精度求得 25℃时的温度容差为： <span class="math display">\[
Resistance \ Tolerance\ @25℃ = α *（±0.5℃） = -4.44\%/℃ * （±0.5℃） = ± 2.22\% \ @25℃
\]</span></p>
<h2 id="电气特性">电气特性</h2>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210821095249164.png" alt="image-20210821095249164" /><figcaption aria-hidden="true">image-20210821095249164</figcaption>
</figure>
<ul>
<li><strong>电阻值</strong>：R25 = 50kΩ ± 2% 。即在25摄氏度下，其阻值为50k欧姆，阻值允差为百分之二。</li>
<li><strong>B常数</strong>： B25/50 = 3950K ± 2% 。即该NTC热敏电阻的材料系数B值，在25摄氏度至50摄氏度之间的B常数为3950K，允差为百分之二。</li>
</ul>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="http://www.elecfans.com/yuanqijian/ptc/202001031148953.htm">热敏电阻应用与参数详解</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/NTC/16035">NTC</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/18/Communication/2021-08-18-SPI%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/18/Communication/2021-08-18-SPI%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">SPI通信</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-18 07:50:00" itemprop="dateCreated datePublished" datetime="2021-08-18T07:50:00+08:00">2021-08-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-16 00:29:44" itemprop="dateModified" datetime="2021-09-16T00:29:44+08:00">2021-09-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="串行外设接口">串行外设接口</h1>
<p><strong>串行外设接口</strong>（Serial Peripheral Interface，SPI）是微控制器和外围IC（如传感器、ADC、DAC、移位寄存器、SRAM等）之间使用最广泛的接口之一。</p>
<p>SPI是一种同步、全双工、主从式接口。来自主机或从机的数据在时钟<mark>上升沿或下降沿同步</mark>。主机和从机可以同时传输数据。SPI接口可以是 <strong>3线式</strong> 或 <strong>4线式</strong>。后述中重点介绍常用的4线SPI接口。</p>
<p>与I2C的 <strong>多主多从</strong> 模式不同，SPI协议为 <strong>一主多从</strong> 模式。SPI所消耗的接口数也大大提升。</p>
<h2 id="接口介绍">接口介绍</h2>
<p><img src="https://pic.islet.space/2021/08/image-20210819075248043.png" alt="image-20210819075248043" style="zoom: 33%;" /></p>
<div style="font-weight: 900; text-align: center;">
图1. 含主机和从机的SPI配置
</div>
<p>4线SPI器件有四个信号：</p>
<ul>
<li>时钟(SPI CLK, SCLK)</li>
<li>片选(CS)</li>
<li>主机输出、从机输入(MOSI)</li>
<li>主机输入、从机输出(MISO)</li>
</ul>
<p>产生时钟信号的器件称为主机。主机和从机之间传输的数据与主机产生的时钟同步。同I2C接口相比，SPI器件支持更高的时钟频率。查阅相关产品数据手册以了解SPI接口的时钟频率规格。</p>
<p><mark style="font-weight: 900;">SPI接口只能有一个主机，但可以有一个或多个从机。</mark>图1显示了主机和从机之间的SPI连接。</p>
<p>来自主机的片选信号用于选择从机。这 <mark style="font-weight: 900;">通常是一个低电平有效信号，拉高时从机与SPI总线断开连接</mark>。当使用多个从机时，主机需要为每个从机提供单独的片选信号。<u>本文中</u> 的片选信号始终是低电平有效信号。</p>
<p>MOSI和MISO是数据线。MOSI将数据从主机发送到从机，MISO将数据从从机发送到主机。</p>
<h2 id="数据传输">数据传输</h2>
<p>要开始SPI通信，主机必须发送时钟信号，并通过使能CS信号选择从机。片选通常是低电平有效信号。因此，主机必须在该信号上发送逻辑0以选择从机。SPI是全双工接口，主机和从机可以分别通过MOSI和MISO线路同时发送数据。在SPI通信期间，数据的发送（串行移出到MOSI/SDO总线上）和接收（采样或读入总线(MISO/SDI)上的数据）同时进行。串行时钟沿同步数据的移位和采样。SPI接口允许用户灵活选择时钟的上升沿或下降沿来采样和/或移位数据。</p>
<p><strong>需要注意</strong>：SPI接口传输的 <strong>数据位数</strong> 仍需查阅器件数据手册。</p>
<h2 id="时钟极性和时钟相位">时钟极性和时钟相位</h2>
<p>在SPI中，主机可以选择 <strong>时钟极性</strong>（Clock Polarity，<strong>CPOL</strong>）和 <strong>时钟相位</strong>（Clock Phase，<strong>CPHA</strong>）。</p>
<p>在空闲状态期间，CPOL 控制 时钟极性。空闲状态是指传输开始时CS为高电平且在向低电平转变的期间，以及传输结束时CS为低电平且在向高电平转变的期间。</p>
<p>CPHA 控制 时钟相位。<mark>根据CPHA位的状态，使用时钟上升沿或下降沿来采样和/或移位数据</mark>。主机必须 <mark>根据从机的要求选择时钟极性和时钟相位</mark>。根据CPOL和CPHA位的选择，有四种SPI模式可用，如下表：</p>
<table>
<thead>
<tr class="header">
<th>SPI 模式</th>
<th>CPOL</th>
<th>CPHA</th>
<th>空闲状态下的时钟极性</th>
<th>用于采样和/或移位数据的时钟相应</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
<td>逻辑低电平</td>
<td>数据在上升沿采样，在下降沿移出</td>
</tr>
<tr class="even">
<td>1</td>
<td>0</td>
<td>1</td>
<td>逻辑低电平</td>
<td>数据在下降沿采样，在上升沿移出</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>1</td>
<td>逻辑低电平</td>
<td>数据在下降沿采样，在上升沿移出</td>
</tr>
<tr class="even">
<td>3</td>
<td>1</td>
<td>0</td>
<td>逻辑低电平</td>
<td>数据在上升沿采样，在下降沿移出</td>
</tr>
</tbody>
</table>
<p>下图为TI公司F280049芯片的SPI时钟模式：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819084200284.png" alt="image-20210819084200284" /><figcaption aria-hidden="true">image-20210819084200284</figcaption>
</figure>
<p>下图为ADI公司ADSP21479芯片的SPI时钟模式：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819084447672.png" alt="image-20210819084447672" /><figcaption aria-hidden="true">image-20210819084447672</figcaption>
</figure>
<p>后述 图2 至 图5 显示了四种SPI模式下的通信示例。</p>
<p>在这些示例中，数据显示在MOSI和MISO线上。传输的开始和结束用绿色虚线表示，采样边沿用橙色虚线表示，移位边沿用蓝色虚线表示。请注意，这些图形仅供参考。要成功进行SPI通信，用户须参阅产品数据手册并确保满足器件的时序规格。</p>
<p><img src="https://pic.islet.space/2021/08/205973_fig_02.png" alt="图2. SPI模式0，CPOL = 0，CPHA = 0：CLK空闲状态 = 低电平，数据在上升沿采样，并在下降沿移出" style="zoom: 60%;" /></p>
<div style="font-weight: 900; text-align: center;">
图2. SPI模式0，CPOL = 0，CPHA = 0：CLK空闲状态 = 低电平，数据在上升沿采样，并在下降沿移出
</div>
<p>图3给出了SPI模式1的时序图。在此模式下，时钟极性为0，表示时钟信号的空闲状态为低电平。此模式下的时钟相位为1，表示数据在下降沿采样（由橙色虚线显示），并且数据在时钟信号的上升沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_03.png?la=en&vs=1" alt="图3. SPI模式1，CPOL = 0，CPHA = 1：CLK空闲状态 = 低电平，数据在下降沿采样，并在上升沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图3. SPI模式1，CPOL = 0，CPHA = 1：CLK空闲状态 = 低电平，数据在下降沿采样，并在上升沿移出
</div>
<p>图4给出了SPI模式2的时序图。在此模式下，时钟极性为1，表示时钟信号的空闲状态为高电平。此模式下的时钟相位为1，表示数据在下降沿采样（由橙色虚线显示），并且数据在时钟信号的上升沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_04.png?la=en&vs=1" alt="图4. SPI模式2，CPOL = 1，CPHA = 1：CLK空闲状态 = 高电平，数据在下降沿采样，并在上升沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图4. SPI模式2，CPOL = 1，CPHA = 1：CLK空闲状态 = 高电平，数据在下降沿采样，并在上升沿移出。
</div>
<p>图5给出了SPI模式3的时序图。在此模式下，时钟极性为1，表示时钟信号的空闲状态为高电平。此模式下的时钟相位为0，表示数据在上升沿采样（由橙色虚线显示），并且数据在时钟信号的下降沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_05.png?la=en&vs=1" alt="图5. SPI模式3，CPOL = 1，CPHA = 0：CLK空闲状态 = 高电平，数据在上升沿采样，并在下降沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图5. SPI模式3，CPOL = 1，CPHA = 0：CLK空闲状态 = 高电平，数据在上升沿采样，并在下降沿移出
</div>
<h2 id="多从机配置">多从机配置</h2>
<p>多个从机可与单个SPI主机一起使用。从机可以采用常规模式连接，或采用菊花链模式连接。</p>
<h3 id="常规spi模式">常规SPI模式</h3>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819075431419.png" alt="image-20210819075431419" /><figcaption aria-hidden="true">image-20210819075431419</figcaption>
</figure>
<div style="font-weight: 900; text-align: center;">
图6. 多从机SPI配置
</div>
<p>在常规模式下，主机需要为每个从机提供单独的片选信号。一旦主机使能（拉低）片选信号，MOSI/MISO线上的时钟和数据便可用于所选的从机。如果使能多个片选信号，则MISO线上的数据会被破坏，因为主机无法识别哪个从机正在传输数据。</p>
<p>从图6可以看出，随着从机数量的增加，来自主机的片选线的数量也增加。这会快速增加主机需要提供的输入和输出数量，并限制可以使用的从机数量。可以使用其他技术来增加常规模式下的从机数量，例如使用多路复用器产生片选信号。</p>
<h3 id="菊花链模式">菊花链模式</h3>
<p><img src="https://pic.islet.space/2021/08/image-20210819075542602.png" alt="image-20210819075542602" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图7. 多从机SPI菊花链配置
</div>
<p>在菊花链模式下，所有从机的片选信号连接在一起，数据从一个从机传播到下一个从机。在此配置中，所有从机同时接收同一SPI时钟。来自主机的数据直接送到第一个从机，该从机将数据提供给下一个从机，依此类推。</p>
<p><mark style="font-weight: 900;">使用该方法时，由于数据是从一个从机传播到下一个从机，所以传输数据所需的时钟周期数与菊花链中的从机位置成比例（成比例倍增）。</mark></p>
<p>例如在图7所示的8位系统中，<mark>为使第3个从机能够获得数据，需要24个时钟脉冲，而常规SPI模式下只需8个时钟脉冲</mark>。图8显示了时钟周期和通过菊花链的数据传播。并非所有SPI器件都支持菊花链模式。请参阅产品数据手册以确认菊花链是否可用。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_08.png?la=en&vs=1" alt="图8. 菊花链配置：数据传播" style="zoom: 50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图8. 菊花链配置：数据传播
</div>
<h1 id="adi公司支持spi的模拟开关与多路转换器">ADI公司支持SPI的模拟开关与多路转换器</h1>
<p>ADI公司最新一代支持SPI的开关可在不影响精密开关性能的情况下显著节省空间。本文的这一部分将讨论一个案例研究，说明支持SPI的开关或多路复用器如何能够大大简化系统级设计并减少所需的GPIO数量。</p>
<p><a target="_blank" rel="noopener" href="https://www.analog.com/cn/products/adg1412.html">ADG1412</a> 是一款四通道、单刀单掷(SPST)开关，需要四个GPIO连接到每个开关的控制输入。图9显示了微控制器和一个ADG1412之间的连接。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819075642098.png" alt="image-20210819075642098" style="zoom: 80%;" /></p>
<div style="font-weight: 900; text-align: center;">
图9. 微控制器GPIO用作开关的控制信号
</div>
<p>随着电路板上开关数量的增加，所需GPIO的数量也会显著增加。例如，当设计一个测试仪器系统时，会使用大量开关来增加系统中的通道数。在4×4交叉点矩阵配置中，使用四个ADG1412。此系统需要16个GPIO，限制了标准微控制器中的可用GPIO。图10显示了使用微控制器的16个GPIO连接四个ADG1412。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_10.png?la=en&vs=1" alt="图10. 在多从机配置中，所需GPIO的数量大幅增加" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图10. 在多从机配置中，所需GPIO的数量大幅增加
</div>
<p>为了减少GPIO数量，一种方法是使用串行转并行转换器，如图11所示。该器件输出的并行信号可连接到开关控制输入，器件可通过串行接口SPI配置。此方法的缺点是外加器件会导致物料清单增加。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819075735043.png" alt="image-20210819075735043" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图11. 使用串行转并行转换器的多从机开关
</div>
<p>另一种方法是使用SPI控制的开关。此方法的优点是可减少所需GPIO的数量，并且还能消除外加串行转并行转换器的开销。如图12所示，不需要16个微控制器GPIO，只需要7个微控制器GPIO就可以向4个ADGS1412提供SPI信号。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819080000988.png" alt="image-20210819080000988" style="zoom: 67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图12. 支持SPI的开关节省微控制器GPIO
</div>
<p>开关可采用菊花链配置，以进一步优化GPIO数量。在菊花链配置中，无论系统使用多少开关，都只使用主机（微控制器）的四个GPIO。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819080021307.png" alt="image-20210819080021307" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图13. 菊花链配置的SPI开关可进一步优化GPIO
</div>
<p>图13用于说明目的。ADGS1412数据手册建议在SDO引脚上使用一个上拉电阻。有关菊花链模式的更多信息，请参阅ADGS1412数据手册。为简单起见，此示例使用了四个开关。随着系统中开关数量的增加，电路板简单和节省空间的优点很重要。在6层电路板上放置8个四通道SPST开关，采用4×8交叉点配置时，ADI公司支持SPI的开关可节省20%的总电路板空间。文章《<a target="_blank" rel="noopener" href="https://www.analog.com/cn/analog-dialogue/articles/precision-spi-switch-configuration-increases-channel-density.html">精密SPI开关配置提高通道密度</a>》详细说明了精密SPI开关配置如何提高通道密度。</p>
<h1 id="术语">术语</h1>
<p><strong>MISO</strong> / <strong>SOMI</strong> / <strong>SDO</strong>： Master Input and Slaver Output / Slaver Output and Master Input / Slaver Data Output</p>
<p><strong>MOSI</strong> / <strong>SIMO</strong> / <strong>SDI</strong>： Master Output and Slaver Input / Salver Input and Master Output / Slaver Data Input</p>
<p><strong>SCLK</strong>： Serial Clock</p>
<p><strong>CS</strong> / <strong>STE</strong>： Chip Select / Slaver Transmit Enable</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://www.analog.com/cn/analog-dialogue/articles/introduction-to-spi-interface.html">SPI接口简介</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/150121520">SPI通信协议详解（spi总线）</a></li>
<li><a target="_blank" rel="noopener" href="http://www.microchip.com.cn/community/Uploads/Download/Library/39699a_cn.pdf">第23 章 串行外设接口(SPI)</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/06/Blog/2021-08-06-%E8%A7%A3%E5%86%B3%E6%96%B0%E7%89%88hexo%E6%B2%A1%E6%9C%89%E7%9B%AE%E5%BD%95%E5%92%8C%E6%A0%87%E7%AD%BE%E9%A1%B5%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/06/Blog/2021-08-06-%E8%A7%A3%E5%86%B3%E6%96%B0%E7%89%88hexo%E6%B2%A1%E6%9C%89%E7%9B%AE%E5%BD%95%E5%92%8C%E6%A0%87%E7%AD%BE%E9%A1%B5%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">解决新版hexo没有目录和标签页的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-06 23:40:00" itemprop="dateCreated datePublished" datetime="2021-08-06T23:40:00+08:00">2021-08-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-08 14:26:07" itemprop="dateModified" datetime="2021-08-08T14:26:07+08:00">2021-08-08</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>新版hexo安装之后没有标签页，解决方法大致三步：</p>
<ol type="1">
<li><p>需要自行在 <code>/source/</code> 文件夹下添加一个 <code>categories</code> 和 <code>tags</code> 文件夹，然后往文件夹中分别写入一个 <code>index.md</code> 文件。</p></li>
<li><p>然后在对应的 <code>index.md</code> 中写入 <em>YAML</em> 信息。</p></li>
<li><p>在对应的主题配置文件，例如 <code>_config.yml</code> 中填写好配置。</p></li>
</ol>
<h1 id="新建目录和页面">新建目录和页面</h1>
<p>可以通过两句语句来运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure>
<h1 id="添加type属性">添加type属性</h1>
<p>编辑 <code>index.md</code>，修改信息如下，日期随意：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 目录</span><br><span class="line"><span class="built_in">type</span>: categories</span><br><span class="line">date: 2020-08-06 23:32:00</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>注意上面写的一个属性 <code>type</code>，千万不能写错。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line"><span class="built_in">type</span>: tags</span><br><span class="line">date: 2020-08-06 23:32:00</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h1 id="设置配置文件">设置配置文件</h1>
<p>如下图所示修改即可：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210806235851123.png" alt="image-20210806235851123" /><figcaption aria-hidden="true">image-20210806235851123</figcaption>
</figure>
<p>最后重新清空、运行和预览即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo site</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.12.0/dist/mermaid.min.js","integrity":"sha256-0dD7vUjUCTGJjeLnPotQQJIcSzug5fO6WDMYYyNIX4c="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"enable","tags":"all","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
