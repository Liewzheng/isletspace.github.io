<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://code.islet.space/font//css?family=/CascadiaCode/CascadiaCode:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"islet.space","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/db.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>
<meta name="description" content="笔记分享的旮旯孤岛而已">
<meta property="og:type" content="website">
<meta property="og:title" content="Coder的孤岛">
<meta property="og:url" content="http://islet.space/page/2/index.html">
<meta property="og:site_name" content="Coder的孤岛">
<meta property="og:description" content="笔记分享的旮旯孤岛而已">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liewzheng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://islet.space/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Coder的孤岛</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Coder的孤岛</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">islet of the coder</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-文章"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li>
        <li class="menu-item menu-item-目录"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-简历"><a href="/resume/" rel="section"><i class="fa fa-address-card fa-fw"></i>简历</a></li>
        <li class="menu-item menu-item-友链"><a href="/friends/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>友链</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liewzheng</p>
  <div class="site-description" itemprop="description">笔记分享的旮旯孤岛而已</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">101</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">184</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:liewzheng@foxmail.com" title="E-Mail → mailto:liewzheng@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/09/20/Communication/2021-09-20-%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E7%BD%91%E7%BB%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/Communication/2021-09-20-%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E7%BD%91%E7%BB%9C/" class="post-title-link" itemprop="url">无线通信网络</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-20 14:45:00" itemprop="dateCreated datePublished" datetime="2021-09-20T14:45:00+08:00">2021-09-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-24 07:23:21" itemprop="dateModified" datetime="2021-09-24T07:23:21+08:00">2021-09-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前置知识">前置知识</h1>
<ul>
<li>带宽及传输速率转换</li>
<li>TCP/IP网络协议</li>
<li>硬件功耗计算和测量</li>
</ul>
<h1 id="概述">概述</h1>
<p>将从通信速率、通信距离、通信功耗、组网能力/网路容量、 应用场景 及 安全性 等各方面来区分无线通信各种技术。</p>
<h2 id="通信距离和通信速率">通信距离和通信速率</h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>超近距离<br>10公分以内</th>
<th>近距离<br>1米以内</th>
<th>近距离<br>20米以内</th>
<th>中距离<br>20至100米</th>
<th>远距离<br>1公里以内</th>
<th>超远距离<br>1公里以上</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>超高速率</strong><br>&gt; 100Mbps</td>
<td></td>
<td>RFID</td>
<td>WiFi</td>
<td></td>
<td>5G</td>
<td></td>
</tr>
<tr class="even">
<td><strong>高速率</strong><br>&lt; 100Mbps</td>
<td></td>
<td>RFID</td>
<td>WiFi</td>
<td></td>
<td>3G/4G</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>中速率</strong><br>&lt; 10Mbps</td>
<td></td>
<td></td>
<td>WiFi<br>Bluethooth</td>
<td>Bluethooth</td>
<td>CMDA2K1X<br>2G</td>
<td></td>
</tr>
<tr class="even">
<td><strong>低速率</strong><br>&lt; 1Mbps</td>
<td>NFC</td>
<td></td>
<td></td>
<td>ZigBee<br>Z-Ware</td>
<td>《IEEE 802.11 ah》</td>
<td>Lora<br>NB-IOT（基于MTC）<br>GPRS</td>
</tr>
<tr class="odd">
<td><strong>超低速率</strong><br>&lt; 1Kbps</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Sigfox</td>
</tr>
</tbody>
</table>
<p>还有很多躺在历史垃圾堆角落里，没有得到使用和普及的通信协议，如 WiMax（IEEE 802.16），</p>
<h2 id="通信功耗">通信功耗</h2>
<p><strong>超高功耗</strong>：&gt; 100mA</p>
<p><strong>高功耗</strong>：30~100mA</p>
<p><strong>中功耗</strong>：&lt; 30mA</p>
<p><strong>低功耗</strong>：&lt; 20mA</p>
<p><strong>超低功耗</strong>：&lt; 10mA</p>
<table>
<thead>
<tr class="header">
<th>超低功耗</th>
<th>低功耗</th>
<th>中功耗</th>
<th>高功耗</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="组网能力网路容量">组网能力/网路容量</h2>
<h2 id="应用场景">应用场景</h2>
<h2 id="lpwanlpwa">LPWAN/LPWA</h2>
<p><strong>LPWAN</strong>， Low Power Wide Area Network，低功耗广域网络，也可以缩写为LPWA。</p>
<p>LPWAN 不是指任何一种特定技术，而是作为任何网络的通用术语，这些网络旨在以比其他网络（如蜂窝、卫星或 WiFi）更低的功率进行无线通信。此外，与其他使用蓝牙或 NFC 的低功耗网络相比，LPWAN 的通信距离更远。</p>
<p>LPWA 网络非常有限的带宽不适合大多数消费者和商业应用，例如语音、视频、音频甚至文本消息。因此，LPWA 网络几乎完全由物联网 (IoT) 和 M2M（机器对机器）通信中的设备使用。</p>
<p>虽然冰箱、灯泡或 Nest 温度计等家用或商用设备都可以轻松搭载家庭或办公室 WiFi 连接，但某些设备不能依赖这种连接。</p>
<p>LoRa、SigFox、NB-IoT 都属于 LPWA 的范畴，LoRa 不需要 SIM 卡，NB-IoT 需要 SIM 卡。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210920171429124.png" alt="image-20210920171429124" /><figcaption aria-hidden="true">image-20210920171429124</figcaption>
</figure>
<h1 id="lora">LoRa</h1>
<p>LoRa是美国Semtech公司的专有技术，实际是一种采用扩频方案的无线调制解调技术。Semtech在2012年通过并购法国Cycleo公司获得LoRa的IP产权，以此设计制造射频芯片并进行市场销售，是一家纯半导体公司，垄断LoRa芯片的供货。目前Semtech虽然也进行少量LoRa的IP授权，如国内的阿里，但IP是Semtech专有，没有授权任何公司无法设计制造LoRa芯片，所以客户的选择余地很小。</p>
<p>LoRa使用的也是公共频段进行射频信号传输，上层协议及规范由LoRaWan定义，LoRa联盟负责发布和维护。任何人可以购买LoRa芯片或者模块来设计LoRa终端和网关设备，也可以设计或者购买设备来搭建LoRa网络，所以目前多数的LoRa网络都是小区域和私有的，很少有全国性的通用物联网络，而设备和网络间的兼容也是一个很大的挑战。</p>
<p>LoRa通过扩频技术实现高灵敏度，从而能够进行远距离传输，但是网络容量有限，无法高效实现大批量设备信息的并行接收和处理，这对于大面积或全国性的部署是个巨大挑战。</p>
<h1 id="术语">术语</h1>
<h2 id="link-budget">Link Budget</h2>
<p>A link budget is used to compute cell coverage by accounting for all the factors that determine the cell coverage to balance the system cost against the required cell capacity. Link budget factors controlled by the RF engineer include transmitter-radiated power, antenna gain, noise figures, and co-channel interference (i.e., reuse factor <em>N</em>). Factors that cannot be controlled directly, but must be considered in the link budget, include propagation path loss and system bandwidth.</p>
<p>链路预算是用来计算小区覆盖率的，它考虑了决定小区覆盖率的所有因素，以平衡系统成本和所需小区容量。由射频工程师控制的链路预算因素包括发射器辐射功率、天线增益、噪声数字和同信道干扰（即重用系数N）。不能直接控制，但必须在链路预算中考虑的因素包括传播路径损耗和系统带宽。</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《无线传感网络》杨博雄/倪玉华</li>
<li><a target="_blank" rel="noopener" href="http://www.elecfans.com/iot/631444_a.html">物联网通信标准分类 谁最有优势？</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19687054/answer/632679689">为什么WIMAX没有普及？</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/79948173">什么是LPWA</a></li>
<li><a target="_blank" rel="noopener" href="https://www.hisilicon.com/cn/techtalk/nb-iot">NB-IoT 通往智能世界的基础联接技术</a></li>
<li><a target="_blank" rel="noopener" href="https://www.sciencedirect.com/topics/engineering/link-budget">Link Budget - an overview | ScienceDirect Topics</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/lpwa">LPWA 物联网络</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/09/10/Communication/2021-09-10-UART%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/10/Communication/2021-09-10-UART%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">UART通信</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-10 09:30:00" itemprop="dateCreated datePublished" datetime="2021-09-10T09:30:00+08:00">2021-09-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-16 00:30:01" itemprop="dateModified" datetime="2021-09-16T00:30:01+08:00">2021-09-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="rs-serial-port">RS Serial Port</h1>
<p>RS系列（RS-232/RS-422/RS-485）标准（RS，即Recommend Standard，<strong>推荐标准</strong> 之意 ）是常用的（异步）串行通信接口标准，该系列标准由美国电子工业协会（EIA）牵头开发。</p>
<p>RS系列标准只对 <strong>接口</strong> 的 <strong>电气特性</strong>（Electric Specification of Interface）进行规定，并不涉及插件、电缆或协议，再次基础上，用户可以建立自己的接头、插座形状 以及 高层通信协议 。</p>
<h2 id="rs-232">RS-232</h2>
<p>RS-232标准接口（又称EIA RS-232）是由美国电子工业协会(EIA)联合贝尔系统公司、调制解调器厂家及计算机终端生产厂家于1970年共同制定，其全名是“数据终端设备( DTE)和数据通信设备(DCE)之间串行二进制数据交换接口技术标准”。</p>
<p>RS232协议 和 TTL协议更多是电气特性（如电平标准和电压），二者在软件协议层面是一样的，如对于同样传输 <code>0b01010101</code> 来说，RS232 和 TTL的时序对比如下图所示：</p>
<p><img src="https://pic.islet.space/2021/09/20210915110402.png" alt="img" style="zoom:67%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 RS232标准和TTL标准的时序对比
</div>
<p>当然，RS232和TTL/CMOS之间的转换，不仅仅是简单的电平转换，还要考虑到其他一些因素，比如 <strong>调节</strong> 和 <strong>矫正</strong> 一些电平（提高或降低对应的电平），确保可能的有害的RS232电压不会破坏微控制器的串口针脚。较为成熟的方案是通过MAX3232之类的芯片，把TTL电平转为RS232电平，或者在淘宝购买TTL转RS232电缆即可。</p>
<p>由于RS-232采取 <strong>不平衡传输</strong> 方式，即所谓 <strong>单端通讯</strong>。收（RX）、发（TX） 端的数据信号是相对于信号地（GND）。典型的RS-232信号在正负电平之间摆动，</p>
<ul>
<li>在发送数据时，发送端驱动器输出正电平在+5<sub>+15V，负电平在-5</sub>-15V电平。</li>
<li>当无数据传输时，线上为TTL，从开始传送数据到结束，线上电平从TTL电平到RS-232电平再返回TTL电平。</li>
</ul>
<p>接收器典型的工作电平在 <code>+3~+12V</code> 与 <code>-3~-12V</code> 。<mark>由于发送电平与接收电平的差仅为2V至3V左右，所以其共模抑制能力差</mark>，再加上双绞线上的分布电容，其传送距离最大为约15米，最高速率为20Kbps。RS-232是为 <strong>单节点通讯</strong>（即点对点，用一对收、发设备）而设计的，其驱动器负载为3kΩ~7kΩ。所以RS-232适合本地设备之间的通信。</p>
<h2 id="rs-422">RS-422</h2>
<p>RS-422、RS-485与RS-232不一样，数据信号采用差分传输方式，也称作 <strong>平衡传输</strong>，它使用一对双绞线，将其中一线定义为A，另一线定义为B。通常情况下，发送驱动器A、B之间的正电平在+2<sub>+6V，是一个逻辑状态，负电平在-2V</sub>6V，是另一个逻辑状态。另有一个信号地C，在RS-485中还有一“使能”端，而在RS-422中这是可用可不用的。“使能”端是用于控制发送驱动器与传输线的切断与连接。当“使能”端起作用时，发送驱动器处于高阻状态，称作“第三态”，即它是有别于逻辑“1”与“0”的第三态。</p>
<p>由于接收器采用高输入阻抗和发送驱动器比RS232更强的驱动能力，故允许在相同传输线上连接多个接收节点，<strong>最多可接10个节点</strong>。即一个主设备（Master），其余为从设备（Salve），从设备之间不能通信，所以RS-422支持点对多的双向通信。RS-422四线接口由于采用单独的发送和接收通道，因此不必控制数据方向，各装置之间任何必须的信号交换均可以按软件方式（XON/XOFF握手）或硬件方式（一对单独的双绞线）实现。RS-422的最大传输距离为4000英尺（约1219米），最大传输速率为10Mbps。其平衡双绞线的长度与传输速率成反比，在100Kbps速率以下，才可能达到最大传输距离。只有在很短的距离下才能获得最高速率传输。一般100米长的双绞线上所能获得的最大传输速率仅为1Mbps。RS-422需要一终接电阻，要求其阻值约等于传输电缆的特性阻抗。在矩距离传输时可不需终接电阻，即一般在300米以下不需终接电阻。终接电阻接在传输电缆的最远端。</p>
<h2 id="rs-485">RS-485</h2>
<p>RS-485 标准只对 <strong>接口</strong> 的 <strong>电气特性</strong>（Electric Specification of Interface）进行规定，并不涉及插件、电缆或协议，再次基础上，用户可以建立自己的接头、插座形状 以及 高层通信协议 。</p>
<p>RS-485 的 <strong>通信距离</strong> 和 <strong>通信速率</strong> 是负相关的，</p>
<p>RS485有 <strong>两线制</strong> 和 <strong>四线制</strong>，四线制只能实现点对点的通信方式，现很少采用。</p>
<h2 id="接口标准对比">接口（标准）对比</h2>
<p>以下仅从RS的硬件要求进行横向对比：</p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
表 RS系列标准对比
</div>
<table>
<thead>
<tr class="header">
<th></th>
<th>RS-232</th>
<th>RS-422</th>
<th>RS-485</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>半双工/全双工</td>
<td>全双工</td>
<td>全双工</td>
<td>半双工</td>
</tr>
<tr class="even">
<td>波特率</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>传输速率范围</td>
<td>300bps~100Kbps</td>
<td>10Mbps</td>
<td>10Mbps</td>
</tr>
<tr class="even">
<td>联网支持（多设备连接）</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr class="odd">
<td>电压范围</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>差模/共模</td>
<td>共模</td>
<td>差模</td>
<td>差模</td>
</tr>
<tr class="odd">
<td>最少信号线数量</td>
<td>3根</td>
<td>5根</td>
<td>2根</td>
</tr>
<tr class="even">
<td>最大传输距离</td>
<td>15m（波特率=9600时）</td>
<td></td>
<td>3900m</td>
</tr>
<tr class="odd">
<td>控制信号（DE，Drive Enable）</td>
<td>无</td>
<td>可选</td>
<td>有</td>
</tr>
<tr class="even">
<td>输入阻抗</td>
<td>3～7kΩ</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>使用RS422协议的设备间的引脚互相连接示意图：</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915110408.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<h1 id="uart-protocol">UART Protocol</h1>
<p><strong>UART</strong>，即Universal Asynchronous Receiver/Transmitter，<strong>通用异步收发</strong>。</p>
<p>在通信和计算机科学中，Serial communication是一个通用概念，泛指所有的串行的通信协议，如RS232、USB、I2C、SPI、1-Wire、Ethernet等。这里的串行（serial），是相对并行通信（parallel communication）来说的，如下图：</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915110411.jpeg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>广义上讲，UART是指 支持RS系列（物理接口）标准和TLL电平 的 <strong>通信协议</strong>。</p>
<p>因为UART更多关注规定编码格式的标准，如 <strong>波特率</strong>（baud rate）、<strong>帧格式</strong> 和 <strong>波特率误差</strong> 等等，所以了解UART时，不可避免需要先在电气特性上区分几个常用的概念，如 <strong>TLL电平</strong> 和 <strong>CMOS电平</strong>。</p>
<blockquote>
<p>TTL集成电路的主要型式为晶体管-晶体管逻辑门(transistor-transistor logic gate)，TTL大部分都采用5V电源。</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>TTL电平（参考值）</th>
<th>CMOS电平（参考值）</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>输入高电平</td>
<td>≥ 2.4V</td>
<td>≈ 0.7*VCC</td>
</tr>
<tr class="even">
<td>输入低电平</td>
<td>≤ 0.4V</td>
<td>≈ 0.3*VCC</td>
</tr>
<tr class="odd">
<td>输出高电平</td>
<td>≥ 2.0V</td>
<td>≈ VCC 或 ＜0.9*VCC</td>
</tr>
<tr class="even">
<td>输出低电平</td>
<td>≤ 0.8V</td>
<td>≈ GND 或 &lt; 0.1*VCC</td>
</tr>
</tbody>
</table>
<p><strong>注</strong>：VCC的概念可以参考文章《<a href="https://islet.space/2021/07/10/Hardware/Circuit/2021-07-10-VCC%E3%80%81VDD%E3%80%81VEE%E3%80%81VSS%E7%9A%84%E5%8C%BA%E5%88%AB/">VCC、VDD、VEE、VSS的区别</a>》，具体输入输出的高低电平范围需要参考芯片及电路的手册。</p>
</blockquote>
<h1 id="接口">接口</h1>
<p>以下介绍均为UART常用的物理接口。</p>
<p><strong>D型数据接口连接器</strong>，用于连接电子设备（比如：计算机与外设）的接口标准。因形状类似于英文字母D，故得名D型接口。</p>
<p>按照接口数量细分为A型（15针），B型（25针），C型（37针），D型（50针），E型（9针）。因此常见的计算机并口即为DB25针的连接器。而串口则应为DE9针连接器。</p>
<p>由于早期的计算机的串口与并口都是使用DB25针连接器，而人们则习惯把字母B与D合在一起记了下来，当作D型接口的共同名字，以至于后来计算机串口改用9针接口以后，人们更多的使用DB9而不是DE9来称呼9针的接口。这一习惯进一步推广的结果就是如今人们使用DBxx来代表D型接口，数字xx则为接口的针数。</p>
<h2 id="db9">DB9</h2>
<p>COM口是指针对串行通信协议的一种端口，是PC上异步串行通信口的简写，大部分为9针孔D型。</p>
<p>因此 <strong>DB9</strong> 就和 <strong>COM口</strong> 混用了，但是COM口里又进一步区分RS232，RS422和RS485，传输功能依次递增。</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915110415.png" alt="image-20210915103057209" /><figcaption aria-hidden="true">image-20210915103057209</figcaption>
</figure>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 DB9/COM口在各RS标准下的引脚使用和定义
</div>
<p>但由于历史原因，IBM的PC外部接口配置为RS232，成为实际上的PC界默认标准。所以，<strong>现在PC机的COM口的物理标准均为RS232</strong>。DB9/COM口的公头和母头实际外观如下：</p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210915093214837.png" alt="image-20210915093214837" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210915104612002.png" alt="image-20210915104612002" style="zoom:70%;" />
</div>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 DB9/COM口的公头（左）和母头（右）外观
</div>
<h2 id="端子">端子</h2>
<p>端子，Terminal，也称为 <strong>接线终端</strong> / <strong>接线端子</strong>。</p>
<p>种类分单孔，双孔，插口，挂钩等，从材料分，铜镀银，铜镀锌，铜，铝，铁等。它们的作用主要传递电信号或导电用。</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915212912.jpeg" alt="端子排型号" /><figcaption aria-hidden="true">端子排型号</figcaption>
</figure>
<h1 id="转换器">转换器</h1>
<h2 id="usb转ttl">USB转TTL</h2>
<p>常见的USB转TTL的芯片，如CP2101 / CP2102 / CH340 / CH341 / FT232BM / FT232RL / PL2303 / PV8651等，尤其CH340和CP2102 的转换器最为常见。</p>
<p><img src="https://pic.islet.space/2021/09/20210915113927.png" alt="image-20210915113729086" style="zoom:50%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 USB转TTL（CH340G芯片）转换器
</div>
<p><img src="https://pic.islet.space/2021/09/20210915210459.png" alt="image-20210915114016213" style="zoom:67%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 USB转TTL（FT232芯片）转换器
</div>
<h2 id="usb转db9rs232">USB转DB9(RS232)</h2>
<p><img src="https://pic.islet.space/2021/09/20210915110421.png" alt="image-20210915095451523" style="zoom:67%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 USB转DB9数据线
</div>
<h2 id="rj45和db9">RJ45和DB9</h2>
<p>这种转换器通常用在交换器和路由器的调试工作上，</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915110424.png" alt="image-20210915105657103" /><figcaption aria-hidden="true">image-20210915105657103</figcaption>
</figure>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 RJ45母 转 DB9公
</div>
<p><img src="https://pic.islet.space/2021/09/20210915110427.png" alt="image-20210915105821577" style="zoom:67%;" /></p>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 RJ45公 转 DB9母
</div>
<h2 id="rj45转端子">RJ45转端子</h2>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/20210915112733.jpeg" alt="img" style="zoom:100%;" /><img src="https://pic.islet.space/2021/09/20210915112736.jpeg" alt="img" style="zoom:100%;" /><img src="https://pic.islet.space/2021/09/20210915112738.jpeg" alt="img" style="zoom:100%;" />
</div>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 RJ45公 转 2/3/4引脚端子
</div>
<h2 id="rs-232转rs-485">RS-232转RS-485</h2>
<p>目前主流的家用台式机上已经逐渐取消DB9接口，在某些旧台式电脑主机或者商用台式电脑主机上可能仍有DB9端口可以适配 RS-232（DB9公/母）/RS-485（端子） 转换器，然后再利用一根双绞线（可以用网线制作）连接转换器的 <code>A+</code> / <code>B-</code> 端子 和 通信设备。如下图所示：</p>
<figure>
<img src="https://pic.islet.space/2021/09/20210915210514.png" alt="image-20210915091142748" /><figcaption aria-hidden="true">image-20210915091142748</figcaption>
</figure>
<div style="font-size: 0.8rem; text-align: center; font-weight: 900;">
图 DB9公（RS232）转3引脚端子(RS485)
</div>
<p>由于该转换器为电气隔离设计，<mark>需要使用独立的VCC/GND/T/R来进行供电，因此不能只连接两根信号线。</mark></p>
<p>该类转换器同样按照DB9接口的公/母来区分引脚/信号定义，下表为深圳市宇泰科技出品的UT-2201转换器说明书中的内容：</p>
<p><img src="https://pic.islet.space/2021/09/20210915210523.png" alt="image-20210915142023932" style="zoom:67%;" /></p>
<p>下图为RS485和转换器之间的连接示意，转换器和单点之间的连接：</p>
<p><img src="https://pic.islet.space/2021/09/20210915210526.png" alt="image-20210915141402305" style="zoom:50%;" /></p>
<p>转换器和多点的连接：</p>
<p><img src="https://pic.islet.space/2021/09/20210915210528.png" alt="image-20210915141728889" style="zoom:50%;" /></p>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《串行通信技术 面向嵌入式系统开发》 周云波 著 中国工信出版集团 电子工业出版社</li>
<li><a target="_blank" rel="noopener" href="http://www.farnell.com/datasheets/2254540.pdf">《ANALOG DEVICE-5 V Low PowerEIA RS-485 Transceiver》</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ti.com/lit/an/slla036d/slla036d.pdf">《InterfaceCircuitsforTIA/EIA-485(RS-485)》</a></li>
<li><a target="_blank" rel="noopener" href="https://item.taobao.com/item.htm?id=546418892634">聚英JY-CON503 RS232转RS485/RS422 宽压DC7-30V供电 全隔离设计</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yeshenmeng/p/10729070.html">DB9针和DB25针串口的引脚定义</a></li>
<li><a target="_blank" rel="noopener" href="http://www.360doc.com/content/20/0803/20/44130189_928354146.shtml">为什么越来越多人使用RS232接口，却还分不清DB9、DB25的引脚定义？</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/RS-232/2022036?fromtitle=rs232&amp;fromid=3555506&amp;fr=aladdin">RS-232</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/DB9/1360191?fr=aladdin">DB9</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/89240672">串口、COM口、UART口, TTL、RS-232、RS-485区别详解</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25893717">UART、RS232、TTL关系浅析</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/shuziluoji1988/article/details/22413497">RS232、RS422、RS485、TTL电平</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/66241216">一文搞懂Modbus与RS485通信协议</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/09/02/Programming/2021-09-02-%E4%BD%BF%E7%94%A8VS-Code%E5%90%8C%E6%AD%A5Gitee%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/02/Programming/2021-09-02-%E4%BD%BF%E7%94%A8VS-Code%E5%90%8C%E6%AD%A5Gitee%E9%A1%B9%E7%9B%AE/" class="post-title-link" itemprop="url">使用VS Code同步Gitee项目</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-02 21:50:00" itemprop="dateCreated datePublished" datetime="2021-09-02T21:50:00+08:00">2021-09-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-16 00:33:06" itemprop="dateModified" datetime="2021-09-16T00:33:06+08:00">2021-09-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>自从Github被微软收购，除了Copilot这个AI代码写作助手，大家开源贡献的代码都被拿来用了之后，就不想在Github上贡献代码了。</p>
<p>转而使用Gitee，感觉也挺好。</p>
<h1 id="生成并绑定公钥">生成并绑定公钥</h1>
<p>使用terminal生成公钥：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure>
<p>遇到选择就按回车，不用管就好。然后使用以下命令进行查看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>
<p>公钥样例（千万不要复制下面的模板）如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-rsa BBBBA3NzaC1yc2EBBBBDAQBABBBABQCoLmvwKsFETfy0Lj8VN0QwDj/fu2J1msoM+kWCLTj64zXXXXXXXXXSKQxj30zjVO4tZ9PsO/jaItdev1uV7a9lk9MiemLLAxc1LSYsBdki81tx+7941rl9y/XXXXXXXXXXDjNpPCMq6xH8ZSRoRLcgCz+gRaDfnQALWBcavEO0uVqYGn4I4KRFPup7gm+3j5gRpdm1uKtkrqHxqykErCwXXXXXXXXXX6+okRt/TN5jjq6zV44D6tRYAK6oCOFpwO/RTqTIUU//w/XXXXXXXXXXXXXXXXXXXXdPCqs8Zax9cH/31FJqltQzsRbGDLTFFXqyICK7QKVgFXGhrzM3AVvD xxxx@xxxx.local</span><br></pre></td></tr></table></figure>
<h1 id="绑定到gitee配置">绑定到Gitee配置</h1>
<p>这里就不延时注册Gitee账户了。</p>
<p>在Gitee头像下点击 <strong>设置</strong> ，然后在左侧选择 <strong>SSH公钥</strong>，将生成的公钥粘贴进去，标题会自动识别和生成，使用默认标题即可，最后点击 <strong>确定</strong> 进行保存。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902220637986.png" alt="image-20210902220637986" /><figcaption aria-hidden="true">image-20210902220637986</figcaption>
</figure>
<h1 id="在gitee上生成项目">在Gitee上生成项目</h1>
<p>在gitee页面右上角选择那个 <code>+</code> 号，选择里面的 <strong>新建仓库</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222312335.png" alt="image-20210902222312335" /><figcaption aria-hidden="true">image-20210902222312335</figcaption>
</figure>
<p>跳转到 <strong>新建仓库</strong> 仓库页面，填写相关信息即可。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222413221.png" alt="image-20210902222413221" /><figcaption aria-hidden="true">image-20210902222413221</figcaption>
</figure>
<p>然后在仓库页面的 <strong>克隆/下载</strong> 处选择 <strong>HTTPS</strong> 源 并 <strong>复制</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222531450.png" alt="image-20210902222531450" /><figcaption aria-hidden="true">image-20210902222531450</figcaption>
</figure>
<h1 id="绑定vscode">绑定VSCode</h1>
<p>在本地新建文件夹，命名和存储路径随意。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222116108.png" alt="image-20210902222116108" /><figcaption aria-hidden="true">image-20210902222116108</figcaption>
</figure>
<p>然后使用VSCode打开该文件夹，如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222631177.png" alt="image-20210902222631177" /><figcaption aria-hidden="true">image-20210902222631177</figcaption>
</figure>
<p>点选左侧树杈型图标，选择 <strong>初始化存储库</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902222655162.png" alt="image-20210902222655162" /><figcaption aria-hidden="true">image-20210902222655162</figcaption>
</figure>
<p>在上方 <code>...</code> 处选择 <strong>远程</strong>，<strong>添加远程仓库</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223026835.png" alt="image-20210902223026835" /><figcaption aria-hidden="true">image-20210902223026835</figcaption>
</figure>
<p>粘贴刚刚复制过来的仓库地址。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223107646.png" alt="image-20210902223107646" /><figcaption aria-hidden="true">image-20210902223107646</figcaption>
</figure>
<p>填写远程存储库名称，就是仓库名称。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223222009.png" alt="image-20210902223222009" /><figcaption aria-hidden="true">image-20210902223222009</figcaption>
</figure>
<p>VSCode右下角会出现如下提示，选择 <strong>是</strong>。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223253826.png" alt="image-20210902223253826" /><figcaption aria-hidden="true">image-20210902223253826</figcaption>
</figure>
<p>正常来说点选 <strong>拉取</strong> 也是直接可以拉取到远程数据的，但是也可能因为配置错误导致拉取失败，出现如下提示。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902223319460.png" alt="image-20210902223319460" /><figcaption aria-hidden="true">image-20210902223319460</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902224720818.png" alt="image-20210902224720818" /><figcaption aria-hidden="true">image-20210902224720818</figcaption>
</figure>
<h1 id="配置本地git参数">配置本地git参数</h1>
<p>如果拉取不成功，仍需要配置以下信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;xxxx&quot;</span></span><br><span class="line">git config --global user.email xxxx@xxx.com</span><br></pre></td></tr></table></figure>
<p>其中xxxx需要替换成个人在gitee网站的用户名和对应的邮箱，如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902224904264.png" alt="image-20210902224904264" /><figcaption aria-hidden="true">image-20210902224904264</figcaption>
</figure>
<h1 id="拉取仓库文件">拉取仓库文件</h1>
<p>如果仍然无法拉取仓库文件，可以在VSCode下按 <code>CTRL</code> + <code>J</code> 或 <code>COMMAND</code> + <code>J</code> 来打开，然后输入如下命令进行 拉取，命令中对应的源需要替换。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull https://gitee.com/xxxx/xxxx.git master</span><br></pre></td></tr></table></figure>
<p>拉取完后如下所示：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902225228260.png" alt="image-20210902225228260" /><figcaption aria-hidden="true">image-20210902225228260</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210902225338842.png" alt="image-20210902225338842" /><figcaption aria-hidden="true">image-20210902225338842</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/31/Others/2021-08-31-%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/31/Others/2021-08-31-%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">可靠性工程师笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-31 08:40:00" itemprop="dateCreated datePublished" datetime="2021-08-31T08:40:00+08:00">2021-08-31</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-15 00:00:27" itemprop="dateModified" datetime="2021-10-15T00:00:27+08:00">2021-10-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Others/" itemprop="url" rel="index"><span itemprop="name">Others</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="可靠性概论">可靠性概论</h1>
<p>只有在图纸设计阶段就考虑到使用场景时遇到的问题，再按图生产，才能制造出合格的产品。</p>
<blockquote>
<ul>
<li>1950年12月7日，美国电子设备可靠性专门委员会成立。</li>
<li>1952年8月21日，电子设备可靠性咨询组（AGREE）成立。</li>
<li>1953年，美国兰德公司给出衡量武器系统优劣的七项参数：性能、可靠性、精度、易损性、可操作性、维修性和可用性。</li>
<li>1957年6月，AGREE发表《军用电子设备可靠性》研究报告。</li>
</ul>
</blockquote>
<p>可靠性工程这门学科被认为是自1957年问世的。</p>
<p>1957年6月，AGREE发表的《军用电子设备可靠性》研究报告中，提出一套可靠性设计、试验及管理方法，形成了一套完善的可靠性设计、试验和管理标准。并在新一代产品的研制中，逐渐制定了较为完善的可靠性大纲，规定了定量的可靠性要求，进行了可靠性分配及预计、故障模式及影响分析（FMEA）和故障树分析（FTA），采用了冗余设计，开展了可靠性鉴定试验、验收试验和老炼试验，进行了可靠性评审等。</p>
<blockquote>
<ul>
<li>1970年代，可靠性发展步入成熟阶段。</li>
<li>1980年，美国国防部颁布《（D0DD 5000.40）可靠性及维修性》。</li>
<li>1985年，美国空军推行“可靠性及维修性2000年行动计划”（R&amp;M2000），提出了“可靠性翻一番，维修性减半”的目标。</li>
</ul>
</blockquote>
<h2 id="可靠性定义">可靠性定义</h2>
<p><strong>可靠性</strong> 是指产品在 <strong>规定条件下</strong> 和 <strong>规定时间内</strong>，<mark>完成规定功能</mark> 的能力。</p>
<p><strong>维修性</strong> 是指产品在 <strong>规定条件下</strong> 和 <strong>规定时间内</strong>，按规定的程序和方法维修时，<mark>保持或恢复到规定功能</mark> 的能力。</p>
<h3 id="三个时间点">三个时间点</h3>
<p>如果将产品比作人，那么产品从被研发、生产、出厂、使用到寿命终结的阶段，就好比人受精、怀胎、分娩、成长到死亡的阶段。将整个过程看做一个时间轴 $ t $ ， 那么其中的产品出厂（人的分娩）的时间就为 $ t=0 $，产品被研发和生产（人的受精、怀胎）的阶段，其时间被视为 <span class="math inline">\(t&lt;0\)</span>​， 产品被使用到寿命终结（人的成长到死亡）的阶段，其时间被视为 <span class="math inline">\(t&gt;0\)</span>​ 。这种方法是将产品简单划为三个时间点，例如在 <span class="math inline">\(t&lt;0\)</span>​ 时，研发和预制是两个不同的工作内容或阶段。</p>
<h3 id="三个阶段">三个阶段</h3>
<p>实际上，<span class="math inline">\(t=0\)</span>​ 仅仅是个时间点，在可靠性研究过程中，产品寿命周期通常是按以下三个阶段进行研究：<strong>研发阶段</strong>（<span class="math inline">\(t&lt;0\)</span>​）、<strong>生产制造阶段</strong>（<span class="math inline">\(t&lt;0\)</span>​）和 <strong>使用至报废阶段</strong> （<span class="math inline">\(t&gt;0\)</span>​）。</p>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图1-1 质量与可靠性关系示意图
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
表 质量、可靠性与时间三者的关系
</div>
<table>
<thead>
<tr class="header">
<th></th>
<th>质量的度量</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>t = 0<br>出厂时间</td>
<td>使用产品合格率进行度量</td>
</tr>
<tr class="even">
<td>t &lt; 0<br>研制阶段</td>
<td>提高 <strong>制造过程</strong> 中的一致性和稳定性，以降低不合格率</td>
</tr>
<tr class="odd">
<td>t &gt; 0<br>使用阶段</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="可靠性数学基础">可靠性数学基础</h1>
<p>所有可观测的现象包括 <strong>自然现象</strong> 和 <strong>社会现象</strong>，按照结果的确定性对此类现象进行分类可以分为：<strong>确定现象</strong> 和 <strong>不确定现象</strong>。</p>
<pre class="mermaid">graph LR
现象 --结果确定--> 确定现象
现象 --结果不确定--> 不确定现象 --具有统计规律--> 随机现象
不确定现象 --不具有统计规律--> 未知</pre>
<h2 id="随机">随机</h2>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 38%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="header">
<th>概念</th>
<th>定义</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>随机现象</strong></td>
<td>具有统计规律性的 <strong>不确定现象</strong>。</td>
<td>- 描述 <strong>过程/现象可能性</strong></td>
</tr>
<tr class="even">
<td><strong>随机事件</strong></td>
<td>随机现象的某种 <strong>可能结果</strong>。</td>
<td>- 描述 <strong>结果可能性</strong><br>- 具有不可确定性，即事件真正发生之前不能确定其是否出现。</td>
</tr>
<tr class="odd">
<td><strong>随机试验</strong></td>
<td>研究随机现象中各种 <strong>可能发生的结果的过程</strong>。</td>
<td>- 描述 <strong>研究结果可能性的过程</strong><br>- 试验全部可能结果的集合可确定<br>- 试验条件不变的情况下，试验可以无限重复<br>- 试验的结果以随机的形式发生（实验条件相同，结果可能不同）</td>
</tr>
</tbody>
</table>
<p>随机现象之所以称之为随机现象，是因为现象发生后具有1个以上的可能结果，如果仅有1种结果，则可以称之现象和事件为 <strong>确定现象</strong> 和 <strong>确定事件</strong>。</p>
<p>例如：</p>
<blockquote>
<p>小球会落入某个洞口，小球的总数为2，小球落入洞口的现象是可观察可统计的，但小球确实地落在哪个洞口中具有不确定性，称之为现象。</p>
<p>但小球落入到洞口A或者洞口B，是可以预测到的结果，落入洞口A则称之为事件A，落入洞口B则称之为事件B，总称之为事件。</p>
</blockquote>
<h2 id="频率概率">频率/概率</h2>
<p>每一种随机现象的试验结果用 <strong>事件</strong> 一词来描述，则随机事件有可能在一次试验中可能发生，也可能不发生，其事件的发生可能性使用 <strong>频率</strong> 或 <strong>概率</strong> 来度量。</p>
<p>在相同试验条件下，进行 <span class="math inline">\(n\)</span> 次试验，事件A的出现次数 <span class="math inline">\(m\)</span> 称之为 <strong>频数</strong> ，使用 <strong>试验总次数</strong> <span class="math inline">\(n\)</span> 和 <strong>事件A的频数</strong> <span class="math inline">\(m\)</span>​ 来表示 事件A在所有试验下的 <strong>频率</strong> <span class="math inline">\(P^*(A)\)</span> ： <span class="math display">\[
P^*(A)={m\over n} \tag{频率公式}
\]</span></p>
<p><strong>频率</strong>、<strong>频数</strong>、<strong>频次</strong> 等术语在描述或者度量事件发生的可能性大小时，会因试验总次数太低 或 某个随机事件出现的次数具有波动性而导致不合理，就连以上三个词汇本身在描述时含有一定的随机性。</p>
<p>但在 <strong>大量重复</strong> 某一试验时，频率趋于稳定，此时该稳定值可以称之为随机事件的 <strong>概率</strong> 或 <strong>统计概率</strong>，使用 <span class="math inline">\(P(A)\)</span> 表示。</p>
<p>即，<strong>概率</strong> 和 <strong>频率</strong> 两个词汇在描述随机试验中的事件时，<mark>最大的区别在于该事件频率值是否趋于 <strong>稳定</strong>，或者试验本身的总次数是否已经 <strong>足够大</strong></mark>。</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>频率</th>
<th>概率</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>数学符号</strong></td>
<td><span class="math inline">\(P^*(A)\)</span></td>
<td><span class="math inline">\(P(A)\)</span></td>
</tr>
<tr class="even">
<td><strong>特点</strong></td>
<td>- <strong>试验值</strong>，具有波动性<br>- <strong>近似反映</strong> 事件发生的可能性大小</td>
<td>- <strong>理论值</strong>，由事件的本质属性决定<br>- <strong>精确反映</strong> 事件的可能性大小</td>
</tr>
</tbody>
</table>
<h2 id="概率分布">概率分布</h2>
<p>常用的分布函数由：两点分布、<strong>二项分布</strong>、<strong>泊松分布</strong>、均匀分布、<strong>正态分布</strong>、<strong>对数正态分布</strong>、<strong>指数分布</strong> 和 <strong>威布尔分布</strong> 等。</p>
<p>随机变量按照试验结果的值是否有限或连续可以分为：<strong>离散型随机变量</strong> 和 <strong>连续型随机变量</strong>，其中离散型随机变量在可靠性工程中常见的统计分布类型有 <strong>二项分布</strong> 和 <strong>泊松分布</strong>；连续型随机变量在可靠性工程中常见的统计分布类型有： <strong>指数分布</strong>、<strong>正态分布</strong>、<strong>对数正态分布</strong> 和 <strong>威布尔分布</strong>。</p>
<pre class="mermaid">graph LR
id1[随机变量] --试验结果的值有限--> id2[离散型随机变量]
id1 --试验结果的值连续--> id3[连续型随机变量]
id2 --> 二项分布
id2 --> 泊松分布
id3 --> 正态分布
id3 --> 对数正态分布
id3 --> 指数分布
id3 --> 威布尔分布γ=0</pre>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 39%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">离散型随机变量</th>
<th style="text-align: left;">连续型随机变量</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>可能取值范围</strong></td>
<td style="text-align: left;">可能取值有限</td>
<td style="text-align: left;">给定区间（或无限区间）内可取得任意数值</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>可能取值符号</strong></td>
<td style="text-align: left;"><span class="math inline">\(x_1, x_2,x_3...x_n\)</span></td>
<td style="text-align: left;">[0,∞)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>概率函数</strong>/<strong>分布律</strong><br><em>某点的概率</em></td>
<td style="text-align: left;"><span class="math inline">\(P(X=x_i)=p_i,(i=1,2,3 ... n)\)</span>​</td>
<td style="text-align: left;">/</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>概率密度函数</strong><br><em>概率在点的变化率</em></td>
<td style="text-align: left;">/</td>
<td style="text-align: left;"><span class="math inline">\(f(x)=F&#39;(x)={dF(x)\over dx}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>概率分布函数</strong>/<strong>累积概率函数</strong><br><em>区间内的概率之和</em></td>
<td style="text-align: left;"><span class="math inline">\(F(x)=P(X≤x)=\sum_{x_k≤x}p_k\)</span>​​​</td>
<td style="text-align: left;"><span class="math inline">\(F(x)=P(X≤x)\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>性质</strong></td>
<td style="text-align: left;">- 任意取值变量的概率都在 <code>[0,1)</code> 之间：<span class="math inline">\(0≤P(X=x_i)=p_i＜1\)</span>​​<br>- 所有事件概率总和为 <code>1</code> ：<span class="math inline">\(\sum^n_{i=1}p_i=1\)</span>​</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p><strong>概率密度函数</strong> 或 <strong>概率分布</strong> <mark>反映了随机变量的统计规律</mark>。概率密度函数值反映了概率在该点的变化率，而非该点的概率。</p>
<p>以下需要区分几个概念，什么是 <strong>故障概率函数</strong>、<strong>故障率函数</strong>、<strong>故障概率密度函数</strong>、<strong>故障密度函数</strong>、<strong>可靠度函数</strong>？</p>
<p><strong>故障概率函数</strong>，也称为 <strong>故障率函数</strong>，即 <strong>失败概率函数</strong>，用事件的失败概率进行求解。</p>
<p><strong>故障概率密度函数</strong>，即适用于 连续型随机变量的故障概率函数。</p>
<p>在连续型统计分布中，<code>故障密度函数 = 可靠度函数 * 故障率函数</code>。</p>
<h3 id="离散型随机变量分布">离散型随机变量分布</h3>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 31%" />
<col style="width: 35%" />
<col style="width: 16%" />
<col style="width: 8%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>（故障）概率函数</th>
<th>（故障）（累积）概率分布函数</th>
<th>均值 <span class="math inline">\(\mu\)</span></th>
<th>方差 <span class="math inline">\(\sigma^2\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>二项分布</strong></td>
<td><span class="math inline">\(P(x)=C^x_np^xq^{n-x}\)</span>​​<br><span class="math inline">\(C^x_n = {n!\over x!(n-x)!}\)</span>​</td>
<td><span class="math inline">\(F(x)=\sum ^r_{x=0} C^x_n p^x q^{n-x}\)</span>​<br><span class="math inline">\(C^x_n = {n!\over x!(n-x)!}\)</span></td>
<td><span class="math inline">\(np\)</span></td>
<td><span class="math inline">\(npq\)</span></td>
</tr>
<tr class="even">
<td><strong>泊松分布</strong></td>
<td><span class="math inline">\(P(x)={(np)^x \over x!}e^{-np}\)</span></td>
<td><span class="math inline">\(F(x) = \sum ^r_{x=0} {(np)^x \over x!}e^{-np}\)</span></td>
<td><span class="math inline">\(\lambda\)</span> <br><span class="math inline">\(\lambda = np\)</span></td>
<td><span class="math inline">\(\lambda\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><span class="math inline">\(n\)</span>​ 为 样本量，即抽取样本总数</li>
<li><span class="math inline">\(x\)</span> 或 <span class="math inline">\(r\)</span> ​均为失败数，即抽取样本总数下失败的数量</li>
<li><span class="math inline">\(p\)</span> 为 失败概率</li>
<li><span class="math inline">\(q\)</span> 为 成功概率</li>
</ul>
</blockquote>
<p><strong>需要注意</strong>： <span class="math inline">\(C^x_n = {n!\over x!(n-x)!}\)</span>​​​ ，是为 <strong>总试验次数的累乘</strong>（阶乘）与 （<strong>成功次数的累乘</strong> 和 <strong>失败次数的累乘</strong> 之积） 的商。</p>
<h4 id="二项分布">二项分布</h4>
<p><strong>贝努力试验</strong>：随机变量的基本结果只有两种（成功/失败）的试验。</p>
<p><strong>N重贝努力试验</strong>：随机现象是由N次相同的贝努力试验组成，每次试验结果 <strong>只有两种</strong> 且 <strong>互不影响</strong>。</p>
<p><strong>例题 2-1</strong></p>
<blockquote>
<p>某新产品在规定的生产条件下废品率为 <code>0.2</code> ，从批量较大的产品中随机抽取出 <code>20</code> 个，有 <span class="math inline">\(r\)</span>（<span class="math inline">\(r=0,1,2...,10\)</span>）个废品的概率是多少？</p>
</blockquote>
<p><strong>解</strong>：已知某新产品的的废品与否，可以分为两种独立事件：<strong>成功</strong> 或 <strong>失败</strong>（废品）。且单个产品是否成功或失败不影响下一个产品，即符合N重贝努力试验的要求。使用二项分布概率公式 <span class="math inline">\(P(x)=C^x_np^xq^{n-x}\)</span>​ 代入，随机抽取的20个产品即为 <span class="math inline">\(n\)</span> ，<span class="math inline">\(p\)</span> 为失败的概率，即题目中的 <code>0.2</code> 或 <code>20%</code>，<span class="math inline">\(x\)</span> 则为抽取总数 <code>20</code> 下的失败产品数量，代入可得： <span class="math display">\[
P(X=r)=C^r_{20}0.2^r(1-0.2)^{20-r},r=0,1,2,3...10 \tag{例2-1}
\]</span></p>
<h4 id="泊松分布">泊松分布</h4>
<p>二项分布和泊松分布是不一样的。虽然都是离散型随机变量的分布类型，但是 <mark>二项分布适用于抽样总数小于 <code>20</code> 且 失败概率大于 <code>0.05</code> 的情况</mark>，当抽样数无限大时，使用二项分布公式进行求解计算不了，代码中会出现 <code>-nan</code> 关键字，此时泊松分布可以轻松计算，因此，<mark style="font-weight: 900;">泊松分布被认为是二项分布在大抽样数下的扩展</mark>。</p>
<p>反之，如果将适用于二项分布的数据代入泊松分布公式，虽然能够计算，但是可能会获得异常数据。</p>
<p>即，虽然人为泊松分布是二项分布的在大抽样数下的扩展，但是毕竟公式和理念都不一样，不能够用来互相验证。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902105513439.png" alt="image-20210902105513439" /><figcaption aria-hidden="true">image-20210902105513439</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902105540683.png" alt="image-20210902105540683" /><figcaption aria-hidden="true">image-20210902105540683</figcaption>
</figure>
<p><strong>例题 2-2</strong></p>
<blockquote>
<p>控制台指示灯平均失效率为每小时 <code>0.001</code> 次。如果指示灯的失效数不能超过 <code>2</code> 个，该控制台指示灯工作 <code>500</code> 小时的可靠度是多少？</p>
</blockquote>
<p><strong>解</strong>：结合上方题目和泊松分布的概率公式 <span class="math inline">\(P(x)={(np)^x \over x!}e^{-np}\)</span> 可知，每小时平均失效率即为 失败概率 <span class="math inline">\(p\)</span> ，工作时长500个小时即为抽样总数 <span class="math inline">\(n\)</span> ，而失效灯数不能超过 <code>2</code> 个即为失败数 <code>x</code> ，代入公式可得： <span class="math display">\[
P(x) = {(500·0.001)^x \over x!} ·e^{-500*0.001} = {0.5^x \over x!} ·e^{-0.5} \tag{例2-2 概率函数}
\]</span> 然后求的其 <span class="math inline">\(P(0) + P(1) +P(2)\)</span> 之和： <span class="math display">\[
F(2) = \sum^2_{0}P(x) = {0.5^0 \over 0!} ·e^{-0.5} + {0.5^1 \over 1!} ·e^{-0.5} +{0.5^2 \over 2!} ·e^{-0.5} = 1.625*0.606530 = 0.9856 \tag{例2-2 累积概率分布函数}
\]</span></p>
<h3 id="连续型随机变量分布">连续型随机变量分布</h3>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 30%" />
<col style="width: 31%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="header">
<th>分布形式</th>
<th>故障密度函数 <span class="math inline">\(f(x)\)</span>​</th>
<th>可靠度函数 <span class="math inline">\(R(x)\)</span>​</th>
<th>故障率函数 <span class="math inline">\(\lambda(x)\)</span>​​</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>正态分布</td>
<td><span class="math inline">\(\frac{1}{\sigma\sqrt{2\pi}}e^{-{(x-\mu)^2}/{2\sigma^2}}\)</span>​​</td>
<td><span class="math inline">\(\frac{1}{\sigma\sqrt{2\pi}}\int_x^\infin e^{-{(x-\mu)^2}/{2\sigma^2}} dt\)</span>​</td>
<td><span class="math inline">\(e^{-(x-\mu)^2/(2\sigma)^2} / \int ^\infin _x e^{-(x-\mu)^2/(2\sigma)^2} dt\)</span>​</td>
</tr>
<tr class="even">
<td>对数正态分布</td>
<td><span class="math inline">\(\frac{1}{x\sigma\sqrt{2\pi}}e^{-(lnx-\mu)^2/2\sigma^2}\)</span></td>
<td><span class="math inline">\(\frac{1}{\sigma\sqrt{2\pi}}\int_x^\infin \frac{1}{t}e^{-(lnt-\mu)^2/2\sigma^2} dt\)</span>​​</td>
<td><span class="math inline">\(\frac{1}{x}e^{-(lnt-\mu)^2/(2\sigma)^2}/ \int_x^\infin \frac{1}{t}e^{-(lnt-\mu)^2/(2\sigma)^2} dt\)</span>​​</td>
</tr>
<tr class="odd">
<td>指数分布</td>
<td><span class="math inline">\(λe^{-λx}\)</span></td>
<td><span class="math inline">\(e^{-λx}\)</span></td>
<td><span class="math inline">\(λ\)</span></td>
</tr>
<tr class="even">
<td>威布尔分布</td>
<td>$()<sup>{m-1}e</sup>{-(x/)^m} $​​</td>
<td><span class="math inline">\(e^{-(x/\eta)^m}\)</span></td>
<td><span class="math inline">\(\frac{m}{\eta}(\frac{x}{\eta})^{m-1}\)</span></td>
</tr>
</tbody>
</table>
<h4 id="正态分布">正态分布</h4>
<p>在数学上，<strong>正态分布</strong>（Normal Distribution）利用 <strong>均值</strong> <span class="math inline">\(\mu\)</span>​ 和 <strong>方差</strong> <span class="math inline">\(\sigma^2\)</span>​ 记为 <span class="math inline">\(\Nu(\mu, \sigma^2)\)</span>​​ 。</p>
<p><strong>标准正态分布</strong>：正态分布曲线的 <strong>均值</strong> 为0，<strong>标准差</strong> 为1的正态分布，即 <span class="math inline">\(\mu = 0, \sigma = 1\)</span>​。</p>
<p><strong>一般正态分布</strong>：除标准正态分布以外的正态分布。任何正态分布都可以使用标准正态分布来计算。</p>
<h5 id="一般正态分布">一般正态分布</h5>
<p>正态分布的密度函数 <span class="math inline">\(f(x)\)</span> 为： <span class="math display">\[
\varphi(x) = \frac{1}{\sigma\sqrt{2\pi}}e^{-{(x-\mu)^2}/{2\sigma^2}} \tag{正态密度函数}
\]</span> 正态分布的可靠度函数 <span class="math inline">\(R(x)\)</span> 为： <span class="math display">\[
R(x) = \frac{1}{\sigma\sqrt{2\pi}}\int_x^\infin e^{-{(x-\mu)^2}/{2\sigma^2}} dt \tag{正态可靠度函数}
\]</span></p>
<h5 id="标准正态分布">标准正态分布</h5>
<p>标准正态分布以下简称标正，由于标正的均值为0，标准差为1，即 <span class="math inline">\(\mu = 0, \sigma = 1\)</span> ，代入对应公式可得 <strong>标正密度函数</strong> 记为 <span class="math inline">\(\varphi(z)\)</span> ，<strong>标正累积分布函数</strong> 记为 <span class="math inline">\(\Phi(z)\)</span>​ ，分别如下： <span class="math display">\[
\varphi(z) = \frac{1}{\sqrt{2\pi}} e^{-z^2/2} \tag{标正密度函数}
\]</span></p>
<p><span class="math display">\[
\Phi(z) = \int^z_{-\infin} \varphi(z) \ dz = \frac{1}{\sqrt{2\pi}} \int^z_{-\infin} e^{-z^2/2} \ dz \tag{标正累积分布函数}
\]</span></p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903143312170.png" alt="image-20210903143312170" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903144047691.png" alt="image-20210903144047691" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 标准正态分布密度函数曲线 及 累积曲线
</div>
<p>正态分布的 <strong>可靠度函数</strong> 为： <span class="math display">\[
R(t) = 1-\Phi(\frac{t-\mu}{\sigma}) \tag{正态可靠度函数}
\]</span></p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210903145950111.png" alt="image-20210903145950111" /><figcaption aria-hidden="true">image-20210903145950111</figcaption>
</figure>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 标准正态分布可靠度函数曲线
</div>
<p>总结成下表：</p>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 31%" />
<col style="width: 31%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>密度函数</th>
<th>累积分布函数</th>
<th>可靠度函数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>一般正态</strong></td>
<td><span class="math inline">\(\varphi(x) = \frac{1}{\sigma\sqrt{2\pi}}e^{-{(x-\mu)^2}/{2\sigma^2}}\)</span></td>
<td><span class="math inline">\(\Phi(x) = \frac{1}{\sigma\sqrt{2\pi}} \int^x_{-\infin} e^{-{(x-\mu)^2}/{2\sigma^2}} \ dx\)</span>​​</td>
<td><span class="math inline">\(R(x) = \frac{1}{\sigma\sqrt{2\pi}}\int_x^\infin e^{-{(x-\mu)^2}/{2\sigma^2}}\)</span></td>
</tr>
<tr class="even">
<td><strong>标准正态</strong></td>
<td><span class="math inline">\(\varphi(z) = \frac{1}{\sqrt{2\pi}} e^{-z^2/2}\)</span></td>
<td><span class="math inline">\(\Phi(z) = \int^z_{-\infin} \varphi(z) \ dz = \frac{1}{\sqrt{2\pi}} \int^z_{-\infin} e^{-z^2/2} \  dz\)</span>​</td>
<td><span class="math inline">\(R(t) = 1-\Phi(\frac{t-\mu}{\sigma})\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<p>正态分布的重要参数有以下几个：</p>
<ol type="1">
<li>工作时长 <span class="math inline">\(x\)</span></li>
<li>均值 <span class="math inline">\(\mu\)</span></li>
<li>标准差 <span class="math inline">\(\sigma\)</span></li>
</ol>
</blockquote>
<p><strong>需要注意的是</strong>：</p>
<ul>
<li><strong>一般正态密度函数</strong> 的符号记为 <span class="math inline">\(f(x)\)</span>​ ，<strong>标准正态密度函数</strong> 的符号记为小写的希腊字母 <span class="math inline">\(\varphi(z)\)</span>​。</li>
<li>一般其他分布的 <strong>累积分布函数</strong> 为 大写的 <span class="math inline">\(F(x)\)</span> 。</li>
<li><strong>标正累积分布函数</strong> 的符号记为大写的希腊字母 <span class="math inline">\(\Phi(z)\)</span>​​​​ ，与 <strong>标正密度函数</strong> 的符号发音一致，<mark style="font-weight: 900;">标正累积分布函数的值计算较为麻烦，可以通过查表获得</mark>。</li>
<li><mark>就标正比较特殊，需要全部用希腊字母</mark>。</li>
<li>因为 <strong>标正累积分布函数</strong> 和 <strong>标正可靠度函数</strong> 的曲线互为水平翻转。</li>
</ul>
<p><strong>例题 2-3</strong></p>
<blockquote>
<p>假设发电机的寿命服从正态分布，其均值为300小时，标准差为40小时。试求当工作时间为250小时时，发电机的可靠度是多少？</p>
</blockquote>
<p><strong>解</strong>：已知均值 <span class="math inline">\(u = 300\)</span> ，标准差 <span class="math inline">\(\sigma = 40\)</span> 且 工作时长为 <code>250</code> 小时，可代入正态可靠度函数进行求解，如下： <span class="math display">\[
R(t) = 1- \Phi(\frac{t-\mu}{\sigma}) = 1-\Phi(\frac{250-300}{40}) = 1 - \Phi(-1.25) \tag{例2-3 正态分布可靠度函数}
\]</span> 其中，<span class="math inline">\(\Phi(-1.25)\)</span>​​ 和 <span class="math inline">\(\Phi(1.25)\)</span>​​ 互补（和为 <code>1</code>），可以通过查询标准正态累积分布表 或使用 自行编写的函数进行计算，可得 <span class="math inline">\(\Phi(1.25) = 0.89\)</span>​​ ，则发电机的可靠度为: <span class="math display">\[
R(250) = 1-(1-\Phi(1.25)) = 1 - (1-0.89) = 0.89 \tag{例2-3 可靠度计算}
\]</span></p>
<h5 id="正态分布的特性">正态分布的特性</h5>
<ol type="1">
<li><span class="math inline">\(\Phi(x)\)</span> 和 <span class="math inline">\(\Phi(-x)\)</span> 为 <strong>互补关系</strong>，即 <span class="math inline">\(\Phi(x) + \Phi(-x) =1\)</span>​</li>
<li>在 <strong>标准正态分布</strong> 下，<strong>可靠度</strong> 和 <strong>累积分布值</strong> 互补为1， <span class="math inline">\(R(t) = 1-\Phi(t)\)</span>​，在 <strong>一般正态分布</strong> 下，需要注意加入 <strong>均值</strong> <span class="math inline">\(\mu\)</span> 和 <strong>标准差</strong>​ <span class="math inline">\(\sigma\)</span>​​ 。</li>
</ol>
<h5 id="正态分布的用途">正态分布的用途</h5>
<p>在可靠性工程中，正态分布具有以下三种用途：</p>
<ol type="1">
<li>分析由于磨损发生故障的产品，如机械装置。</li>
<li>对制造的产品及其性能是否符合规范进行分析。</li>
<li>用于机械可靠性概率设计。</li>
</ol>
<h4 id="对数正态分布">对数正态分布</h4>
<p><strong>对数正态分布</strong>（Logarithmic Normal Distribution） 是 正态分布随机变量的 <strong>自然对数</strong> <span class="math inline">\(y = ln(x)\)</span>​​​​ ，记为 <span class="math inline">\(LN(\mu, \sigma^2)\)</span>​​​​​​。</p>
<p><strong>特点</strong>：使用 对数正态分布 的对数变换 可以使得较大的数缩小为较小的数，且越大的数缩小的越明显。好处是使得较为分散的数据通过对数变换后，可以相对地集中起来，所以常把 <mark style="font-weight: 900;">跨几个数量级的数据用对数正态分布区拟合</mark>（如下方例题2-4）。</p>
<p><strong>适用产品/场景</strong>：<strong>半导体器件</strong> 的可靠性分析、<strong>机械零件</strong> 的疲劳寿命分析 或 在 <strong>维修性分析</strong> 中对维修时间数据的分析。</p>
<p>对数正态分布的密度函数如下，需要注意，该函数的取值范围为 <span class="math inline">\([0,\infin)\)</span>​ <span class="math display">\[
f(x)=\frac{1}{x\sigma\sqrt{2\pi}}e^{-(lnx-\mu)^2/2\sigma^2}\tag{对数正态分布密度函数}
\]</span></p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903171208666.png" alt="image-20210903171208666" style="zoom: 80%;" /><img src="https://pic.islet.space/2021/09/image-20210903170823326.png" alt="image-20210903170823326" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 标准对数正态分布密度函数曲线 及 累积曲线
</div>
<blockquote>
<p><strong>注意</strong>：应该是没有标准对数正态分布的吧，就代入 <span class="math inline">\(\mu = 0, \sigma = 1\)</span>​ 进行计算求得图像</p>
</blockquote>
<p>对数正态累积分布函数如下： <span class="math display">\[
F(x) = \frac{1}{\sigma \sqrt{2\pi}} \int^x_0 \frac{1}{t} e^{-{(lnt-\mu)^2}/{2\sigma^2}} \ dt \tag{对数正态累积分布函数}
\]</span> 其可靠度函数如下： <span class="math display">\[
R(x) = 1 - \Phi(\frac{ln(x)-\mu}{\sigma}) \tag{对数正态分布可靠度函数}
\]</span> 其中，<span class="math inline">\(ln(x)\)</span>​​ 和 <span class="math inline">\(x\)</span>​​ 的均值和方差如下：</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 39%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>均值</th>
<th>方差</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(ln(x)\)</span></td>
<td><span class="math inline">\(\mu\)</span></td>
<td><span class="math inline">\(\sigma^2\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(x\)</span></td>
<td><span class="math inline">\(E(x)=exp(\mu + \frac{\sigma^2}{2})\)</span>​</td>
<td><span class="math inline">\(Var(x)=exp(2\mu + \sigma^2) · [exp(\sigma^2)-1]\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<p>对数正态分布的重要参数有以下几个：</p>
<ol type="1">
<li>工作时长 <span class="math inline">\(x\)</span></li>
<li>均值 <span class="math inline">\(\mu\)</span></li>
<li>标准差 <span class="math inline">\(\sigma\)</span></li>
</ol>
</blockquote>
<p><strong>例题 2-4</strong></p>
<blockquote>
<p>假设人们观察到炮管寿命服从对数正态分布，<span class="math inline">\(\mu = 9,\sigma = 2\)</span>。（注意，<span class="math inline">\(\mu\)</span> 和 <span class="math inline">\(\sigma\)</span> 是 <span class="math inline">\(ln(x)\)</span> 的均值和标准差）求发射1000发炮弹时的可靠度。</p>
</blockquote>
<p><strong>解</strong>：</p>
<p><strong>情况一</strong>：已知对数正态分布可靠度表格</p>
<p>在已知表格时，直接代入公式，然后查表计算即可。 <span class="math display">\[
R(1000)=1-\Phi(\frac{ln1000-9}{2}) = 1-\Phi(-1.046) = 1-0.15 = 0.85 \tag{例2-4 可靠度计算}
\]</span> <strong>情况二</strong>：未知对数正态分布可靠度表格</p>
<p>在没有对数正态分布可靠度值表格可查询的情况下，是没有办法直接得出答案的。正常的思路如下：</p>
<ol type="1">
<li>将 <span class="math inline">\(\mu=9, \sigma=2\)</span> 代入密度公式 <span class="math inline">\(f(x)\)</span></li>
<li>然后在区间 <span class="math inline">\((0,1000]\)</span>​ 内进行积分，通过累计分布函数 <span class="math inline">\(\Phi(1000)\)</span> ，可以得到其特定区间内的累积分布值。</li>
<li>然后使用 <code>1</code> 减去该累积分布值即可获得该可靠度值 <span class="math inline">\(R(1000)\)</span>。</li>
</ol>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903165737856.png" alt="image-20210903165737856" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903165632407.png" alt="image-20210903165632407" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 例题的对数正态累积分布曲线和可靠度曲线
</div>
<p>上面两个图片是经由C++函数计算并使用gnuplot进行绘制的，实际计算得到本例题的 <span class="math inline">\(\Phi(1000) = 0.14781, R(1000)= 0.85219\)</span>​</p>
<p>无聊着又稍微拟合了该产品在工作到 <code>100,000</code> 小时时的 <strong>可靠度曲线</strong> 和 工作到 <code>10,000</code> 小时时的 <strong>密度曲线</strong>。</p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903172937541.png" alt="image-20210903172937541" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903195121209.png" alt="image-20210903195121209" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 工作到10万小时的炮管的可靠度曲线 和 工作到1万小时的炮管的密度曲线
</div>
<h4 id="指数分布">指数分布</h4>
<p><strong>指数分布</strong>（Exponential Distribution） 是可靠性工程中最重要的一种分布。</p>
<p>当产品工作进入浴盆曲线的偶然故障期后，产品的故障率基本接近常数，其对应的故障分布函数就是指数分布。</p>
<p><strong>优点</strong>：</p>
<ul>
<li>参数估计简单容易，只有一个变量；</li>
<li>在数学上非常容易处理；</li>
<li>适用范围非常广；</li>
<li>大量指数分布的独立变量之和还是指数分布，具有可加性。</li>
</ul>
<p><strong>性质</strong>：</p>
<ul>
<li>指数分布的失效率 <span class="math inline">\(\lambda\)</span> 等于 <strong>常数</strong>；</li>
<li>指数分布的 <strong>平均寿命</strong> <span class="math inline">\(\theta\)</span> 和 <strong>失效率</strong> <span class="math inline">\(\lambda\)</span> 互为倒数，即 <span class="math inline">\(\theta = 1/\lambda\)</span> ；</li>
<li>指数分布“无记忆性”。（<strong>无记忆性</strong> 是指故障分布为指数分布的系统的失效率，在任何时刻都与系统已工作过的时间长短没有关系。）</li>
</ul>
<p>指数分布的密度函数如下： <span class="math display">\[
f(x) = \left\{ 
\displaylines{\lambda e^{-\lambda x}, x ≥ 0\\ 0,x &lt; 0} 
\right. \tag{指数分布密度函数}
\]</span> 其累积失效分布函数为： <span class="math display">\[
F(x) = 1 - e^{-\lambda x} \tag{指数累积分布函数}
\]</span> 其可靠度函数为： <span class="math display">\[
R(x)=e^{-\lambda x} \tag{指数分布可靠度函数}
\]</span></p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903190717009.png" alt="image-20210903190717009" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903191446082.png" alt="image-20210903191446082" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 故障率为100 和 故障率为0.01的指数分布密度函数曲线
</div>
<blockquote>
<p>上图为错误例子啊，因为故障率 <span class="math inline">\(\lambda = 100\)</span>​​​ 时已经高得离谱，且故障率和平均工作时长是呈反比的，故障率为 <code>100</code> 的话，就是说大概只能工作 <code>0.01</code> 小时（大概 <code>36</code> s），所以会看到该 <strong>密度曲线</strong> 在x轴没到0.1就飞降。把故障率修改为 <code>0.01</code>，即大概能工作100个小时，就可以看到较为 <strong><em>正常</em></strong> 的密度曲线了。</p>
</blockquote>
<p>如果要求其可靠度曲线，则用 <strong>密度值</strong> <span class="math inline">\(F(x)\)</span> 除以 <strong>故障率</strong> <span class="math inline">\(\lambda\)</span>​ 即可，曲线如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210903193144464.png" alt="image-20210903193144464" /><figcaption aria-hidden="true">image-20210903193144464</figcaption>
</figure>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 故障率为0.01的指数分布可靠度函数曲线
</div>
<p><strong>例题 2-5</strong></p>
<blockquote>
<p>机载火控系统的平均故障间隔时间是 <code>100</code> 小时，即 <span class="math inline">\(\theta = 100\)</span>​ 小时，工作5小时不发生故障的概率是多少？</p>
</blockquote>
<p><strong>解</strong>：由题目已知 <span class="math inline">\(\theta = 100\)</span> ， 即 <span class="math inline">\(\lambda = 0.01\)</span> ，要求的是工作5小时不发生故障的概率，即求可靠度。</p>
<p>代入指数分布可靠度公式 <span class="math inline">\(R(x)=e^{-\lambda x}\)</span> 即可求得 <code>0.951229</code>，即 <code>95.12%</code> 。</p>
<h4 id="威布尔分布">威布尔分布</h4>
<p><strong>威布尔分布</strong>（Weibull Distribution）是由 <strong>最弱环节模型</strong> 导出的，如链条的寿命就服从威布尔分布。</p>
<p>威布尔分布 是 <strong>通用分布</strong> ，通过调整分布参数可以构成各种不同的分布，可以为各种不同类型的产品的寿命特性建立模型。</p>
<p>威布尔分布既包括 故障率 为常数的模型，也包括故障率随时间变化的 <strong>递减</strong>（早期故障）和 <strong>递增</strong>（损耗故障）模型，因而可以描述更为复杂的失效过程。许多产品的故障率是单调递增的，威布尔分布可以很好地描述产品疲劳、磨损等损耗故障。</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 45%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>两参数公式</th>
<th>三参数公式</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>概率密度函数</td>
<td><span class="math inline">\(f(t)=\frac{m}{\eta}(\frac{t}{\eta})^{m-1}exp[-(\frac{t}{\eta})^m]\)</span></td>
<td><span class="math inline">\(f(t)=\frac{m}{\eta}(\frac{t-\gamma}{\eta})^{m-1}exp[-(\frac{t-\gamma}{\eta})^m]\)</span></td>
</tr>
<tr class="even">
<td>累积分布函数</td>
<td><span class="math inline">\(F(t)=1-exp[-(\frac{t}{\eta})^m]\)</span>​</td>
<td><span class="math inline">\(F(t)=1-exp[-(\frac{t-\gamma}{\eta})^m]\)</span></td>
</tr>
<tr class="odd">
<td>可靠度函数</td>
<td><span class="math inline">\(R(t)=exp[-(\frac{t}{\eta})^m]\)</span></td>
<td><span class="math inline">\(R(t)=exp[-(\frac{t-\gamma}{\eta})^m]\)</span></td>
</tr>
<tr class="even">
<td>故障率函数</td>
<td><span class="math inline">\(\lambda(t)=\frac{m}{\eta}(\frac{t}{\eta})^{m-1}\)</span></td>
<td><span class="math inline">\(\lambda(t)=\frac{m}{\eta}(\frac{t-\gamma}{\eta})^{m-1}\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<p>威布尔分布的重要参数有以下几个：</p>
<ol type="1">
<li>随机变量 <span class="math inline">\(t\)</span> ，<span class="math inline">\(t≥0\)</span>（两参数），<span class="math inline">\(t≥\gamma\)</span>​（三参数）</li>
<li>无量纲 形状参数 <span class="math inline">\(m,\ m&gt;0\)</span>​​</li>
<li>尺度参数 <span class="math inline">\(\eta,\ \eta&gt;0\)</span>​​</li>
<li>位置参数 <span class="math inline">\(\gamma, \ \gamma&gt;0\)</span></li>
</ol>
<p>除形状参数 <span class="math inline">\(m\)</span> 以外，其他参数单位相同。</p>
</blockquote>
<p><strong>例题 2-6</strong></p>
<blockquote>
<p>人们发现某种特定的发射管的失效时间服从威布尔分布，其中 <span class="math inline">\(m=2, \eta = 1000\)</span> 小时，试确定当任务时间为100小时时这种发射管的可靠度。</p>
</blockquote>
<p><strong>解</strong>：</p>
<p>威布尔分布除了时间 <span class="math inline">\(t\)</span> 以外，就只剩下三个参数，而题目中并无使用位置参数 <span class="math inline">\(\gamma\)</span> ，因此直接代入可靠度公式进行求解即可： <span class="math display">\[
R(x) =exp[-(\frac{t-\gamma}{\eta})^m] = e^{-(t/\eta)^m}  \tag{例2-6 可靠度求解}
\]</span> 得到该产品在工作时长为100小时时的可靠度为： <span class="math display">\[
R(100) = e^{-(100/1000)^2} = e^{-0.01} = 0.990049 ≈ 99\%
\]</span></p>
<p>使用C++驱动GNUPLOT拟合该曲线至 <span class="math inline">\(t=3000\)</span>​​ 时的 <strong>可靠度曲线</strong> 和 <strong>累积曲线</strong> 如下：</p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903201848206.png" alt="image-20210903201848206" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903203111178.png" alt="image-20210903203111178" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 例题2-6 威布尔分布的 可靠度曲线 和 累积曲线
</div>
<h2 id="参数估计">参数估计</h2>
<p>可靠性工程中，<strong>数理统计</strong> 是进行数据整理和分析的基础，<mark>其基本内容是统计推断</mark>。</p>
<p><mark>随机变量的概率分布虽然能很好地描述随机分布，但是通常不能对研究对象的总体都进行观测和试验</mark>，只能从中随机地抽取一部分子样进行观察和试验，获得必要的数据，对齐进行分析处理，然后对总体的 <strong>分布类型</strong> 和 <strong>参数</strong> 进行推断。</p>
<h3 id="抽样相关概念">抽样相关概念</h3>
<p><strong>总体</strong>：也称为 <strong>母体</strong>，研究对象的全体。</p>
<p><strong>个体</strong>：组成总体的每个基本单元。</p>
<p><strong>样本</strong>：也称为 <strong>子样</strong>，在总体中随机抽取的部分个体。</p>
<p><strong>样本值</strong>：在每次抽样后测得的具体数值（记为 <span class="math inline">\(x_1, x_2, x_3 ... x_n\)</span>）。</p>
<p><strong>样本容量</strong>：样本所包含的个体数目（记为 <span class="math inline">\(n\)</span>）。</p>
<p><strong>随机抽样</strong>：不掺入人为主观因素而具有随机性的抽样，即具有 <strong>代表性</strong> 和 <strong>独立性</strong> 的抽样。</p>
<p><strong>样本统计量</strong>：是指子样 <span class="math inline">\(x_1, x_2, ..., x_n\)</span> 是从母体 <span class="math inline">\(X\)</span> 中随机抽取出来后，进一步提炼和加工后的统计量，如 <strong>均值</strong> <span class="math inline">\(\overline x\)</span> 、<strong>方差</strong> <span class="math inline">\(S^2\)</span>、<strong>极差</strong> <span class="math inline">\(R\)</span>​​</p>
<p>子样之所以很宝贵，是因为包含了母体的各种信息，尚未对子样进一步提炼和加工处理前，母体的各种信息仍分散在子样中，子样经过加工成一些统计量之后可以反映出一些信息，如：<strong>均值</strong> 反映了母体数学期望信息，<strong>方差</strong> 反映了母体方差信息，<strong>极差</strong> 粗略地反映了母体分散程度，但不能直接用于估计母体的方差。下方为统计量的一些概念。</p>
<h3 id="统计量相关概念">统计量相关概念</h3>
<p><strong>均值</strong>：反映了母体数学期望的信息，表示为 <span class="math inline">\(\overline x =\frac{1}{n} \sum^n_{i=1}x_i\)</span>​​</p>
<p><strong>平均差</strong>：平均差是表示各个变量值之间差异程度的数值之一。指各个变量值同平均数的离差绝对值的算术平均数。</p>
<p><strong>方差</strong>：方差是在概率论和统计方差衡量随机变量或一组数据时离散程度的度量。概率论中方差用来度量随机变量和其数学期望（即均值）之间的偏离程度。统计中的方差（样本方差）是每个样本值与全体样本值的平均数之差的平方值的平均数，表示为 <span class="math inline">\(S^2=\frac{1}{n-1}\sum ^n_{i=1}(x_i-\overline x)^2\)</span>​ 。</p>
<p><strong>标准差</strong>：是离均差平方的算术平均数的平方根，是方差的算术平方根，表示为 <span class="math inline">\(\sigma=\sqrt{S^2}\)</span> 。</p>
<p><strong>极差</strong>：极差又称范围误差或全距(Range)，以 <span class="math inline">\(R\)</span>​ 表示，是用来表示统计资料中的变异量数(measures of variation)，其最大值与最小值之间的差距，即最大值减最小值后所得之数据。是指一组数据内的最大值和最小值之间的差异，表示为 <span class="math inline">\(R=max(x_1,x_2, ..., x_n)-min(x1, x2, ..., xn)\)</span> 。</p>
<h4 id="分布参数的点估计">分布参数的点估计</h4>
<p>如果 <span class="math inline">\(X\)</span> 是一个具有概率分布 <span class="math inline">\(f(x)\)</span> 的随机变量，样本容量为 <span class="math inline">\(n\)</span>，样本值为 <span class="math inline">\(x_1, x_2, ..., x_n\)</span> ，则与其位置参数 <span class="math inline">\(\theta\)</span> 相应的统计量 <span class="math inline">\(\hat{\theta }\)</span> 的估计值。</p>
<p>此处，<span class="math inline">\(\hat{\theta}\)</span> 是一个随机变量，因为它是样本数据的函数。在样本已经选好之后，就能得到一个确定的 <span class="math inline">\(\hat{\theta}\)</span> 值，就是 <span class="math inline">\(\theta\)</span> 的点估计。</p>
<h5 id="点估计的解析法">点估计的解析法</h5>
<p>在点估计的解析法中，有很多方法可以选择，如 矩法、最小二乘法、极大似然法、最好线性无偏估计、最好线性不变估计、简单线性无偏估计 和 不变估计。以上方法的特点如下：</p>
<ul>
<li>矩法只适用于完全样本；</li>
<li>最好线性无偏估计 和 不变估计 已有国家标准《GB 2689.4-1981 寿命试验和加速寿命试验的最好线性无偏估计法（用于威布尔分布）》，但只适用于定数截尾情况，在一定样本量下有专用表格；</li>
<li>极大似然法和最小二乘法适用于所有情况，极大似然法是精度最好的方法。</li>
</ul>
<h5 id="极大似然法">极大似然法</h5>
<p>极大似然估计（Maximum Likelihood Estimate, MLE）是一种重要的估计方法，利用总体分布函数表达式及样本数据两种信息来建立似然函数。</p>
<p><strong>特点</strong>：具有一致性、有效性 和 渐近无偏性 等优良性质。</p>
<p><strong>缺点</strong>：求解方法最为复杂，需要用迭代法并借助计算机求解。</p>
<h4 id="分布参数的区间估计">分布参数的区间估计</h4>
<p><strong>区间估计</strong>：在实际问题中，对于未知参数 <span class="math inline">\(\theta\)</span> ，并不一定求出其点估计值 <span class="math inline">\(\hat{\theta}\)</span> 为满足，仍希望求出其范围，并希望知道该范围包含未制参数 <span class="math inline">\(\theta\)</span> 真值的置信概率的估计。</p>
<p><strong>置信区间</strong>：表示计算估计的精确程度</p>
<p><strong>置信度</strong>：是样品的试验结果在母体的概率分布参数（如均值或标准差）的某个区间内出现的概率，表示结果的可信性。</p>
<p>与置信度不同，可靠度 是指 样品在规定条件下和规定时间内正常工作的概率，反映的是产品本身的质量状况。</p>
<h1 id="可靠性设计与分析">可靠性设计与分析</h1>
<h1 id="gitee项目分享">Gitee项目分享</h1>
<p>适用于《可靠性工程师手册》的数学函数已经开源共享至Gitee，依托于 GNUPLOT 的图形绘制能力，可以轻松查看各种函数的曲线形状，十分方便。</p>
<h1 id="math-for-reliability">Math-For-Reliability</h1>
<p>在Gitee上的开源项目，开放给所有学习可靠性的人使用。</p>
<p>Gitee项目地址：https://gitee.com/tonyliew/math-for-reliability</p>
<h1 id="debug_records">DEBUG_RECORDS</h1>
<h2 id="section">20210902-01</h2>
<p>在Linux上运行标准正态累积分布计算函数，其计算结果与标准正态分布表方向相反了。<span class="math inline">\(x = 0\)</span>​​ 时的 <span class="math inline">\(\Phi(x)\)</span>​​ 值本应为0.5，结果和 <span class="math inline">\(x = 5\)</span>​​ 时的 <span class="math inline">\(\Phi(x)\)</span>​​​​ 值相反。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902193634846.png" alt="image-20210902193634846" /><figcaption aria-hidden="true">image-20210902193634846</figcaption>
</figure>
<p>一番检查发现积分函数可能不适用</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902194119411.png" alt="image-20210902194119411" /><figcaption aria-hidden="true">image-20210902194119411</figcaption>
</figure>
<p>经过“校准”一番，终于修改好了，不知道还会不会卡Bug。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902194157770.png" alt="image-20210902194157770" /><figcaption aria-hidden="true">image-20210902194157770</figcaption>
</figure>
<p>目前可以计算x值为正时的累积分布值，结果与标准正态分布表一致。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902194241093.png" alt="image-20210902194241093" /><figcaption aria-hidden="true">image-20210902194241093</figcaption>
</figure>
<p>重新解答完 2-3例题，发现知道了修改bug的方法，也只是补上了而已，哈哈哈哈。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902200537224.png" alt="image-20210902200537224" /><figcaption aria-hidden="true">image-20210902200537224</figcaption>
</figure>
<p>经过验证，结果正确。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210902200910935.png" alt="image-20210902200910935" /><figcaption aria-hidden="true">image-20210902200910935</figcaption>
</figure>
<p>9月3日订正，为了生成标准正态累积分布的图形，发现带负号的 <code>integral()</code> 函数生成曲线时是 <strong>水平翻转</strong> 的。</p>
<div style="text-align: center;">
<img src="https://pic.islet.space/2021/09/image-20210903144047691.png" alt="image-20210903144047691" style="zoom:80%;" /><img src="https://pic.islet.space/2021/09/image-20210903145950111.png" alt="image-20210903145950111" style="zoom:80%;" />
</div>
<div style="font-size: 0.8rem; color: #222222; font-weight: 900; text-align: center;">
图 标准正态分布的 累积（故障）函数曲线 和 可靠度函数曲线 互为水平翻转
</div>
<p>仔细思考后发现，标准正态函数下，<strong>可靠度曲线值</strong> 是和 <strong>累积分布函数曲线</strong> 值各点互补为 <code>1</code> 的，很容易将累积分布函数和可靠度函数互相搞混，因此其图像才会互为 <strong>水平翻转</strong>，修改后的标正累积分布函数代码如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210903144813581.png" alt="image-20210903144813581" /><figcaption aria-hidden="true">image-20210903144813581</figcaption>
</figure>
<h1 id="参考">参考</h1>
<ol type="1">
<li>《可靠性工程师手册（第二版）》中国人名大学出版社 李良巧主编</li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/266435689">概率分布函数、概率密度函数</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/21/Others/2021-08-21-LaTex%E5%85%AC%E5%BC%8F%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/21/Others/2021-08-21-LaTex%E5%85%AC%E5%BC%8F%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">LaTex公式入门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-21 09:50:00" itemprop="dateCreated datePublished" datetime="2021-08-21T09:50:00+08:00">2021-08-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-05 14:36:56" itemprop="dateModified" datetime="2021-10-05T14:36:56+08:00">2021-10-05</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Others/" itemprop="url" rel="index"><span itemprop="name">Others</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<h1 id="公式书写">公式书写</h1>
<p>Typora虽然是支持Markdown出名，但是也支持LaTex公式，需要在Typora的设置中打开相关选项</p>
<h2 id="typora设置">Typora设置</h2>
<ol type="1">
<li><p>在Typora的偏好设置 下，选择 Markdown 选项，勾选 <code>內联公式（例：$\LaTeX$）</code> 选项和 <code>自动添加序号</code> 选项（此项可不选）</p></li>
<li><p>在 “<strong>当复制或导出为无格式的HTML时</strong>” 选择 “<strong>使用LaTeX代码</strong>”</p></li>
</ol>
<p><img src="https://pic.islet.space/2021/09/image-20210904111919668.png" alt="image-20210904111919668" style="zoom:80%;" /></p>
<h2 id="书写方法">书写方法</h2>
<p>设置完毕后，即可进入公式书写。</p>
<p>在使用Typora的Markdown语法来编辑LaTex公式，本身LaTex就与Markdown语法存在一定的冲突，但在Pandoc（Typora使用的效果渲染器）的加持下，显示效果较好，但公式写得多了或者书写过程中可能仍会存在一定的显示延迟（解决办法是：暂时没有）。</p>
<p>以下全程默认使用Typora编辑器。</p>
<p>使用LaTex支持两种书写方式，<strong>行模式</strong> 和 <strong>块模式</strong> ，对应的通用叫法是 <strong>内联公式</strong>（行内公式，inline） 和 <strong>块公式</strong>（block）。这里需要一点HTML5的知识，就是该公式是可以被存放在文字中间的，还是独占一行的，存放在文字中间的叫 <strong>内联</strong>，如 <span class="math inline">\(f(x)=x^2\)</span> ，独占一行的叫 <strong>块</strong>，如： <span class="math display">\[
f(x)= \lambda e^{-\lambda x} \tag{样例公式}
\]</span></p>
<h3 id="内联公式">内联公式</h3>
<p>书写内联公式时，只需要在同一行文字内书写两个美元符号 <code>$$</code> ，然后再两个美元符号中间书写内容即可。</p>
<p>尝试复制粘贴右侧文字到typora吧： <code>$f(x)= x^2$</code>​</p>
<h3 id="块公式">块公式</h3>
<p>块公式需要在独占一行时书写 <code>$$</code>，然后按回车键，即可进入块编辑模式，编辑框如下：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210904113516554.png" alt="image-20210904113516554" /><figcaption aria-hidden="true">image-20210904113516554</figcaption>
</figure>
<p>不管是内联公式还是快公式都是支持实时编辑和实时显示的。</p>
<h1 id="基础符号">基础符号</h1>
<table>
<thead>
<tr class="header">
<th>中文</th>
<th>样式</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>上标</td>
<td><span class="math inline">\(X^2\)</span><br><span class="math inline">\(X^{log(10)}\)</span></td>
<td>X<sup>2<br>X</sup>{log(10)}</td>
</tr>
<tr class="even">
<td>下标</td>
<td><span class="math inline">\(X_i\)</span><br><span class="math inline">\(X_{a-b}\)</span></td>
<td><code>X_i</code> 和 <code>X_&#123;a-b&#125;</code></td>
</tr>
<tr class="odd">
<td>积分符号</td>
<td><span class="math inline">\(\int\)</span></td>
<td><code>\int</code></td>
</tr>
<tr class="even">
<td>无限</td>
<td><span class="math inline">\(\infin\)</span></td>
<td><code>\infin</code></td>
</tr>
<tr class="odd">
<td>平均值符号</td>
<td><span class="math inline">\(\overline x\)</span></td>
<td><code>\overline x</code></td>
</tr>
<tr class="even">
<td>帽子符号</td>
<td><span class="math inline">\(\hat{a}\)</span></td>
<td><code>\hat&#123;a&#125;</code></td>
</tr>
<tr class="odd">
<td></td>
<td><span class="math inline">\(\widehat{a}\)</span></td>
<td><code>\widehat&#123;a&#125;</code></td>
</tr>
<tr class="even">
<td></td>
<td><span class="math inline">\(\acute{a}\)</span></td>
<td><code>\acute&#123;a&#125;</code></td>
</tr>
<tr class="odd">
<td></td>
<td><span class="math inline">\(\grave{a}\)</span></td>
<td><code>\grave&#123;a&#125;</code></td>
</tr>
<tr class="even">
<td></td>
<td><span class="math inline">\(\bar{a}\)</span></td>
<td><code>\bar&#123;a&#125;</code></td>
</tr>
<tr class="odd">
<td></td>
<td><span class="math inline">\(\dot{a}\)</span></td>
<td><code>\dot&#123;a&#125;</code></td>
</tr>
<tr class="even">
<td></td>
<td><span class="math inline">\(\ddot{a}\)</span></td>
<td><code>\ddot&#123;a&#125;</code></td>
</tr>
<tr class="odd">
<td>短波浪号</td>
<td><span class="math inline">\(\tilde{A_2}\)</span></td>
<td><code>\tilde&#123;A_2&#125;</code></td>
</tr>
<tr class="even">
<td>长波浪号</td>
<td><span class="math inline">\(\widetilde{A_2}\)</span></td>
<td><code>\widetilde&#123;A_2&#125;</code></td>
</tr>
<tr class="odd">
<td>上左箭头</td>
<td><span class="math inline">\(\overleftarrow{N}\)</span></td>
<td><code>\overleftarrow&#123;N&#125;</code></td>
</tr>
<tr class="even">
<td>上右箭头</td>
<td><span class="math inline">\(\overrightarrow{N}\)</span></td>
<td><code>\overrightarrow&#123;N&#125;</code></td>
</tr>
<tr class="odd">
<td>下左箭头</td>
<td><span class="math inline">\(\underleftarrow{N}\)</span>​</td>
<td><code>\underleftarrow&#123;N&#125;</code></td>
</tr>
<tr class="even">
<td>下右箭头</td>
<td><span class="math inline">\(\underrightarrow{N}\)</span>​</td>
<td><code>\underrightarrow&#123;N&#125;</code></td>
</tr>
<tr class="odd">
<td>限制下标</td>
<td><span class="math inline">\(\mathop{a}\limits_{i=1}\)</span></td>
<td><code>\mathop&#123;a&#125;\limits_&#123;i=1&#125;</code></td>
</tr>
<tr class="even">
<td>分子式</td>
<td><span class="math inline">\(\frac{1}{2}\)</span></td>
<td><code>\frac&#123;1&#125;&#123;2&#125;</code></td>
</tr>
<tr class="odd">
<td>根号</td>
<td><span class="math inline">\(\sqrt{2\pi}\)</span></td>
<td><code>\sqrt&#123;2\pi&#125;</code></td>
</tr>
<tr class="even">
<td>求和符号</td>
<td><span class="math inline">\(\sum\)</span></td>
<td><code>\sum</code></td>
</tr>
<tr class="odd">
<td>三角符号</td>
<td><span class="math inline">\(\triangle\)</span></td>
<td><code>\triangle</code></td>
</tr>
</tbody>
</table>
<h1 id="块公式样例">块公式样例</h1>
<p>直接复制代码框中的内容到typora即可。</p>
<h2 id="样例1">样例1</h2>
<p><span class="math display">\[
f(x) = \left\{ 
\displaylines{\lambda e^{-\lambda x}, x ≥ 0\\ 0,x &lt; 0} 
\right. \tag{指数分布密度函数}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line">f(x) = <span class="keyword">\left</span><span class="keyword">\&#123;</span> </span><br><span class="line"><span class="keyword">\displaylines</span>&#123;<span class="keyword">\lambda</span> e<span class="built_in">^</span>&#123;-<span class="keyword">\lambda</span> x&#125;, x ≥ 0<span class="keyword">\\</span> 0,x &lt; 0&#125; </span><br><span class="line"><span class="keyword">\right</span>. <span class="keyword">\tag</span>&#123;指数分布密度函数&#125;</span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<h2 id="样例2">样例2</h2>
<p><span class="math display">\[
F(x) = \frac{1}{\sigma \sqrt{2\pi}} \int^x_0 \frac{1}{t} e^{-{(lnt-\mu)^2}/{2\sigma^2}} \ dt \tag{对数正态累积分布函数}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line">F(x) = <span class="keyword">\frac</span>&#123;1&#125;&#123;<span class="keyword">\sigma</span> <span class="keyword">\sqrt</span>&#123;2<span class="keyword">\pi</span>&#125;&#125; <span class="keyword">\int</span><span class="built_in">^</span>x<span class="built_in">_</span>0 <span class="keyword">\frac</span>&#123;1&#125;&#123;t&#125; e<span class="built_in">^</span>&#123;-&#123;(lnt-<span class="keyword">\mu</span>)<span class="built_in">^</span>2&#125;/&#123;2<span class="keyword">\sigma</span><span class="built_in">^</span>2&#125;&#125; <span class="keyword">\ </span>dt <span class="keyword">\tag</span>&#123;对数正态累积分布函数&#125;</span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<h2 id="样例3">样例3</h2>
<p><span class="math display">\[
\varphi(x) = \frac{1}{\sigma\sqrt{2\pi}}e^{-{(x-\mu)^2}/{2\sigma^2}} \tag{正态密度函数}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="keyword">\varphi</span>(x) = <span class="keyword">\frac</span>&#123;1&#125;&#123;<span class="keyword">\sigma</span><span class="keyword">\sqrt</span>&#123;2<span class="keyword">\pi</span>&#125;&#125;e<span class="built_in">^</span>&#123;-&#123;(x-<span class="keyword">\mu</span>)<span class="built_in">^</span>2&#125;/&#123;2<span class="keyword">\sigma</span><span class="built_in">^</span>2&#125;&#125; <span class="keyword">\tag</span>&#123;正态密度函数&#125;</span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<h1 id="希腊字母">希腊字母</h1>
<p>整理了常用的希腊字母及其Latex书写方式。</p>
<p>LaTex书写希腊字母时都是使用 <strong>转义字符</strong> 进行的，即 <code>\</code> + <code>对应的英文</code> 。</p>
<p>如果需要表现大写希腊字母，则对应英文的首字母大写，否则就用小写。</p>
<p>需要注意的是，<em>epsilon</em> 和 <em>phi</em> 有额外的符号，所以会有额外的写法，如下方表格所示。</p>
<table>
<thead>
<tr class="header">
<th>序号</th>
<th>大写</th>
<th>LATEX</th>
<th>小写</th>
<th>LATEX</th>
<th>英文</th>
<th>国际音标[推荐]</th>
<th>汉字注音</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Α</td>
<td><code>$Alpha$</code></td>
<td>α</td>
<td><code>$alpha$</code></td>
<td>alpha</td>
<td>/'ælfə/</td>
<td>阿尔法</td>
</tr>
<tr class="even">
<td>2</td>
<td>Β</td>
<td><code>$Beta$</code></td>
<td>β</td>
<td><code>$beta$</code></td>
<td>beta</td>
<td>/'bi:tə/或/'beɪtə/</td>
<td>贝塔/毕塔</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Γ</td>
<td><code>$Gamma$</code></td>
<td>γ</td>
<td><code>$gamma$</code></td>
<td>gamma</td>
<td>/'gæmə/</td>
<td>伽玛/甘玛</td>
</tr>
<tr class="even">
<td>4</td>
<td>Δ</td>
<td><code>$Delta$</code></td>
<td>δ</td>
<td><code>$delta$</code></td>
<td>delta</td>
<td>/'deltə/</td>
<td>德尔塔/岱欧塔</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Ε</td>
<td><code>$Epsilon$</code></td>
<td>ε</td>
<td><code>$epsilon$</code></td>
<td>epsilon</td>
<td>/'epsɪlɒn/</td>
<td>艾普西龙</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td><code>$varepsilon$</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>6</td>
<td>Ζ</td>
<td><code>$Zeta$</code></td>
<td>ζ</td>
<td><code>$zeta$</code></td>
<td>zeta</td>
<td>/'zi:tə/</td>
<td>泽塔</td>
</tr>
<tr class="even">
<td>7</td>
<td>Η</td>
<td><code>$Eta$</code></td>
<td>η</td>
<td><code>$eta$</code></td>
<td>eta</td>
<td>/'i:tə/</td>
<td>伊塔/诶塔</td>
</tr>
<tr class="odd">
<td>8</td>
<td>Θ</td>
<td><code>$Theta$</code></td>
<td>θ</td>
<td><code>$theta$</code></td>
<td>theta</td>
<td>/'θi:tə/</td>
<td>西塔</td>
</tr>
<tr class="even">
<td>9</td>
<td>Ι</td>
<td><code>$Iota$</code></td>
<td>ι</td>
<td><code>$iota$</code></td>
<td>iota</td>
<td>/aɪ'əʊtə/</td>
<td>埃欧塔</td>
</tr>
<tr class="odd">
<td>10</td>
<td>Κ</td>
<td><code>$Kappa$</code></td>
<td>κ</td>
<td><code>$kappa$</code></td>
<td>kappa</td>
<td>/'kæpə/</td>
<td>堪帕</td>
</tr>
<tr class="even">
<td>11</td>
<td>∧</td>
<td><code>$Lambda$</code></td>
<td>λ</td>
<td><code>$lambda$</code></td>
<td>lambda</td>
<td>/'læmdə/</td>
<td>兰姆达</td>
</tr>
<tr class="odd">
<td>12</td>
<td>Μ</td>
<td><code>$Mu$</code></td>
<td>μ</td>
<td><code>$mu$</code></td>
<td>mu</td>
<td>/mju:/</td>
<td>谬/穆</td>
</tr>
<tr class="even">
<td>13</td>
<td>Ν</td>
<td><code>$Nu$</code></td>
<td>ν</td>
<td><code>$nu$</code></td>
<td>nu</td>
<td>/nju:/</td>
<td>拗/奴</td>
</tr>
<tr class="odd">
<td>14</td>
<td>Ξ</td>
<td><code>$Xi$</code></td>
<td>ξ</td>
<td><code>$xi$</code></td>
<td>xi</td>
<td>希腊:/ksi/英美:/ˈzaɪ/或/ˈksaɪ/</td>
<td>可西/赛</td>
</tr>
<tr class="even">
<td>15</td>
<td>Ο</td>
<td><code>$Omicron$</code></td>
<td>ο</td>
<td><code>$omicron$</code></td>
<td>omicron</td>
<td>/əuˈmaikrən/或/ˈɑmɪˌkrɑn/</td>
<td>欧(阿~)米可荣</td>
</tr>
<tr class="odd">
<td>16</td>
<td>∏</td>
<td><code>$Pi$</code></td>
<td>π</td>
<td><code>$pi$</code></td>
<td>pi</td>
<td>/paɪ/</td>
<td>派</td>
</tr>
<tr class="even">
<td>17</td>
<td>Ρ</td>
<td><code>$Rho$</code></td>
<td>ρ</td>
<td><code>$rho$</code></td>
<td>rho</td>
<td>/rəʊ/</td>
<td>柔/若</td>
</tr>
<tr class="odd">
<td>18</td>
<td>∑</td>
<td><code>$Sigma$</code></td>
<td>σ</td>
<td><code>$sigma$</code></td>
<td>sigma</td>
<td>/'sɪɡmə/</td>
<td>西格玛</td>
</tr>
<tr class="even">
<td>19</td>
<td>Τ</td>
<td><code>$Tau$</code></td>
<td>τ</td>
<td><code>$tau$</code></td>
<td>tau</td>
<td>/tɔ:/或/taʊ/</td>
<td>套/驼</td>
</tr>
<tr class="odd">
<td>20</td>
<td>Υ</td>
<td><code>$Upsilon$</code></td>
<td>υ</td>
<td><code>$upsilon$</code></td>
<td>upsilon</td>
<td>/ˈipsilon/或/ˈʌpsɨlɒn/</td>
<td>宇(阿~)普西龙</td>
</tr>
<tr class="even">
<td>21</td>
<td>Φ</td>
<td><code>$Phi$</code></td>
<td>φ</td>
<td><code>$varphi$</code></td>
<td>phi</td>
<td>/faɪ/</td>
<td>弗爱/弗忆</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td><code>$phi$</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>22</td>
<td>Χ</td>
<td><code>$chi$</code></td>
<td>χ</td>
<td><code>$chi$</code></td>
<td>chi</td>
<td>/kaɪ/</td>
<td>凯/柯义</td>
</tr>
<tr class="odd">
<td>23</td>
<td>Ψ</td>
<td><code>$Psi$</code></td>
<td>ψ</td>
<td><code>$psi$</code></td>
<td>psi</td>
<td>/psaɪ/</td>
<td>赛/普赛/普西</td>
</tr>
<tr class="even">
<td>24</td>
<td>Ω</td>
<td><code>$Omega$</code></td>
<td>ω</td>
<td><code>$omega$</code></td>
<td>omega</td>
<td>/'əʊmɪɡə/或/oʊ'meɡə/</td>
<td>欧米伽/欧枚嘎</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/21/Hardware/Circuit/2021-08-21-NTC%E7%83%AD%E6%95%8F%E7%94%B5%E9%98%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/21/Hardware/Circuit/2021-08-21-NTC%E7%83%AD%E6%95%8F%E7%94%B5%E9%98%BB/" class="post-title-link" itemprop="url">NTC热敏电阻</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-21 08:40:00" itemprop="dateCreated datePublished" datetime="2021-08-21T08:40:00+08:00">2021-08-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-23 01:17:40" itemprop="dateModified" datetime="2021-08-23T01:17:40+08:00">2021-08-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ntc及热敏电阻">NTC及热敏电阻</h1>
<p><strong>NTC</strong>（<em>Negative Temperature Coefficient</em>）是指 <mark>随温度上升电阻呈指数关系减小、具有负温度系数的热敏电阻现象和材料</mark>。</p>
<p>该类材料是利用锰、铜、硅、钴、铁、镍、锌等两种或两种以上的金属氧化物进行充分混合、成型、烧结等工艺而成的半导体陶瓷，可制成具有负温度系数（NTC）的热敏电阻。其 <strong>电阻率</strong> 和 <strong>材料常数</strong> 随材料成分比例、烧结气氛、烧结温度和结构状态不同而变化。现在还出现了以碳化硅、硒化锡、氮化钽等为代表的非氧化物系NTC热敏电阻材料。</p>
<blockquote>
<p>1834年，科学家首次发现了硫化银有 <strong>负温度系数</strong> 的特性。</p>
<p>1930年，科学家发现氧化亚铜-氧化铜也具有负温度系数的性能，并将之成功地运用在航空仪器的温度补偿电路中。随后，由于晶体管技术的不断发展，热敏电阻器的研究取得重大进展。</p>
<p>1960年研制出了NTC热敏电阻器。NTC热敏电阻器广泛用于测温、控温、温度补偿等方面。</p>
</blockquote>
<p><strong>热敏电阻</strong> （<em>Thermistor</em>）也可作为电子线路元件用于仪表线路温度补偿和温差电偶冷端温度补偿等。利用NTC热敏电阻的自热特性可实现自动增益控制，构成RC振荡器稳幅电路，延迟电路和保护电路。在自热温度远大于环境温度时阻值还与环境的散热条件有关，因此在流速计、流量计、气体分析仪、热导分析中常利用热敏电阻这一特性，制成专用的检测元件。</p>
<p><strong>功率型NTC热敏电阻</strong> 多用于电源抑制浪涌。抑制浪涌用NTC热敏电阻器，是一种大功率的圆片式热敏电阻器，常用于有电容器、加热器和马达启动的电子电路中。 在电路电源接通瞬间，电路中会产生比正常工作时高出许多倍的浪涌电流，而NTC热敏电阻器的初始阻值较大，可以抑制电路中过大的电流，从而保护其电源电路及负载。当电路进入正常工作状态时，热敏电阻器由于通过电流而引起阻体温度上升，电阻值下降至很小，不会影响电路的正常工作。</p>
<h1 id="b值特性">B值特性</h1>
<p>热敏电阻的 <strong>B值</strong>（B-value） 是NTC的属性之一，B值简单的说就是 <strong>材料系数</strong>（<em>Material Coefficient</em>）。</p>
<p><strong>相同温度区间不同的B值</strong>，说明材料可能不一样，因为NTC热敏电阻是负温度系数温度升高阻值成规律下降，B值代表曲线的弯曲程度或者说温度的敏感指数，单位温度变化的时候阻值增幅程度就代表B值。</p>
<p>通俗的说，即当温度降低，阻值曲线发生变化时会陡一点还是平一点。一般来说B值越大曲线越陡，当曲线越陡说明电阻值的变化就越大，相对来说就灵敏些；B值越小曲线越平，当曲线越平说明电阻值的变化就没那么大，相对来说阻值温度系数也就越小。</p>
<p><strong>注意</strong>：B值是 <u>经由人为计算出来的</u> 逼近某款热敏电阻 <u>在某个温度区间内的</u> 温度阻值特性曲线的 常数/系数。</p>
<p>因为B值反映的是 <strong>两个温度点之间</strong> 的阻值变化规律，可以用以下公式来计算，以每摄氏度的百分比 <code>％/°C​​</code> 为单位。 <span class="math display">\[
B = {ln(R_{T1}) - ln(R_{T2})\over {1 \over {T_1}} -{ 1 \over T_2}}
\]</span></p>
<blockquote>
<p>$ R1 $ 或 $ RT1 $：温度T1的时候零功率电阻值</p>
<p>$ R2 $​ 或 $ RT2 $​​：温度T2的时候零功率电阻值</p>
<p>T1 = 273.15 k + (T1℃)</p>
<p>T2 = 273.15 k + (T2℃)</p>
</blockquote>
<p>除非特别指出，B值通常是在[25, 50]这个温度范围中进行测量，由 <code>T1 = 25℃（298.15K）</code> 和 <code>T2 = 50℃（323.15K）</code> 时的零功率电阻值计算而得。</p>
<p>根据式1，若已知B值的情况下，可以得出目标温度对应的阻值，如下式2： <span class="math display">\[
R_{T2} = R_{T1} * e^{B * ({1 \over T_2} - {1 \over T_1})}
\]</span></p>
<blockquote>
<p>e = 2.718281828459045</p>
</blockquote>
<h1 id="温度系数">温度系数</h1>
<p>NTC热敏电阻的 <strong>温度系数</strong> 定义为 <mark>相对于温度变化的阻值的相对变化</mark>。计算NTC <strong>热敏电阻温度系数</strong> 的最简单转换公式如下： <span class="math display">\[
α = {-β \over T^2}
\]</span></p>
<blockquote>
<p><strong>β</strong>：B常数</p>
<p><strong>T</strong>：25摄氏度时的电阻值</p>
</blockquote>
<p>最终结果之所以带上负号，因为是“负温度系数”啊，不带的话就是“正温度系数”。</p>
<h1 id="阻值特性表">阻值特性表</h1>
<p>厂家在提供热敏电阻电气特性时都会给出B值，但并不是是就不需要阻值特性表了。</p>
<p>使用B值并能够推算出全部想要的温度阻值，因为B值所描述的是某个温度区间内的温度和阻值关系，而热敏电阻所呈现的是温度与阻值的非线性关系，也就是说这种关系没法通过B值和公式准确描述全部温度区间的阻值关系。否则一旦不同厂家的热敏电阻其B值相同，用公式来推导那岂不是阻值全是一样。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210821102248552.png" alt="image-20210821102248552" /><figcaption aria-hidden="true">image-20210821102248552</figcaption>
</figure>
<div style="font-size: 0.8rem; font-weight: 900; text-align: center;">
某温度-阻值特性表示例
</div>
<p>例如，[-25℃ ~ 50℃]内的B值已给出，意思就是说在25~50度这个区间用公式是完全没有问题的，超出这个范围，那么B值是不同的，所以不在这个范围用公式得出的阻值也是不对的。</p>
<p>如下图所示，为三款B值相同的热敏电阻，然而其阻值却不同。由此可知，B值只是一个针对每款热敏电阻的某区间参数，它只反应此热敏电阻的部分特性，并不是一个严谨的参数，在实际应用中，需要提供检测温度范围内的阻值表才是正确的做法。</p>
<figure>
<img src="https://pic.islet.space/2021/08/pIYBAF4On2WAc2XpAAC6ucLpfUY488.png" alt="热敏电阻应用详解" /><figcaption aria-hidden="true">热敏电阻应用详解</figcaption>
</figure>
<p>B值的范围一般在1800K ~ 5800k，其测温点范围通常为 [25, 50]、[25, 85]、 [0, 100] 或 [0, 50]，部分厂家可以提供特殊NTC热敏电阻 <u>B值的定制</u>。</p>
<h1 id="案例">案例</h1>
<p>假设客户订购10,000 W热敏电阻，其热敏电阻的精度为±0.5°C。部件号为MF52A-103，B值为3950 K.25°C（298.15 K）。</p>
<p>根据 式3 求其 <strong>热敏电阻温度系数</strong> α ： <span class="math display">\[
α = -{3950K \over (298.15K)^2} 
 = - 4.44 \%/℃
\]</span> 根据热敏电阻温度系数 α 和 其器件精度求得 25℃时的温度容差为： <span class="math display">\[
Resistance \ Tolerance\ @25℃ = α *（±0.5℃） = -4.44\%/℃ * （±0.5℃） = ± 2.22\% \ @25℃
\]</span></p>
<h2 id="电气特性">电气特性</h2>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210821095249164.png" alt="image-20210821095249164" /><figcaption aria-hidden="true">image-20210821095249164</figcaption>
</figure>
<ul>
<li><strong>电阻值</strong>：R25 = 50kΩ ± 2% 。即在25摄氏度下，其阻值为50k欧姆，阻值允差为百分之二。</li>
<li><strong>B常数</strong>： B25/50 = 3950K ± 2% 。即该NTC热敏电阻的材料系数B值，在25摄氏度至50摄氏度之间的B常数为3950K，允差为百分之二。</li>
</ul>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="http://www.elecfans.com/yuanqijian/ptc/202001031148953.htm">热敏电阻应用与参数详解</a></li>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/NTC/16035">NTC</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/18/Communication/2021-08-18-SPI%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/18/Communication/2021-08-18-SPI%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">SPI通信</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-18 07:50:00" itemprop="dateCreated datePublished" datetime="2021-08-18T07:50:00+08:00">2021-08-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-16 00:29:44" itemprop="dateModified" datetime="2021-09-16T00:29:44+08:00">2021-09-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Communication/" itemprop="url" rel="index"><span itemprop="name">Communication</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="串行外设接口">串行外设接口</h1>
<p><strong>串行外设接口</strong>（Serial Peripheral Interface，SPI）是微控制器和外围IC（如传感器、ADC、DAC、移位寄存器、SRAM等）之间使用最广泛的接口之一。</p>
<p>SPI是一种同步、全双工、主从式接口。来自主机或从机的数据在时钟<mark>上升沿或下降沿同步</mark>。主机和从机可以同时传输数据。SPI接口可以是 <strong>3线式</strong> 或 <strong>4线式</strong>。后述中重点介绍常用的4线SPI接口。</p>
<p>与I2C的 <strong>多主多从</strong> 模式不同，SPI协议为 <strong>一主多从</strong> 模式。SPI所消耗的接口数也大大提升。</p>
<h2 id="接口介绍">接口介绍</h2>
<p><img src="https://pic.islet.space/2021/08/image-20210819075248043.png" alt="image-20210819075248043" style="zoom: 33%;" /></p>
<div style="font-weight: 900; text-align: center;">
图1. 含主机和从机的SPI配置
</div>
<p>4线SPI器件有四个信号：</p>
<ul>
<li>时钟(SPI CLK, SCLK)</li>
<li>片选(CS)</li>
<li>主机输出、从机输入(MOSI)</li>
<li>主机输入、从机输出(MISO)</li>
</ul>
<p>产生时钟信号的器件称为主机。主机和从机之间传输的数据与主机产生的时钟同步。同I2C接口相比，SPI器件支持更高的时钟频率。查阅相关产品数据手册以了解SPI接口的时钟频率规格。</p>
<p><mark style="font-weight: 900;">SPI接口只能有一个主机，但可以有一个或多个从机。</mark>图1显示了主机和从机之间的SPI连接。</p>
<p>来自主机的片选信号用于选择从机。这 <mark style="font-weight: 900;">通常是一个低电平有效信号，拉高时从机与SPI总线断开连接</mark>。当使用多个从机时，主机需要为每个从机提供单独的片选信号。<u>本文中</u> 的片选信号始终是低电平有效信号。</p>
<p>MOSI和MISO是数据线。MOSI将数据从主机发送到从机，MISO将数据从从机发送到主机。</p>
<h2 id="数据传输">数据传输</h2>
<p>要开始SPI通信，主机必须发送时钟信号，并通过使能CS信号选择从机。片选通常是低电平有效信号。因此，主机必须在该信号上发送逻辑0以选择从机。SPI是全双工接口，主机和从机可以分别通过MOSI和MISO线路同时发送数据。在SPI通信期间，数据的发送（串行移出到MOSI/SDO总线上）和接收（采样或读入总线(MISO/SDI)上的数据）同时进行。串行时钟沿同步数据的移位和采样。SPI接口允许用户灵活选择时钟的上升沿或下降沿来采样和/或移位数据。</p>
<p><strong>需要注意</strong>：SPI接口传输的 <strong>数据位数</strong> 仍需查阅器件数据手册。</p>
<h2 id="时钟极性和时钟相位">时钟极性和时钟相位</h2>
<p>在SPI中，主机可以选择 <strong>时钟极性</strong>（Clock Polarity，<strong>CPOL</strong>）和 <strong>时钟相位</strong>（Clock Phase，<strong>CPHA</strong>）。</p>
<p>在空闲状态期间，CPOL 控制 时钟极性。空闲状态是指传输开始时CS为高电平且在向低电平转变的期间，以及传输结束时CS为低电平且在向高电平转变的期间。</p>
<p>CPHA 控制 时钟相位。<mark>根据CPHA位的状态，使用时钟上升沿或下降沿来采样和/或移位数据</mark>。主机必须 <mark>根据从机的要求选择时钟极性和时钟相位</mark>。根据CPOL和CPHA位的选择，有四种SPI模式可用，如下表：</p>
<table>
<thead>
<tr class="header">
<th>SPI 模式</th>
<th>CPOL</th>
<th>CPHA</th>
<th>空闲状态下的时钟极性</th>
<th>用于采样和/或移位数据的时钟相应</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
<td>逻辑低电平</td>
<td>数据在上升沿采样，在下降沿移出</td>
</tr>
<tr class="even">
<td>1</td>
<td>0</td>
<td>1</td>
<td>逻辑低电平</td>
<td>数据在下降沿采样，在上升沿移出</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>1</td>
<td>逻辑低电平</td>
<td>数据在下降沿采样，在上升沿移出</td>
</tr>
<tr class="even">
<td>3</td>
<td>1</td>
<td>0</td>
<td>逻辑低电平</td>
<td>数据在上升沿采样，在下降沿移出</td>
</tr>
</tbody>
</table>
<p>下图为TI公司F280049芯片的SPI时钟模式：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819084200284.png" alt="image-20210819084200284" /><figcaption aria-hidden="true">image-20210819084200284</figcaption>
</figure>
<p>下图为ADI公司ADSP21479芯片的SPI时钟模式：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819084447672.png" alt="image-20210819084447672" /><figcaption aria-hidden="true">image-20210819084447672</figcaption>
</figure>
<p>后述 图2 至 图5 显示了四种SPI模式下的通信示例。</p>
<p>在这些示例中，数据显示在MOSI和MISO线上。传输的开始和结束用绿色虚线表示，采样边沿用橙色虚线表示，移位边沿用蓝色虚线表示。请注意，这些图形仅供参考。要成功进行SPI通信，用户须参阅产品数据手册并确保满足器件的时序规格。</p>
<p><img src="https://pic.islet.space/2021/08/205973_fig_02.png" alt="图2. SPI模式0，CPOL = 0，CPHA = 0：CLK空闲状态 = 低电平，数据在上升沿采样，并在下降沿移出" style="zoom: 60%;" /></p>
<div style="font-weight: 900; text-align: center;">
图2. SPI模式0，CPOL = 0，CPHA = 0：CLK空闲状态 = 低电平，数据在上升沿采样，并在下降沿移出
</div>
<p>图3给出了SPI模式1的时序图。在此模式下，时钟极性为0，表示时钟信号的空闲状态为低电平。此模式下的时钟相位为1，表示数据在下降沿采样（由橙色虚线显示），并且数据在时钟信号的上升沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_03.png?la=en&vs=1" alt="图3. SPI模式1，CPOL = 0，CPHA = 1：CLK空闲状态 = 低电平，数据在下降沿采样，并在上升沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图3. SPI模式1，CPOL = 0，CPHA = 1：CLK空闲状态 = 低电平，数据在下降沿采样，并在上升沿移出
</div>
<p>图4给出了SPI模式2的时序图。在此模式下，时钟极性为1，表示时钟信号的空闲状态为高电平。此模式下的时钟相位为1，表示数据在下降沿采样（由橙色虚线显示），并且数据在时钟信号的上升沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_04.png?la=en&vs=1" alt="图4. SPI模式2，CPOL = 1，CPHA = 1：CLK空闲状态 = 高电平，数据在下降沿采样，并在上升沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图4. SPI模式2，CPOL = 1，CPHA = 1：CLK空闲状态 = 高电平，数据在下降沿采样，并在上升沿移出。
</div>
<p>图5给出了SPI模式3的时序图。在此模式下，时钟极性为1，表示时钟信号的空闲状态为高电平。此模式下的时钟相位为0，表示数据在上升沿采样（由橙色虚线显示），并且数据在时钟信号的下降沿移出（由蓝色虚线显示）。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_05.png?la=en&vs=1" alt="图5. SPI模式3，CPOL = 1，CPHA = 0：CLK空闲状态 = 高电平，数据在上升沿采样，并在下降沿移出" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图5. SPI模式3，CPOL = 1，CPHA = 0：CLK空闲状态 = 高电平，数据在上升沿采样，并在下降沿移出
</div>
<h2 id="多从机配置">多从机配置</h2>
<p>多个从机可与单个SPI主机一起使用。从机可以采用常规模式连接，或采用菊花链模式连接。</p>
<h3 id="常规spi模式">常规SPI模式</h3>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210819075431419.png" alt="image-20210819075431419" /><figcaption aria-hidden="true">image-20210819075431419</figcaption>
</figure>
<div style="font-weight: 900; text-align: center;">
图6. 多从机SPI配置
</div>
<p>在常规模式下，主机需要为每个从机提供单独的片选信号。一旦主机使能（拉低）片选信号，MOSI/MISO线上的时钟和数据便可用于所选的从机。如果使能多个片选信号，则MISO线上的数据会被破坏，因为主机无法识别哪个从机正在传输数据。</p>
<p>从图6可以看出，随着从机数量的增加，来自主机的片选线的数量也增加。这会快速增加主机需要提供的输入和输出数量，并限制可以使用的从机数量。可以使用其他技术来增加常规模式下的从机数量，例如使用多路复用器产生片选信号。</p>
<h3 id="菊花链模式">菊花链模式</h3>
<p><img src="https://pic.islet.space/2021/08/image-20210819075542602.png" alt="image-20210819075542602" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图7. 多从机SPI菊花链配置
</div>
<p>在菊花链模式下，所有从机的片选信号连接在一起，数据从一个从机传播到下一个从机。在此配置中，所有从机同时接收同一SPI时钟。来自主机的数据直接送到第一个从机，该从机将数据提供给下一个从机，依此类推。</p>
<p><mark style="font-weight: 900;">使用该方法时，由于数据是从一个从机传播到下一个从机，所以传输数据所需的时钟周期数与菊花链中的从机位置成比例（成比例倍增）。</mark></p>
<p>例如在图7所示的8位系统中，<mark>为使第3个从机能够获得数据，需要24个时钟脉冲，而常规SPI模式下只需8个时钟脉冲</mark>。图8显示了时钟周期和通过菊花链的数据传播。并非所有SPI器件都支持菊花链模式。请参阅产品数据手册以确认菊花链是否可用。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_08.png?la=en&vs=1" alt="图8. 菊花链配置：数据传播" style="zoom: 50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图8. 菊花链配置：数据传播
</div>
<h1 id="adi公司支持spi的模拟开关与多路转换器">ADI公司支持SPI的模拟开关与多路转换器</h1>
<p>ADI公司最新一代支持SPI的开关可在不影响精密开关性能的情况下显著节省空间。本文的这一部分将讨论一个案例研究，说明支持SPI的开关或多路复用器如何能够大大简化系统级设计并减少所需的GPIO数量。</p>
<p><a target="_blank" rel="noopener" href="https://www.analog.com/cn/products/adg1412.html">ADG1412</a> 是一款四通道、单刀单掷(SPST)开关，需要四个GPIO连接到每个开关的控制输入。图9显示了微控制器和一个ADG1412之间的连接。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819075642098.png" alt="image-20210819075642098" style="zoom: 80%;" /></p>
<div style="font-weight: 900; text-align: center;">
图9. 微控制器GPIO用作开关的控制信号
</div>
<p>随着电路板上开关数量的增加，所需GPIO的数量也会显著增加。例如，当设计一个测试仪器系统时，会使用大量开关来增加系统中的通道数。在4×4交叉点矩阵配置中，使用四个ADG1412。此系统需要16个GPIO，限制了标准微控制器中的可用GPIO。图10显示了使用微控制器的16个GPIO连接四个ADG1412。</p>
<p><img src="https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_10.png?la=en&vs=1" alt="图10. 在多从机配置中，所需GPIO的数量大幅增加" style="zoom:50%;" /></p>
<div style="font-weight: 900; text-align: center;">
图10. 在多从机配置中，所需GPIO的数量大幅增加
</div>
<p>为了减少GPIO数量，一种方法是使用串行转并行转换器，如图11所示。该器件输出的并行信号可连接到开关控制输入，器件可通过串行接口SPI配置。此方法的缺点是外加器件会导致物料清单增加。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819075735043.png" alt="image-20210819075735043" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图11. 使用串行转并行转换器的多从机开关
</div>
<p>另一种方法是使用SPI控制的开关。此方法的优点是可减少所需GPIO的数量，并且还能消除外加串行转并行转换器的开销。如图12所示，不需要16个微控制器GPIO，只需要7个微控制器GPIO就可以向4个ADGS1412提供SPI信号。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819080000988.png" alt="image-20210819080000988" style="zoom: 67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图12. 支持SPI的开关节省微控制器GPIO
</div>
<p>开关可采用菊花链配置，以进一步优化GPIO数量。在菊花链配置中，无论系统使用多少开关，都只使用主机（微控制器）的四个GPIO。</p>
<p><img src="https://pic.islet.space/2021/08/image-20210819080021307.png" alt="image-20210819080021307" style="zoom:67%;" /></p>
<div style="font-weight: 900; text-align: center;">
图13. 菊花链配置的SPI开关可进一步优化GPIO
</div>
<p>图13用于说明目的。ADGS1412数据手册建议在SDO引脚上使用一个上拉电阻。有关菊花链模式的更多信息，请参阅ADGS1412数据手册。为简单起见，此示例使用了四个开关。随着系统中开关数量的增加，电路板简单和节省空间的优点很重要。在6层电路板上放置8个四通道SPST开关，采用4×8交叉点配置时，ADI公司支持SPI的开关可节省20%的总电路板空间。文章《<a target="_blank" rel="noopener" href="https://www.analog.com/cn/analog-dialogue/articles/precision-spi-switch-configuration-increases-channel-density.html">精密SPI开关配置提高通道密度</a>》详细说明了精密SPI开关配置如何提高通道密度。</p>
<h1 id="术语">术语</h1>
<p><strong>MISO</strong> / <strong>SOMI</strong> / <strong>SDO</strong>： Master Input and Slaver Output / Slaver Output and Master Input / Slaver Data Output</p>
<p><strong>MOSI</strong> / <strong>SIMO</strong> / <strong>SDI</strong>： Master Output and Slaver Input / Salver Input and Master Output / Slaver Data Input</p>
<p><strong>SCLK</strong>： Serial Clock</p>
<p><strong>CS</strong> / <strong>STE</strong>： Chip Select / Slaver Transmit Enable</p>
<h1 id="参考">参考</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://www.analog.com/cn/analog-dialogue/articles/introduction-to-spi-interface.html">SPI接口简介</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/150121520">SPI通信协议详解（spi总线）</a></li>
<li><a target="_blank" rel="noopener" href="http://www.microchip.com.cn/community/Uploads/Download/Library/39699a_cn.pdf">第23 章 串行外设接口(SPI)</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/06/Blog/2021-08-06-%E8%A7%A3%E5%86%B3%E6%96%B0%E7%89%88hexo%E6%B2%A1%E6%9C%89%E7%9B%AE%E5%BD%95%E5%92%8C%E6%A0%87%E7%AD%BE%E9%A1%B5%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/06/Blog/2021-08-06-%E8%A7%A3%E5%86%B3%E6%96%B0%E7%89%88hexo%E6%B2%A1%E6%9C%89%E7%9B%AE%E5%BD%95%E5%92%8C%E6%A0%87%E7%AD%BE%E9%A1%B5%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">解决新版hexo没有目录和标签页的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-06 23:40:00" itemprop="dateCreated datePublished" datetime="2021-08-06T23:40:00+08:00">2021-08-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-08 14:26:07" itemprop="dateModified" datetime="2021-08-08T14:26:07+08:00">2021-08-08</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>新版hexo安装之后没有标签页，解决方法大致三步：</p>
<ol type="1">
<li><p>需要自行在 <code>/source/</code> 文件夹下添加一个 <code>categories</code> 和 <code>tags</code> 文件夹，然后往文件夹中分别写入一个 <code>index.md</code> 文件。</p></li>
<li><p>然后在对应的 <code>index.md</code> 中写入 <em>YAML</em> 信息。</p></li>
<li><p>在对应的主题配置文件，例如 <code>_config.yml</code> 中填写好配置。</p></li>
</ol>
<h1 id="新建目录和页面">新建目录和页面</h1>
<p>可以通过两句语句来运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure>
<h1 id="添加type属性">添加type属性</h1>
<p>编辑 <code>index.md</code>，修改信息如下，日期随意：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 目录</span><br><span class="line"><span class="built_in">type</span>: categories</span><br><span class="line">date: 2020-08-06 23:32:00</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>注意上面写的一个属性 <code>type</code>，千万不能写错。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line"><span class="built_in">type</span>: tags</span><br><span class="line">date: 2020-08-06 23:32:00</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h1 id="设置配置文件">设置配置文件</h1>
<p>如下图所示修改即可：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210806235851123.png" alt="image-20210806235851123" /><figcaption aria-hidden="true">image-20210806235851123</figcaption>
</figure>
<p>最后重新清空、运行和预览即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo site</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/08/03/Programming/2021-08-03-Debug%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/03/Programming/2021-08-03-Debug%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/" class="post-title-link" itemprop="url">Debug问题排查思路</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-03 11:35:00" itemprop="dateCreated datePublished" datetime="2021-08-03T11:35:00+08:00">2021-08-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-14 23:59:13" itemprop="dateModified" datetime="2021-10-14T23:59:13+08:00">2021-10-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>以下内容适用于嵌入式开发工程师。</p>
<h1 id="裸机debug">裸机Debug</h1>
<figure>
<img src="https://pic.islet.space/2021/09/20210915214751.png" alt="image-20210804172539069" /><figcaption aria-hidden="true">image-20210804172539069</figcaption>
</figure>
<p>裸机调试过程中出现问题时，可以从以下几个角度进行考虑，分别是 <strong>电气特性</strong>、<strong>软件设置</strong> 、 <strong>代码设置</strong> 和 <strong>项目设置</strong>。</p>
<h2 id="电气特性">电气特性</h2>
<p>排查电气特性的方法，主要是使用 <strong>万用表</strong>、<strong>逻辑分析仪</strong>、<strong>示波器</strong> 等可以捕捉电信号的设备进行直接的观察。</p>
<p>例如使用万用表、示波器来检查电信号的电压、电流是否在正常工作范围。</p>
<h2 id="软件设置">软件设置</h2>
<p>虽然软件设置和代码设置的命名方式相近，但是这里的软件设置更多强调的是系统级、寄存器级、驱动级的基础设置，而非算法级、代码级、逻辑级的更高一级设置。</p>
<p>软件设置中，直观可见的是所有可能需要检查的问题点，都是可以通过查阅技术参考手册中的相关寄存器设置来检查是否设置正确的，包括中断、内存、时钟、外设等各项涉及到寄存器级别的内容。</p>
<h2 id="代码设置">代码设置</h2>
<p>代码设置，强调的是算法级、代码级 或 逻辑级 的软件编写或设置。</p>
<p>需要检查的更多是对应 芯片 及其 板载环境 、工作系统 之间的关系，例如代码里面有没有导致死循环、或者多线程之间的资源锁死、内存溢出等情况。</p>
<h2 id="项目设置">项目设置</h2>
<h3 id="调试文件">调试文件</h3>
<h4 id="调试协议">调试协议</h4>
<h4 id="寻址文件">寻址文件</h4>
<p>但看调试文件，同样是f28004x系列芯片，通用的寻址文件就多达十几种。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210804172803808.png" alt="image-20210804172803808" /><figcaption aria-hidden="true">image-20210804172803808</figcaption>
</figure>
<p>一般最高型号的芯片还有额外的 <code>.cmd</code> 文件，如：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210804172915025.png" alt="image-20210804172915025" /><figcaption aria-hidden="true">image-20210804172915025</figcaption>
</figure>
<p>此时就需要仔细挑选对应的寻址文件，避免多个寻址文件载入导致寻址空间重名冲突。</p>
<h2 id="案例">案例</h2>
<h3 id="adc中断未进入bug">ADC中断未进入BUG</h3>
<h4 id="情况1组中断未打开">情况1——组中断未打开</h4>
<p>ADC模块有检测到信号（下图<code>ADCRESULT0</code>） ，转换电容将电压转换成数值，但是没有触发中断，进而中断函数没有被执行。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210810093022182.png" alt="image-20210810093022182" /><figcaption aria-hidden="true">image-20210810093022182</figcaption>
</figure>
<p>仔细检查对应的ADC中断标志寄存器，整理思路：SOC可以正常收到EPWM6的触发源进而正常地对电压进行转换，然后将数值存到对应寄存器中。也就是说，EOC也有正常工作，能够生成脉冲中断。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818100405137.png" alt="image-20210818100405137" /><figcaption aria-hidden="true">image-20210818100405137</figcaption>
</figure>
<p>对照着《TRM》中的说明文档再阅读一遍：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818100624266.png" alt="image-20210818100624266" /><figcaption aria-hidden="true">image-20210818100624266</figcaption>
</figure>
<p>接着再对应检查一下与中断相关的溢出标志寄存器，发现的确有中断溢出了。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818100710508.png" alt="image-20210818100710508" /><figcaption aria-hidden="true">image-20210818100710508</figcaption>
</figure>
<p>在ISR中断服务程序中写入一个全局调试变量，用于观察是否进入中断服务程序，可以知道其并未进入中断服务程序。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818101346665.png" alt="image-20210818101346665" /><figcaption aria-hidden="true">image-20210818101346665</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818101314520.png" alt="image-20210818101314520" /><figcaption aria-hidden="true">image-20210818101314520</figcaption>
</figure>
<p>最后对比检查样例代码中的main函数对ePIE寄存器的控制，发现少了一行对PIE控制寄存器的操作，补上~</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818101749256.png" alt="image-20210818101749256" /><figcaption aria-hidden="true">image-20210818101749256</figcaption>
</figure>
<p>成功进入中断：</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210818101822146.png" alt="image-20210818101822146" /><figcaption aria-hidden="true">image-20210818101822146</figcaption>
</figure>
<p><strong>总结</strong></p>
<ul>
<li>此处很重要的是要仔细研读《TRM》文件，将文档内的中断流程进行一一对照校验检查</li>
<li>理解玩系统框图后，按照信号进入的顺序对涉及到的寄存器依次进行检查，逐个排查之后，再对其他可能会出现问题的地方进行DEBUG代码编写。</li>
<li>如果没有参照手册，就得参照样例文件逐行检查代码</li>
</ul>
<h3 id="开启adc-c模块之后idle函数就不再执行">开启ADC C模块之后IDLE函数就不再执行</h3>
<h4 id="情况1中断函数不要处理大量数据计算">情况1——中断函数不要处理大量数据计算</h4>
<p>IDLE函数是写在 <code>main()</code> 函数中，最后面的位置的，以 <code>while(1)</code> 语句进行包裹着的永远循环的语句。</p>
<p>在 <code>main()</code> 函数中，一般会对整个系统、外设、内存、中断等进行初始化和配置，一旦所有工作部件跑起来之后，需要CPU进行数据处理时，就会暂停进入IDLE函数，转而去处理更为紧急的事情，例如进行浮点数计算（如果没有开启对应的FPU的话），此时IDLE函数就会过很长一段时间（时间不定，依据实时处理情况而定）才执行一次。</p>
<p>例如下方所示，一旦开启了对应的中断处理函数中的电压、温度、阻值计算，需要处理器实时且大量的计算的话，就会造成CPU短时/长时荷载较高，无法进入IDLE函数，原本在IDLE函数中设置为1秒闪烁一次的LED灯，过了十几二十秒才关闭/打开。</p>
<p>一旦将其注释，LED灯的闪烁速度又得到了恢复。</p>
<p>也可以在中断向量表和处理程序处进行注释以关闭中断处理，也可以看到LED等闪烁正常。</p>
<figure>
<img src="https://pic.islet.space/2021/08/image-20210824190557672.png" alt="image-20210824190557672" /><figcaption aria-hidden="true">image-20210824190557672</figcaption>
</figure>
<h3 id="adc读值转换失败">ADC读值/转换失败</h3>
<h4 id="情况1adc触发源更改">情况1——ADC触发源更改</h4>
<p><strong>新增了功能</strong>：由主循环检测GPIO3上的引脚是否导通，导通则开启ePWM的时钟，否则不开启，开关检测代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sw1WrapFunc</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(GpioDataRegs.GPADAT.bit.GPIO3 == HIGH_LEVEL)&#123;  <span class="comment">//是否为高电平</span></span><br><span class="line">        <span class="keyword">if</span>(CpuSysRegs.PCLKCR2.bit.EPWM1 == ON) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            EALLOW;</span><br><span class="line">            CpuSysRegs.PCLKCR2.bit.EPWM1 = ON;  <span class="comment">//高电平且未开启则开启</span></span><br><span class="line">            EDIS;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(GpioDataRegs.GPADAT.bit.GPIO3 == LOW_LEVEL)&#123;  <span class="comment">//是否为低电平</span></span><br><span class="line">        <span class="keyword">if</span>(CpuSysRegs.PCLKCR2.bit.EPWM1 == OFF) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            EALLOW;</span><br><span class="line">            CpuSysRegs.PCLKCR2.bit.EPWM1 = OFF;  <span class="comment">//低电平且已开启则关闭</span></span><br><span class="line">            EDIS;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在增加了新功能之后，发现ADC突然不工作了，每次ePWM一关闭，ADC也跟着不工作，一打开ePWM，ADC又开始工作了。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907134639238.png" alt="image-20210907134639238" /><figcaption aria-hidden="true">image-20210907134639238</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907134734391.png" alt="image-20210907134734391" /><figcaption aria-hidden="true">image-20210907134734391</figcaption>
</figure>
<p>重新整理思路，想起来ADC工作的配置中，唯一一项跟PWM相关的就是其触发源。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907135154333.png" alt="image-20210907135154333" /><figcaption aria-hidden="true">image-20210907135154333</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907135359661.png" alt="image-20210907135359661" /><figcaption aria-hidden="true">image-20210907135359661</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907135436244.png" alt="image-20210907135436244" /><figcaption aria-hidden="true">image-20210907135436244</figcaption>
</figure>
<p>修改其触发源为CPU1 Timer0，正常工作：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907135823329.png" alt="image-20210907135823329" /><figcaption aria-hidden="true">image-20210907135823329</figcaption>
</figure>
<h4 id="情况2主函数被测试用的死循环卡住">情况2——主函数被测试用的死循环卡住</h4>
<p>主循环中一定不能再套一个等待状态（或死循环）的语句，否则整个主循环将有可能永远被卡死。</p>
<p>写完SCI部分函数后，发现ADC温度转换的不工作了，但ADC的中断程序（中断程序对全局变量的写入成功）和中断溢出标志是可以正常处理的，同时写了一个Debug变量放在主循环下的ADC包装函数中，发现数据并未被处理，因此可以判断主程序被卡死。</p>
<p>解决方法是，将SCI通信发送和接收的功能写到中断程序中，让中断程序来处理。</p>
<h3 id="ecap外设没有正常工作">ECAP外设没有正常工作</h3>
<p>首先是注意到该外设对应的GPIO没有正常工作，查看 <code>GpioDataRegs</code> 下的 <code>GPADAT</code> 寄存器，发现GPIO10在其他外设都能正常工作的情况下，该引脚无法动弹（表现为：使用3.3V电源连接GPIO10，没有反映）。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210906172346311.png" alt="image-20210906172346311" /><figcaption aria-hidden="true">image-20210906172346311</figcaption>
</figure>
<p>然后查看eCAP引脚源代码，初步推断可能是引脚方向设置出错，更改以下源代码中的最后一句以更改引脚信号导通方向。</p>
<p>源代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init_eCAP_GPIO</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">//配置输入XBAR10</span></span><br><span class="line">    InputXbarRegs.INPUT10SELECT = <span class="number">0xA</span>; <span class="comment">// 将GPIO10(0xA)与输入XBAR 10进行连接</span></span><br><span class="line"></span><br><span class="line">    GpioCtrlRegs.GPAGMUX1.bit.GPIO10 = <span class="number">0</span>;  <span class="comment">//外设组多路配置</span></span><br><span class="line">    GpioCtrlRegs.GPAMUX1.bit.GPIO10 = <span class="number">3</span>;  <span class="comment">//外设多路配置</span></span><br><span class="line">    GpioCtrlRegs.GPADIR.bit.GPIO10 = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再次测试发现结果正常。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210907094432301.png" alt="image-20210907094432301" /><figcaption aria-hidden="true">image-20210907094432301</figcaption>
</figure>
<p>修改后代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init_eCAP_GPIO</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">//配置输入XBAR10</span></span><br><span class="line">    EALLOW;</span><br><span class="line">    InputXbarRegs.INPUT10SELECT = <span class="number">0xA</span>; <span class="comment">// 将GPIO10(0xA)与输入XBAR 10进行连接</span></span><br><span class="line"></span><br><span class="line">    GpioCtrlRegs.GPAGMUX1.bit.GPIO10 = <span class="number">0</span>;  <span class="comment">//外设组多路配置</span></span><br><span class="line">    GpioCtrlRegs.GPAMUX1.bit.GPIO10 = <span class="number">3</span>;  <span class="comment">//外设多路配置</span></span><br><span class="line">    GpioCtrlRegs.GPADIR.bit.GPIO10 = GPIO_SIGNAL_INPUT;  <span class="comment">// INPUT 输入</span></span><br><span class="line">    GpioCtrlRegs.GPAPUD.bit.GPIO10 = GPIO_PULLUP_DISABLE;</span><br><span class="line">    GpioCtrlRegs.GPAQSEL1.bit.GPIO10 = GPIO_SYNCHRONIZE;</span><br><span class="line">    EDIS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：因为GPIO9和GPIO10临近，默认情况下GPIO10还是会受到附近（结构上）其他GPIO电平的影响而拉高，此时即使设置了 <code>GPIO_PULLUP_DISABLE</code> 都没办法置低。同时，GPIO9也会因为GPIO10的电平拉低而拉低。</p>
<h3 id="ecap引脚配置">ECAP引脚配置</h3>
<p>从GPIO部分的图8-1、 引脚部分的 表4-6 、X-BAR部分的 图9-1 和 eCAP部分的表19-1 四份内容可以看出，GPIO10 没办法被通过INPUT X-BAR 复用到ECAP上。</p>
<p>因为表4-6决定了，GPIO10不能复用到INPUT X-BAR 或 OUT-BAR，但可以复用为自己（GPIO10），只需要设置 <code>GPAGMUX.bit.GPIO10 = 0x0; GPAMUX.bit.GPIO10 = 0x0;</code> 即可。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210913105909558.png" alt="image-20210913105909558" /><figcaption aria-hidden="true">image-20210913105909558</figcaption>
</figure>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210913110038846.png" alt="image-20210913110038846" /><figcaption aria-hidden="true">image-20210913110038846</figcaption>
</figure>
<p><img src="https://pic.islet.space/2021/09/image-20210913110545272.png" alt="image-20210913110545272" style="zoom:67%;" /></p>
<p><img src="https://pic.islet.space/2021/09/image-20210913110506997.png" alt="image-20210913110506997" style="zoom: 67%;" /></p>
<h3 id="sci引脚导致复位">SCI引脚导致复位</h3>
<p>SCI配置完毕后，与对应的GPIO引脚无法通信（即无高低电平变化），将逻辑分析仪插入对应的引脚，会导致芯片复位重启。</p>
<p>原GPIO引脚配置为：一个GPIO为拉高和异步，另一个为拉高和同步。</p>
<p>将两个GPIO修改为异步配置之后，并未出现复位情况。</p>
<h3 id="sci-rx数据错误">SCI RX数据错误</h3>
<p>使用RS485进行发送时，不仅接收会存在错误，发送也会存在错误。</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210914155055154.png" alt="image-20210914155055154" /><figcaption aria-hidden="true">image-20210914155055154</figcaption>
</figure>
<div style="font-weight: 900; font-size: 0.8rem; text-align: center;">
图 使用XCOM串口助手和GREE DATACONVERTER进行发送和CCS中数组值有异
</div>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210914155215669.png" alt="image-20210914155215669" /><figcaption aria-hidden="true">image-20210914155215669</figcaption>
</figure>
<div style="font-weight: 900; font-size: 0.8rem; text-align: center;">
图 使用GREE DATACONVERTER接收数据时也存在错误-1
</div>
<p>在数据量较低且手动点击鼠标进行发送时，仍然会有数据处理错误：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210914170117568.png" alt="image-20210914170117568" /><figcaption aria-hidden="true">image-20210914170117568</figcaption>
</figure>
<div style="font-weight: 900; font-size: 0.8rem; text-align: center;">
图 使用GREE DATACONVERTER接收数据时也存在错误-2
</div>
<p>同样的代码（中途未复位重启芯片）对比使用CH340芯片进行发送和接收：</p>
<figure>
<img src="https://pic.islet.space/2021/09/image-20210914155521881.png" alt="image-20210914155521881" /><figcaption aria-hidden="true">image-20210914155521881</figcaption>
</figure>
<div style="font-weight: 900; font-size: 0.8rem; text-align: center;">
图 使用CH340进行发送和接收时数据无误
</div>
<p>SCI未触发中断</p>
<h1 id="系统debug">系统Debug</h1>
<h1 id="windowslinuxmac">Windows/Linux/Mac</h1>
<h2 id="分离式代码的联合编译">分离式代码的联合编译</h2>
<figure>
<img src="https://pic.islet.space/2021/10/20211009172229.png" alt="image-20211009172014699" /><figcaption aria-hidden="true">image-20211009172014699</figcaption>
</figure>
<p>上图为使用VS Code进行项目编译时报错的情况，在使用 MinGW 的g++ 作为编译器时，一开始使用 <code>main.cpp</code> 作为被编译的文件进行编译运行，成功可用。</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211011173023.png" alt="image-20211011150027217" /><figcaption aria-hidden="true">image-20211011150027217</figcaption>
</figure>
<p>后期新增了 <code>SerialPort.h</code> 和 <code>SerialPort.cpp</code> ，再次点击编译发现失败。说是查找不到 <code>SerialPort</code> 类下的函数定义相关的报错，并不是因为没有给 <code>SerialPort::SerialPort()</code> 等这些类里的函数进行定义，只是因为定义和声明并不在同一个 <code>.h</code> 文件里面。因为将类定义写在了 <code>.h</code> 文件中，而定义写在了另一个 <code>.cpp</code> 文件中，因此该编程方式称为 <strong>分离式代码</strong>。如果将其书写到同一个 <code>.hpp</code> 文件里，就称为 <strong>非分离式代码</strong>。</p>
<p>采用的 <strong>分离式</strong> 的代码书写方法，造成了 <code>g++</code> 编译器在只编译 <code>main.cpp</code> 的情况下会报错 <strong>函数未定义</strong> 。</p>
<h3 id="解决办法">解决办法</h3>
<p>对分离式的 C++ 代码，需要联合多个 <code>.cpp</code> 文件进行编译，在Linux系统上使用命令行进行编译即可提现 如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ main.cpp SerialPort.cpp -o main --std=c++17</span><br></pre></td></tr></table></figure>
<p>上面就把 <code>main.cpp</code> 和 <code>SerialPort.cpp</code> 两个代码文件联合在一起进行编译，只生成一个 <code>main</code> 二进制可运行文件。</p>
<p>类似，只要在Windows上能用同一句编译命令实现多个 <code>.cpp</code> 文件的编译即可，但自己没有找到如何在 VS Code中进行该操作方法。另辟蹊径找到了用Terminal进行搞定，方法如下：</p>
<ol type="1">
<li>将 <code>D:\mingw64\bin</code> 加入到 <strong>系统环境变量</strong> 的 <code>Path</code> 变量下：</li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/10/20211011173019.png" alt="image-20211011150836483" /><figcaption aria-hidden="true">image-20211011150836483</figcaption>
</figure>
<ol start="2" type="1">
<li>打开 Terminal 进行跳转到工作目录，或者在工作目录按 <code>shift</code> 同时点击右键菜单里的 <code>在Windows终端中打开</code> 即可。</li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/10/20211011173017.png" alt="image-20211011150800473" /><figcaption aria-hidden="true">image-20211011150800473</figcaption>
</figure>
<ol start="3" type="1">
<li>尝试进行编译，发现就不报这个 <code>undefined reference</code> 的错了。</li>
</ol>
<h3 id="总结">总结</h3>
<p>分离式代码就需要联合多个 <code>.cpp</code> 文件进行编译，不能只编译一个 <code>main.cpp</code>，Windows Terminal 也可以直接操作 <code>g++</code> （只要加了系统变量）进行多文件编译。</p>
<h2 id="cannot-convert">CANNOT CONVERT</h2>
<p>以下为 VS Code中的报错：</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211009172849.png" alt="image-20211009172830768" /><figcaption aria-hidden="true">image-20211009172830768</figcaption>
</figure>
<p>以下为 Terminal g++ 中的报错：</p>
<figure>
<img src="https://pic.islet.space/2021/10/20211011173012.png" alt="image-20211011151525322" /><figcaption aria-hidden="true">image-20211011151525322</figcaption>
</figure>
<p>cannot convert <code>const wchar_t*</code> to <code>LPCSTR</code> ，即是说，无法将<code>const wchar_t*</code> 类型转换为 <code>LPCSTR</code> 类型。</p>
<p>LPCSTR，即 <em>long pointer const string</em> , 是Win32和VC++所使用的一种字符串数据类型。定义如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> _Null_terminated_ CONST CHAR *LPCSTR, *PCSTR; </span><br></pre></td></tr></table></figure>
<p><code>LPCSTR</code> 代表了 <code>const char *</code> 类型，它是一个指向以 <code>\0</code> 结尾的 8 bit（单字节）<strong>ANSI字符数组</strong> 的常量指针。</p>
<p>而 <code>const wchar_t *</code> 类型是一个指向 <code>\0</code> 结尾的 16 bit（双字节）<strong>Unicode字符数组</strong> 的常量指针。</p>
<p>在VS2013编译器中直接输入的字符串常量（如 <code>“abc”</code> ）默认是以 <code>const char *</code> 的格式（即ANSI编码）储存的，因此会导致类型不匹配的编译错误。</p>
<h3 id="解决办法-1">解决办法</h3>
<p>以下办法查询自网络，未实践：</p>
<ol type="1">
<li>Visual Studio: 右击“解决方案资源管理器”中的项目，“属性→配置属性→常规→项目默认值→字符集”，默认的选项是“使用多字节字符集”，将它改为“使用Unicode字符集”即可。这样，输入的字符串会默认以 <code>const wchar_t *</code> 格式储存。</li>
<li>使用 <code>_T</code> 宏，它在 &lt;tchar.h&gt; 中定义，它能够自动识别当前编译器字符串的储存格式并做出相应转换，避免这种类型的编译错误。具体使用方法为：将 <code>“abc”</code> 改为 <code>_T("abc")</code> 。</li>
</ol>
<p>以下办法亲自实验可用：</p>
<ol type="1">
<li>删除该实参 <code>L"xxxxxx"</code> 前的 <code>L</code> 字符即可，在使用 MinGW 编译器的情况下，如果有该 <code>L</code> 字符，就会一直报错，就算将文本字符集改成 <code>UTF-16 LE/BE</code> ，虽然不会报该 <code>L</code> 字符的错了，但仍会出现其他问题，也是因为字符集搞的鬼。在Linux或Mac下就不会报该错误。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://islet.space/2021/07/17/Hardware/Circuit/2021-07-17-%E7%94%B5%E9%9A%94%E7%A6%BB%E5%92%8C%E9%9D%9E%E7%94%B5%E9%9A%94%E7%A6%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liewzheng">
      <meta itemprop="description" content="笔记分享的旮旯孤岛而已">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coder的孤岛">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/17/Hardware/Circuit/2021-07-17-%E7%94%B5%E9%9A%94%E7%A6%BB%E5%92%8C%E9%9D%9E%E7%94%B5%E9%9A%94%E7%A6%BB/" class="post-title-link" itemprop="url">电隔离和非电隔离</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-07-17 10:40:00 / Modified: 11:42:40" itemprop="dateCreated datePublished" datetime="2021-07-17T10:40:00+08:00">2021-07-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hardware/" itemprop="url" rel="index"><span itemprop="name">Hardware</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在产品设计时，倘若没有考虑应用环境对电源隔离的要求，产品到了应用时就会出现因设计方案的不当导致的系统不稳定，甚至出现高压损坏后级负载的情况，以及出现危害人身财产安全的情况。因此产品设计是否需要隔离至关重要。</p>
<h1 id="定义">定义</h1>
<p><strong>隔离电源</strong>：电源的输入回路和输出回路之间没有直接的电气连接，输入和输出之间是绝缘的高阻态，没有电流回路。</p>
<p><img src="https://pic.islet.space/2021/07/60935d50373e5-thumb.png" alt="img" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图1 采用变压器的隔离电源
</div>
<p><strong>非隔离电源</strong>：输入和输出之间有直接的电流回路，例如，输入和输出之间是共地的。以隔离的反激电路和非隔离的BUCK电路为例。</p>
<p><img src="https://pic.islet.space/2021/07/60935d4fef66f-thumb.png" alt="img" style="zoom:67%;" /></p>
<div style="text-align: center; font-weight: 900;">
图2 非隔离电源
</div>
<p><img src="https://pic.islet.space/2021/07/60935d5048313-thumb.png" alt="img" style="zoom:50%;" /></p>
<h1 id="优缺点对比">优缺点对比</h1>
<p>由上述概念可知，对于常用的电源拓扑而言，非隔离电源主要有：<strong><em>Buck</em></strong>、<strong><em>Boost</em></strong>、<strong><em>Buck-Boost</em></strong>等。而隔离电源主要有各种带隔离变压器的 <strong><em>反激</em></strong>、<strong><em>正激</em></strong>、<strong><em>半桥</em></strong>、<strong><em>LLC</em></strong> 等拓扑。</p>
<p>结合常用的隔离与非隔离电源，我们从直观上就可得出它们的一些优缺点，两者的优缺点几乎是相反的。使用隔离或非隔离的电源，需了解实际项目对电源的需求是怎样的。</p>
<p>隔离和非隔离电源的主要差别在于 隔离模块的可靠性高，但成本高，效率差点。非隔离模块的结构很简单，成本低，效率高，安全性能差。因此，在如下几个场合，建议用隔离电源：</p>
<ol type="1">
<li></li>
</ol>
<p>总结的表如表1所示，两者的优缺点几乎是相反的。</p>
<div style="text-align: center; font-weight: 900;">
表1 隔离电源和非隔离电源的优缺点
</div>
<p><img src="https://pic.islet.space/2021/07/60935d504e874-thumb.png" alt="img" style="zoom:80%;" /></p>
<h1 id="适用场景">适用场景</h1>
<p>一般场合使用对模块电源隔离电压要求不是很高，但是 <mark> 更高的隔离电压可以保证模块电源具有更小的漏电流，更高的安全性和可靠性，并且 <strong><em>EMC特性</em></strong> 也更好一些</mark>，因此目前业界普遍的隔离电压水平为1500VDC以上。</p>
<p>了解了隔离与非隔离电源的优缺点，对于一些常用的嵌入式供电，其对应的场景及推荐隔离方案如下：</p>
<ol type="1">
<li>系统前级的电源，为提高抗干扰性能，保证可靠性，一般用隔离电源。</li>
<li>对安全有要求的场合，如需接市电的AC-DC，或医疗用的电源和白色家电，为保证人身的安全，必须用隔离电源，有些场合还必须用加强隔离的电源。</li>
<li>对于远程工业通信的供电，为有效降低地电势差和导线耦合干扰的影响，为每个通信节点单独供电一般都用隔离电源。</li>
<li>内部IC或部分电路供电，从性价比和体积出发，优先选用非隔离电源。</li>
<li>对于采用电池供电，<mark>对续航力要求严苛的场合，采用非隔离供电</mark>。</li>
</ol>
<h3 id="隔离电源">隔离电源</h3>
<ol type="1">
<li><p>涉及可能触电的场合，如从电网取电，转成低压直流的场合，需用隔离的AC-DC电源；</p></li>
<li><p>串行通信总线通过RS-232、RS-485和控制器局域网(CAN)等物理网络传送数据，这些相互连接的系统每个都配备有自己的电源，而且各系统之间往往间隔较远，因此，我们通常需要隔离电源进行电气隔离来确保系统的物理安全，且通过隔离 <mark style="font-style: Italic; font-weight: 900;">切断接地回路</mark>，来保护系统免受瞬态高电压冲击，同时减少信号失真；</p></li>
<li><p>对外的I/O端口，为保证系统的可靠运行，也建议对I/O端口做电源隔离。</p></li>
</ol>
<h3 id="非隔离电源">非隔离电源</h3>
<p>电路板内的IC或部分电路供电，从性价比和体积出发，优先选用非隔离的方案；如MPS的MP150/157/MP174系列buck型非隔离AC-DC，适合于1~5W应用；</p>
<p>对于工作电压低于36V，采用电池供电，对续航力要求严苛的场合，优先采用非隔离供电，如MPS的MP2451/MPQ2451。</p>
<h1 id="隔离电源模块选型的注意事项">隔离电源模块选型的注意事项</h1>
<p>电源的隔离耐压在GB-4943国标中又叫抗电强度，这个GB-4943标准就是我们常说的信息类设备的安全标准，就是为了防止人员受到物理和电气伤害的国家标准，其中包括避免人受到电击伤害、物理伤害、爆炸等伤害。如下图为隔离电源结构图。</p>
<p><img src="https://pic.islet.space/2021/07/60935d4fe8f0d-thumb.png" alt="img" style="zoom:120%;" /></p>
<div style="text-align: center; font-weight: 900;">
图 隔离电源结构
</div>
<p>作为模块电源的重要指标，标准中也规定了隔离耐压相关测试方法，简单的测试时一般采用等电位连接测试，连接示意图如下：</p>
<figure>
<img src="https://pic.islet.space/2021/07/60935d4fc9c96-thumb.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<div style="text-align: center; font-weight: 900;">
图 隔离耐压测试示意
</div>
<h2 id="测试方法">测试方法</h2>
<ol type="1">
<li><p>将耐压计的电压设为规定的耐压值，电流设为规定的漏电流值，时间设为规定的测试时间值；</p></li>
<li><p>操作耐压计开始测试，开始加压，在规定的测试时间内，模块应无击穿，无飞弧现象。</p></li>
<li><p>注意在测试时焊接电源模块要选取合适的温度，避免反复焊接，损坏电源模块。</p></li>
<li><p>除此之外还要注意：</p>
<ol type="1">
<li>要注意是AC-DC还是DC-DC。</li>
<li>隔离电源模块的隔离耐压。例如隔离1000V DC 是否满足绝缘要求。</li>
<li>隔离电源模块是否有进行全面的可靠性测试。电源模块要经过性能测试、容差测试、瞬态条件测试、可靠性测试、EMC电磁兼容测试、高低温测试、极限测试、寿命测试、安规测试等。</li>
<li>隔离电源模块的生产工厂产线是否规范。电源模块生产线需要通过ISO9001, ISO14001，OHSAS18001等多项国际认证，如下图3所示。</li>
<li>隔离电源模块是否有应用在工业、汽车等恶劣环境。电源模块不仅仅大量应用与恶劣的工业环境，同时在新能源汽车的BMS管理系统中也游刃有余。</li>
</ol></li>
</ol>
<figure>
<img src="https://pic.islet.space/2021/07/60935d503580c-thumb.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<div style="text-align: center; font-weight: 900;">
图 ISO认证
</div>
<h1 id="总结">总结</h1>
<p>很多人认为非隔离电源不如隔离电源好，因为隔离电源贵，所以肯定贵的就好。前几年非隔离的稳定性确实没有隔离稳定，但随着研发技术的更新，现如今非隔离已经非常成熟，日渐稳定。说到安全性，其实现在非隔离电源也是很安全的，只要在结构稍微做下改动，对人体还是很安全的，同样的道理，非隔离电源也是可以过很多安规标准，例如:ULTUVSAACE等。</p>
<p>实际上非隔离电源损坏的根源就是电源AC线两端的浪涌电压所致，也可以这么说，雷击浪涌吧，这种电压是加在电压AC线两端的瞬间高压，有时高达三千伏，但时间很短，能量却极强，在打雷时会发生，或是在同一条AC线上，当一个大的负载断开瞬间，因为电流惯性的原因也会发生，这个电压进入电源，对于非隔离BUCK电路，会瞬间传达到输出，击坏恒流检测环，或是进一步击坏芯片，造成300v直通，而烧掉整条灯管。对于隔离反激电源，会击坏MOS,现象就是保管，芯片，MOS管全烧坏。现在LED驱动电源，在使用过程中坏的，80%以上都是这两种类似现象。而且，小型开关电源，就算是电源适配器，也经常损坏的是这个现象，均是浪涌电压所致，而在LED电源里，表现的更加普遍，这是因为LED的负载特性是特别的怕浪涌电压的。</p>
<p>如果按照一般的理论来讲，电子电路里，元器件越少，可靠性越高，相应越多的元件的电路板可靠性则越低。实际上非隔离电路的元件是比隔离电路要少的，为什么隔离电路可靠性高。其实说白了，不是什么可靠性，而是 <mark>非隔离电路对于浪涌太敏感，抑制能力差</mark>，隔离电路，因为能量是先进入变压器，然后从变压器再输送到LED负载的。BUCK电路是输入电源一部分直接加在了LED负载上，故前者对浪涌抑制和衰减能力强，所以浪涌来时损坏的机率小而已。实际上，非隔离电源的问题主要是在于浪涌问题，目前这个问题，因为只有LED灯具在大批量应用时，从概率上才能看出其解决的程度，所以很多人没有提出好的防治办法，更多的人则是不知道浪涌电压为何物。LED灯具坏了，很多人也找不到原因，最后只能一句，什么此电源不稳定就了结了，具体哪里不稳定，他不知道。</p>
<p>非隔离电源的优势一是效率，二是成本。</p>
<p>非隔离电源适合的场合：首先，是室内的灯具，这种室内用电环境较好，浪涌影响小。第二，使用的场合是高压小电流，低压大电流用非隔离没有意义，因为低压大电流非隔离的效率并不比隔离的高，成本也低不到多少去。第三，电压相对较稳定的环境中使用非隔离电源。当然，如果有办法解决掉抑制浪涌的问题，那么非隔离电源的应用范围将大大拓宽！</p>
<p>隔离电源因为浪涌的问题，损坏率也不可小觑，一般那种返修回来，击坏保险，芯片，MOS的第一个应该想到是浪涌问题。为了减少损坏率，在设计时就行要考虑到浪涌的因素进去，或是在使用时要告戒用户，尽量避免浪涌发生。（如室内灯具，打雷时暂时先关掉）</p>
<p>综合所述，使用隔离与非隔离很多时候都是因为浪涌这个问题，而浪涌问题和用电环境是息息相关的，所以很多时候使用隔离电源和非隔离电源不能一刀切，非隔离电源在节能，成本上都是很有优势的，所以要科学的选用非隔离还是隔离作为LED驱动电源。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19004822号 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liewzheng</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.12.0/dist/mermaid.min.js","integrity":"sha256-0dD7vUjUCTGJjeLnPotQQJIcSzug5fO6WDMYYyNIX4c="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"enable","tags":"all","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
